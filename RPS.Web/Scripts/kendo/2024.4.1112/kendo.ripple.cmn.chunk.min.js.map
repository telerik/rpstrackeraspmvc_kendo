{"version":3,"file":"kendo.ripple.cmn.chunk.min.js","names":["global","factory","exports","module","define","amd","globalThis","self","kendo","_globals","RippleCmnChunk","this","once","element","eventName","fn","listener","removeEventListener","remove","addEventListener","activate","containerSelector","options","e","container","target","doc","document","ownerDocument","selector","closest","matches","Element","prototype","el","sel","msMatchesSelector","node","parentElement","test","type","classList","contains","add","_a","ripple","createElement","className","blob","appendChild","createRipple","state_1","animated","released","eventType","focusin","keydown","mousedown","pointerdown","touchdown","animationstart","currentTarget","release","window","getComputedStyle","getPropertyValue","rect","getBoundingClientRect","left","top_1","clientX","clientY","top","width","height","dx","dy","size","Math","sqrt","style","offsetWidth","Error","cssText","setTimeout","finishAnimation","state","deactivate","parentNode","removeChild","transition","opacity","__meta__","id","name","category","description","depends","hidden","chunk","r","root","elements","arr","handlers","map","item","defaultOptions","events","activator","body","forEach","evt","concat","apply"],"sources":["kendo.ripple.cmn.chunk.js"],"mappings":"CAAA,SAAWA,EAAQC,GACI,iBAAZC,SAA0C,oBAAXC,OAAyBF,EAAQC,SACrD,mBAAXE,QAAyBA,OAAOC,IAAMD,OAAO,CAAC,WAAYH,GACUA,IAA1ED,EAA+B,oBAAfM,WAA6BA,WAAaN,GAAUO,MAAsBC,MAAQR,EAAOQ,OAAS,CAAC,EAAGR,EAAOQ,MAAMC,SAAWT,EAAOQ,MAAMC,UAAY,CAAC,EAAGT,EAAOQ,MAAMC,SAASC,eAAiB,CAAC,GACvN,CAJD,CAIGC,MAAM,SAAWT,GAWhB,IAuBIU,EAAO,SAAUC,EAASC,EAAWC,GACrC,IAAIC,EAAW,WACXD,IACAF,EAAQI,oBAAoBH,EAAWE,GAAU,EACrD,EACIE,EAAS,WAAc,OAAOL,EAAQM,iBAAiBL,EAAWE,GAAU,EAAQ,EAExF,OADAE,IACO,CAAEA,OAAQA,EACrB,EACIE,EAAW,SAAUC,EAAmBC,GAAW,OAAO,SAAUC,GACpE,IAEIC,EAFAC,EAASF,EAAEE,OACXC,EAAMD,EAAOE,UAAYF,EAAOG,cAQpC,IALIJ,EADAF,EAAQE,UACIF,EAAQE,UAAUC,GArCxB,SAAUZ,EAASgB,GAC7B,GAAIhB,EAAQiB,QACR,OAAOjB,EAAQiB,QAAQD,GAM3B,IAJA,IAAIE,EAAUC,QAAQC,UAAUF,QAC5B,SAAUG,EAAIC,GAAO,OAAOD,EAAGH,QAAQI,EAAM,EAC3C,SAAUD,EAAIC,GAAO,OAAOD,EAAGE,kBAAkBD,EAAM,EACzDE,EAAOxB,EACJwB,GAAM,CACT,GAAIN,EAAQM,EAAMR,GACd,OAAOQ,EAEXA,EAAOA,EAAKC,aAChB,CACJ,CA0BoBR,CAAQL,EAAQJ,OAMd,SAASkB,KAAKhB,EAAEiB,OAAShB,EAAUiB,UAAUC,SAAS,oBAIxE,GAAKjB,EAAOgB,UAAUC,SAAS,eAAkBjB,EAAOgB,UAAUC,SAAS,WAoDvEnB,EAAEE,OAAOgB,UAAUvB,OAAO,kBACX,iBAAXK,EAAEiB,MACFjB,EAAEE,OAAOgB,UAAUE,IAAI,sBAtDwD,CAEnFnB,EAAUiB,UAAUE,IAAI,mBACxB,IAAIC,EAtCO,SAAUlB,GACzB,IAAImB,EAASnB,EAAIoB,cAAc,OAC/BD,EAAOE,UAAY,WACnB,IAAIC,EAAOtB,EAAIoB,cAAc,OAG7B,OAFAE,EAAKD,UAAY,gBACjBF,EAAOI,YAAYD,GACZ,CAACH,EAAQG,EACpB,CA+BiBE,CAAaxB,GAAMmB,EAASD,EAAG,GAAII,EAAOJ,EAAG,GAClDO,EAAU,CACVC,UAAU,EACVC,UAAU,EACVL,KAAMA,EACNxB,UAAWA,EACXqB,OAAQA,GAERS,EAAY,CACZC,QAAW,WACXC,QAAW,QACXC,UAAa,UACbC,YAAe,YACfC,UAAa,UACbC,eAAkB,gBACpBrC,EAAEiB,MACJ5B,EAAKW,EAAEsC,cAAeP,GAAW,WAAc,OAAOQ,EAAQX,EAAU,IACxE3B,EAAUyB,YAAYJ,GAEtBkB,OAAOC,iBAAiBnB,GAAQoB,iBAAiB,WACjD,IAAIC,EAAO1C,EAAU2C,wBACjBC,EAAO,EACPC,EAAQ,EACR,sBAAwB9B,KAAKhB,EAAEiB,OAC/B4B,EAAO7C,EAAE+C,QAAUJ,EAAKE,KACxBC,EAAQ9C,EAAEgD,QAAUL,EAAKM,MAGzBJ,EAAOF,EAAKO,MAAQ,EACpBJ,EAAQH,EAAKQ,OAAS,GAG1B,IAGIC,EAAKP,GAHEA,EAAOF,EAAKO,MAAQ,EAAIP,EAAKO,MAAQ,GAI5CG,EAAKP,GAHEA,EAAQH,EAAKQ,OAAS,EAAIR,EAAKQ,OAAS,GAK/CG,EAAO,EAAIC,KAAKC,KAAKJ,EAAKA,EAAKC,EAAKA,GAIxC,GAFA5B,EAAKgC,MAAMP,MAAQzB,EAAKgC,MAAMN,OAASG,EAAO,KAE1C7B,EAAKiC,YAAc,EACnB,MAAM,IAAIC,MAAM,kBAEpBlC,EAAKgC,MAAMG,QAAU,oBAAsBN,EAAO,wBAA0BA,EAAO,0EAA4ET,EAAO,qBAAuBC,EAAQ,YACrMe,YAAW,WAAc,OAAOC,EAAgBlC,EAAU,GAP3C,IAQnB,CAOJ,CAAG,EACCkC,EAAkB,SAAUC,GAC5BA,EAAMlC,UAAW,EACjBmC,EAAWD,EACf,EACIxB,EAAU,SAAUwB,GACpBA,EAAMjC,UAAW,EACjBkC,EAAWD,EACf,EACIC,EAAa,SAAUD,GAIvB,GAAKA,EAAMjC,UAAaiC,EAAMlC,SAA9B,CAGA,IAAIJ,EAAOsC,EAAMtC,KAAMH,EAASyC,EAAMzC,OAAQrB,EAAY8D,EAAM9D,UAC5DA,GACAZ,EAAKY,EAAW,QAAQ,WAAc,OAAOA,EAAUiB,UAAUvB,OAAO,kBAAoB,IAE5F8B,IACApC,EAAKoC,EAAM,iBAAiB,WACpBH,GAAUA,EAAO2C,YACjB3C,EAAO2C,WAAWC,YAAY5C,EAEtC,IACAG,EAAKgC,MAAMU,WAAa,uBACxB1C,EAAKgC,MAAMW,QAAU,IAZzB,CAcJ,EAgCAzF,EAAQ0F,SAlLS,CACbC,GAAI,mBACJC,KAAM,iBACNC,SAAU,MACVC,YAAa,oCACbC,QAAS,GACTC,QAAQ,EACRC,OAAO,GA4KXjG,EAAQkG,EA7BO,SAAUC,EAAMC,GAC3B,IAAwBC,EACpBC,GADoBD,EACDD,EAASG,KAAI,SAAUC,GAC1C,IAAIC,EAAiB,CACjBC,OAAQ,CAAC,YAAa,aACtB5G,QAAQ,GAER6B,EAAW6E,EAAK7E,SAAUe,EAAK8D,EAAKpF,QAASA,OAAiB,IAAPsB,EAAgB+D,EAAiB/D,EACxFiE,EAAYzF,EAASS,EAAUP,GAC/BsF,EAAStF,EAAQsF,QAAUD,EAAeC,OAC1CpF,EAAYF,EAAQtB,OAAS2B,SAASmF,KAAOT,EAEjD,OADAO,EAAOG,SAAQ,SAAUC,GAAO,OAAOxF,EAAUL,iBAAiB6F,EAAKH,GAAW,EAAQ,IACnF,CAAED,OAAQA,EAAQtF,QAASA,EAASuF,UAAWA,EAC1D,IAZsC,GAAGI,OAAOC,MAAM,GAAIX,IAa1D,OAAO,WACH,GAAKF,EAAL,CAQAG,EAASO,SALY,SAAUnE,GAC3B,IAAIgE,EAAShE,EAAGgE,OAAQtF,EAAUsB,EAAGtB,QAASuF,EAAYjE,EAAGiE,UACzDrF,EAAYF,EAAQtB,OAAS2B,SAASmF,KAAOT,EACjDO,EAAOG,SAAQ,SAAUC,GAAO,OAAOxF,EAAUP,oBAAoB+F,EAAKH,GAAW,EAAQ,GACjG,IAEAR,EAAO,IAPP,CAQJ,CACJ,CAKH","ignoreList":[],"sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory((global.kendo = global.kendo || {}, global.kendo._globals = global.kendo._globals || {}, global.kendo._globals.RippleCmnChunk = {})));\n})(this, (function (exports) {\n    const __meta__ = {\n        id: \"ripple.cmn.chunk\",\n        name: \"RippleCmnChunk\",\n        category: \"web\",\n        description: \"A reusable outputed chunk of code\",\n        depends: [],\n        hidden: true,\n        chunk: true\n    };\n\n    var closest = function (element, selector) {\n        if (element.closest) {\n            return element.closest(selector);\n        }\n        var matches = Element.prototype.matches ?\n            function (el, sel) { return el.matches(sel); }\n            : function (el, sel) { return el.msMatchesSelector(sel); };\n        var node = element;\n        while (node) {\n            if (matches(node, selector)) {\n                return node;\n            }\n            node = node.parentElement;\n        }\n    };\n    var createRipple = function (doc) {\n        var ripple = doc.createElement('div');\n        ripple.className = 'k-ripple';\n        var blob = doc.createElement('div');\n        blob.className = 'k-ripple-blob';\n        ripple.appendChild(blob);\n        return [ripple, blob];\n    };\n    var once = function (element, eventName, fn) {\n        var listener = function () {\n            fn();\n            element.removeEventListener(eventName, listener, false);\n        };\n        var remove = function () { return element.addEventListener(eventName, listener, false); };\n        remove();\n        return { remove: remove };\n    };\n    var activate = function (containerSelector, options) { return function (e) {\n        var target = e.target;\n        var doc = target.document || target.ownerDocument;\n        var container;\n        if (options.container) {\n            container = options.container(target);\n        }\n        else {\n            container = closest(target, containerSelector);\n        }\n        if (!container) {\n            return;\n        }\n        // focus event of ripple container triggers double-focus\n        var doubleFocus = /focus/i.test(e.type) && container.classList.contains(\"k-ripple-target\");\n        if (doubleFocus) {\n            return;\n        }\n        if (!target.classList.contains('k-checkbox') && !target.classList.contains('k-radio')) {\n            // suppress focus when animating ripples\n            container.classList.add(\"k-ripple-target\");\n            var _a = createRipple(doc), ripple = _a[0], blob = _a[1];\n            var state_1 = {\n                animated: false,\n                released: false,\n                blob: blob,\n                container: container,\n                ripple: ripple\n            };\n            var eventType = {\n                'focusin': 'focusout',\n                'keydown': 'keyup',\n                'mousedown': 'mouseup',\n                'pointerdown': 'pointerup',\n                'touchdown': 'touchup',\n                'animationstart': 'animationend'\n            }[e.type];\n            once(e.currentTarget, eventType, function () { return release(state_1); });\n            container.appendChild(ripple);\n            // recalc to allow the effect to animate\n            window.getComputedStyle(ripple).getPropertyValue('opacity');\n            var rect = container.getBoundingClientRect();\n            var left = 0;\n            var top_1 = 0;\n            if ((/mouse|pointer|touch/).test(e.type)) {\n                left = e.clientX - rect.left;\n                top_1 = e.clientY - rect.top;\n            }\n            else {\n                left = rect.width / 2;\n                top_1 = rect.height / 2;\n            }\n            // coordinates of the farthest corner\n            var xMax = left < rect.width / 2 ? rect.width : 0;\n            var yMax = top_1 < rect.height / 2 ? rect.height : 0;\n            // distance to the farthest corner\n            var dx = left - xMax;\n            var dy = top_1 - yMax;\n            // blob size is twice the blob radius\n            var size = 2 * Math.sqrt(dx * dx + dy * dy);\n            var duration = 500;\n            blob.style.width = blob.style.height = size + \"px\";\n            // force reflow for Safari 11 to align ripple blob\n            if (blob.offsetWidth < 0) {\n                throw new Error(\"Inconceivable!\");\n            }\n            blob.style.cssText = \"\\n        width: \" + size + \"px;\\n        height: \" + size + \"px;\\n        transform: translate(-50%, -50%) scale(1);\\n        left: \" + left + \"px;\\n        top: \" + top_1 + \"px;\\n    \";\n            setTimeout(function () { return finishAnimation(state_1); }, duration);\n        }\n        else {\n            e.target.classList.remove('k-ripple-focus');\n            if (e.type !== 'animationend') {\n                e.target.classList.add('k-ripple-focus');\n            }\n        }\n    }; };\n    var finishAnimation = function (state) {\n        state.animated = true;\n        deactivate(state);\n    };\n    var release = function (state) {\n        state.released = true;\n        deactivate(state);\n    };\n    var deactivate = function (state) {\n        // deactivation happens when both\n        // - the activation event has been released (release)\n        // - the ripple has finished animating (finishAnimation)\n        if (!state.released || !state.animated) {\n            return;\n        }\n        var blob = state.blob, ripple = state.ripple, container = state.container;\n        if (container) {\n            once(container, 'blur', function () { return container.classList.remove(\"k-ripple-target\"); });\n        }\n        if (blob) {\n            once(blob, 'transitionend', function () {\n                if (ripple && ripple.parentNode) {\n                    ripple.parentNode.removeChild(ripple);\n                }\n            });\n            blob.style.transition = 'opacity 200ms linear';\n            blob.style.opacity = '0';\n        }\n    };\n    /**\n     * @hidden\n     */\n    var register = function (root, elements) {\n        var flatten = function (arr) { return [].concat.apply([], arr); };\n        var handlers = flatten(elements.map(function (item) {\n            var defaultOptions = {\n                events: ['mousedown', 'touchdown'],\n                global: false\n            };\n            var selector = item.selector, _a = item.options, options = _a === void 0 ? defaultOptions : _a;\n            var activator = activate(selector, options);\n            var events = options.events || defaultOptions.events;\n            var container = options.global ? document.body : root;\n            events.forEach(function (evt) { return container.addEventListener(evt, activator, false); });\n            return { events: events, options: options, activator: activator };\n        }));\n        return function () {\n            if (!root) {\n                return;\n            }\n            var removeListener = function (_a) {\n                var events = _a.events, options = _a.options, activator = _a.activator;\n                var container = options.global ? document.body : root;\n                events.forEach(function (evt) { return container.removeEventListener(evt, activator, false); });\n            };\n            handlers.forEach(removeListener);\n            root = null;\n        };\n    };\n\n    exports.__meta__ = __meta__;\n    exports.r = register;\n\n}));\n"]}