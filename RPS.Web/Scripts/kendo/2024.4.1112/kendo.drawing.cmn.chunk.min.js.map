{"version":3,"file":"kendo.drawing.cmn.chunk.min.js","names":["global","factory","exports","module","require","define","amd","globalThis","self","kendo","_globals","DrawingCmnChunk","CommonCmnChunk","PakoEsmCmnChunk","this","kendo_common_cmn_chunk_js","kendo_pakoEsm_cmn_chunk_js","Class","Observable","call","_events","__proto__","prototype","Object","create","constructor","bind","eventName","handlers","one","arguments$1","arguments","this$1$1","eventNames","getArray","handlersIsFunction","isFunction","length","undefined","field","loop","idx","eventName$1","handler","original","unbind","apply","push","first","unshift","trigger","e","events","sender","_defaultPrevented","preventDefault","isDefaultPrevented","slice","splice","value","animationFrameProxy","callback","wnd","window","animationFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","setTimeout","ampRegExp","ltRegExp","quoteRegExp","aposRegExp","gtRegExp","htmlEncode","String","replace","logToConsole","message","console","log","saveAs$1","options","dataURI","fileName","data","Blob","parts","split","contentType","base64","atob","array","Uint8Array","charCodeAt","buffer","type","navigator","msSaveBlob","link","document","createElement","download","href","URL","createObjectURL","createEvent","initMouseEvent","dispatchEvent","revokeObjectURL","browser$3","support$1","browser","userAgent","browserRxs","edge","webkit","safari","opera","msie","mozilla","agent","hasOwnProperty","match","toLowerCase","version","parseInt","documentMode","matchUserAgent","now","Date","getTime","throttle","fn","delay","timeout","lastExecTime","throttled","elapsed","args","exec","clearTimeout","cancel","namedColors","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","browser$2","matchNamedColor","color","colorNames","keys","regexp","RegExp","join","BaseColor","toHSV","toRGB","toHex","toBytes","toCss","toCssRgba","rgb","parseFloat","Number","a","toFixed","toDisplay","equals","c","parseColor$2","diff","other","NaN","c1","c2","Math","sqrt","pow","r","g","b","clone","Bytes","RGB","h","s","ref","min","max","delta","v","HSV","toHSL","l","d","HSL","round","hex","alpha","n","width","pad","result","toString","i","floor","f","p","q","t","hue2rgb","alphaFromHex","safe","m","ret","Error","Color","formats","resolvedColor","resolveColor","formatRegex","re","processor","process","channels","normalizeByte","padDigit","charAt","substr","isNaN","brightness","percBrightness","isDark","fromBytes","fromRGB","fromHSV","fromHSL","HasObservers","observers","_observers","addObserver","element","removeObserver","index","indexOf","methodName","event","_suspended","observer","optionsChange","geometryChange","suspend","resume","_observerField","append","second","literals","arabicToRoman","values","roman","shift","createPromise","resolveFn","rejectFn","promise","Promise","resolve","reject","_state","state","defined","defId","definitionId","DEG_TO_RAD","PI","MAX_NUM","MAX_VALUE","MIN_NUM","deg","radians","fromCharCode","encodeUnit","codeUnit","KEY_STR","encodeBase64","input","output","utfInput","code","hi","low","encodeUTF8","chr1","chr2","chr3","enc1","enc2","enc3","enc4","eventCoordinates","x","location","y","pageX","clientX","pageY","clientY","eventElement","touch","initialTouch","target","isTransparent","last","limitValue","mergeSort","cmp","sort","left","right","ai","bi","merge","promiseAll","promises","all","rad","degrees","precision","power","valueOrDefault","defaultValue","bindEvents","trim","addEventListener","elementOffset","box","getBoundingClientRect","documentElement","top","pageYOffset","scrollTop","clientTop","pageXOffset","scrollLeft","clientLeft","elementStyles","styles","style","getComputedStyle","stylesArray","Array","isArray","getPixels","elementSize","size","size$1","height","unbindEvents","name","removeEventListener","elementPadding","paddingLeft","paddingTop","Matrix","multiplyCopy","matrix","invert","det","toArray","separator","translate","unit","rotate","angle","cos","sin","scale","scaleX","scaleY","IDENTITY","matrixRegexp","transformMatrix","transform","matrixString","members","map","Function","concat","parseMatrix","elementScale","parent","parentElement","parentMatrix","LRUCache","_size","_length","_map","put","key","entry","_head","_tail","newer","older","get","REPLACE_REGEX","normalizeText","text","objectKey","object","hashKey","str","hash","defaultMeasureBox","DEFAULT_OPTIONS$1","baselineMarkerSize","setProperty","TextMetrics","_cache","assign","measure","baseline","cacheKey","cachedResult","measureBox","baselineMarker","_baselineMarker","cloneNode","textStr","textContent","appendChild","body","offsetWidth","offsetHeight","offsetTop","parentNode","removeChild","marker","display","verticalAlign","overflow","measureText","current","util","freeze","OptionsStore","prefix","member","_wrap","set","_set","composite","parentObj","fieldName","obj","_clear","wrapped","setAccessor","getAccessor","withAccessors","TBase","names","fields","capitalized","toUpperCase","substring","defineAccessors","toMatrix","transformation","Point","superclass","staticAccessors","ZERO","configurable","origin","originPoint","translateWith","point","move","scaleCopy","transformCopy","distanceTo","dx","dy","digits","doRound","arg0","arg1","minX","minY","maxX","maxY","minPoint","maxPoint","defineProperties","Size","Rect$1","Rect","cornerRadius","setOrigin","setSize","setCornerRadius","getOrigin","radius","getCornerRadius","getSize","topLeft","bottomRight","topRight","bottomLeft","center","bbox","tl","tr","br","bl","fromPoints","expand","expandCopy","containsPoint","_isOnPath","rectOuter","rectInner","union","intersect","rect1","bottom","rect2","Transformation","_matrix","_optionsChange","multiply","DASH_ARRAYS","dot","dash","longdash","dashdot","longdashdot","longdashdotdot","SOLID","BUTT","PATTERN","Element$1","Element","_initOptions","prototypeAccessors","nodeType","clip","transform$1","id","parentTransform","currentTransform","combinedMatrix","elementMatrix","visible","opacity","className","clippedBBox","_clippedBBox","transformedPoint","_hasFill","_containsPoint","_hasStroke","fill","stroke","ellipseExtremeAngles","rx","ry","extremeX","extremeY","atan2","PI_DIV_2","Circle$1","Circle","setCenter","setRadius","getCenter","pointAt","_pointAt","extremeAngles","currentPointX","currentPointY","currentPoint","pointDistance","paintable","anonymous","newFill","IDENTITY_MATRIX_HASH","measurable","matrixHash","_bboxCache","_matrixHash","_bbox","strokeWidth","geometryAccessor","withGeometry","defineGeometryAccessors","geometry","rawBBox","_geometry","PRECISION","close","tolerance","abs","closeOrLess","Arc$1","Arc","radiusX","radiusY","startAngle","endAngle","anticlockwise","xRotation","radian","curvePoints","dir","interval","_arcInterval","intervalAngle","subIntervalsCount","ceil","subIntervalAngle","currentAngle","nextAngle","points","_intervalCurvePoints","cp1","cp2","p2","endPoint","currentAngleX","bboxStartAngle","currentAngleY","oldStart","p1","p1Derivative","_derivativeAt","p2Derivative","distance","angleRad","pointRadius","startPoint","intersection","p0","p3","s1x","s2x","s1y","s2y","nx","ny","lineIntersection","calculateAngle","inAngleRange","start","end","largeArc","swipe","rotation","arcParameters","parameters","x1","y1","x2","y2","cosine","sine","xT","yT","sign","xt2","yt2","rx2","ry2","constT","cxT","cyT","cx","cy","uX","uY","vX","vY","acos","angleCosine","signEndAngle","normalizeArcParameters","pop","slice$1","ElementsArray","_splice","elements","_change","_add","_remove","howMany","_clearObserver","_setObserver","GeometryElementsArray","isOutOfEndPoint","controlPoint","calculateCurveAt","t1","toCubicPolynomial","ComplexNumber","real","img","add","cNumber","addConstant","negate","multiplyConstant","nthRoot","nthR","isReal","numberSign$1","solveCubicEquation","squareRoot","solveQuadraticEquation","y3","z1","z2","Q","b3a","hasRootsInRange","rootField","range","polynomial","roots","lineIntersectionsCount","intersects","inRange","pointAccessor","withPoints","definePointAccessors","Segment","anchor","controlIn","controlOut","bboxTo","toSegment","segmentAnchor","toSegmentAnchor","_curveBoundingBox","_lineBoundingBox","extremesX","_curveExtremesFor","extremesY","xLimits","arrayLimits","yLimits","extremes","_curveExtremes","x3","x4","t2","_intersectionsTo","segment","intersectionsCount","rayIntersection","count","curveIntersectionsCount","_isOnCurveTo","endSegment","p4","rotatedPoints","_isOnLineTo","_isOnPathTo","arr","X","Y","pointsToCurve","pointsIn","closed","segments","removeDuplicates","initialControlPoint","lastControlPoint","tangent","getTangent","firstControlPoint","secondControlPoint","controlPoints","getControlPoints","cp0","controlPoints$1","controlPoints$2","tangent$2","lineFunction","xField","yField","restrict","switchOrientation","calculateFunction","isLine","monotonic","isMonotonicByField","invertAxis","numberSign","secondCP","oldXField","firstCP","restrictControlPoint","cp","xValue","yValue","ShapeMap","path","position","isRelative","lineTo","curveTo","toLineParamaters","arcTo","lastControlIn","previousCommand","paths","reflectionPoint","cubicControlPoints","quadraticToCubicControlPoints","isVertical","insertPosition","third","scaledPoint","SEGMENT_REGEX","SPLIT_REGEX","parsePath","pathInstance","params","closePath","command","number","parseParameters","moveTo","elementsBoundingBox","applyTransform","boundingBox","elementBoundingBox","elementsClippedBoundingBox","SPACE","Path","lineJoin","lastSegment","arc","_addArcSegments","segmentStart","segmentEnd","currentType","print","len","previous","pathWidth","segmentBox","parse","MultiPath","fromRect","rect","curveFromPoints","fromArc","prototypeAccessors$1","toPath","Text","content","font","pos","Image$1","Image","src","_rect","traversable","childrenField","traverse","children","child","Group","childrenChange","action","items","_reparent","insert","insertAt","remove","removeAt","clear","newParent","translateToPoint","transofrm","alignStart","align","axis","sizeField","alignStartReverse","DEFAULT_OPTIONS","alignContent","justifyContent","alignItems","spacing","orientation","lineSpacing","wrap","revers","forEach","forEachReverse","Layout","_fieldMap","_initMap","fieldMap","groupsSizeField","groupAxis","groupsAxis","reverse","justifyAlign","reflow","elementStart","group","groupBox","_initGroups","groups","groupsSize","ref$1","groupOrigin","elementOrigin","groupStart","arrangeElements","groupIdx","lineSize","bboxes","scaledStart","newStart","_newGroup","addGroup","_addToGroup","alignElements","alignment","stackElements","stackAxis","otherAxis","previousBBox","createStackElements","wrapElements","stacks","maxSize","stack","stackSize","addElementToStack","getStacks","startElement","elementIdx","StopsArray","optionsAccessor","GradientStop","offset","arg","defineOptionsAccessors","Gradient","stops","_createStops","_userSpace","userSpace","addStop","removeStop","stop","LinearGradient","RadialGradient","_radius","_fallbackFill","fallbackFill","defaultColor","defaultLine","defaultDot","defaultGrid","Pattern","drawBackground","pattern","dotsPattern","gap","background","shapeOptions","yC2","center1","center2","center3","verticalStripesPattern","xStart","xEnd","startLine","endLine","crosshatchPattern","line1","line2","diagonalStripesPattern","lineCap","gridPattern","squareSize","halfGap","instance$2","instance$1","easingFunctions","easeOutElastic","time","asin","linear","swing","AnimationFactory","_items","register","Animation","_options","duration","easing","setup","step","play","finish","abort","_stopped","wallTime","easingPosition","destroy","PathParser","BaseNode","srcElement","childNodes","observe","load","node","removeSelf","invalidate","Surface$3","Surface","_kendoExportVisual","exportVisual","_click","_handler","_mouseenter","_mouseleave","_mousemove","_visual","_enableTracking","draw","eventTarget","domNode","_kendoNode","currentSize","_resize","resize","force","suspendTracking","_suspendedTracking","resumeTracking","originalEvent","_elementOffset","padding","_surfacePoint","coord","inverseTransform","renderAttr","renderAllAttr","attrs","renderStyle","NODE_MAP$1","setStyle","styleString","styleAttr","replaceStyleAttr","html","restoreStyleAttr","container","from","querySelectorAll","getAttribute","removeAttribute","setInnerHTML","innerHTML","SVG_NS","NONE","renderSVG","svg","testFragment","testContainer","hasParser","DOMParser","firstChild","namespaceURI","chartDoc","parseFromString","importedDoc","adoptNode","renderSVG$1","TRANSFORM","DefinitionMap","isDefinition","Node$1","Node","definitions","clearDefinitions","childNode","createDefinitions","attachTo","root","domElement","render","insertBefore","setElement","nodes","childElement","template","renderChildren","css","updateDefinition","attr","removeAttr","accessibilityOptionsChange","setAttribute","allAttr","toggleAttr","allCss","classList","item","mapTransform","renderTransform","transformChange","mapStyle","cursor","renderOpacity","renderId","renderClassName","renderRole","role","renderAriaLabel","ariaLabel","renderAriaRoleDescription","ariaRoleDescription","renderAriaChecked","ariaChecked","hasDefinitions","definition","definitionChange","refUrl","renderDefinitions","mapDefinitions","skipBaseHref","baseHref","baseUrl","base","getElementsByTagName","url","hashIndex","GradientStopNode","renderOffset","GradientNode","loadStops","stopNode","mapCoordinates","renderCoordinates","mapSpace","LinearGradientNode","RadialGradientNode","PatternNode","getWidth","getHeight","ClipNode","renderClipRule","DefinitionNode","definitionMap","addDefinitions","removeDefinitions","createDefinition","addDefinition","mapItem","removeDefinition","RootNode$1","RootNode","defs","firstElementChild","ATTRIBUTE_MAP","PathNode$1","PathNode","renderData","mapFill","mapStroke","renderLinecap","dashType","renderDashType","renderStroke","dashArray","renderFill","ArcNode$1","ArcNode","CircleNode$1","CircleNode","GroupNode$1","GroupNode","ImageNode$1","ImageNode","mapPosition","mapSource","renderPosition","encode","renderSource","MultiPathNode$1","MultiPathNode","RectNode$1","RectNode","ENTITY_REGEX","decodeEntities","test","_element","lastIndex","innerText","TextNode$1","TextNode","setY","renderContent","renderTextAnchor","rtl","renderPaintOrder","paintOrder","Surface$2","BaseSurface","_root","direction","_template","_rootElement","ctm","getScreenCTM","alignToScreen","click","mouseover","mouseout","mousemove","viewBox","_offset","visual","svgStyles","NODE_MAP","initClip","clearClip","setClip","ctx","beginPath","renderPoints","setTransform","loadElements","cors","setOpacity","globalAlpha","opactity","renderTo","save","restore","FRAME_DELAY","canvas","getContext","invalidateHandler","_invalidate","_rescale","_devicePixelRatio","devicePixelRatio","fixedScale","clearRect","QuadRoot","shapes","shape","_quadNode","pointShapes","QuadNode","inBounds","nodeRect","nodeBottomRight","inserted","_initChildren","halfWidth","halfHeight","ROOT_SIZE","ShapesQuadTree","initRoots","rootMap","rootElements","pointShape","sectorRoot","assignZindex","zIndexComparer","zIndex","levelWeight","parents","_zIndex","bboxChange","_insertShape","elementsArray","_insert","sectors","getSectors","inRoot","bottomX","bottomY","SurfaceCursor","surface","renderPath","prevOut","bezierCurveTo","_resetCursor","_shapeCursor","_current","_defaultCursor","_getCursor","_setCursor","setLineDash","setLineCap","setLineJoin","setFill","setStroke","hasFill","setGradientFill","setPatternFill","fillStyle","gradient","createLinearGradient","createRadialGradient","addColorStop","addGradientStops","patternCanvas","patternContext","createPattern","strokeStyle","lineWidth","mozDash","webkitLineDash","onLoad","onError","loading","crossOrigin","complete","onload","onerror","drawImage","textAlign","strokeText","fillText","instance","support","Surface$1","_mouseTrackHandler","_trackMouse","_searchTree","_cursor","image","rootElement","loadingStates","resolveDataURL","toDataURL","then","currentShape","_currentShape","hasDocument","SurfaceFactory","implementation","hasFeature","preferred","exportGroup","rootGroup","exportRoot","keyStr","drawing","exportImage","defaults","surfaceOptions","exportSVG","raw","fit","rectSize","vAlign","vStack","vWrap","HAS_TYPED_ARRAYS","BASE64","decode","bytes","BinaryStream","ensure","tmp","write","writeString","writeByte","readByte","readShort","writeShort","w","readLong","writeLong","readLong_","writeLong_","read","times","reader","stream","eof","readFixed","writeFixed","readShort_","writeShort_","readFixed_","writeFixed_","readString","skip","nbytes","saveExcursion","writeBase64","base64ToUint8Array","atobUint8Array","createUint8Array","hasOwnProperty$2","sortedKeys","Directory","scalerType","tableCount","searchRange","entrySelector","rangeShift","tables","tag","checksum","readTable","Ctor","def","table","maxpow2","LN2","out","directoryLength","headOffset","tableData","adjustment","sum","Table","file","rawData","NameEntry","POSTSCRIPT_GLYPHS","CmapEntry","HeadTable","revision","checkSumAdjustment","magicNumber","flags","unitsPerEm","created","modified","xMin","yMin","xMax","yMax","macStyle","lowestRecPPEM","fontDirectionHint","indexToLocFormat","glyphDataFormat","LocaTable","format","head","offsets","offsetOf","lengthOf","needsLongFormat","HheaTable","ascent","descent","lineGap","advanceWidthMax","minLeftSideBearing","minRightSideBearing","xMaxExtent","caretSlopeRise","caretSlopeRun","caretOffset","metricDataFormat","numOfLongHorMetrics","ids","MaxpTable","numGlyphs","maxPoints","maxContours","maxComponentPoints","maxComponentContours","maxZones","maxTwilightPoints","maxStorage","maxFunctionDefs","maxInstructionDefs","maxStackElements","maxSizeOfInstructions","maxComponentElements","maxComponentDepth","glyphIds","HmtxTable","hhea","metrics","advance","lsb","lsbCount","maxp","leftSideBearings","forGlyph","GlyfTable","SimpleGlyph","compound","CompoundGlyph","idOffsets","old2new","cache","glyphFor","loca","numberOfContours","glyph","glyphs","oldIds","NameTable","platformID","platformSpecificID","languageID","nameID","stringOffset","nameRecords","strings","rec","postscriptEntry","postscriptName","psName","strCount","strTable","list","j","PostTable","numberOfGlyphs","italicAngle","underlinePosition","underlineThickness","isFixedPitch","minMemType42","maxMemType42","minMemType1","maxMemType1","glyphNameIndex","limit","mapping","indexes","post","CmapTable","codeMap","language","segCount","endCode","startCode","idDelta","idRangeOffset","glyphId","ngroups","endCharCode","glyphCode","error","ncid2ogid","ogid2ngid","codes","startCodes","endCodes","new_gid","charcode","segCountX2","deltas","rangeOffsets","startGlyph","renderCharmap","OS2Table","averageCharWidth","weightClass","widthClass","ySubscriptXSize","ySubscriptYSize","ySubscriptXOffset","ySubscriptYOffset","ySuperscriptXSize","ySuperscriptYSize","ySuperscriptXOffset","ySuperscriptYOffset","yStrikeoutSize","yStrikeoutPosition","familyClass","panose","charRange","vendorID","selection","firstCharIndex","lastCharIndex","winAscent","winDescent","codePageRange","xHeight","capHeight","defaultChar","breakChar","maxContext","subsetTag","Subfont","subset","unicodes","ngid2ogid","next","firstChar","nextGid","nextSubsetTag","use","ch","string","extra","counter","ucs2decode","reduce","old_gid","cmap","encodeText","glyphsFor","glyf","old_gid_ids","lastChar","hmtx","os2","directory","cidToGidMap","cid","TTFFont","contents","numFonts","widthOfGlyph","makeSubset","deflate","browser$1","NL","RESOURCE_COUNTER","PAPER_SIZE","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","a10","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","b10","c0","c3","c4","c5","c6","c7","c8","c9","c10","executive","folio","legal","letter","tabloid","makeOutput","indentLevel","PDFValue","beforeRender","renderArray","renderDate","num","PDFDictionary","writeData","withIndent","indent","getPaperOptions","getOption","paperSize","unitsToPoints","margin","FONT_CACHE","Helvetica","Courier","Symbol","ZapfDingbats","IMAGE_CACHE$1","clearImageCache","loadOne","loadFonts","cont","req","XMLHttpRequest","open","responseType","status","response","VBArray","responseBody","send","loadBinary","urls","loadImages","images","jpegQuality","keepPNG","bloburl","blob","xhr","FileReader","_load","XMLSerializer","serializeToString","readAsText","_onerror","_onload","_trycanvas","imgdata","getImageData","ex","hasAlpha","rawbytes","PDFRawImage","PDFJpegImage","upscale","readAsArrayBuffer","loadImage","PDFDocument","objcount","objects","defval","attach","renderValue","renderFull","wrapObject","pages","FONTS","IMAGES","GRAD_COL_FUNCTIONS","GRAD_OPC_FUNCTIONS","GRAD_COL","GRAD_OPC","catalog","PDFCatalog","pageTree","PDFPageTree","nameTree","JavaScript","Names","PDFString","S","_","JS","props","setPages","info","Producer","Title","Author","Subject","Keywords","Creator","CreationDate","addPage","paperOptions","contentWidth","contentHeight","PDFStream","Contents","Parent","MediaBox","page","PDFPage","_content","xrefOffset","zeropad","Root","Info","hasOwnProperty$1","getFont","PDFStandardFont","PDFFont","getImage","asStream","getOpacityGS","forStroke","_opacityGSCache","gs","Type","CA","ca","_resourceName","dict","date","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","mm2pt","mm","cm2pt","cm","in2pt","inch","in","utf16be","Boolean","txt","trail","encodeUTF16BE","PDFHexString","PDFName","escape","empty","compress","Filter","Length","pagesObj","Pages","Kids","Count","pageObj","SOF_CODES","colorSpace","bitsPerComponent","Subtype","Width","Height","BitsPerComponent","ColorSpace","Decode","pdf","mask","SMask","BaseFont","Encoding","_pdf","_font","_sub","stemV","isSerif","isScript","getTextWidth","fontSize","sub","fontStream","Length1","descriptor","FontName","FontBBox","Flags","StemV","ItalicAngle","Ascent","Descent","CapHeight","XHeight","FontFile2","charWidths","chunk","gid","descendant","CIDSystemInfo","Registry","Ordering","Supplement","FontDescriptor","FirstChar","LastChar","DW","W","CIDToGIDMap","_makeCidToGidMap","DescendantFonts","unimap","PDFToUnicodeCmap","unimapStream","ToUnicode","unicode","makeHash","cacheColorGradientFunction","r1","g1","r2","g2","func","FunctionType","Domain","Range","N","C0","C1","cacheOpacityGradientFunction","cacheGradient","isRadial","funcs","prev","cur","prevColor","curColor","opacities","colors","assemble","Functions","Bounds","Encode","makeGradientFunctions","coords","shading","ShadingType","Coords","Extend","cacheColorGradient","AIS","G","FormType","BBox","CS","I","Resources","ExtGState","Shading","s0","cacheOpacityGradient","_rcount","_textMode","_fontResources","_gsResources","_xResources","_patResources","_shResources","_opacity","_annotations","_fontSize","_contextStack","ProcSet","Font","XObject","Annots","_out","d1","e1","f1","d2","e2","f2","mmul$1","sx","sy","beginText","endText","_requireTextMode","_requireFont","setFont","setTextLeading","setTextRenderingMode","mode","showText","requestedWidth","showTextNL","addLink","uri","ll","_toPage","ur","Border","A","URI","setStrokeColor","setFillOpacity","setStrokeOpacity","setFillColor","gradient$1","oname","sname","setDashPattern","dashPhase","setLineWidth","setMitterLimit","mitterLimit","_context","bezier","bezier1","bezier2","ellipse","_X","_Y","k","circle","nop","clipStroke","closeStroke","fillStroke","comment","line","val","unquote","parseFontDef","fontdef","fontFamily","italic","variant","bold","lineHeight","getFontURL$1","mkFamily","FONT_MAPPINGS","serif","monospace","zapfdingbats","fontAlias","alias","defineFont","TEXT_RENDERING_MODE$1","fillAndStroke","invisible","fillAndClip","strokeAndClip","fillStrokeClip","TEXT_RENDERING_MODE","DASH_PATTERNS","dashDot","longDash","longDashDot","longDashDotDot","solid","LINE_CAP","butt","square","LINE_JOIN","miter","bevel","fonts","multiPage","imgDPI","doIt","producer","title","author","subject","keywords","creator","autoPrint","drawPage","changed","clipbox","currentBox","opt","change","newShape","shouldDraw","optArray","el","withClipping","saveclipbox","savematrix","inClipbox","dispatch","_pdfLink","optimize","addMargin","drawElement","landscape","toBlob","_pdfDebug","parseColor$1","setStrokeOptions","setFillOptions","_drawPath","setClipping$1","drawPath","drawMultiPath","drawCircle","drawArc","drawText$1","drawGroup","drawRect","thing","maybeGradient","maybeFillStroke","maybeDrawRect","seg","_position","renderMode","_pdfRect","sz","exportPDF","_ignoreMargin","Document","exportPDFToBlob","getFontURL","saveAs","filename","proxy","dataURL","proxyURL","KENDO_PSEUDO_ELEMENT","KENDO_BULLET_TYPE","IMAGE_CACHE","nodeInfo","microsoft","TextRect","setCSS","matches","selector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","closest","$","cloneNodes","jQuery","$el","$clone","tagName","checked","selected","nextSibling","dive","canvases","orig","parseBackgroundImage","tok_linear_gradient","tok_percent","tok_length","tok_keyword","tok_angle","tok_whitespace","tok_popen","tok_pclose","tok_comma","tok_url","tok_content","cache1","cache2","tok","token","skip_ws","read_stop","percent","propName","to1","to2","parseAngle","to","read_linear_gradient","read_url","splitProperty","in_paren","in_string","looking_at","getFontHeight","getFontFaces","doc","styleSheets","doStylesheet","ss","rules","cssRules","styleSheet","family","getPropertyValue","findFonts","addRule","addRules","rule","cssText","incCounter","inc","getPrototypeOf","resetCounter","doCounters","updateCounters","counterReset","counterIncrement","parseColor","whenImagesAreActuallyLoaded","pending","done","cacheImages","getComputedStyle$1","bg","alphaNumeral","pushNodeInfo","decoration","prop","createsStackingContext","_stackingContext","popNodeInfo","updateClipbox","_clipbox","pseudoElt","defa","pleaseSetPropertyValue","important","getBorder","side","saveStyle","getBorderRadius","sanitizeRadius","getContentBox","innerBox","wt","wr","wb","wl","radiansToDegrees","setClipping","clipPath","addArcToPath","adjustBorderRadiusForBox","rTL","rTR","rBR","rBL","tl_x","tl_y","tr_x","tr_y","br_x","br_y","bl_x","bl_y","elementRoundBox","bt","bb","pt","pr","pb","pl","roundBox","rTL0","rTR0","rBR0","rBL0","formatCounter","evalPseudoElementContent","displayCounter","getAllCounters","getCounter","getCssText","_renderWithPseudoElements","fake","pseudo","saveClass","_renderElement","kind","place","psel","ownerDocument","backgroundColor","textOverflow","saveTextOverflow","backgroundImage","backgroundRepeat","backgroundPosition","backgroundOrigin","backgroundSize","currentStyle","boxes","cells","innerbox","getClientRects","tableBorderLeft","tableBorderTop","tableBox","firstCellBox","rows","adjustBoxes","drawOneBox","_avoidLinks","createRange","selectNodeContents","listStyleType","listStylePosition","_drawBullet","bullet","boxSizing","renderElement","elementIndex","drawBullet","clipit","isFormField","widget","widgetInstance","exportDOMVisual","maybeRenderWidget","bulletType","maybeRenderBullet","renderContents","drawEdge","Wtop","Wleft","Wright","rl","rr","drawRoundCorner","ri","drawOneBackground","drawBackgroundImage","pxlen","scaledAngle","atan","implicit","img_width","img_height","renderBG","aspect_ratio","orgBox","rewX","rewY","repeatX","isFirst","isLast","shouldDrawLeft","shouldDrawRight","inv","renderImage","zIndexSort","sa","sb","za","zb","pa","renderFormField","renderCheckbox","option","whiteSpace","multiple","selectedOptions","selectedIndex","getSelectedOption","xml","serializer","serializeSVG","floats","positioned","renderText","floating","cb","search","isJustified","columnCount","textTransform","estimateLineLength","prevLineBottom","underline","lineThrough","overline","underlineOffset","forEachRect","underlinePos","drawTextLine","doChunk","selectNode","clientRects","actuallyGetRangeBoundingRect","chrome","rectangles","Infinity","origStart","setStart","setEnd","found","findEOL","eol","startOffset","cc","drawText","textBox","ypos","visibility","getTransform","main","_dom_zIndex","groupInStackingContext","mmul","B","C","D","E","F","H","J","K","L","M","O","P","R","T","U","V","doOne","cls","avoidLinks","word","removeClass","makeTemplate","template$1","div","forceBreak","forcePageBreak","hasPaperSize","pageWidth","pageHeight","hasMargin","copy","_destructive","adjust","tfoot","ol","li","paddingRight","beforePageBreak","doPageBreak","splitElement","makePage","pageNum","totalPages","keepTogether","tableLayout","bottomPadding","bottomBorder","saveAdjust","breakAtElement","fall","fallsOnMargin","splitText","firstInParent","colgroup","thead","grid","gridHead","querySelector","repeatHeaders","setStartBefore","setEndBefore","extractContents","preventBulletOnListItem","pageClassName","available","nextnode","findEOP","endOffset","handlePageBreaks","progress","canceled","Z","__meta__","category","description","depends","hidden","o","u","z"],"sources":["kendo.drawing.cmn.chunk.js"],"mappings":"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","ignoreList":[],"sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('kendo.common.cmn.chunk.js'), require('kendo.pako-esm.cmn.chunk.js')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'kendo.common.cmn.chunk', 'kendo.pako-esm.cmn.chunk'], factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory((global.kendo = global.kendo || {}, global.kendo._globals = global.kendo._globals || {}, global.kendo._globals.DrawingCmnChunk = {}), global.kendo._globals.CommonCmnChunk, global.kendo._globals.PakoEsmCmnChunk));\n})(this, (function (exports, kendo_common_cmn_chunk_js, kendo_pakoEsm_cmn_chunk_js) {\n  const __meta__ = {\n      id: \"drawing.cmn.chunk\",\n      name: \"DrawingCmnChunk\",\n      category: \"web\",\n      description: \"A reusable outputed chunk of code\",\n      depends: ['common.cmn.chunk', 'pako-esm.cmn.chunk'],\n      hidden: true,\n      chunk: true\n  };\n\n  var Class = function Class () {};\n\n  var Observable = (function (Class) {\n      function Observable() {\n          Class.call(this);\n\n          this._events = {};\n      }\n\n      if ( Class ) Observable.__proto__ = Class;\n      Observable.prototype = Object.create( Class && Class.prototype );\n      Observable.prototype.constructor = Observable;\n\n      Observable.prototype.bind = function bind (eventName, handlers, one) {\n          var arguments$1 = arguments;\n          var this$1$1 = this;\n\n          var eventNames = getArray(eventName);\n          var handlersIsFunction = isFunction(handlers);\n          var length = eventNames.length;\n\n          if (handlers === undefined) {\n              for (var field in eventName) {\n                  this$1$1.bind(field, eventName[field]);\n              }\n              return this;\n          }\n\n          var loop = function ( idx ) {\n              var eventName$1 = eventNames[idx];\n\n              var handler = handlersIsFunction ? handlers : handlers[eventName$1];\n\n              if (handler) {\n                  if (one) {\n                      var original = handler;\n                      handler = function () { // eslint-disable-line no-loop-func\n                          this$1$1.unbind(eventName$1, handler);\n                          original.apply(this$1$1, arguments$1);\n                      };\n                      handler.original = original;\n                  }\n                  var events = this$1$1._events[eventName$1] = this$1$1._events[eventName$1] || [];\n                  events.push(handler);\n              }\n          };\n\n          for (var idx = 0; idx < length; idx++) loop( idx );\n\n          return this;\n      };\n\n      Observable.prototype.one = function one (eventNames, handlers) {\n          return this.bind(eventNames, handlers, true);\n      };\n\n      Observable.prototype.first = function first (eventName, handlers) {\n          var this$1$1 = this;\n\n          var eventNames = getArray(eventName);\n          var handlersIsFunction = isFunction(handlers);\n\n          for (var idx = 0, length = eventNames.length; idx < length; idx++) {\n              var eventName$1 = eventNames[idx];\n\n              var handler = handlersIsFunction ? handlers : handlers[eventName$1];\n\n              if (handler) {\n                  var events = this$1$1._events[eventName$1] = this$1$1._events[eventName$1] || [];\n                  events.unshift(handler);\n              }\n          }\n\n          return this;\n      };\n\n      Observable.prototype.trigger = function trigger (eventName, e) {\n          var this$1$1 = this;\n          if ( e === void 0 ) e = {};\n\n          var events = this._events[eventName];\n\n          if (events) {\n              var length = events.length;\n\n              e.sender = this;\n              e._defaultPrevented = false;\n              e.preventDefault = preventDefault;\n              e.isDefaultPrevented = isDefaultPrevented;\n\n              events = events.slice();\n\n              for (var idx = 0; idx < length; idx++) {\n                  events[idx].call(this$1$1, e);\n              }\n\n              return e._defaultPrevented === true;\n          }\n\n          return false;\n      };\n\n      Observable.prototype.unbind = function unbind (eventName, handler) {\n          var events = this._events[eventName];\n\n          if (eventName === undefined) {\n              this._events = {};\n          } else if (events) {\n              if (handler) {\n                  for (var idx = events.length - 1; idx >= 0; idx--) {\n                      if (events[idx] === handler || events[idx].original === handler) {\n                          events.splice(idx, 1);\n                      }\n                  }\n              } else {\n                  this._events[eventName] = [];\n              }\n          }\n\n          return this;\n      };\n\n      return Observable;\n  }(Class));\n\n  function isFunction(value) {\n      return typeof value === \"function\";\n  }\n\n  function getArray(value) {\n      return typeof value === \"string\" ? [ value ] : value;\n  }\n\n  function preventDefault() {\n      this._defaultPrevented = true;\n  }\n\n  function isDefaultPrevented() {\n      return this._defaultPrevented === true;\n  }\n\n  var animationFrameProxy = function (callback) {\n      var wnd = typeof window !== \"undefined\" ? window : {};\n      var animationFrame = wnd.requestAnimationFrame ||\n                          wnd.webkitRequestAnimationFrame ||\n                          wnd.mozRequestAnimationFrame ||\n                          wnd.oRequestAnimationFrame ||\n                          wnd.msRequestAnimationFrame ||\n                          function(callback) { setTimeout(callback, 1000 / 60); };\n\n      animationFrameProxy = function (callback) { return animationFrame.call(wnd, callback); };\n      animationFrameProxy(callback);\n  };\n\n  var animationFrame = animationFrameProxy;\n\n  var ampRegExp = /&/g;\n  var ltRegExp = /</g;\n  var quoteRegExp = /\"/g;\n  var aposRegExp = /'/g;\n  var gtRegExp = />/g;\n\n  function htmlEncode(value) {\n      return String(value).replace(ampRegExp, \"&amp;\").replace(ltRegExp, \"&lt;\").replace(gtRegExp, \"&gt;\").replace(quoteRegExp, \"&quot;\").replace(aposRegExp, \"&#39;\");\n  }\n\n  /* eslint-disable no-console */\n\n  function logToConsole(message) {\n      var console = window.console;\n\n      if (typeof(console) != \"undefined\" && console.log) {\n          console.log(message);\n      }\n  }\n\n  // XXX: the following will not work with IE9 (requires server proxy).\n  function saveAs$1(options) {\n      var dataURI = options.dataURI;\n      var fileName = options.fileName;\n      var data = dataURI;\n\n      if (typeof data == \"string\" && window.Blob) {\n          var parts = data.split(\";base64,\");\n          var contentType = parts[0];\n          var base64 = atob(parts[1]);\n          var array = new Uint8Array(base64.length);\n          for (var idx = 0; idx < base64.length; idx++) {\n              array[idx] = base64.charCodeAt(idx);\n          }\n          data = new Blob([ array.buffer ], { type: contentType });\n      }\n      if (navigator.msSaveBlob) {\n          navigator.msSaveBlob(data, fileName);\n      } else {\n          var link = document.createElement(\"a\");\n          link.download = fileName;\n          data = link.href = URL.createObjectURL(data);\n          var e = document.createEvent(\"MouseEvents\");\n          e.initMouseEvent(\"click\", true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n          link.dispatchEvent(e);\n          setTimeout(function() {\n              URL.revokeObjectURL(data);\n          });\n      }\n  }\n\n  function matchUserAgent(userAgent) {\n      var browserRxs = {\n          edge: /(edge)[ \\/]([\\w.]+)/i,\n          webkit: /(chrome)[ \\/]([\\w.]+)/i,\n          safari: /(webkit)[ \\/]([\\w.]+)/i,\n          opera: /(opera)(?:.*version|)[ \\/]([\\w.]+)/i,\n          msie: /(msie\\s|trident.*? rv:)([\\w.]+)/i,\n          mozilla: /(mozilla)(?:.*? rv:([\\w.]+))/i\n      };\n\n      var browser = {};\n\n      for (var agent in browserRxs) {\n          if (browserRxs.hasOwnProperty(agent)) {\n              var match = userAgent.match(browserRxs[agent]);\n              if (match) {\n                  browser[agent] = true;\n                  browser[match[1].toLowerCase().split(\" \")[0].split(\"/\")[0]] = true;\n                  browser.version = parseInt(document.documentMode || match[2], 10);\n\n                  break;\n              }\n          }\n      }\n\n      return browser;\n  }\n\n  var browser$3 = null;\n\n  var support$1 = {\n      get browser() {\n          if (typeof window === 'undefined' || browser$3) {\n              return browser$3;\n          }\n\n          browser$3 = matchUserAgent(window.navigator.userAgent);\n          return browser$3;\n      }\n  };\n\n  function template() {\n      throw new Error(\"Template implementation missing.\");\n  }\n\n  var now = Date.now || function() {\n      return new Date().getTime();\n  };\n\n  function throttle(fn, delay) {\n      var lastExecTime = 0;\n      var timeout;\n\n      if (!delay || delay <= 0) {\n          return fn;\n      }\n\n      var throttled = function() {\n          var elapsed = now() - lastExecTime;\n          var args = arguments;\n\n          var exec = function() {\n              fn.apply(null, args);\n              lastExecTime = now();\n          };\n\n          // first execution\n          if (!lastExecTime) {\n              return exec();\n          }\n\n          if (timeout) {\n              clearTimeout(timeout);\n          }\n\n          if (elapsed > delay) {\n              exec();\n          } else {\n              timeout = setTimeout(exec, delay - elapsed);\n          }\n      };\n\n      throttled.cancel = function() {\n          clearTimeout(timeout);\n      };\n\n      return throttled;\n  }\n\n  var namedColors = {\n      aliceblue: \"f0f8ff\", antiquewhite: \"faebd7\", aqua: \"00ffff\",\n      aquamarine: \"7fffd4\", azure: \"f0ffff\", beige: \"f5f5dc\",\n      bisque: \"ffe4c4\", black: \"000000\", blanchedalmond: \"ffebcd\",\n      blue: \"0000ff\", blueviolet: \"8a2be2\", brown: \"a52a2a\",\n      burlywood: \"deb887\", cadetblue: \"5f9ea0\", chartreuse: \"7fff00\",\n      chocolate: \"d2691e\", coral: \"ff7f50\", cornflowerblue: \"6495ed\",\n      cornsilk: \"fff8dc\", crimson: \"dc143c\", cyan: \"00ffff\",\n      darkblue: \"00008b\", darkcyan: \"008b8b\", darkgoldenrod: \"b8860b\",\n      darkgray: \"a9a9a9\", darkgrey: \"a9a9a9\", darkgreen: \"006400\",\n      darkkhaki: \"bdb76b\", darkmagenta: \"8b008b\", darkolivegreen: \"556b2f\",\n      darkorange: \"ff8c00\", darkorchid: \"9932cc\", darkred: \"8b0000\",\n      darksalmon: \"e9967a\", darkseagreen: \"8fbc8f\", darkslateblue: \"483d8b\",\n      darkslategray: \"2f4f4f\", darkslategrey: \"2f4f4f\", darkturquoise: \"00ced1\",\n      darkviolet: \"9400d3\", deeppink: \"ff1493\", deepskyblue: \"00bfff\",\n      dimgray: \"696969\", dimgrey: \"696969\", dodgerblue: \"1e90ff\",\n      firebrick: \"b22222\", floralwhite: \"fffaf0\", forestgreen: \"228b22\",\n      fuchsia: \"ff00ff\", gainsboro: \"dcdcdc\", ghostwhite: \"f8f8ff\",\n      gold: \"ffd700\", goldenrod: \"daa520\", gray: \"808080\",\n      grey: \"808080\", green: \"008000\", greenyellow: \"adff2f\",\n      honeydew: \"f0fff0\", hotpink: \"ff69b4\", indianred: \"cd5c5c\",\n      indigo: \"4b0082\", ivory: \"fffff0\", khaki: \"f0e68c\",\n      lavender: \"e6e6fa\", lavenderblush: \"fff0f5\", lawngreen: \"7cfc00\",\n      lemonchiffon: \"fffacd\", lightblue: \"add8e6\", lightcoral: \"f08080\",\n      lightcyan: \"e0ffff\", lightgoldenrodyellow: \"fafad2\", lightgray: \"d3d3d3\",\n      lightgrey: \"d3d3d3\", lightgreen: \"90ee90\", lightpink: \"ffb6c1\",\n      lightsalmon: \"ffa07a\", lightseagreen: \"20b2aa\", lightskyblue: \"87cefa\",\n      lightslategray: \"778899\", lightslategrey: \"778899\", lightsteelblue: \"b0c4de\",\n      lightyellow: \"ffffe0\", lime: \"00ff00\", limegreen: \"32cd32\",\n      linen: \"faf0e6\", magenta: \"ff00ff\", maroon: \"800000\",\n      mediumaquamarine: \"66cdaa\", mediumblue: \"0000cd\", mediumorchid: \"ba55d3\",\n      mediumpurple: \"9370d8\", mediumseagreen: \"3cb371\", mediumslateblue: \"7b68ee\",\n      mediumspringgreen: \"00fa9a\", mediumturquoise: \"48d1cc\", mediumvioletred: \"c71585\",\n      midnightblue: \"191970\", mintcream: \"f5fffa\", mistyrose: \"ffe4e1\",\n      moccasin: \"ffe4b5\", navajowhite: \"ffdead\", navy: \"000080\",\n      oldlace: \"fdf5e6\", olive: \"808000\", olivedrab: \"6b8e23\",\n      orange: \"ffa500\", orangered: \"ff4500\", orchid: \"da70d6\",\n      palegoldenrod: \"eee8aa\", palegreen: \"98fb98\", paleturquoise: \"afeeee\",\n      palevioletred: \"d87093\", papayawhip: \"ffefd5\", peachpuff: \"ffdab9\",\n      peru: \"cd853f\", pink: \"ffc0cb\", plum: \"dda0dd\",\n      powderblue: \"b0e0e6\", purple: \"800080\", red: \"ff0000\",\n      rosybrown: \"bc8f8f\", royalblue: \"4169e1\", saddlebrown: \"8b4513\",\n      salmon: \"fa8072\", sandybrown: \"f4a460\", seagreen: \"2e8b57\",\n      seashell: \"fff5ee\", sienna: \"a0522d\", silver: \"c0c0c0\",\n      skyblue: \"87ceeb\", slateblue: \"6a5acd\", slategray: \"708090\",\n      slategrey: \"708090\", snow: \"fffafa\", springgreen: \"00ff7f\",\n      steelblue: \"4682b4\", tan: \"d2b48c\", teal: \"008080\",\n      thistle: \"d8bfd8\", tomato: \"ff6347\", turquoise: \"40e0d0\",\n      violet: \"ee82ee\", wheat: \"f5deb3\", white: \"ffffff\",\n      whitesmoke: \"f5f5f5\", yellow: \"ffff00\", yellowgreen: \"9acd32\"\n  };\n\n  var browser$2 = support$1.browser;\n\n  var matchNamedColor = function (color) {\n      var colorNames = Object.keys(namedColors);\n      colorNames.push(\"transparent\");\n\n      var regexp = new RegExp(\"^(\" + colorNames.join(\"|\") + \")(\\\\W|$)\", \"i\");\n      matchNamedColor = function (color) { return regexp.exec(color); };\n\n      return regexp.exec(color);\n  };\n\n  var BaseColor = (function (Class) {\n      function BaseColor() { Class.call(this); }\n\n      if ( Class ) BaseColor.__proto__ = Class;\n      BaseColor.prototype = Object.create( Class && Class.prototype );\n      BaseColor.prototype.constructor = BaseColor;\n      BaseColor.prototype.toHSV = function toHSV () { return this; };\n\n      BaseColor.prototype.toRGB = function toRGB () { return this; };\n\n      BaseColor.prototype.toHex = function toHex (options) { return this.toBytes().toHex(options); };\n\n      BaseColor.prototype.toBytes = function toBytes () { return this; };\n\n      BaseColor.prototype.toCss = function toCss (options) { return \"#\" + this.toHex(options); };\n\n      BaseColor.prototype.toCssRgba = function toCssRgba () {\n          var rgb = this.toBytes();\n          return (\"rgba(\" + (rgb.r) + \", \" + (rgb.g) + \", \" + (rgb.b) + \", \" + (parseFloat((Number(this.a)).toFixed(3))) + \")\");\n      };\n\n      BaseColor.prototype.toDisplay = function toDisplay () {\n          if (browser$2.msie && browser$2.version < 9) {\n              return this.toCss(); // no RGBA support; does it support any opacity in colors?\n          }\n          return this.toCssRgba();\n      };\n\n      BaseColor.prototype.equals = function equals (c) {\n          return c === this || ((c !== null && c !== undefined) && this.toCssRgba() === parseColor$2(c).toCssRgba());\n      };\n\n      BaseColor.prototype.diff = function diff (other) {\n          if (other === null) {\n              return NaN;\n          }\n\n          var c1 = this.toBytes();\n          var c2 = other.toBytes();\n\n          return Math.sqrt(Math.pow((c1.r - c2.r) * 0.30, 2) +\n                           Math.pow((c1.g - c2.g) * 0.59, 2) +\n                           Math.pow((c1.b - c2.b) * 0.11, 2));\n      };\n\n      BaseColor.prototype.clone = function clone () {\n          var c = this.toBytes();\n          if (c === this) {\n              c = new Bytes(c.r, c.g, c.b, c.a);\n          }\n\n          return c;\n      };\n\n      return BaseColor;\n  }(Class));\n\n  var RGB = (function (BaseColor) {\n      function RGB(r, g, b, a) {\n          BaseColor.call(this);\n\n          this.r = r;\n          this.g = g;\n          this.b = b;\n          this.a = a;\n      }\n\n      if ( BaseColor ) RGB.__proto__ = BaseColor;\n      RGB.prototype = Object.create( BaseColor && BaseColor.prototype );\n      RGB.prototype.constructor = RGB;\n\n      RGB.prototype.toHSV = function toHSV () {\n          var ref = this;\n          var r = ref.r;\n          var g = ref.g;\n          var b = ref.b;\n          var min = Math.min(r, g, b);\n          var max = Math.max(r, g, b);\n          var delta = max - min;\n          var v = max;\n          var h, s;\n\n          if (delta === 0) {\n              return new HSV(0, 0, v, this.a);\n          }\n\n          if (max !== 0) {\n              s = delta / max;\n              if (r === max) {\n                  h = (g - b) / delta;\n              } else if (g === max) {\n                  h = 2 + (b - r) / delta;\n              } else {\n                  h = 4 + (r - g) / delta;\n              }\n\n              h *= 60;\n              if (h < 0) {\n                  h += 360;\n              }\n          } else {\n              s = 0;\n              h = -1;\n          }\n\n          return new HSV(h, s, v, this.a);\n      };\n\n      RGB.prototype.toHSL = function toHSL () {\n          var ref = this;\n          var r = ref.r;\n          var g = ref.g;\n          var b = ref.b;\n          var max = Math.max(r, g, b);\n          var min = Math.min(r, g, b);\n          var h, s, l = (max + min) / 2;\n\n          if (max === min) {\n              h = s = 0;\n          } else {\n              var d = max - min;\n              s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n              switch (max) {\n              case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n              case g: h = (b - r) / d + 2; break;\n              case b: h = (r - g) / d + 4; break;\n              default: break;\n              }\n          }\n\n          return new HSL(h * 60, s * 100, l * 100, this.a);\n      };\n\n      RGB.prototype.toBytes = function toBytes () {\n          return new Bytes(this.r * 255, this.g * 255, this.b * 255, this.a);\n      };\n\n      return RGB;\n  }(BaseColor));\n\n  var Bytes = (function (RGB) {\n      function Bytes(r, g, b, a) {\n          RGB.call(this, Math.round(r), Math.round(g), Math.round(b), a);\n      }\n\n      if ( RGB ) Bytes.__proto__ = RGB;\n      Bytes.prototype = Object.create( RGB && RGB.prototype );\n      Bytes.prototype.constructor = Bytes;\n\n      Bytes.prototype.toRGB = function toRGB () {\n          return new RGB(this.r / 255, this.g / 255, this.b / 255, this.a);\n      };\n\n      Bytes.prototype.toHSV = function toHSV () {\n          return this.toRGB().toHSV();\n      };\n\n      Bytes.prototype.toHSL = function toHSL () {\n          return this.toRGB().toHSL();\n      };\n\n      Bytes.prototype.toHex = function toHex (options) {\n          var value = hex(this.r, 2) + hex(this.g, 2) + hex(this.b, 2);\n\n          if (options && options.alpha) {\n              value += hex(Math.round(this.a * 255), 2);\n          }\n\n          return value;\n      };\n\n      Bytes.prototype.toBytes = function toBytes () {\n          return this;\n      };\n\n      return Bytes;\n  }(RGB));\n\n  function hex(n, width, pad) {\n      if ( pad === void 0 ) pad = \"0\";\n\n      var result = n.toString(16);\n      while (width > result.length) {\n          result = pad + result;\n      }\n\n      return result;\n  }\n\n  var HSV = (function (BaseColor) {\n      function HSV(h, s, v, a) {\n          BaseColor.call(this);\n\n          this.h = h;\n          this.s = s;\n          this.v = v;\n          this.a = a;\n      }\n\n      if ( BaseColor ) HSV.__proto__ = BaseColor;\n      HSV.prototype = Object.create( BaseColor && BaseColor.prototype );\n      HSV.prototype.constructor = HSV;\n\n      HSV.prototype.toRGB = function toRGB () {\n          var ref = this;\n          var h = ref.h;\n          var s = ref.s;\n          var v = ref.v;\n          var r, g, b;\n\n          if (s === 0) {\n              r = g = b = v;\n          } else {\n              h /= 60;\n\n              var i = Math.floor(h);\n              var f = h - i;\n              var p = v * (1 - s);\n              var q = v * (1 - s * f);\n              var t = v * (1 - s * (1 - f));\n\n              switch (i) {\n              case 0: r = v; g = t; b = p; break;\n              case 1: r = q; g = v; b = p; break;\n              case 2: r = p; g = v; b = t; break;\n              case 3: r = p; g = q; b = v; break;\n              case 4: r = t; g = p; b = v; break;\n              default: r = v; g = p; b = q; break;\n              }\n          }\n\n          return new RGB(r, g, b, this.a);\n      };\n\n      HSV.prototype.toHSL = function toHSL () {\n          return this.toRGB().toHSL();\n      };\n\n      HSV.prototype.toBytes = function toBytes () {\n          return this.toRGB().toBytes();\n      };\n\n      return HSV;\n  }(BaseColor));\n\n  var HSL = (function (BaseColor) {\n      function HSL(h, s, l, a) {\n          BaseColor.call(this);\n\n          this.h = h;\n          this.s = s;\n          this.l = l;\n          this.a = a;\n      }\n\n      if ( BaseColor ) HSL.__proto__ = BaseColor;\n      HSL.prototype = Object.create( BaseColor && BaseColor.prototype );\n      HSL.prototype.constructor = HSL;\n\n      HSL.prototype.toRGB = function toRGB () {\n          var h = this.h / 360;\n          var s = this.s / 100;\n          var l = this.l / 100;\n          var r, g, b;\n\n          if (s === 0) {\n              r = g = b = l; // achromatic\n          } else {\n              var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n              var p = 2 * l - q;\n              r = hue2rgb(p, q, h + 1 / 3);\n              g = hue2rgb(p, q, h);\n              b = hue2rgb(p, q, h - 1 / 3);\n          }\n\n          return new RGB(r, g, b, this.a);\n      };\n\n      HSL.prototype.toHSV = function toHSV () {\n          return this.toRGB().toHSV();\n      };\n\n      HSL.prototype.toBytes = function toBytes () {\n          return this.toRGB().toBytes();\n      };\n\n      return HSL;\n  }(BaseColor));\n\n  function hue2rgb(p, q, s) {\n      var t = s;\n\n      if (t < 0) {\n          t += 1;\n      }\n\n      if (t > 1) {\n          t -= 1;\n      }\n\n      if (t < 1 / 6) {\n          return p + (q - p) * 6 * t;\n      }\n\n      if (t < 1 / 2) {\n          return q;\n      }\n\n      if (t < 2 / 3) {\n          return p + (q - p) * (2 / 3 - t) * 6;\n      }\n\n      return p;\n  }\n\n  function alphaFromHex(a) {\n      return parseFloat(parseFloat(parseInt(a, 16) / 255 ).toFixed(3));\n  }\n\n  function parseColor$2(value, safe) {\n      var m, ret;\n\n      if (!value || value === \"none\") {\n          return null;\n      }\n\n      if (value instanceof BaseColor) {\n          return value;\n      }\n\n      var color = value.toLowerCase();\n      if ((m = matchNamedColor(color))) {\n          if (m[1] === \"transparent\") {\n              color = new RGB(1, 1, 1, 0);\n          } else {\n              color = parseColor$2(namedColors[m[1]], safe);\n          }\n          color.match = [ m[1] ];\n          return color;\n      }\n      if ((m = /^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})\\b/i.exec(color))) {\n          ret = new Bytes(parseInt(m[1], 16),\n              parseInt(m[2], 16),\n              parseInt(m[3], 16), 1);\n      } else if ((m = /^#?([0-9a-f])([0-9a-f])([0-9a-f])\\b/i.exec(color))) {\n          ret = new Bytes(parseInt(m[1] + m[1], 16),\n              parseInt(m[2] + m[2], 16),\n              parseInt(m[3] + m[3], 16), 1);\n      } else if ((m = /^#?([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])\\b/i.exec(color))) { // Parse 4 digit hex color\n          ret = new Bytes(parseInt(m[1] + m[1], 16),\n              parseInt(m[2] + m[2], 16),\n              parseInt(m[3] + m[3], 16),\n              alphaFromHex(m[4] + m[4]));\n      } else if ((m = /^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})\\b/i.exec(color))) { // Parse 8 digit hex color\n          ret = new Bytes(parseInt(m[1], 16),\n              parseInt(m[2], 16),\n              parseInt(m[3], 16),\n              alphaFromHex(m[4]));\n      } else if ((m = /^rgb\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*\\)/.exec(color))) {\n          ret = new Bytes(parseInt(m[1], 10),\n              parseInt(m[2], 10),\n              parseInt(m[3], 10), 1);\n      } else if ((m = /^rgba\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9.]+)\\s*\\)/.exec(color))) {\n          ret = new Bytes(parseInt(m[1], 10),\n              parseInt(m[2], 10),\n              parseInt(m[3], 10), parseFloat(m[4]));\n      } else if ((m = /^rgb\\(\\s*([0-9]*\\.?[0-9]+)%\\s*,\\s*([0-9]*\\.?[0-9]+)%\\s*,\\s*([0-9]*\\.?[0-9]+)%\\s*\\)/.exec(color))) {\n          ret = new RGB(parseFloat(m[1]) / 100,\n              parseFloat(m[2]) / 100,\n              parseFloat(m[3]) / 100, 1);\n      } else if ((m = /^rgba\\(\\s*([0-9]*\\.?[0-9]+)%\\s*,\\s*([0-9]*\\.?[0-9]+)%\\s*,\\s*([0-9]*\\.?[0-9]+)%\\s*,\\s*([0-9.]+)\\s*\\)/.exec(color))) {\n          ret = new RGB(parseFloat(m[1]) / 100,\n              parseFloat(m[2]) / 100,\n              parseFloat(m[3]) / 100, parseFloat(m[4]));\n      } else if ((m = /^color\\(\\s*srgb\\s*([0-9]*\\.?[0-9]+)\\s+([0-9]*\\.?[0-9]+)\\s+([0-9]*\\.?[0-9]+)\\s*(\\/\\s+([0-9]*\\.?[0-9]+))?\\)/.exec(color))) {\n          ret = new RGB(\n              parseFloat(m[1]),\n              parseFloat(m[2]),\n              parseFloat(m[3]),\n              parseFloat(m[5] || '1'));\n      }\n\n      if (ret) {\n          ret.match = m;\n      } else if (!safe) {\n          throw new Error(\"Cannot parse color: \" + color);\n      }\n\n      return ret;\n  }\n\n  var DARK_TRESHOLD = 180;\n\n  var Color = (function (Class) {\n      function Color(value) {\n          var this$1$1 = this;\n\n          Class.call(this);\n\n          if (arguments.length === 1) {\n              var formats = Color.formats;\n              var resolvedColor = this.resolveColor(value);\n\n              for (var idx = 0; idx < formats.length; idx++) {\n                  var formatRegex = formats[idx].re;\n                  var processor = formats[idx].process;\n                  var parts = formatRegex.exec(resolvedColor);\n\n                  if (parts) {\n                      var channels = processor(parts);\n                      this$1$1.r = channels[0];\n                      this$1$1.g = channels[1];\n                      this$1$1.b = channels[2];\n                  }\n              }\n          } else {\n              this.r = arguments[0];\n              this.g = arguments[1];\n              this.b = arguments[2];\n          }\n\n          this.r = this.normalizeByte(this.r);\n          this.g = this.normalizeByte(this.g);\n          this.b = this.normalizeByte(this.b);\n      }\n\n      if ( Class ) Color.__proto__ = Class;\n      Color.prototype = Object.create( Class && Class.prototype );\n      Color.prototype.constructor = Color;\n\n      Color.prototype.toHex = function toHex () {\n          var pad = this.padDigit;\n          var r = this.r.toString(16);\n          var g = this.g.toString(16);\n          var b = this.b.toString(16);\n\n          return \"#\" + pad(r) + pad(g) + pad(b);\n      };\n\n      Color.prototype.resolveColor = function resolveColor (value) {\n          var color = value || \"black\";\n\n          if (color.charAt(0) === \"#\") {\n              color = color.substr(1, 6);\n          }\n\n          color = color.replace(/ /g, \"\");\n          color = color.toLowerCase();\n          color = Color.namedColors[color] || color;\n\n          return color;\n      };\n\n      Color.prototype.normalizeByte = function normalizeByte (value) {\n          if (value < 0 || isNaN(value)) {\n              return 0;\n          }\n\n          return value > 255 ? 255 : value;\n      };\n\n      Color.prototype.padDigit = function padDigit (value) {\n          return (value.length === 1) ? \"0\" + value : value;\n      };\n\n      Color.prototype.brightness = function brightness (value) {\n          var round = Math.round;\n\n          this.r = round(this.normalizeByte(this.r * value));\n          this.g = round(this.normalizeByte(this.g * value));\n          this.b = round(this.normalizeByte(this.b * value));\n\n          return this;\n      };\n\n      Color.prototype.percBrightness = function percBrightness () {\n          return Math.sqrt(0.241 * this.r * this.r + 0.691 * this.g * this.g + 0.068 * this.b * this.b);\n      };\n\n      Color.prototype.isDark = function isDark () {\n          return this.percBrightness() < DARK_TRESHOLD;\n      };\n\n      Color.fromBytes = function fromBytes (r, g, b, a) {\n          return new Bytes(r, g, b, a != null ? a : 1);\n      };\n\n      Color.fromRGB = function fromRGB (r, g, b, a) {\n          return new RGB(r, g, b, a != null ? a : 1);\n      };\n\n      Color.fromHSV = function fromHSV (h, s, v, a) {\n          return new HSV(h, s, v, a != null ? a : 1);\n      };\n\n      Color.fromHSL = function fromHSL (h, s, l, a) {\n          return new HSL(h, s, l, a != null ? a : 1);\n      };\n\n      return Color;\n  }(Class));\n\n  Color.formats = [ {\n      re: /^rgb\\((\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3})\\)$/,\n      process: function(parts) {\n          return [\n              parseInt(parts[1], 10), parseInt(parts[2], 10), parseInt(parts[3], 10)\n          ];\n      }\n  }, {\n      re: /^(\\w{2})(\\w{2})(\\w{2})$/,\n      process: function(parts) {\n          return [\n              parseInt(parts[1], 16), parseInt(parts[2], 16), parseInt(parts[3], 16)\n          ];\n      }\n  }, {\n      re: /^(\\w{1})(\\w{1})(\\w{1})$/,\n      process: function(parts) {\n          return [\n              parseInt(parts[1] + parts[1], 16),\n              parseInt(parts[2] + parts[2], 16),\n              parseInt(parts[3] + parts[3], 16)\n          ];\n      }\n  } ];\n\n  Color.namedColors = namedColors;\n\n  var HasObservers = (function (Class) {\n      function HasObservers () {\n          Class.apply(this, arguments);\n      }\n\n      if ( Class ) HasObservers.__proto__ = Class;\n      HasObservers.prototype = Object.create( Class && Class.prototype );\n      HasObservers.prototype.constructor = HasObservers;\n\n      HasObservers.prototype.observers = function observers () {\n          this._observers = this._observers || [];\n          return this._observers;\n      };\n\n      HasObservers.prototype.addObserver = function addObserver (element) {\n          if (!this._observers) {\n              this._observers = [ element ];\n          } else {\n              this._observers.push(element);\n          }\n          return this;\n      };\n\n      HasObservers.prototype.removeObserver = function removeObserver (element) {\n          var observers = this.observers();\n          var index = observers.indexOf(element);\n          if (index !== -1) {\n              observers.splice(index, 1);\n          }\n          return this;\n      };\n\n      HasObservers.prototype.trigger = function trigger (methodName, event) {\n          var observers = this._observers;\n\n          if (observers && !this._suspended) {\n              for (var idx = 0; idx < observers.length; idx++) {\n                  var observer = observers[idx];\n                  if (observer[methodName]) {\n                      observer[methodName](event);\n                  }\n              }\n          }\n          return this;\n      };\n\n      HasObservers.prototype.optionsChange = function optionsChange (e) {\n          if ( e === void 0 ) e = {};\n\n          e.element = this;\n          this.trigger(\"optionsChange\", e);\n      };\n\n      HasObservers.prototype.geometryChange = function geometryChange () {\n          this.trigger(\"geometryChange\", {\n              element: this\n          });\n      };\n\n      HasObservers.prototype.suspend = function suspend () {\n          this._suspended = (this._suspended || 0) + 1;\n          return this;\n      };\n\n      HasObservers.prototype.resume = function resume () {\n          this._suspended = Math.max((this._suspended || 0) - 1, 0);\n          return this;\n      };\n\n      HasObservers.prototype._observerField = function _observerField (field, value) {\n          if (this[field]) {\n              this[field].removeObserver(this);\n          }\n          this[field] = value;\n          value.addObserver(this);\n      };\n\n      return HasObservers;\n  }(Class));\n\n  function append(first, second) {\n      first.push.apply(first, second);\n      return first;\n  }\n\n  /* eslint-disable key-spacing,no-multi-spaces,no-param-reassign */\n\n  var literals = {\n      1    : \"i\",       10   : \"x\",       100  : \"c\",\n      2    : \"ii\",      20   : \"xx\",      200  : \"cc\",\n      3    : \"iii\",     30   : \"xxx\",     300  : \"ccc\",\n      4    : \"iv\",      40   : \"xl\",      400  : \"cd\",\n      5    : \"v\",       50   : \"l\",       500  : \"d\",\n      6    : \"vi\",      60   : \"lx\",      600  : \"dc\",\n      7    : \"vii\",     70   : \"lxx\",     700  : \"dcc\",\n      8    : \"viii\",    80   : \"lxxx\",    800  : \"dccc\",\n      9    : \"ix\",      90   : \"xc\",      900  : \"cm\",\n      1000 : \"m\"\n  };\n\n  function arabicToRoman(n) {\n      var values = [ 1000,\n          900 , 800, 700, 600, 500, 400, 300, 200, 100,\n          90  , 80 , 70 , 60 , 50 , 40 , 30 , 20 , 10 ,\n          9   , 8  , 7  , 6  , 5  , 4  , 3  , 2  , 1 ];\n\n      var roman = \"\";\n      while (n > 0) {\n          if (n < values[0]) {\n              values.shift();\n          } else {\n              roman += literals[values[0]];\n              n -= values[0];\n          }\n      }\n      return roman;\n  }\n\n  function createPromise() {\n      var resolveFn, rejectFn;\n      var promise = new Promise(function (resolve, reject) {\n          resolveFn = function (data) {\n              promise._state = \"resolved\";\n              resolve(data);\n              return promise;\n          };\n          rejectFn = function (data) {\n              promise._state = \"rejected\";\n              reject(data);\n\n              return promise;\n          };\n      });\n      promise._state = \"pending\";\n      promise.resolve = resolveFn;\n      promise.reject = rejectFn;\n      promise.state = function () { return promise._state; };\n\n      return promise;\n  }\n\n  var UNDEFINED = \"undefined\";\n\n  function defined(value) {\n      return typeof value !== UNDEFINED;\n  }\n\n  var defId = 1;\n\n  function definitionId() {\n      return \"kdef\" + defId++;\n  }\n\n  var DEG_TO_RAD = Math.PI / 180;\n  var MAX_NUM = Number.MAX_VALUE;\n  var MIN_NUM = -Number.MAX_VALUE;\n\n  function deg(radians) {\n      return radians / DEG_TO_RAD;\n  }\n\n  var fromCharCode = String.fromCharCode;\n\n  var BOM = '\\xfe\\xff';\n\n  // Encodes a string as UTF-8\n  function encodeUTF8(input) {\n      var output = \"\";\n\n      for (var i = 0; i < input.length; i++) {\n          var code = input.charCodeAt(i);\n\n          if (0xD800 <= code && code <= 0xDBFF) {\n              var hi = code;\n              var low = input.charCodeAt(++i);\n\n              if (!isNaN(low)) {\n                  // Combine high and low surrogate\n                  // See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/charCodeAt\n                  code = (hi - 0xD800) * 0x400 +\n                         (low - 0xDC00) + 0x10000;\n              }\n          }\n\n          if (code < 0x80) {\n              // One byte\n              output += fromCharCode(code);\n          } else if (code < 0x800) {\n              // Two bytes\n              output += fromCharCode(0xC0 | (code >>> 6));\n              output += fromCharCode(0x80 | (code & 0x3f));\n          } else if (code < 0x10000) {\n              // Three bytes\n              output += fromCharCode(0xE0 | (code >>> 12));\n              output += fromCharCode(0x80 | (code >>> 6 & 0x3f));\n              output += fromCharCode(0x80 | (code & 0x3f));\n          } else if (code < 0x10FFFF) {\n              // Four bytes\n              output += fromCharCode(0xF0 | (code >>> 18));\n              output += fromCharCode(0x80 | (code >>> 12 & 0x3f));\n              output += fromCharCode(0x80 | (code >>> 6 & 0x3f));\n              output += fromCharCode(0x80 | (code & 0x3f));\n          }\n      }\n\n      return output;\n  }\n\n  function encodeUnit(codeUnit) {\n      return fromCharCode(codeUnit >> 8) + fromCharCode(codeUnit & 0x00ff);\n  }\n\n  // Encodes a string as UTF-16 big-endian\n  function encodeUTF16BE(input) {\n      var output = '';\n\n      for (var i = 0; i < input.length; i++) {\n          var c = input.charCodeAt(i);\n\n          if (c < 0xFFFF) {\n              output += encodeUnit(c);\n          } else {\n              var lead = ((c - 0x10000) >> 10) + 0xD800;\n              var trail = ((c - 0x10000) & 0x3FF) + 0xDC00;\n              output += encodeUnit(lead);\n              output += encodeUnit(trail);\n          }\n      }\n\n      return output;\n  }\n\n  var KEY_STR = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n\n  function encodeBase64(input) {\n      var output = \"\";\n      var i = 0;\n\n      var utfInput = encodeUTF8(input);\n\n      while (i < utfInput.length) {\n          var chr1 = utfInput.charCodeAt(i++);\n          var chr2 = utfInput.charCodeAt(i++);\n          var chr3 = utfInput.charCodeAt(i++);\n\n          var enc1 = chr1 >> 2;\n          var enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n          var enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n          var enc4 = chr3 & 63;\n\n          if (isNaN(chr2)) {\n              enc3 = enc4 = 64;\n          } else if (isNaN(chr3)) {\n              enc4 = 64;\n          }\n\n          output = output +\n              KEY_STR.charAt(enc1) + KEY_STR.charAt(enc2) +\n              KEY_STR.charAt(enc3) + KEY_STR.charAt(enc4);\n      }\n\n      return output;\n  }\n\n  function eventCoordinates(e) {\n      if (defined((e.x || {}).location)) {\n          return {\n              x: e.x.location,\n              y: e.y.location\n          };\n      }\n\n      return {\n          x: e.pageX || e.clientX || 0,\n          y: e.pageY || e.clientY || 0\n      };\n  }\n\n  function eventElement(e) {\n      if ( e === void 0 ) e = {};\n\n      return e.touch ? e.touch.initialTouch : e.target;\n  }\n\n  function isTransparent(color) {\n      return color === \"\" || color === null || color === \"none\" || color === \"transparent\" || !defined(color);\n  }\n\n  function last(array) {\n      if (array) {\n          return array[array.length - 1];\n      }\n  }\n\n  function limitValue(value, min, max) {\n      return Math.max(Math.min(value, max), min);\n  }\n\n  /* eslint-disable no-multi-spaces, key-spacing, indent, camelcase, space-before-blocks, eqeqeq, brace-style */\n  /* eslint-disable space-infix-ops, space-before-function-paren, array-bracket-spacing, object-curly-spacing */\n  /* eslint-disable no-nested-ternary, max-params, default-case, no-else-return, no-empty */\n  /* eslint-disable no-param-reassign, no-var, block-scoped-var */\n\n  // mergeSort is stable.\n  function mergeSort(a, cmp) {\n      if (a.length < 2) {\n          return a.slice();\n      }\n      function merge(a, b) {\n          var r = [], ai = 0, bi = 0, i = 0;\n          while (ai < a.length && bi < b.length) {\n              if (cmp(a[ai], b[bi]) <= 0) {\n                  r[i++] = a[ai++];\n              } else {\n                  r[i++] = b[bi++];\n              }\n          }\n          if (ai < a.length) {\n              r.push.apply(r, a.slice(ai));\n          }\n          if (bi < b.length) {\n              r.push.apply(r, b.slice(bi));\n          }\n          return r;\n      }\n      return (function sort(a) {\n          if (a.length <= 1) {\n              return a;\n          }\n          var m = Math.floor(a.length / 2);\n          var left = a.slice(0, m);\n          var right = a.slice(m);\n          left = sort(left);\n          right = sort(right);\n          return merge(left, right);\n      })(a);\n  }\n\n  function promiseAll(promises) {\n      return Promise.all(promises);\n  }\n\n  function rad(degrees) {\n      return degrees * DEG_TO_RAD;\n  }\n\n  function pow$1(p) {\n      if (p) {\n          return Math.pow(10, p);\n      }\n\n      return 1;\n  }\n\n  function round(value, precision) {\n      var power = pow$1(precision);\n      return Math.round(value * power) / power;\n  }\n\n  function valueOrDefault(value, defaultValue) {\n      return defined(value) ? value : defaultValue;\n  }\n\n  function bindEvents(element, events) {\n      for (var eventName in events) {\n          var eventNames = eventName.trim().split(\" \");\n          for (var idx = 0; idx < eventNames.length; idx++) {\n              element.addEventListener(eventNames[idx], events[eventName], false);\n          }\n      }\n  }\n\n  function elementOffset(element) {\n      var box = element.getBoundingClientRect();\n\n      var documentElement = document.documentElement;\n\n      return {\n          top: box.top + (window.pageYOffset || documentElement.scrollTop) - (documentElement.clientTop || 0),\n          left: box.left + (window.pageXOffset || documentElement.scrollLeft) - (documentElement.clientLeft || 0)\n      };\n  }\n\n  function elementStyles(element, styles) {\n      var result = {};\n      var style = window.getComputedStyle(element) || {};\n      var stylesArray = Array.isArray(styles) ? styles : [ styles ];\n\n      for (var idx = 0; idx < stylesArray.length; idx++) {\n          var field = stylesArray[idx];\n          result[field] = style[field];\n      }\n\n      return result;\n  }\n\n  function getPixels(value) {\n      if (isNaN(value)) {\n          return value;\n      }\n      return value + \"px\";\n  }\n\n  function elementSize(element, size) {\n      if (size) {\n          var width = size.width;\n          var height = size.height;\n\n          if (defined(width)) {\n              element.style.width = getPixels(width);\n          }\n\n          if (defined(height)) {\n              element.style.height = getPixels(height);\n          }\n\n      } else {\n          var size$1 = elementStyles(element, [ 'width', 'height' ]);\n\n          return {\n              width: parseInt(size$1.width, 10),\n              height: parseInt(size$1.height, 10)\n          };\n      }\n  }\n\n  function unbindEvents(element, events) {\n      if ( events === void 0 ) events = {};\n\n      for (var name in events) {\n          var eventNames = name.trim().split(\" \");\n          for (var idx = 0; idx < eventNames.length; idx++) {\n              element.removeEventListener(eventNames[idx], events[name], false);\n          }\n      }\n  }\n\n  function elementPadding(element) {\n      var ref = elementStyles(element, [ \"paddingLeft\", \"paddingTop\" ]);\n      var paddingLeft = ref.paddingLeft;\n      var paddingTop = ref.paddingTop;\n      return {\n          top: parseFloat(paddingTop),\n          left: parseFloat(paddingLeft)\n      };\n  }\n\n  var Matrix = (function (Class) {\n      function Matrix(a, b, c, d, e, f) {\n          if ( a === void 0 ) a = 0;\n          if ( b === void 0 ) b = 0;\n          if ( c === void 0 ) c = 0;\n          if ( d === void 0 ) d = 0;\n          if ( e === void 0 ) e = 0;\n          if ( f === void 0 ) f = 0;\n\n          Class.call(this);\n\n          this.a = a;\n          this.b = b;\n          this.c = c;\n          this.d = d;\n          this.e = e;\n          this.f = f;\n      }\n\n      if ( Class ) Matrix.__proto__ = Class;\n      Matrix.prototype = Object.create( Class && Class.prototype );\n      Matrix.prototype.constructor = Matrix;\n\n      Matrix.prototype.multiplyCopy = function multiplyCopy (matrix) {\n          return new Matrix(\n              this.a * matrix.a + this.c * matrix.b,\n              this.b * matrix.a + this.d * matrix.b,\n              this.a * matrix.c + this.c * matrix.d,\n              this.b * matrix.c + this.d * matrix.d,\n              this.a * matrix.e + this.c * matrix.f + this.e,\n              this.b * matrix.e + this.d * matrix.f + this.f\n          );\n      };\n\n      Matrix.prototype.invert = function invert () {\n          var ref = this;\n          var a = ref.a;\n          var b = ref.b;\n          var d = ref.c;\n          var e = ref.d;\n          var g = ref.e;\n          var h = ref.f;\n          var det = a * e - b * d;\n\n          if (det === 0) {\n              return null;\n          }\n\n          return new Matrix(e / det, -b / det, -d / det, a / det,\n              (d * h - e * g) / det, (b * g - a * h) / det);\n      };\n\n      Matrix.prototype.clone = function clone () {\n          return new Matrix(this.a, this.b, this.c, this.d, this.e, this.f);\n      };\n\n      Matrix.prototype.equals = function equals (other) {\n          if (!other) {\n              return false;\n          }\n\n          return this.a === other.a && this.b === other.b &&\n              this.c === other.c && this.d === other.d &&\n              this.e === other.e && this.f === other.f;\n      };\n\n      Matrix.prototype.round = function round$1 (precision) {\n          this.a = round(this.a, precision);\n          this.b = round(this.b, precision);\n          this.c = round(this.c, precision);\n          this.d = round(this.d, precision);\n          this.e = round(this.e, precision);\n          this.f = round(this.f, precision);\n\n          return this;\n      };\n\n      Matrix.prototype.toArray = function toArray (precision) {\n          var result = [ this.a, this.b, this.c, this.d, this.e, this.f ];\n\n          if (defined(precision)) {\n              for (var i = 0; i < result.length; i++) {\n                  result[i] = round(result[i], precision);\n              }\n          }\n\n          return result;\n      };\n\n      Matrix.prototype.toString = function toString (precision, separator) {\n          if ( separator === void 0 ) separator = \",\";\n\n          return this.toArray(precision).join(separator);\n      };\n\n      Matrix.translate = function translate (x, y) {\n          return new Matrix(1, 0, 0, 1, x, y);\n      };\n\n      Matrix.unit = function unit () {\n          return new Matrix(1, 0, 0, 1, 0, 0);\n      };\n\n      Matrix.rotate = function rotate (angle, x, y) {\n          var matrix = new Matrix();\n          matrix.a = Math.cos(rad(angle));\n          matrix.b = Math.sin(rad(angle));\n          matrix.c = -matrix.b;\n          matrix.d = matrix.a;\n          matrix.e = (x - x * matrix.a + y * matrix.b) || 0;\n          matrix.f = (y - y * matrix.a - x * matrix.b) || 0;\n\n          return matrix;\n      };\n\n      Matrix.scale = function scale (scaleX, scaleY) {\n          return new Matrix(scaleX, 0, 0, scaleY, 0, 0);\n      };\n\n      return Matrix;\n  }(Class));\n\n  Matrix.IDENTITY = Matrix.unit();\n\n  var matrixRegexp = /matrix\\((.*)\\)/;\n\n  function parseMatrix(matrixString) {\n      var match = matrixString.match(matrixRegexp);\n      if (match === null || match.length !== 2) {\n          return Matrix.unit();\n      }\n\n      var members = match[1].split(',').map(function (x) { return parseFloat(x); });\n      return new (Function.prototype.bind.apply( Matrix, [ null ].concat( members) ));\n  }\n\n  function transformMatrix(element) {\n      var transform = getComputedStyle(element).transform;\n\n      if (transform === 'none') {\n          return Matrix.unit();\n      }\n\n      return parseMatrix(transform);\n  }\n\n  function elementScale(element) {\n      if (!element) {\n          return Matrix.unit();\n      }\n\n      var matrix = transformMatrix(element);\n      var parent = element.parentElement;\n      while (parent) {\n          var parentMatrix = transformMatrix(parent);\n          matrix = matrix.multiplyCopy(parentMatrix);\n          parent = parent.parentElement;\n      }\n\n      matrix.b = matrix.c = matrix.e = matrix.f = 0;\n      return matrix;\n  }\n\n  var LRUCache = (function (Class) {\n      function LRUCache(size) {\n          Class.call(this);\n\n          this._size = size;\n          this._length = 0;\n          this._map = {};\n      }\n\n      if ( Class ) LRUCache.__proto__ = Class;\n      LRUCache.prototype = Object.create( Class && Class.prototype );\n      LRUCache.prototype.constructor = LRUCache;\n\n      LRUCache.prototype.put = function put (key, value) {\n          var map = this._map;\n          var entry = { key: key, value: value };\n\n          map[key] = entry;\n\n          if (!this._head) {\n              this._head = this._tail = entry;\n          } else {\n              this._tail.newer = entry;\n              entry.older = this._tail;\n              this._tail = entry;\n          }\n\n          if (this._length >= this._size) {\n              map[this._head.key] = null;\n              this._head = this._head.newer;\n              this._head.older = null;\n          } else {\n              this._length++;\n          }\n      };\n\n      LRUCache.prototype.get = function get (key) {\n          var entry = this._map[key];\n\n          if (entry) {\n              if (entry === this._head && entry !== this._tail) {\n                  this._head = entry.newer;\n                  this._head.older = null;\n              }\n\n              if (entry !== this._tail) {\n                  if (entry.older) {\n                      entry.older.newer = entry.newer;\n                      entry.newer.older = entry.older;\n                  }\n\n                  entry.older = this._tail;\n                  entry.newer = null;\n\n                  this._tail.newer = entry;\n                  this._tail = entry;\n              }\n\n              return entry.value;\n          }\n      };\n\n      return LRUCache;\n  }(Class));\n\n  var REPLACE_REGEX = /\\r?\\n|\\r|\\t/g;\n  var SPACE$1 = ' ';\n\n  function normalizeText(text) {\n      return String(text).replace(REPLACE_REGEX, SPACE$1);\n  }\n\n  function objectKey(object) {\n      var parts = [];\n      for (var key in object) {\n          parts.push(key + object[key]);\n      }\n\n      return parts.sort().join(\"\");\n  }\n\n  // Computes FNV-1 hash\n  // See http://en.wikipedia.org/wiki/Fowler%E2%80%93Noll%E2%80%93Vo_hash_function\n  function hashKey(str) {\n      // 32-bit FNV-1 offset basis\n      // See http://isthe.com/chongo/tech/comp/fnv/#FNV-param\n      var hash = 0x811C9DC5;\n\n      for (var i = 0; i < str.length; ++i) {\n          hash += (hash << 1) + (hash << 4) + (hash << 7) + (hash << 8) + (hash << 24);\n          hash ^= str.charCodeAt(i);\n      }\n\n      return hash >>> 0;\n  }\n\n  function zeroSize() {\n      return { width: 0, height: 0, baseline: 0 };\n  }\n\n  var DEFAULT_OPTIONS$1 = {\n      baselineMarkerSize: 1\n  };\n\n  var defaultMeasureBox;\n\n  if (typeof document !== \"undefined\") {\n      defaultMeasureBox = document.createElement(\"div\");\n      defaultMeasureBox.style.setProperty(\"position\", \"absolute\", \"important\");\n      defaultMeasureBox.style.setProperty(\"top\", \"-4000px\", \"important\");\n      defaultMeasureBox.style.setProperty(\"width\", \"auto\", \"important\");\n      defaultMeasureBox.style.setProperty(\"height\", \"auto\", \"important\");\n      defaultMeasureBox.style.setProperty(\"padding\", \"0\", \"important\");\n      defaultMeasureBox.style.setProperty(\"margin\", \"0\", \"important\");\n      defaultMeasureBox.style.setProperty(\"border\", \"0\", \"important\");\n      defaultMeasureBox.style.setProperty(\"line-height\", \"normal\", \"important\");\n      defaultMeasureBox.style.setProperty(\"visibility\", \"hidden\", \"important\");\n      defaultMeasureBox.style.setProperty(\"white-space\", \"pre\", \"important\");\n  }\n\n  var TextMetrics = (function (Class) {\n      function TextMetrics(options) {\n          Class.call(this);\n\n          this._cache = new LRUCache(1000);\n          this.options = Object.assign({}, DEFAULT_OPTIONS$1, options);\n      }\n\n      if ( Class ) TextMetrics.__proto__ = Class;\n      TextMetrics.prototype = Object.create( Class && Class.prototype );\n      TextMetrics.prototype.constructor = TextMetrics;\n\n      TextMetrics.prototype.measure = function measure (text, style, options) {\n          if ( options === void 0 ) options = {};\n\n          if (typeof text === 'undefined' || text === null) {\n              return zeroSize();\n          }\n\n          var styleKey = objectKey(style);\n          var cacheKey = hashKey(text + styleKey);\n          var cachedResult = this._cache.get(cacheKey);\n\n          if (cachedResult) {\n              return cachedResult;\n          }\n\n          var size = zeroSize();\n          var measureBox = options.box || defaultMeasureBox;\n          var baselineMarker = this._baselineMarker().cloneNode(false);\n\n          for (var key in style) {\n              var value = style[key];\n              if (typeof value !== \"undefined\") {\n                  measureBox.style[key] = value;\n              }\n          }\n\n          var textStr = options.normalizeText !== false ? normalizeText(text) : String(text);\n\n          measureBox.textContent = textStr;\n          measureBox.appendChild(baselineMarker);\n          document.body.appendChild(measureBox);\n\n          if (textStr.length) {\n              size.width = measureBox.offsetWidth - this.options.baselineMarkerSize;\n              size.height = measureBox.offsetHeight;\n              size.baseline = baselineMarker.offsetTop + this.options.baselineMarkerSize;\n          }\n\n          if (size.width > 0 && size.height > 0) {\n              this._cache.put(cacheKey, size);\n          }\n\n          measureBox.parentNode.removeChild(measureBox);\n\n          return size;\n      };\n\n      TextMetrics.prototype._baselineMarker = function _baselineMarker () {\n          var marker = document.createElement(\"div\");\n          marker.style.display = \"inline-block\";\n          marker.style.verticalAlign = \"baseline\";\n          marker.style.width = this.options.baselineMarkerSize + \"px\";\n          marker.style.height = this.options.baselineMarkerSize + \"px\";\n          marker.style.overflow = \"hidden\";\n\n          return marker;\n      };\n\n      return TextMetrics;\n  }(Class));\n\n  TextMetrics.current = new TextMetrics();\n\n  function measureText(text, style, measureBox) {\n      return TextMetrics.current.measure(text, style, measureBox);\n  }\n\n  var util = /*#__PURE__*/Object.freeze({\n      __proto__: null,\n      DEG_TO_RAD: DEG_TO_RAD,\n      LRUCache: LRUCache,\n      MAX_NUM: MAX_NUM,\n      MIN_NUM: MIN_NUM,\n      TextMetrics: TextMetrics,\n      append: append,\n      arabicToRoman: arabicToRoman,\n      bindEvents: bindEvents,\n      createPromise: createPromise,\n      defined: defined,\n      definitionId: definitionId,\n      deg: deg,\n      elementOffset: elementOffset,\n      elementPadding: elementPadding,\n      elementScale: elementScale,\n      elementSize: elementSize,\n      elementStyles: elementStyles,\n      encodeBase64: encodeBase64,\n      eventCoordinates: eventCoordinates,\n      eventElement: eventElement,\n      hashKey: hashKey,\n      isTransparent: isTransparent,\n      last: last,\n      limitValue: limitValue,\n      measureText: measureText,\n      mergeSort: mergeSort,\n      normalizeText: normalizeText,\n      now: now,\n      objectKey: objectKey,\n      promiseAll: promiseAll,\n      rad: rad,\n      round: round,\n      unbindEvents: unbindEvents,\n      valueOrDefault: valueOrDefault\n  });\n\n  var toString = {}.toString;\n\n  var OptionsStore = (function (HasObservers) {\n      function OptionsStore(options, prefix) {\n          var this$1$1 = this;\n          if ( prefix === void 0 ) prefix = \"\";\n\n          HasObservers.call(this);\n\n          this.prefix = prefix;\n\n          for (var field in options) {\n              var member = options[field];\n              member = this$1$1._wrap(member, field);\n              this$1$1[field] = member;\n          }\n      }\n\n      if ( HasObservers ) OptionsStore.__proto__ = HasObservers;\n      OptionsStore.prototype = Object.create( HasObservers && HasObservers.prototype );\n      OptionsStore.prototype.constructor = OptionsStore;\n\n      OptionsStore.prototype.get = function get (field) {\n          var parts = field.split(\".\");\n          var result = this;\n\n          while (parts.length && result) {\n              var part = parts.shift();\n              result = result[part];\n          }\n\n          return result;\n      };\n\n      OptionsStore.prototype.set = function set (field, value) {\n          var current = this.get(field);\n\n          if (current !== value) {\n              this._set(field, this._wrap(value, field));\n              this.optionsChange({\n                  field: this.prefix + field,\n                  value: value\n              });\n          }\n      };\n\n      OptionsStore.prototype._set = function _set (field, value) {\n          var this$1$1 = this;\n\n          var composite = field.indexOf(\".\") >= 0;\n          var parentObj = this;\n          var fieldName = field;\n\n          if (composite) {\n              var parts = fieldName.split(\".\");\n              var prefix = this.prefix;\n\n              while (parts.length > 1) {\n                  fieldName = parts.shift();\n                  prefix += fieldName + \".\";\n\n                  var obj = parentObj[fieldName];\n\n                  if (!obj) {\n                      obj = new OptionsStore({}, prefix);\n                      obj.addObserver(this$1$1);\n                      parentObj[fieldName] = obj;\n                  }\n                  parentObj = obj;\n              }\n              fieldName = parts[0];\n          }\n\n          parentObj._clear(fieldName);\n          parentObj[fieldName] = value;\n      };\n\n      OptionsStore.prototype._clear = function _clear (field) {\n          var current = this[field];\n          if (current && current.removeObserver) {\n              current.removeObserver(this);\n          }\n      };\n\n      OptionsStore.prototype._wrap = function _wrap (object, field) {\n          var type = toString.call(object);\n          var wrapped = object;\n\n          if (wrapped !== null && defined(wrapped) && type === \"[object Object]\") {\n              if (!(object instanceof OptionsStore) && !(object instanceof Class)) {\n                  wrapped = new OptionsStore(wrapped, this.prefix + field + \".\");\n              }\n\n              wrapped.addObserver(this);\n          }\n\n          return wrapped;\n      };\n\n      return OptionsStore;\n  }(HasObservers));\n\n  function setAccessor(field) {\n      return function(value) {\n          if (this[field] !== value) {\n              this[field] = value;\n              this.geometryChange();\n          }\n\n          return this;\n      };\n  }\n\n  function getAccessor(field) {\n      return function() {\n          return this[field];\n      };\n  }\n\n  function defineAccessors(fn, fields) {\n      for (var i = 0; i < fields.length; i++) {\n          var name = fields[i];\n          var capitalized = name.charAt(0).toUpperCase() +\n                            name.substring(1, name.length);\n\n          fn[\"set\" + capitalized] = setAccessor(name);\n          fn[\"get\" + capitalized] = getAccessor(name);\n      }\n  }\n\n  var withAccessors = function (TBase, names) {\n      var result = (function (TBase) {\n          function result () {\n              TBase.apply(this, arguments);\n          }if ( TBase ) result.__proto__ = TBase;\n          result.prototype = Object.create( TBase && TBase.prototype );\n          result.prototype.constructor = result;\n\n          \n\n          return result;\n      }(TBase));\n      defineAccessors(result.prototype, names);\n\n      return result;\n  };\n\n  function toMatrix(transformation) {\n      if (transformation && typeof transformation.matrix === \"function\") {\n          return transformation.matrix();\n      }\n\n      return transformation;\n  }\n\n  var Point = (function (superclass) {\n      function Point(x, y) {\n          superclass.call(this);\n\n          this.x = x || 0;\n          this.y = y || 0;\n      }\n\n      if ( superclass ) Point.__proto__ = superclass;\n      Point.prototype = Object.create( superclass && superclass.prototype );\n      Point.prototype.constructor = Point;\n\n      var staticAccessors = { ZERO: { configurable: true } };\n\n      Point.prototype.equals = function equals (other) {\n          return other && other.x === this.x && other.y === this.y;\n      };\n\n      Point.prototype.clone = function clone () {\n          return new Point(this.x, this.y);\n      };\n\n      Point.prototype.rotate = function rotate (angle, origin) {\n          var originPoint = Point.create(origin) || Point.ZERO;\n\n          return this.transform(Matrix.rotate(angle, originPoint.x, originPoint.y));\n      };\n\n      Point.prototype.translate = function translate (x, y) {\n          this.x += x;\n          this.y += y;\n\n          this.geometryChange();\n\n          return this;\n      };\n\n      Point.prototype.translateWith = function translateWith (point) {\n          return this.translate(point.x, point.y);\n      };\n\n      Point.prototype.move = function move (x, y) {\n          this.x = this.y = 0;\n          return this.translate(x, y);\n      };\n\n      Point.prototype.scale = function scale (scaleX, scaleY) {\n          if ( scaleY === void 0 ) scaleY = scaleX;\n\n          this.x *= scaleX;\n          this.y *= scaleY;\n\n          this.geometryChange();\n\n          return this;\n      };\n\n      Point.prototype.scaleCopy = function scaleCopy (scaleX, scaleY) {\n          return this.clone().scale(scaleX, scaleY);\n      };\n\n      Point.prototype.transform = function transform (transformation) {\n          var matrix = toMatrix(transformation);\n          var ref = this;\n          var x = ref.x;\n          var y = ref.y;\n\n          this.x = matrix.a * x + matrix.c * y + matrix.e;\n          this.y = matrix.b * x + matrix.d * y + matrix.f;\n\n          this.geometryChange();\n\n          return this;\n      };\n\n      Point.prototype.transformCopy = function transformCopy (transformation) {\n          var point = this.clone();\n\n          if (transformation) {\n              point.transform(transformation);\n          }\n\n          return point;\n      };\n\n      Point.prototype.distanceTo = function distanceTo (point) {\n          var dx = this.x - point.x;\n          var dy = this.y - point.y;\n\n          return Math.sqrt(dx * dx + dy * dy);\n      };\n\n      Point.prototype.round = function round$1 (digits) {\n          this.x = round(this.x, digits);\n          this.y = round(this.y, digits);\n\n          this.geometryChange();\n\n          return this;\n      };\n\n      Point.prototype.toArray = function toArray (digits) {\n          var doRound = defined(digits);\n          var x = doRound ? round(this.x, digits) : this.x;\n          var y = doRound ? round(this.y, digits) : this.y;\n\n          return [ x, y ];\n      };\n\n      Point.prototype.toString = function toString (digits, separator) {\n          if ( separator === void 0 ) separator = \" \";\n\n          var ref = this;\n          var x = ref.x;\n          var y = ref.y;\n\n          if (defined(digits)) {\n              x = round(x, digits);\n              y = round(y, digits);\n          }\n\n          return x + separator + y;\n      };\n\n      Point.create = function create (arg0, arg1) {\n          if (defined(arg0)) {\n              if (arg0 instanceof Point) {\n                  return arg0;\n              } else if (arguments.length === 1 && arg0.length === 2) {\n                  return new Point(arg0[0], arg0[1]);\n              }\n\n              return new Point(arg0, arg1);\n          }\n      };\n\n      Point.min = function min () {\n          var arguments$1 = arguments;\n\n          var minX = MAX_NUM;\n          var minY = MAX_NUM;\n\n          for (var i = 0; i < arguments.length; i++) {\n              var point = arguments$1[i];\n              minX = Math.min(point.x, minX);\n              minY = Math.min(point.y, minY);\n          }\n\n          return new Point(minX, minY);\n      };\n\n      Point.max = function max () {\n          var arguments$1 = arguments;\n\n          var maxX = MIN_NUM;\n          var maxY = MIN_NUM;\n\n          for (var i = 0; i < arguments.length; i++) {\n              var point = arguments$1[i];\n              maxX = Math.max(point.x, maxX);\n              maxY = Math.max(point.y, maxY);\n          }\n\n          return new Point(maxX, maxY);\n      };\n\n      Point.minPoint = function minPoint () {\n          return new Point(MIN_NUM, MIN_NUM);\n      };\n\n      Point.maxPoint = function maxPoint () {\n          return new Point(MAX_NUM, MAX_NUM);\n      };\n\n      staticAccessors.ZERO.get = function () {\n          return new Point(0, 0);\n      };\n\n      Object.defineProperties( Point, staticAccessors );\n\n      return Point;\n  }(withAccessors(HasObservers, [ \"x\", \"y\" ])));\n\n  var Size = (function (superclass) {\n      function Size(width, height) {\n          superclass.call(this);\n\n          this.width = width || 0;\n          this.height = height || 0;\n      }\n\n      if ( superclass ) Size.__proto__ = superclass;\n      Size.prototype = Object.create( superclass && superclass.prototype );\n      Size.prototype.constructor = Size;\n\n      var staticAccessors = { ZERO: { configurable: true } };\n\n      Size.prototype.equals = function equals (other) {\n          return other && other.width === this.width && other.height === this.height;\n      };\n\n      Size.prototype.clone = function clone () {\n          return new Size(this.width, this.height);\n      };\n\n      Size.prototype.toArray = function toArray (digits) {\n          var doRound = defined(digits);\n          var width = doRound ? round(this.width, digits) : this.width;\n          var height = doRound ? round(this.height, digits) : this.height;\n\n          return [ width, height ];\n      };\n\n      Size.create = function create (arg0, arg1) {\n          if (defined(arg0)) {\n              if (arg0 instanceof Size) {\n                  return arg0;\n              } else if (arguments.length === 1 && arg0.length === 2) {\n                  return new Size(arg0[0], arg0[1]);\n              }\n\n              return new Size(arg0, arg1);\n          }\n      };\n\n      staticAccessors.ZERO.get = function () {\n          return new Size(0, 0);\n      };\n\n      Object.defineProperties( Size, staticAccessors );\n\n      return Size;\n  }(withAccessors(HasObservers, [ \"width\", \"height\" ])));\n\n  var Rect$1 = (function (HasObservers) {\n      function Rect(origin, size, cornerRadius) {\n          if ( origin === void 0 ) origin = new Point();\n          if ( size === void 0 ) size = new Size();\n          if ( cornerRadius === void 0 ) cornerRadius = 0;\n\n          HasObservers.call(this);\n\n          this.setOrigin(origin);\n          this.setSize(size);\n          this.setCornerRadius(cornerRadius);\n      }\n\n      if ( HasObservers ) Rect.__proto__ = HasObservers;\n      Rect.prototype = Object.create( HasObservers && HasObservers.prototype );\n      Rect.prototype.constructor = Rect;\n\n      Rect.prototype.clone = function clone () {\n          return new Rect(\n              this.origin.clone(),\n              this.size.clone()\n          );\n      };\n\n      Rect.prototype.equals = function equals (other) {\n          return other &&\n                 other.origin.equals(this.origin) &&\n                 other.size.equals(this.size);\n      };\n\n      Rect.prototype.setOrigin = function setOrigin (value) {\n          this._observerField(\"origin\", Point.create(value));\n          this.geometryChange();\n          return this;\n      };\n\n      Rect.prototype.getOrigin = function getOrigin () {\n          return this.origin;\n      };\n\n      Rect.prototype.setCornerRadius = function setCornerRadius (radius) {\n          this.cornerRadius = Array.isArray(radius) ? radius : [ radius, radius ];\n\n          this.geometryChange();\n          return this;\n      };\n\n      Rect.prototype.getCornerRadius = function getCornerRadius () {\n          return this.cornerRadius;\n      };\n\n      Rect.prototype.setSize = function setSize (value) {\n          this._observerField(\"size\", Size.create(value));\n          this.geometryChange();\n          return this;\n      };\n\n      Rect.prototype.getSize = function getSize () {\n          return this.size;\n      };\n\n      Rect.prototype.width = function width () {\n          return this.size.width;\n      };\n\n      Rect.prototype.height = function height () {\n          return this.size.height;\n      };\n\n      Rect.prototype.topLeft = function topLeft () {\n          return this.origin.clone();\n      };\n\n      Rect.prototype.bottomRight = function bottomRight () {\n          return this.origin.clone().translate(this.width(), this.height());\n      };\n\n      Rect.prototype.topRight = function topRight () {\n          return this.origin.clone().translate(this.width(), 0);\n      };\n\n      Rect.prototype.bottomLeft = function bottomLeft () {\n          return this.origin.clone().translate(0, this.height());\n      };\n\n      Rect.prototype.center = function center () {\n          return this.origin.clone().translate(this.width() / 2, this.height() / 2);\n      };\n\n      Rect.prototype.bbox = function bbox (matrix) {\n          var tl = this.topLeft().transformCopy(matrix);\n          var tr = this.topRight().transformCopy(matrix);\n          var br = this.bottomRight().transformCopy(matrix);\n          var bl = this.bottomLeft().transformCopy(matrix);\n\n          return Rect.fromPoints(tl, tr, br, bl);\n      };\n\n      Rect.prototype.transformCopy = function transformCopy (m) {\n          return Rect.fromPoints(\n              this.topLeft().transform(m),\n              this.bottomRight().transform(m)\n          );\n      };\n\n      Rect.prototype.expand = function expand (x, y) {\n          if ( y === void 0 ) y = x;\n\n\n          this.size.width += 2 * x;\n          this.size.height += 2 * y;\n\n          this.origin.translate(-x, -y);\n\n          return this;\n      };\n\n      Rect.prototype.expandCopy = function expandCopy (x, y) {\n          return this.clone().expand(x, y);\n      };\n\n      Rect.prototype.containsPoint = function containsPoint (point) {\n          var origin = this.origin;\n          var bottomRight = this.bottomRight();\n          return !(point.x < origin.x || point.y < origin.y || bottomRight.x < point.x || bottomRight.y < point.y);\n      };\n\n      Rect.prototype._isOnPath = function _isOnPath (point, width) {\n          var rectOuter = this.expandCopy(width, width);\n          var rectInner = this.expandCopy(-width, -width);\n\n          return rectOuter.containsPoint(point) && !rectInner.containsPoint(point);\n      };\n\n      Rect.fromPoints = function fromPoints () {\n          var topLeft = Point.min.apply(null, arguments);\n          var bottomRight = Point.max.apply(null, arguments);\n          var size = new Size(\n              bottomRight.x - topLeft.x,\n              bottomRight.y - topLeft.y\n          );\n\n          return new Rect(topLeft, size);\n      };\n\n      Rect.union = function union (a, b) {\n          return Rect.fromPoints(\n              Point.min(a.topLeft(), b.topLeft()),\n              Point.max(a.bottomRight(), b.bottomRight())\n          );\n      };\n\n      Rect.intersect = function intersect (a, b) {\n          var rect1 = {\n              left: a.topLeft().x,\n              top: a.topLeft().y,\n              right: a.bottomRight().x,\n              bottom: a.bottomRight().y\n          };\n\n          var rect2 = {\n              left: b.topLeft().x,\n              top: b.topLeft().y,\n              right: b.bottomRight().x,\n              bottom: b.bottomRight().y\n          };\n\n          if (rect1.left <= rect2.right &&\n              rect2.left <= rect1.right &&\n              rect1.top <= rect2.bottom &&\n              rect2.top <= rect1.bottom) {\n              return Rect.fromPoints(\n                  new Point(Math.max(rect1.left, rect2.left), Math.max(rect1.top, rect2.top)),\n                  new Point(Math.min(rect1.right, rect2.right), Math.min(rect1.bottom, rect2.bottom))\n              );\n          }\n      };\n\n      return Rect;\n  }(HasObservers));\n\n  var Transformation = (function (HasObservers) {\n      function Transformation(matrix) {\n          if ( matrix === void 0 ) matrix = Matrix.unit();\n\n          HasObservers.call(this);\n\n          this._matrix = matrix;\n      }\n\n      if ( HasObservers ) Transformation.__proto__ = HasObservers;\n      Transformation.prototype = Object.create( HasObservers && HasObservers.prototype );\n      Transformation.prototype.constructor = Transformation;\n\n      Transformation.prototype.clone = function clone () {\n          return new Transformation(\n              this._matrix.clone()\n          );\n      };\n\n      Transformation.prototype.equals = function equals (other) {\n          return other &&\n                 other._matrix.equals(this._matrix);\n      };\n\n      Transformation.prototype.translate = function translate (x, y) {\n          this._matrix = this._matrix.multiplyCopy(Matrix.translate(x, y));\n\n          this._optionsChange();\n          return this;\n      };\n\n      Transformation.prototype.scale = function scale (scaleX, scaleY, origin) {\n          if ( scaleY === void 0 ) scaleY = scaleX;\n          if ( origin === void 0 ) origin = null;\n\n          var originPoint = origin;\n\n          if (originPoint) {\n              originPoint = Point.create(originPoint);\n              this._matrix = this._matrix.multiplyCopy(Matrix.translate(originPoint.x, originPoint.y));\n          }\n\n          this._matrix = this._matrix.multiplyCopy(Matrix.scale(scaleX, scaleY));\n\n          if (originPoint) {\n              this._matrix = this._matrix.multiplyCopy(Matrix.translate(-originPoint.x, -originPoint.y));\n          }\n\n          this._optionsChange();\n          return this;\n      };\n\n      Transformation.prototype.rotate = function rotate (angle, origin) {\n          var originPoint = Point.create(origin) || Point.ZERO;\n\n          this._matrix = this._matrix.multiplyCopy(Matrix.rotate(angle, originPoint.x, originPoint.y));\n\n          this._optionsChange();\n          return this;\n      };\n\n      Transformation.prototype.multiply = function multiply (transformation) {\n          var matrix = toMatrix(transformation);\n\n          this._matrix = this._matrix.multiplyCopy(matrix);\n\n          this._optionsChange();\n          return this;\n      };\n\n      Transformation.prototype.matrix = function matrix (value) {\n          if (value) {\n              this._matrix = value;\n              this._optionsChange();\n              return this;\n          }\n\n          return this._matrix;\n      };\n\n      Transformation.prototype._optionsChange = function _optionsChange () {\n          this.optionsChange({\n              field: \"transform\",\n              value: this\n          });\n      };\n\n      return Transformation;\n  }(HasObservers));\n\n  function transform(matrix) {\n      if (matrix === null) {\n          return null;\n      }\n\n      if (matrix instanceof Transformation) {\n          return matrix;\n      }\n\n      return new Transformation(matrix);\n  }\n\n  var DASH_ARRAYS = {\n      dot: [ 1.5, 3.5 ],\n      dash: [ 4, 3.5 ],\n      longdash: [ 8, 3.5 ],\n      dashdot: [ 3.5, 3.5, 1.5, 3.5 ],\n      longdashdot: [ 8, 3.5, 1.5, 3.5 ],\n      longdashdotdot: [ 8, 3.5, 1.5, 3.5, 1.5, 3.5 ]\n  };\n\n  var SOLID = \"solid\";\n  var BUTT = \"butt\";\n  var PATTERN = \"Pattern\";\n\n  var Element$1 = (function (HasObservers) {\n      function Element(options) {\n          HasObservers.call(this);\n\n          this._initOptions(options);\n      }\n\n      if ( HasObservers ) Element.__proto__ = HasObservers;\n      Element.prototype = Object.create( HasObservers && HasObservers.prototype );\n      Element.prototype.constructor = Element;\n\n      var prototypeAccessors = { nodeType: { configurable: true } };\n\n      prototypeAccessors.nodeType.get = function () {\n          return \"Rect\";\n      };\n\n      Element.prototype._initOptions = function _initOptions (options) {\n          if ( options === void 0 ) options = {};\n\n          var clip = options.clip;\n          var transform$1 = options.transform;\n\n          if (transform$1) {\n              options.transform = transform(transform$1);\n          }\n\n          if (clip && !clip.id) {\n              clip.id = definitionId();\n          }\n\n          this.options = new OptionsStore(options);\n          this.options.addObserver(this);\n      };\n\n      Element.prototype.transform = function transform$1 (value) {\n          if (defined(value)) {\n              this.options.set(\"transform\", transform(value));\n          } else {\n              return this.options.get(\"transform\");\n          }\n      };\n\n      Element.prototype.parentTransform = function parentTransform () {\n          var element = this;\n          var parentMatrix;\n\n          while (element.parent) {\n              element = element.parent;\n              var transformation = element.transform();\n              if (transformation) {\n                  parentMatrix = transformation.matrix().multiplyCopy(parentMatrix || Matrix.unit());\n              }\n          }\n\n          if (parentMatrix) {\n              return transform(parentMatrix);\n          }\n      };\n\n      Element.prototype.currentTransform = function currentTransform (parentTransform) {\n          if ( parentTransform === void 0 ) parentTransform = this.parentTransform();\n\n          var elementTransform = this.transform();\n          var elementMatrix = toMatrix(elementTransform);\n\n          var parentMatrix = toMatrix(parentTransform);\n          var combinedMatrix;\n\n          if (elementMatrix && parentMatrix) {\n              combinedMatrix = parentMatrix.multiplyCopy(elementMatrix);\n          } else {\n              combinedMatrix = elementMatrix || parentMatrix;\n          }\n\n          if (combinedMatrix) {\n              return transform(combinedMatrix);\n          }\n      };\n\n      Element.prototype.visible = function visible (value) {\n          if (defined(value)) {\n              this.options.set(\"visible\", value);\n              return this;\n          }\n\n          return this.options.get(\"visible\") !== false;\n      };\n\n      Element.prototype.clip = function clip (value) {\n          var options = this.options;\n          if (defined(value)) {\n              if (value && !value.id) {\n                  value.id = definitionId();\n              }\n              options.set(\"clip\", value);\n              return this;\n          }\n\n          return options.get(\"clip\");\n      };\n\n      Element.prototype.opacity = function opacity (value) {\n          if (defined(value)) {\n              this.options.set(\"opacity\", value);\n              return this;\n          }\n\n          return valueOrDefault(this.options.get(\"opacity\"), 1);\n      };\n\n      Element.prototype.className = function className (value) {\n          if (defined(value)) {\n              this.options.set(\"className\", value);\n              return this;\n          }\n\n          return this.options.get(\"className\");\n      };\n\n      Element.prototype.clippedBBox = function clippedBBox (transformation) {\n          var bbox = this._clippedBBox(transformation);\n          if (bbox) {\n              var clip = this.clip();\n              return clip ? Rect$1.intersect(bbox, clip.bbox(transformation)) : bbox;\n          }\n      };\n\n      Element.prototype.containsPoint = function containsPoint (point, parentTransform) {\n          if (this.visible()) {\n              var transform = this.currentTransform(parentTransform);\n              var transformedPoint = point;\n              if (transform) {\n                  transformedPoint = point.transformCopy(transform.matrix().invert());\n              }\n              return (this._hasFill() && this._containsPoint(transformedPoint)) || (this._isOnPath && this._hasStroke() && this._isOnPath(transformedPoint));\n          }\n          return false;\n      };\n\n      Element.prototype._hasFill = function _hasFill () {\n          var fill = this.options.fill;\n          return fill && (fill.nodeType === PATTERN || !isTransparent(fill.color));\n      };\n\n      Element.prototype._hasStroke = function _hasStroke () {\n          var stroke = this.options.stroke;\n          return stroke && stroke.width > 0 && !isTransparent(stroke.color);\n      };\n\n      Element.prototype._clippedBBox = function _clippedBBox (transformation) {\n          return this.bbox(transformation);\n      };\n\n      Object.defineProperties( Element.prototype, prototypeAccessors );\n\n      return Element;\n  }(HasObservers));\n\n  function ellipseExtremeAngles(center, rx, ry, matrix) {\n      var extremeX = 0;\n      var extremeY = 0;\n\n      if (matrix) {\n          extremeX = Math.atan2(matrix.c * ry, matrix.a * rx);\n          if (matrix.b !== 0) {\n              extremeY = Math.atan2(matrix.d * ry, matrix.b * rx);\n          }\n      }\n\n      return {\n          x: extremeX,\n          y: extremeY\n      };\n  }\n\n  var PI_DIV_2 = Math.PI / 2;\n\n  var Circle$1 = (function (superclass) {\n      function Circle(center, radius) {\n          if ( center === void 0 ) center = new Point();\n          if ( radius === void 0 ) radius = 0;\n\n          superclass.call(this);\n\n          this.setCenter(center);\n          this.setRadius(radius);\n      }\n\n      if ( superclass ) Circle.__proto__ = superclass;\n      Circle.prototype = Object.create( superclass && superclass.prototype );\n      Circle.prototype.constructor = Circle;\n\n      Circle.prototype.setCenter = function setCenter (value) {\n          this._observerField(\"center\", Point.create(value));\n          this.geometryChange();\n          return this;\n      };\n\n      Circle.prototype.getCenter = function getCenter () {\n          return this.center;\n      };\n\n      Circle.prototype.equals = function equals (other) {\n          return other &&\n                 other.center.equals(this.center) &&\n                 other.radius === this.radius;\n      };\n\n      Circle.prototype.clone = function clone () {\n          return new Circle(this.center.clone(), this.radius);\n      };\n\n      Circle.prototype.pointAt = function pointAt (angle) {\n          return this._pointAt(rad(angle));\n      };\n\n      Circle.prototype.bbox = function bbox (matrix) {\n          var this$1$1 = this;\n\n          var extremeAngles = ellipseExtremeAngles(this.center, this.radius, this.radius, matrix);\n          var minPoint = Point.maxPoint();\n          var maxPoint = Point.minPoint();\n\n          for (var i = 0; i < 4; i++) {\n              var currentPointX = this$1$1._pointAt(extremeAngles.x + i * PI_DIV_2).transformCopy(matrix);\n              var currentPointY = this$1$1._pointAt(extremeAngles.y + i * PI_DIV_2).transformCopy(matrix);\n              var currentPoint = new Point(currentPointX.x, currentPointY.y);\n\n              minPoint = Point.min(minPoint, currentPoint);\n              maxPoint = Point.max(maxPoint, currentPoint);\n          }\n\n          return Rect$1.fromPoints(minPoint, maxPoint);\n      };\n\n      Circle.prototype._pointAt = function _pointAt (angle) {\n          var ref = this;\n          var center = ref.center;\n          var radius = ref.radius;\n\n          return new Point(\n              center.x + radius * Math.cos(angle),\n              center.y + radius * Math.sin(angle)\n          );\n      };\n\n      Circle.prototype.containsPoint = function containsPoint (point) {\n          var ref = this;\n          var center = ref.center;\n          var radius = ref.radius;\n          var inCircle = Math.pow(point.x - center.x, 2) +\n              Math.pow(point.y - center.y, 2) <= Math.pow(radius, 2);\n          return inCircle;\n      };\n\n      Circle.prototype._isOnPath = function _isOnPath (point, width) {\n          var ref = this;\n          var center = ref.center;\n          var radius = ref.radius;\n          var pointDistance = center.distanceTo(point);\n\n          return radius - width <= pointDistance && pointDistance <= radius + width;\n      };\n\n      return Circle;\n  }(withAccessors(HasObservers, [ \"radius\" ])));\n\n  var GRADIENT = \"Gradient\";\n\n  var paintable = function (TBase) { return (\n      (function (TBase) {\n          function anonymous () {\n              TBase.apply(this, arguments);\n          }\n\n          if ( TBase ) anonymous.__proto__ = TBase;\n          anonymous.prototype = Object.create( TBase && TBase.prototype );\n          anonymous.prototype.constructor = anonymous;\n\n          anonymous.prototype.fill = function fill (color, opacity) {\n              var options = this.options;\n\n              if (defined(color)) {\n                  if (color && color.nodeType !== GRADIENT) {\n                      var newFill = {\n                          color: color\n                      };\n                      if (defined(opacity)) {\n                          newFill.opacity = opacity;\n                      }\n                      options.set(\"fill\", newFill);\n                  } else {\n                      options.set(\"fill\", color);\n                  }\n\n                  return this;\n              }\n\n              return options.get(\"fill\");\n          };\n\n          anonymous.prototype.stroke = function stroke (color, width, opacity) {\n              if (defined(color)) {\n                  this.options.set(\"stroke.color\", color);\n\n                  if (defined(width)) {\n                      this.options.set(\"stroke.width\", width);\n                  }\n\n                  if (defined(opacity)) {\n                      this.options.set(\"stroke.opacity\", opacity);\n                  }\n\n                  return this;\n              }\n\n              return this.options.get(\"stroke\");\n          };\n\n          return anonymous;\n      }(TBase))\n  ); };\n\n  var IDENTITY_MATRIX_HASH = Matrix.IDENTITY.toString();\n\n  var measurable = function (TBase) { return (\n      (function (TBase) {\n          function anonymous () {\n              TBase.apply(this, arguments);\n          }\n\n          if ( TBase ) anonymous.__proto__ = TBase;\n          anonymous.prototype = Object.create( TBase && TBase.prototype );\n          anonymous.prototype.constructor = anonymous;\n\n          anonymous.prototype.bbox = function bbox (transformation) {\n              var combinedMatrix = toMatrix(this.currentTransform(transformation));\n              var matrixHash = combinedMatrix ? combinedMatrix.toString() : IDENTITY_MATRIX_HASH;\n              var bbox;\n\n              if (this._bboxCache && this._matrixHash === matrixHash) {\n                  bbox = this._bboxCache.clone();\n              } else {\n                  bbox = this._bbox(combinedMatrix);\n                  this._bboxCache = bbox ? bbox.clone() : null;\n                  this._matrixHash = matrixHash;\n              }\n\n              var strokeWidth = this.options.get(\"stroke.width\");\n              if (strokeWidth && bbox) {\n                  bbox.expand(strokeWidth / 2);\n              }\n\n              return bbox;\n          };\n\n          anonymous.prototype.geometryChange = function geometryChange () {\n              delete this._bboxCache;\n              this.trigger(\"geometryChange\", {\n                  element: this\n              });\n          };\n\n          return anonymous;\n      }(TBase))\n  ); };\n\n  function geometryAccessor(name) {\n      var fieldName = \"_\" + name;\n      return function(value) {\n          if (defined(value)) {\n              this._observerField(fieldName, value);\n              this.geometryChange();\n              return this;\n          }\n\n          return this[fieldName];\n      };\n  }\n\n  function defineGeometryAccessors(fn, names) {\n      for (var i = 0; i < names.length; i++) {\n          fn[names[i]] = geometryAccessor(names[i]);\n      }\n  }\n\n  var withGeometry = function (TBase, names) {\n      if ( names === void 0 ) names = [ \"geometry\" ];\n\n      var result = (function (TBase) {\n          function result () {\n              TBase.apply(this, arguments);\n          }if ( TBase ) result.__proto__ = TBase;\n          result.prototype = Object.create( TBase && TBase.prototype );\n          result.prototype.constructor = result;\n\n          \n\n          return result;\n      }(TBase));\n      defineGeometryAccessors(result.prototype, names);\n\n      return result;\n  };\n\n  var DEFAULT_STROKE$1 = \"#000\";\n\n  var Circle = (function (superclass) {\n      function Circle(geometry, options) {\n          if ( geometry === void 0 ) geometry = new Circle$1();\n          if ( options === void 0 ) options = {};\n\n          superclass.call(this, options);\n\n          this.geometry(geometry);\n\n          if (!defined(this.options.stroke)) {\n              this.stroke(DEFAULT_STROKE$1);\n          }\n      }\n\n      if ( superclass ) Circle.__proto__ = superclass;\n      Circle.prototype = Object.create( superclass && superclass.prototype );\n      Circle.prototype.constructor = Circle;\n\n      var prototypeAccessors = { nodeType: { configurable: true } };\n\n      prototypeAccessors.nodeType.get = function () {\n          return \"Circle\";\n      };\n\n      Circle.prototype.rawBBox = function rawBBox () {\n          return this._geometry.bbox();\n      };\n\n      Circle.prototype._bbox = function _bbox (matrix) {\n          return this._geometry.bbox(matrix);\n      };\n\n      Circle.prototype._containsPoint = function _containsPoint (point) {\n          return this.geometry().containsPoint(point);\n      };\n\n      Circle.prototype._isOnPath = function _isOnPath (point) {\n          return this.geometry()._isOnPath(point, this.options.stroke.width / 2);\n      };\n\n      Object.defineProperties( Circle.prototype, prototypeAccessors );\n\n      return Circle;\n  }(paintable(measurable(withGeometry(Element$1)))));\n\n  var PRECISION = 10;\n\n  function close(a, b, tolerance) {\n      if ( tolerance === void 0 ) tolerance = PRECISION;\n\n      return round(Math.abs(a - b), tolerance) === 0;\n  }\n\n  function closeOrLess(a, b, tolerance) {\n      return a < b || close(a, b, tolerance);\n  }\n\n  function lineIntersection(p0, p1, p2, p3) {\n      var s1x = p1.x - p0.x;\n      var s2x = p3.x - p2.x;\n      var s1y = p1.y - p0.y;\n      var s2y = p3.y - p2.y;\n      var nx = p0.x - p2.x;\n      var ny = p0.y - p2.y;\n      var d = s1x * s2y - s2x * s1y;\n      var s = (s1x * ny - s1y * nx) / d;\n      var t = (s2x * ny - s2y * nx) / d;\n\n      if (s >= 0 && s <= 1 && t >= 0 && t <= 1) {\n          return new Point(p0.x + t * s1x, p0.y + t * s1y);\n      }\n  }\n\n  var MAX_INTERVAL = 45;\n  var pow = Math.pow;\n  var accessors = [ \"radiusX\", \"radiusY\", \"startAngle\", \"endAngle\", \"anticlockwise\" ];\n\n  var Arc$1 = (function (superclass) {\n      function Arc(center, options) {\n          if ( center === void 0 ) center = new Point();\n          if ( options === void 0 ) options = {};\n\n          superclass.call(this);\n\n          this.setCenter(center);\n\n          this.radiusX = options.radiusX;\n          this.radiusY = options.radiusY || options.radiusX;\n          this.startAngle = options.startAngle;\n          this.endAngle = options.endAngle;\n          this.anticlockwise = options.anticlockwise || false;\n          this.xRotation = options.xRotation;\n      }\n\n      if ( superclass ) Arc.__proto__ = superclass;\n      Arc.prototype = Object.create( superclass && superclass.prototype );\n      Arc.prototype.constructor = Arc;\n\n      Arc.prototype.clone = function clone () {\n          return new Arc(this.center, {\n              radiusX: this.radiusX,\n              radiusY: this.radiusY,\n              startAngle: this.startAngle,\n              endAngle: this.endAngle,\n              anticlockwise: this.anticlockwise\n          });\n      };\n\n      Arc.prototype.setCenter = function setCenter (value) {\n          this._observerField(\"center\", Point.create(value));\n          this.geometryChange();\n          return this;\n      };\n\n      Arc.prototype.getCenter = function getCenter () {\n          return this.center;\n      };\n\n      Arc.prototype.pointAt = function pointAt (angle) {\n          var center = this.center;\n          var radian = rad(angle);\n\n          return new Point(\n              center.x + this.radiusX * Math.cos(radian),\n              center.y + this.radiusY * Math.sin(radian)\n          );\n      };\n\n      Arc.prototype.curvePoints = function curvePoints () {\n          var this$1$1 = this;\n\n          var startAngle = this.startAngle;\n          var dir = this.anticlockwise ? -1 : 1;\n          var curvePoints = [ this.pointAt(startAngle) ];\n          var interval = this._arcInterval();\n          var intervalAngle = interval.endAngle - interval.startAngle;\n          var subIntervalsCount = Math.ceil(intervalAngle / MAX_INTERVAL);\n          var subIntervalAngle = intervalAngle / subIntervalsCount;\n          var currentAngle = startAngle;\n          var transformation;\n          if (this.xRotation) {\n              transformation = transform().rotate(this.xRotation, this.center);\n          }\n\n          for (var i = 1; i <= subIntervalsCount; i++) {\n              var nextAngle = currentAngle + dir * subIntervalAngle;\n              var points = this$1$1._intervalCurvePoints(currentAngle, nextAngle, transformation);\n\n              curvePoints.push(points.cp1, points.cp2, points.p2);\n              currentAngle = nextAngle;\n          }\n\n          return curvePoints;\n      };\n\n      Arc.prototype.bbox = function bbox (matrix) {\n          var this$1$1 = this;\n\n          var interval = this._arcInterval();\n          var startAngle = interval.startAngle;\n          var endAngle = interval.endAngle;\n          var extremeAngles = ellipseExtremeAngles(this.center, this.radiusX, this.radiusY, matrix);\n          var extremeX = deg(extremeAngles.x);\n          var extremeY = deg(extremeAngles.y);\n          var endPoint = this.pointAt(endAngle).transformCopy(matrix);\n          var currentAngleX = bboxStartAngle(extremeX, startAngle);\n          var currentAngleY = bboxStartAngle(extremeY, startAngle);\n          var currentPoint = this.pointAt(startAngle).transformCopy(matrix);\n          var minPoint = Point.min(currentPoint, endPoint);\n          var maxPoint = Point.max(currentPoint, endPoint);\n\n          while (currentAngleX < endAngle || currentAngleY < endAngle) {\n              var currentPointX = (void 0);\n              if (currentAngleX < endAngle) {\n                  currentPointX = this$1$1.pointAt(currentAngleX).transformCopy(matrix);\n                  currentAngleX += 90;\n              }\n\n              var currentPointY = (void 0);\n              if (currentAngleY < endAngle) {\n                  currentPointY = this$1$1.pointAt(currentAngleY).transformCopy(matrix);\n                  currentAngleY += 90;\n              }\n\n              currentPoint = new Point(currentPointX.x, currentPointY.y);\n              minPoint = Point.min(minPoint, currentPoint);\n              maxPoint = Point.max(maxPoint, currentPoint);\n          }\n\n          return Rect$1.fromPoints(minPoint, maxPoint);\n      };\n\n      Arc.prototype._arcInterval = function _arcInterval () {\n          var ref = this;\n          var startAngle = ref.startAngle;\n          var endAngle = ref.endAngle;\n          var anticlockwise = ref.anticlockwise;\n\n          if (anticlockwise) {\n              var oldStart = startAngle;\n              startAngle = endAngle;\n              endAngle = oldStart;\n          }\n\n          if (startAngle > endAngle || (anticlockwise && startAngle === endAngle)) {\n              endAngle += 360;\n          }\n\n          return {\n              startAngle: startAngle,\n              endAngle: endAngle\n          };\n      };\n\n      Arc.prototype._intervalCurvePoints = function _intervalCurvePoints (startAngle, endAngle, transformation) {\n          var p1 = this.pointAt(startAngle);\n          var p2 = this.pointAt(endAngle);\n          var p1Derivative = this._derivativeAt(startAngle);\n          var p2Derivative = this._derivativeAt(endAngle);\n          var t = (rad(endAngle) - rad(startAngle)) / 3;\n          var cp1 = new Point(p1.x + t * p1Derivative.x, p1.y + t * p1Derivative.y);\n          var cp2 = new Point(p2.x - t * p2Derivative.x, p2.y - t * p2Derivative.y);\n          if (transformation) {\n              p1.transform(transformation);\n              p2.transform(transformation);\n              cp1.transform(transformation);\n              cp2.transform(transformation);\n          }\n\n          return {\n              p1: p1,\n              cp1: cp1,\n              cp2: cp2,\n              p2: p2\n          };\n      };\n\n      Arc.prototype._derivativeAt = function _derivativeAt (angle) {\n          var radian = rad(angle);\n\n          return new Point(-this.radiusX * Math.sin(radian), this.radiusY * Math.cos(radian));\n      };\n\n      Arc.prototype.containsPoint = function containsPoint (point) {\n          var interval = this._arcInterval();\n          var intervalAngle = interval.endAngle - interval.startAngle;\n          var ref = this;\n          var center = ref.center;\n          var radiusX = ref.radiusX;\n          var radiusY = ref.radiusY;\n          var distance = center.distanceTo(point);\n          var angleRad = Math.atan2(point.y - center.y, point.x - center.x);\n          var pointRadius = (radiusX * radiusY) /\n              Math.sqrt(pow(radiusX, 2) * pow(Math.sin(angleRad), 2) + pow(radiusY, 2) * pow(Math.cos(angleRad), 2));\n          var startPoint = this.pointAt(this.startAngle).round(PRECISION);\n          var endPoint = this.pointAt(this.endAngle).round(PRECISION);\n          var intersection = lineIntersection(center, point.round(PRECISION), startPoint, endPoint);\n          var containsPoint;\n\n          if (intervalAngle < 180) {\n              containsPoint = intersection && closeOrLess(center.distanceTo(intersection), distance) && closeOrLess(distance, pointRadius);\n          } else {\n              var angle = calculateAngle(center.x, center.y, radiusX, radiusY, point.x, point.y);\n              if (angle !== 360) {\n                  angle = (360 + angle) % 360;\n              }\n\n              var inAngleRange = interval.startAngle <= angle && angle <= interval.endAngle;\n              containsPoint = (inAngleRange && closeOrLess(distance, pointRadius)) || (!inAngleRange && (!intersection || intersection.equals(point)));\n          }\n          return containsPoint;\n      };\n\n      Arc.prototype._isOnPath = function _isOnPath (point, width) {\n          var interval = this._arcInterval();\n          var center = this.center;\n          var angle = calculateAngle(center.x, center.y, this.radiusX, this.radiusY, point.x, point.y);\n          if (angle !== 360) {\n              angle = (360 + angle) % 360;\n          }\n\n          var inAngleRange = interval.startAngle <= angle && angle <= interval.endAngle;\n\n          return inAngleRange && this.pointAt(angle).distanceTo(point) <= width;\n      };\n\n      Arc.fromPoints = function fromPoints (start, end, rx, ry, largeArc, swipe, rotation) {// eslint-disable-line max-params\n          var arcParameters = normalizeArcParameters({\n              x1: start.x,\n              y1: start.y,\n              x2: end.x,\n              y2: end.y,\n              rx: rx,\n              ry: ry,\n              largeArc: largeArc,\n              swipe: swipe,\n              rotation: rotation\n          });\n\n          return new Arc(arcParameters.center, {\n              startAngle: arcParameters.startAngle,\n              endAngle: arcParameters.endAngle,\n              radiusX: arcParameters.radiusX,\n              radiusY: arcParameters.radiusY,\n              xRotation: arcParameters.xRotation,\n              anticlockwise: swipe === 0\n          });\n      };\n\n      return Arc;\n  }(withAccessors(HasObservers, accessors)));\n\n  function calculateAngle(cx, cy, rx, ry, x, y) {\n      var cos = round((x - cx) / rx, 3);\n      var sin = round((y - cy) / ry, 3);\n\n      return round(deg(Math.atan2(sin, cos)));\n  }\n\n  function normalizeArcParameters(parameters) {\n      var x1 = parameters.x1;\n      var y1 = parameters.y1;\n      var x2 = parameters.x2;\n      var y2 = parameters.y2;\n      var rx = parameters.rx;\n      var ry = parameters.ry;\n      var largeArc = parameters.largeArc;\n      var swipe = parameters.swipe;\n      var rotation = parameters.rotation; if ( rotation === void 0 ) rotation = 0;\n\n      var radians = rad(rotation);\n      var cosine = Math.cos(radians);\n      var sine = Math.sin(radians);\n\n      var xT = cosine * (x1 - x2) / 2 + sine * (y1 - y2) / 2;\n      var yT = -sine * (x1 - x2) / 2 + cosine * (y1 - y2) / 2;\n\n      var sign = largeArc !== swipe ? 1 : -1;\n\n      var xt2 = Math.pow(xT, 2);\n      var yt2 = Math.pow(yT, 2);\n      var rx2 = Math.pow(rx, 2);\n      var ry2 = Math.pow(ry, 2);\n\n      var delta = xt2 / rx2 + yt2 / ry2;\n\n      if (delta > 1) {\n          delta = Math.sqrt(xt2 / rx2 + yt2 / ry2);\n          rx = delta * rx;\n          rx2 = Math.pow(rx, 2);\n\n          ry = delta * ry;\n          ry2 = Math.pow(ry, 2);\n      }\n\n      var constT = sign * Math.sqrt((rx2 * ry2 - rx2 * yt2 - ry2 * xt2) / (rx2 * yt2 + ry2 * xt2));\n      // due to rounding errors the value could become NaN even after radii correction\n      if (isNaN(constT)) {\n          constT = 0;\n      }\n\n      var cxT = constT * (rx * yT) / ry;\n      var cyT = - constT * (ry * xT) / rx;\n\n      var cx = cosine * cxT - sine * cyT + (x1 + x2) / 2;\n      var cy = sine * cxT + cosine * cyT + (y1 + y2) / 2;\n\n\n      var uX = (xT - cxT) / rx;\n      var uY = (yT - cyT) / ry;\n      var vX = -(xT + cxT) / rx;\n      var vY = -(yT + cyT) / ry;\n\n      var startAngle = (uY >= 0 ? 1 : -1) * deg(Math.acos(uX / Math.sqrt(uX * uX + uY * uY)));\n\n      var angleCosine = round((uX * vX + uY * vY) / (Math.sqrt(uX * uX + uY * uY) * Math.sqrt(vX * vX + vY * vY)), 10);\n      var angle = (uX * vY - uY * vX >= 0 ? 1 : -1) * deg(Math.acos(angleCosine));\n\n      if (!swipe && angle > 0) {\n          angle -= 360;\n      }\n\n      if (swipe && angle < 0) {\n          angle += 360;\n      }\n      var endAngle = startAngle + angle;\n      var signEndAngle = endAngle >= 0 ? 1 : -1;\n      endAngle = (Math.abs(endAngle) % 360) * signEndAngle;\n\n      return {\n          center: new Point(cx, cy),\n          startAngle: startAngle,\n          endAngle: endAngle,\n          radiusX: rx,\n          radiusY: ry,\n          xRotation: rotation\n      };\n  }\n\n  function bboxStartAngle(angle, start) {\n      var startAngle = angle;\n\n      while (startAngle < start) {\n          startAngle += 90;\n      }\n\n      return startAngle;\n  }\n\n  var push = [].push;\n  var pop = [].pop;\n  var splice = [].splice;\n  var shift = [].shift;\n  var slice$1 = [].slice;\n  var unshift = [].unshift;\n\n  var ElementsArray = (function (HasObservers) {\n      function ElementsArray(array) {\n          if ( array === void 0 ) array = [];\n\n          HasObservers.call(this);\n\n          this.length = 0;\n          this._splice(0, array.length, array);\n      }\n\n      if ( HasObservers ) ElementsArray.__proto__ = HasObservers;\n      ElementsArray.prototype = Object.create( HasObservers && HasObservers.prototype );\n      ElementsArray.prototype.constructor = ElementsArray;\n\n      ElementsArray.prototype.elements = function elements (value) {\n          if (value) {\n              this._splice(0, this.length, value);\n\n              this._change();\n              return this;\n          }\n\n          return this.slice(0);\n      };\n\n      ElementsArray.prototype.push = function push$1 () {\n          var elements = arguments;\n          var result = push.apply(this, elements);\n\n          this._add(elements);\n\n          return result;\n      };\n\n      ElementsArray.prototype.slice = function slice$1$1 () {\n          return slice$1.call(this);\n      };\n\n      ElementsArray.prototype.pop = function pop$1 () {\n          var length = this.length;\n          var result = pop.apply(this);\n\n          if (length) {\n              this._remove([ result ]);\n          }\n\n          return result;\n      };\n\n      ElementsArray.prototype.splice = function splice (index, howMany) {\n          var elements = slice$1.call(arguments, 2);\n          var result = this._splice(index, howMany, elements);\n\n          this._change();\n\n          return result;\n      };\n\n      ElementsArray.prototype.shift = function shift$1 () {\n          var length = this.length;\n          var result = shift.apply(this);\n\n          if (length) {\n              this._remove([ result ]);\n          }\n\n          return result;\n      };\n\n      ElementsArray.prototype.unshift = function unshift$1 () {\n          var elements = arguments;\n          var result = unshift.apply(this, elements);\n\n          this._add(elements);\n\n          return result;\n      };\n\n      ElementsArray.prototype.indexOf = function indexOf (element) {\n          var this$1$1 = this;\n\n          var length = this.length;\n\n          for (var idx = 0; idx < length; idx++) {\n              if (this$1$1[idx] === element) {\n                  return idx;\n              }\n          }\n          return -1;\n      };\n\n      ElementsArray.prototype._splice = function _splice (index, howMany, elements) {\n          var result = splice.apply(this, [ index, howMany ].concat(elements));\n\n          this._clearObserver(result);\n          this._setObserver(elements);\n\n          return result;\n      };\n\n      ElementsArray.prototype._add = function _add (elements) {\n          this._setObserver(elements);\n          this._change();\n      };\n\n      ElementsArray.prototype._remove = function _remove (elements) {\n          this._clearObserver(elements);\n          this._change();\n      };\n\n      ElementsArray.prototype._setObserver = function _setObserver (elements) {\n          var this$1$1 = this;\n\n          for (var idx = 0; idx < elements.length; idx++) {\n              elements[idx].addObserver(this$1$1);\n          }\n      };\n\n      ElementsArray.prototype._clearObserver = function _clearObserver (elements) {\n          var this$1$1 = this;\n\n          for (var idx = 0; idx < elements.length; idx++) {\n              elements[idx].removeObserver(this$1$1);\n          }\n      };\n\n      ElementsArray.prototype._change = function _change () {};\n\n      return ElementsArray;\n  }(HasObservers));\n\n  var GeometryElementsArray = (function (ElementsArray) {\n      function GeometryElementsArray () {\n          ElementsArray.apply(this, arguments);\n      }\n\n      if ( ElementsArray ) GeometryElementsArray.__proto__ = ElementsArray;\n      GeometryElementsArray.prototype = Object.create( ElementsArray && ElementsArray.prototype );\n      GeometryElementsArray.prototype.constructor = GeometryElementsArray;\n\n      GeometryElementsArray.prototype._change = function _change () {\n          this.geometryChange();\n      };\n\n      return GeometryElementsArray;\n  }(ElementsArray));\n\n  function isOutOfEndPoint(endPoint, controlPoint, point) {\n      var angle = deg(Math.atan2(controlPoint.y - endPoint.y, controlPoint.x - endPoint.x));\n      var rotatedPoint = point.transformCopy(transform().rotate(-angle, endPoint));\n\n      return rotatedPoint.x < endPoint.x;\n  }\n\n  function calculateCurveAt(t, field, points) {\n      var t1 = 1 - t;\n      return Math.pow(t1, 3) * points[0][field] +\n          3 * Math.pow(t1, 2) * t * points[1][field] +\n          3 * Math.pow(t, 2) * t1 * points[2][field] +\n          Math.pow(t, 3) * points[3][field];\n  }\n\n  function toCubicPolynomial(points, field) {\n      return [ -points[0][field] + 3 * points[1][field] - 3 * points[2][field] + points[3][field],\n          3 * (points[0][field] - 2 * points[1][field] + points[2][field]),\n          3 * (-points[0][field] + points[1][field]),\n          points[0][field]\n      ];\n  }\n\n  var ComplexNumber = (function (Class) {\n      function ComplexNumber(real, img) {\n          if ( real === void 0 ) real = 0;\n          if ( img === void 0 ) img = 0;\n\n          Class.call(this);\n\n          this.real = real;\n          this.img = img;\n      }\n\n      if ( Class ) ComplexNumber.__proto__ = Class;\n      ComplexNumber.prototype = Object.create( Class && Class.prototype );\n      ComplexNumber.prototype.constructor = ComplexNumber;\n\n      ComplexNumber.prototype.add = function add (cNumber) {\n          return new ComplexNumber(round(this.real + cNumber.real, PRECISION), round(this.img + cNumber.img, PRECISION));\n      };\n\n      ComplexNumber.prototype.addConstant = function addConstant (value) {\n          return new ComplexNumber(this.real + value, this.img);\n      };\n\n      ComplexNumber.prototype.negate = function negate () {\n          return new ComplexNumber(-this.real, -this.img);\n      };\n\n      ComplexNumber.prototype.multiply = function multiply (cNumber) {\n          return new ComplexNumber(this.real * cNumber.real - this.img * cNumber.img,\n              this.real * cNumber.img + this.img * cNumber.real);\n      };\n\n      ComplexNumber.prototype.multiplyConstant = function multiplyConstant (value) {\n          return new ComplexNumber(this.real * value, this.img * value);\n      };\n\n      ComplexNumber.prototype.nthRoot = function nthRoot (n) {\n          var rad = Math.atan2(this.img, this.real);\n          var r = Math.sqrt(Math.pow(this.img, 2) + Math.pow(this.real, 2));\n          var nthR = Math.pow(r, 1 / n);\n\n          return new ComplexNumber(nthR * Math.cos(rad / n), nthR * Math.sin(rad / n)); //Moivre's formula\n      };\n\n      ComplexNumber.prototype.equals = function equals (cNumber) {\n          return this.real === cNumber.real && this.img === cNumber.img;\n      };\n\n      ComplexNumber.prototype.isReal = function isReal () {\n          return this.img === 0;\n      };\n\n      return ComplexNumber;\n  }(Class));\n\n  function numberSign$1(x) {\n      return x < 0 ? -1 : 1;\n  }\n\n  function solveQuadraticEquation(a, b, c) {\n      var squareRoot = Math.sqrt(Math.pow(b, 2) - 4 * a * c);\n      return [\n          (-b + squareRoot) / (2 * a),\n          (-b - squareRoot) / (2 * a)\n      ];\n  }\n\n  //Cardano's formula\n  function solveCubicEquation(a, b, c, d) {\n      if (a === 0) {\n          return solveQuadraticEquation(b, c, d);\n      }\n\n      var p = (3 * a * c - Math.pow(b, 2)) / (3 * Math.pow(a, 2));\n      var q = (2 * Math.pow(b, 3) - 9 * a * b * c + 27 * Math.pow(a, 2) * d) / (27 * Math.pow(a, 3));\n      var Q = Math.pow(p / 3, 3) + Math.pow(q / 2, 2);\n      var i = new ComplexNumber(0,1);\n      var b3a = -b / (3 * a);\n      var x1, x2, y1, y2, y3, z1, z2;\n\n      if (Q < 0) {\n          x1 = new ComplexNumber(-q / 2, Math.sqrt(-Q)).nthRoot(3);\n          x2 = new ComplexNumber(-q / 2, - Math.sqrt(-Q)).nthRoot(3);\n      } else {\n          x1 = -q / 2 + Math.sqrt(Q);\n          x1 = new ComplexNumber(numberSign$1(x1) * Math.pow(Math.abs(x1), 1 / 3));\n          x2 = -q / 2 - Math.sqrt(Q);\n          x2 = new ComplexNumber(numberSign$1(x2) * Math.pow(Math.abs(x2), 1 / 3));\n      }\n\n      y1 = x1.add(x2);\n\n      z1 = x1.add(x2).multiplyConstant(-1 / 2);\n      z2 = x1.add(x2.negate()).multiplyConstant(Math.sqrt(3) / 2);\n\n      y2 = z1.add(i.multiply(z2));\n      y3 = z1.add(i.negate().multiply(z2));\n\n      var result = [];\n\n      if (y1.isReal()) {\n          result.push(round(y1.real + b3a, PRECISION));\n      }\n      if (y2.isReal()) {\n          result.push(round(y2.real + b3a, PRECISION));\n      }\n      if (y3.isReal()) {\n          result.push(round(y3.real + b3a, PRECISION));\n      }\n\n      return result;\n  }\n\n  function hasRootsInRange(points, point, field, rootField, range) {\n      var polynomial = toCubicPolynomial(points, rootField);\n      var roots = solveCubicEquation(polynomial[0], polynomial[1], polynomial[2], polynomial[3] - point[rootField]);\n      var intersection;\n\n      for (var idx = 0; idx < roots.length; idx++) {\n          if (0 <= roots[idx] && roots[idx] <= 1) {\n              intersection = calculateCurveAt(roots[idx], field, points);\n              if (Math.abs(intersection - point[field]) <= range) {\n                  return true;\n              }\n          }\n      }\n  }\n\n  function curveIntersectionsCount(points, point, bbox) {\n      var polynomial = toCubicPolynomial(points, \"x\");\n      var roots = solveCubicEquation(polynomial[0], polynomial[1], polynomial[2], polynomial[3] - point.x);\n      var rayIntersection, intersectsRay;\n      var count = 0;\n      for (var i = 0; i < roots.length; i++) {\n          rayIntersection = calculateCurveAt(roots[i], \"y\", points);\n          intersectsRay = close(rayIntersection, point.y) || rayIntersection > point.y;\n          if (intersectsRay && (((roots[i] === 0 || roots[i] === 1) && bbox.bottomRight().x > point.x) || (0 < roots[i] && roots[i] < 1))) {\n              count++;\n          }\n      }\n\n      return count;\n  }\n\n  function lineIntersectionsCount(a, b, point) {\n      var intersects;\n      if (a.x !== b.x) {\n          var minX = Math.min(a.x, b.x);\n          var maxX = Math.max(a.x, b.x);\n          var minY = Math.min(a.y, b.y);\n          var maxY = Math.max(a.y, b.y);\n          var inRange = minX <= point.x && point.x < maxX;\n\n          if (minY === maxY) {\n              intersects = point.y <= minY && inRange;\n          } else {\n              intersects = inRange && (((maxY - minY) * ((a.x - b.x) * (a.y - b.y) > 0 ? point.x - minX : maxX - point.x)) / (maxX - minX) + minY - point.y) >= 0;\n          }\n      }\n\n      return intersects ? 1 : 0;\n  }\n\n  function pointAccessor(name) {\n      var fieldName = \"_\" + name;\n      return function(value) {\n          if (defined(value)) {\n              this._observerField(fieldName, Point.create(value));\n              this.geometryChange();\n              return this;\n          }\n\n          return this[fieldName];\n      };\n  }\n\n  function definePointAccessors(fn, names) {\n      for (var i = 0; i < names.length; i++) {\n          fn[names[i]] = pointAccessor(names[i]);\n      }\n  }\n\n  var withPoints = function (TBase, names) {\n      var result = (function (TBase) {\n          function result () {\n              TBase.apply(this, arguments);\n          }if ( TBase ) result.__proto__ = TBase;\n          result.prototype = Object.create( TBase && TBase.prototype );\n          result.prototype.constructor = result;\n\n          \n\n          return result;\n      }(TBase));\n      definePointAccessors(result.prototype, names);\n\n      return result;\n  };\n\n  var points$1 = [ \"anchor\", \"controlIn\", \"controlOut\" ];\n\n  var Segment = (function (superclass) {\n      function Segment(anchor, controlIn, controlOut) {\n          superclass.call(this);\n\n          this.anchor(anchor || new Point());\n          this.controlIn(controlIn);\n          this.controlOut(controlOut);\n      }\n\n      if ( superclass ) Segment.__proto__ = superclass;\n      Segment.prototype = Object.create( superclass && superclass.prototype );\n      Segment.prototype.constructor = Segment;\n\n      Segment.prototype.bboxTo = function bboxTo (toSegment, matrix) {\n          var segmentAnchor = this.anchor().transformCopy(matrix);\n          var toSegmentAnchor = toSegment.anchor().transformCopy(matrix);\n          var rect;\n\n          if (this.controlOut() && toSegment.controlIn()) {\n              rect = this._curveBoundingBox(\n                  segmentAnchor, this.controlOut().transformCopy(matrix),\n                  toSegment.controlIn().transformCopy(matrix), toSegmentAnchor\n              );\n          } else {\n              rect = this._lineBoundingBox(segmentAnchor, toSegmentAnchor);\n          }\n\n          return rect;\n      };\n\n      Segment.prototype._lineBoundingBox = function _lineBoundingBox (p1, p2) {\n          return Rect$1.fromPoints(p1, p2);\n      };\n\n      Segment.prototype._curveBoundingBox = function _curveBoundingBox (p1, cp1, cp2, p2) {\n          var points = [ p1, cp1, cp2, p2 ];\n          var extremesX = this._curveExtremesFor(points, \"x\");\n          var extremesY = this._curveExtremesFor(points, \"y\");\n          var xLimits = arrayLimits([ extremesX.min, extremesX.max, p1.x, p2.x ]);\n          var yLimits = arrayLimits([ extremesY.min, extremesY.max, p1.y, p2.y ]);\n\n          return Rect$1.fromPoints(new Point(xLimits.min, yLimits.min), new Point(xLimits.max, yLimits.max));\n      };\n\n      Segment.prototype._curveExtremesFor = function _curveExtremesFor (points, field) {\n          var extremes = this._curveExtremes(\n              points[0][field], points[1][field],\n              points[2][field], points[3][field]\n          );\n\n          return {\n              min: calculateCurveAt(extremes.min, field, points),\n              max: calculateCurveAt(extremes.max, field, points)\n          };\n      };\n\n      Segment.prototype._curveExtremes = function _curveExtremes (x1, x2, x3, x4) {\n          var a = x1 - 3 * x2 + 3 * x3 - x4;\n          var b = - 2 * (x1 - 2 * x2 + x3);\n          var c = x1 - x2;\n          var sqrt = Math.sqrt(b * b - 4 * a * c);\n          var t1 = 0;\n          var t2 = 1;\n\n          if (a === 0) {\n              if (b !== 0) {\n                  t1 = t2 = -c / b;\n              }\n          } else if (!isNaN(sqrt)) {\n              t1 = (- b + sqrt) / (2 * a);\n              t2 = (- b - sqrt) / (2 * a);\n          }\n\n          var min = Math.max(Math.min(t1, t2), 0);\n          if (min < 0 || min > 1) {\n              min = 0;\n          }\n\n          var max = Math.min(Math.max(t1, t2), 1);\n          if (max > 1 || max < 0) {\n              max = 1;\n          }\n\n          return {\n              min: min,\n              max: max\n          };\n      };\n\n      Segment.prototype._intersectionsTo = function _intersectionsTo (segment, point) {\n          var intersectionsCount;\n          if (this.controlOut() && segment.controlIn()) {\n              intersectionsCount = curveIntersectionsCount([ this.anchor(), this.controlOut(), segment.controlIn(), segment.anchor() ], point, this.bboxTo(segment));\n          } else {\n              intersectionsCount = lineIntersectionsCount(this.anchor(), segment.anchor(), point);\n          }\n          return intersectionsCount;\n      };\n\n      Segment.prototype._isOnCurveTo = function _isOnCurveTo (segment, point, width, endSegment) {\n          var bbox = this.bboxTo(segment).expand(width, width);\n          if (bbox.containsPoint(point)) {\n              var p1 = this.anchor();\n              var p2 = this.controlOut();\n              var p3 = segment.controlIn();\n              var p4 = segment.anchor();\n\n              if (endSegment === \"start\" && p1.distanceTo(point) <= width) {\n                  return !isOutOfEndPoint(p1, p2, point);\n              } else if (endSegment === \"end\" && p4.distanceTo(point) <= width) {\n                  return !isOutOfEndPoint(p4, p3, point);\n              }\n\n              //the approach is not entirely correct but is close and the alternatives are solving a 6th degree polynomial or testing the segment points\n              var points = [ p1, p2, p3, p4 ];\n              if (hasRootsInRange(points, point, \"x\", \"y\", width) || hasRootsInRange(points, point, \"y\", \"x\", width)) {\n                  return true;\n              }\n              var rotation = transform().rotate(45, point);\n              var rotatedPoints = [ p1.transformCopy(rotation), p2.transformCopy(rotation), p3.transformCopy(rotation), p4.transformCopy(rotation) ];\n              return hasRootsInRange(rotatedPoints, point, \"x\", \"y\", width) || hasRootsInRange(rotatedPoints, point, \"y\", \"x\", width);\n          }\n      };\n\n      Segment.prototype._isOnLineTo = function _isOnLineTo (segment, point, width) {\n          var p1 = this.anchor();\n          var p2 = segment.anchor();\n          var angle = deg(Math.atan2(p2.y - p1.y, p2.x - p1.x));\n          var rect = new Rect$1([ p1.x, p1.y - width / 2 ], [ p1.distanceTo(p2), width ]);\n          return rect.containsPoint(point.transformCopy(transform().rotate(-angle, p1)));\n      };\n\n      Segment.prototype._isOnPathTo = function _isOnPathTo (segment, point, width, endSegment) {\n          var isOnPath;\n          if (this.controlOut() && segment.controlIn()) {\n              isOnPath = this._isOnCurveTo(segment, point, width / 2, endSegment);\n          } else {\n              isOnPath = this._isOnLineTo(segment, point, width);\n          }\n          return isOnPath;\n      };\n\n      return Segment;\n  }(withPoints(HasObservers, points$1)));\n\n  function arrayLimits(arr) {\n      var length = arr.length;\n      var min = MAX_NUM;\n      var max = MIN_NUM;\n\n      for (var i = 0; i < length; i ++) {\n          max = Math.max(max, arr[i]);\n          min = Math.min(min, arr[i]);\n      }\n\n      return {\n          min: min,\n          max: max\n      };\n  }\n\n  var geometry = /*#__PURE__*/Object.freeze({\n      __proto__: null,\n      Arc: Arc$1,\n      Circle: Circle$1,\n      Matrix: Matrix,\n      Point: Point,\n      Rect: Rect$1,\n      Segment: Segment,\n      Size: Size,\n      Transformation: Transformation,\n      toMatrix: toMatrix,\n      transform: transform\n  });\n\n  var WEIGHT = 0.333;\n  var EXTREMUM_ALLOWED_DEVIATION = 0.01;\n  var X = \"x\";\n  var Y = \"y\";\n\n  function pointsToCurve(pointsIn, closed) {\n      var points = pointsIn.slice(0);\n      var segments = [];\n      var length = points.length;\n\n      if (length > 2) {\n          removeDuplicates(0, points);\n          length = points.length;\n      }\n\n      if (length < 2 || (length === 2 && points[0].equals(points[1]))) {\n          return segments;\n      }\n\n      var p0 = points[0];\n      var p1 = points[1];\n      var p2 = points[2];\n\n      segments.push(new Segment(p0));\n\n      while (p0.equals(points[length - 1])) {\n          closed = true;\n          points.pop();\n          length--;\n      }\n\n      if (length === 2) {\n          var tangent = getTangent(p0,p1, X, Y);\n\n          last(segments).controlOut(\n              firstControlPoint(tangent, p0, p1, X, Y)\n          );\n\n          segments.push(new Segment(\n              p1,\n              secondControlPoint(tangent, p0, p1, X, Y)\n          ));\n\n          return segments;\n      }\n\n      var initialControlPoint, lastControlPoint;\n\n      if (closed) {\n          p0 = points[length - 1]; p1 = points[0]; p2 = points[1];\n          var controlPoints = getControlPoints(p0, p1, p2);\n          initialControlPoint = controlPoints[1];\n          lastControlPoint = controlPoints[0];\n      } else {\n          var tangent$1 = getTangent(p0, p1, X,Y);\n          initialControlPoint = firstControlPoint(tangent$1, p0, p1, X, Y);\n      }\n\n      var cp0 = initialControlPoint;\n      for (var idx = 0; idx <= length - 3; idx++) {\n          removeDuplicates(idx, points);\n          length = points.length;\n          if (idx + 3 <= length) {\n              p0 = points[idx]; p1 = points[idx + 1]; p2 = points[idx + 2];\n              var controlPoints$1 = getControlPoints(p0,p1,p2);\n\n              last(segments).controlOut(cp0);\n              cp0 = controlPoints$1[1];\n\n              var cp1 = controlPoints$1[0];\n              segments.push(new Segment(p1, cp1));\n          }\n      }\n\n      if (closed) {\n          p0 = points[length - 2]; p1 = points[length - 1]; p2 = points[0];\n          var controlPoints$2 = getControlPoints(p0, p1, p2);\n\n          last(segments).controlOut(cp0);\n          segments.push(new Segment(\n              p1,\n              controlPoints$2[0]\n          ));\n\n          last(segments).controlOut(controlPoints$2[1]);\n          segments.push(new Segment(\n              p2,\n              lastControlPoint\n          ));\n      } else {\n          var tangent$2 = getTangent(p1, p2, X, Y);\n\n          last(segments).controlOut(cp0);\n          segments.push(new Segment(\n              p2,\n              secondControlPoint(tangent$2, p1, p2, X, Y)\n          ));\n      }\n\n      return segments;\n  }\n\n  function pointsToClosedCurve(pointsIn) {\n      return pointsToCurve(pointsIn, true);\n  }\n\n  function removeDuplicates(idx, points) {\n      while (points[idx + 1] && (points[idx].equals(points[idx + 1]) || points[idx + 1].equals(points[idx + 2]))) {\n          points.splice(idx + 1, 1);\n      }\n  }\n\n  function invertAxis(p0, p1, p2) {\n      var invertAxis = false;\n\n      if (p0.x === p1.x) {\n          invertAxis = true;\n      } else if (p1.x === p2.x) {\n          if ((p1.y < p2.y && p0.y <= p1.y) || (p2.y < p1.y && p1.y <= p0.y)) {\n              invertAxis = true;\n          }\n      } else {\n          var fn = lineFunction(p0,p1);\n          var y2 = calculateFunction(fn, p2.x);\n          if (!(p0.y <= p1.y && p2.y <= y2) &&\n              !(p1.y <= p0.y && p2.y >= y2)) {\n              invertAxis = true;\n          }\n      }\n\n      return invertAxis;\n  }\n\n  function isLine(p0, p1, p2) {\n      var fn = lineFunction(p0, p1);\n      var y2 = calculateFunction(fn, p2.x);\n\n      return (p0.x === p1.x && p1.x === p2.x) || round(y2, 1) === round(p2.y, 1);\n  }\n\n  function lineFunction(p1, p2) {\n      var a = (p2.y - p1.y) / (p2.x - p1.x);\n      var b = p1.y - a * p1.x;\n\n      return [ b, a ];\n  }\n\n  function getControlPoints(p0, p1, p2) {\n      var xField = X;\n      var yField = Y;\n      var restrict = false;\n      var switchOrientation = false;\n      var tangent;\n\n      if (isLine(p0, p1, p2)) {\n          tangent = getTangent(p0, p1, X, Y);\n      } else {\n          var monotonic = {\n              x: isMonotonicByField(p0, p1, p2, X),\n              y: isMonotonicByField(p0, p1, p2, Y)\n          };\n\n          if (monotonic.x && monotonic.y) {\n              tangent = getTangent(p0, p2, X, Y);\n              restrict = true;\n          } else {\n              if (invertAxis(p0, p1, p2)) {\n                  xField = Y;\n                  yField = X;\n              }\n\n              if (monotonic[xField]) {\n                  tangent = 0;\n              } else {\n                  var sign;\n                  if ((p2[yField] < p0[yField] && p0[yField] <= p1[yField]) ||\n                      (p0[yField] < p2[yField] && p1[yField] <= p0[yField])) {\n                      sign = numberSign((p2[yField] - p0[yField]) * (p1[xField] - p0[xField]));\n                  } else {\n                      sign = -numberSign((p2[xField] - p0[xField]) * (p1[yField] - p0[yField]));\n                  }\n\n                  tangent = EXTREMUM_ALLOWED_DEVIATION * sign;\n                  switchOrientation = true;\n              }\n          }\n      }\n\n      var secondCP = secondControlPoint(tangent, p0, p1, xField, yField);\n\n      if (switchOrientation) {\n          var oldXField = xField;\n          xField = yField;\n          yField = oldXField;\n      }\n\n      var firstCP = firstControlPoint(tangent, p1, p2, xField, yField);\n\n      if (restrict) {\n          restrictControlPoint(p0, p1, secondCP, tangent);\n          restrictControlPoint(p1, p2, firstCP, tangent);\n      }\n\n      return [ secondCP, firstCP ];\n  }\n\n  function restrictControlPoint(p1, p2, cp, tangent) {\n      if (p1.y < p2.y) {\n          if (p2.y < cp.y) {\n              cp.x = p1.x + (p2.y - p1.y) / tangent;\n              cp.y = p2.y;\n          } else if (cp.y < p1.y) {\n              cp.x = p2.x - (p2.y - p1.y) / tangent;\n              cp.y = p1.y;\n          }\n      } else {\n          if (cp.y < p2.y) {\n              cp.x = p1.x - (p1.y - p2.y) / tangent;\n              cp.y = p2.y;\n          } else if (p1.y < cp.y) {\n              cp.x = p2.x + (p1.y - p2.y) / tangent;\n              cp.y = p1.y;\n          }\n      }\n  }\n\n  function getTangent(p0, p1, xField, yField) {\n      var x = p1[xField] - p0[xField];\n      var y = p1[yField] - p0[yField];\n      var tangent;\n\n      if (x === 0) {\n          tangent = 0;\n      } else {\n          tangent = y / x;\n      }\n\n      return tangent;\n  }\n\n  function isMonotonicByField(p0, p1, p2, field) {\n      return (p2[field] > p1[field] && p1[field] > p0[field]) ||\n                  (p2[field] < p1[field] && p1[field] < p0[field]);\n  }\n\n  function firstControlPoint(tangent, p0, p3, xField, yField) {\n      var t1 = p0[xField];\n      var t2 = p3[xField];\n      var distance = (t2 - t1) * WEIGHT;\n\n      return point(t1 + distance, p0[yField] + distance * tangent, xField, yField);\n  }\n\n  function secondControlPoint(tangent, p0, p3, xField, yField) {\n      var t1 = p0[xField];\n      var t2 = p3[xField];\n      var distance = (t2 - t1) * WEIGHT;\n\n      return point(t2 - distance, p3[yField] - distance * tangent, xField, yField);\n  }\n\n  function point(xValue, yValue, xField, yField) {\n      var controlPoint = new Point();\n      controlPoint[xField] = xValue;\n      controlPoint[yField] = yValue;\n\n      return controlPoint;\n  }\n\n  function calculateFunction(fn, x) {\n      var length = fn.length;\n      var result = 0;\n\n      for (var i = 0; i < length; i++) {\n          result += Math.pow(x,i) * fn[i];\n      }\n      return result;\n  }\n\n  function numberSign(value) {\n      return value <= 0 ? -1 : 1;\n  }\n\n  var ShapeMap = {\n      l: function(path, options) {\n          var parameters = options.parameters;\n          var position = options.position;\n\n          for (var i = 0; i < parameters.length; i += 2) {\n              var point = new Point(parameters[i], parameters[i + 1]);\n\n              if (options.isRelative) {\n                  point.translateWith(position);\n              }\n\n              path.lineTo(point.x, point.y);\n\n              position.x = point.x;\n              position.y = point.y;\n          }\n      },\n\n      c: function(path, options) {\n          var parameters = options.parameters;\n          var position = options.position;\n\n          for (var i = 0; i < parameters.length; i += 6) {\n              var controlOut = new Point(parameters[i], parameters[i + 1]);\n              var controlIn = new Point(parameters[i + 2], parameters[i + 3]);\n              var point = new Point(parameters[i + 4], parameters[i + 5]);\n              if (options.isRelative) {\n                  controlIn.translateWith(position);\n                  controlOut.translateWith(position);\n                  point.translateWith(position);\n              }\n\n              path.curveTo(controlOut, controlIn, point);\n\n              position.x = point.x;\n              position.y = point.y;\n          }\n      },\n\n      v: function(path, options) {\n          var value = options.isRelative ? 0 : options.position.x;\n\n          toLineParamaters(options.parameters, true, value);\n          this.l(path, options);\n      },\n\n      h: function(path, options) {\n          var value = options.isRelative ? 0 : options.position.y;\n\n          toLineParamaters(options.parameters, false, value);\n          this.l(path, options);\n      },\n\n      a: function(path, options) {\n          var parameters = options.parameters;\n          var position = options.position;\n\n          for (var i = 0; i < parameters.length; i += 7) {\n              var radiusX = parameters[i];\n              var radiusY = parameters[i + 1];\n              var rotation = parameters[i + 2];\n              var largeArc = parameters[i + 3];\n              var swipe = parameters[i + 4];\n              var endPoint = new Point(parameters[i + 5], parameters[i + 6]);\n\n              if (options.isRelative) {\n                  endPoint.translateWith(position);\n              }\n              if (position.x !== endPoint.x || position.y !== endPoint.y) {\n                  path.arcTo(endPoint, radiusX, radiusY, largeArc, swipe, rotation);\n\n                  position.x = endPoint.x;\n                  position.y = endPoint.y;\n              }\n          }\n      },\n\n      s: function(path, options) {\n          var parameters = options.parameters;\n          var position = options.position;\n          var previousCommand = options.previousCommand;\n          var lastControlIn;\n\n          if (previousCommand === \"s\" || previousCommand === \"c\") {\n              lastControlIn = last(last(path.paths).segments).controlIn();\n          }\n\n          for (var i = 0; i < parameters.length; i += 4) {\n              var controlIn = new Point(parameters[i], parameters[i + 1]);\n              var endPoint = new Point(parameters[i + 2], parameters[i + 3]);\n              var controlOut = (void 0);\n\n              if (options.isRelative) {\n                  controlIn.translateWith(position);\n                  endPoint.translateWith(position);\n              }\n\n              if (lastControlIn) {\n                  controlOut = reflectionPoint(lastControlIn, position);\n              } else {\n                  controlOut = position.clone();\n              }\n\n              lastControlIn = controlIn;\n\n              path.curveTo(controlOut, controlIn, endPoint);\n\n              position.x = endPoint.x;\n              position.y = endPoint.y;\n          }\n      },\n\n      q: function(path, options) {\n          var parameters = options.parameters;\n          var position = options.position;\n\n          for (var i = 0; i < parameters.length; i += 4) {\n              var controlPoint = new Point(parameters[i], parameters[i + 1]);\n              var endPoint = new Point(parameters[i + 2], parameters[i + 3]);\n\n              if (options.isRelative) {\n                  controlPoint.translateWith(position);\n                  endPoint.translateWith(position);\n              }\n\n              var cubicControlPoints = quadraticToCubicControlPoints(position, controlPoint, endPoint);\n\n              path.curveTo(cubicControlPoints.controlOut, cubicControlPoints.controlIn, endPoint);\n\n              position.x = endPoint.x;\n              position.y = endPoint.y;\n          }\n      },\n\n      t: function(path, options) {\n          var parameters = options.parameters;\n          var position = options.position;\n          var previousCommand = options.previousCommand;\n          var controlPoint;\n\n          if (previousCommand === \"q\" || previousCommand === \"t\") {\n              var lastSegment = last(last(path.paths).segments);\n              controlPoint = lastSegment.controlIn().clone()\n                  .translateWith(position.scaleCopy(-1 / 3))\n                  .scale(3 / 2);\n          }\n\n          for (var i = 0; i < parameters.length; i += 2) {\n              var endPoint = new Point(parameters[i], parameters[i + 1]);\n              if (options.isRelative) {\n                  endPoint.translateWith(position);\n              }\n\n              if (controlPoint) {\n                  controlPoint = reflectionPoint(controlPoint, position);\n              } else {\n                  controlPoint = position.clone();\n              }\n\n              var cubicControlPoints = quadraticToCubicControlPoints(position, controlPoint, endPoint);\n\n              path.curveTo(cubicControlPoints.controlOut, cubicControlPoints.controlIn, endPoint);\n\n              position.x = endPoint.x;\n              position.y = endPoint.y;\n          }\n      }\n  };\n\n  function toLineParamaters(parameters, isVertical, value) {\n      var insertPosition = isVertical ? 0 : 1;\n\n      for (var i = 0; i < parameters.length; i += 2) {\n          parameters.splice(i + insertPosition, 0, value);\n      }\n  }\n\n  function reflectionPoint(point, center) {\n      if (point && center) {\n          return center.scaleCopy(2).translate(-point.x, -point.y);\n      }\n  }\n\n  var third = 1 / 3;\n\n  function quadraticToCubicControlPoints(position, controlPoint, endPoint) {\n      var scaledPoint = controlPoint.clone().scale(2 / 3);\n      return {\n          controlOut: scaledPoint.clone().translateWith(position.scaleCopy(third)),\n          controlIn: scaledPoint.translateWith(endPoint.scaleCopy(third))\n      };\n  }\n\n  var SEGMENT_REGEX = /([a-df-z]{1})([^a-df-z]*)(z)?/gi;\n  var SPLIT_REGEX = /[,\\s]?([+\\-]?(?:\\d*\\.\\d+|\\d+)(?:[eE][+\\-]?\\d+)?)/g;\n  var MOVE = \"m\";\n  var CLOSE = \"z\";\n\n  function parseParameters(str) {\n      var parameters = [];\n      str.replace(SPLIT_REGEX, function(match, number) {\n          parameters.push(parseFloat(number));\n      });\n      return parameters;\n  }\n\n  function parsePath(pathInstance, str) {\n      var position = new Point();\n      var previousCommand;\n\n      str.replace(SEGMENT_REGEX, function (match, element, params, closePath) {\n          var command = element.toLowerCase();\n          var isRelative = command === element;\n          var parameters = parseParameters(params.trim());\n\n          if (command === MOVE) {\n              if (isRelative) {\n                  position.x += parameters[0];\n                  position.y += parameters[1];\n              } else {\n                  position.x = parameters[0];\n                  position.y = parameters[1];\n              }\n\n              pathInstance.moveTo(position.x, position.y);\n\n              if (parameters.length > 2) {\n                  command = \"l\";\n                  parameters.splice(0, 2);\n              }\n          }\n\n          if (ShapeMap[command]) {\n              ShapeMap[command](\n                  pathInstance, {\n                      parameters: parameters,\n                      position: position,\n                      isRelative: isRelative,\n                      previousCommand: previousCommand\n                  }\n              );\n\n              if (closePath && closePath.toLowerCase() === CLOSE) {\n                  pathInstance.close();\n              }\n          } else if (command !== MOVE) {\n              throw new Error(\"Error while parsing SVG path. Unsupported command: \" + command);\n          }\n\n          previousCommand = command;\n      });\n\n      return pathInstance;\n  }\n\n  function elementsBoundingBox(elements, applyTransform, transformation) {\n      var boundingBox;\n\n      for (var i = 0; i < elements.length; i++) {\n          var element = elements[i];\n          if (element.visible()) {\n              var elementBoundingBox = applyTransform ? element.bbox(transformation) : element.rawBBox();\n              if (elementBoundingBox) {\n                  if (boundingBox) {\n                      boundingBox = Rect$1.union(boundingBox, elementBoundingBox);\n                  } else {\n                      boundingBox = elementBoundingBox;\n                  }\n              }\n          }\n      }\n\n      return boundingBox;\n  }\n\n  function elementsClippedBoundingBox(elements, transformation) {\n      var boundingBox;\n\n      for (var i = 0; i < elements.length; i++) {\n          var element = elements[i];\n          if (element.visible()) {\n              var elementBoundingBox = element.clippedBBox(transformation);\n              if (elementBoundingBox) {\n                  if (boundingBox) {\n                      boundingBox = Rect$1.union(boundingBox, elementBoundingBox);\n                  } else {\n                      boundingBox = elementBoundingBox;\n                  }\n              }\n          }\n      }\n\n      return boundingBox;\n  }\n\n  var SPACE = ' ';\n  var printPoints = function (precision) { return function () {\n      var points = [], len = arguments.length;\n      while ( len-- ) points[ len ] = arguments[ len ];\n\n      return points.map(function (p) { return p.toString(precision); }).join(SPACE);\n  ; }    };\n  var segmentType = function (segmentStart, segmentEnd) { return segmentStart.controlOut() && segmentEnd.controlIn() ? 'C' : 'L'; };\n\n  var Path = (function (superclass) {\n      function Path(options) {\n          superclass.call(this, options);\n          this.segments = new GeometryElementsArray();\n          this.segments.addObserver(this);\n\n          if (!defined(this.options.stroke)) {\n              this.stroke('#000');\n\n              if (!defined(this.options.stroke.lineJoin)) {\n                  this.options.set('stroke.lineJoin', 'miter');\n              }\n          }\n      }\n\n      if ( superclass ) Path.__proto__ = superclass;\n      Path.prototype = Object.create( superclass && superclass.prototype );\n      Path.prototype.constructor = Path;\n\n      var prototypeAccessors = { nodeType: { configurable: true } };\n\n      prototypeAccessors.nodeType.get = function () {\n          return 'Path';\n      };\n\n      Path.prototype.moveTo = function moveTo (x, y) {\n          this.suspend();\n          this.segments.elements([]);\n          this.resume();\n\n          this.lineTo(x, y);\n\n          return this;\n      };\n\n      Path.prototype.lineTo = function lineTo (x, y) {\n          var point = defined(y) ? new Point(x, y) : x;\n          var segment = new Segment(point);\n\n          this.segments.push(segment);\n\n          return this;\n      };\n\n      Path.prototype.curveTo = function curveTo (controlOut, controlIn, point) {\n          if (this.segments.length > 0) {\n              var lastSegment = last(this.segments);\n              var segment = new Segment(point, controlIn);\n              this.suspend();\n              lastSegment.controlOut(controlOut);\n              this.resume();\n\n              this.segments.push(segment);\n          }\n\n          return this;\n      };\n\n      Path.prototype.arc = function arc (startAngle, endAngle, radiusX, radiusY, anticlockwise) {\n          if (this.segments.length > 0) {\n              var lastSegment = last(this.segments);\n              var anchor = lastSegment.anchor();\n              var start = rad(startAngle);\n              var center = new Point(anchor.x - radiusX * Math.cos(start),\n                  anchor.y - radiusY * Math.sin(start));\n              var arc = new Arc$1(center, {\n                  startAngle: startAngle,\n                  endAngle: endAngle,\n                  radiusX: radiusX,\n                  radiusY: radiusY,\n                  anticlockwise: anticlockwise\n              });\n\n              this._addArcSegments(arc);\n          }\n\n          return this;\n      };\n\n      Path.prototype.arcTo = function arcTo (end, rx, ry, largeArc, swipe, rotation) {\n          if (this.segments.length > 0) {\n              var lastSegment = last(this.segments);\n              var anchor = lastSegment.anchor();\n              var arc = Arc$1.fromPoints(anchor, Point.create(end), rx, ry, largeArc, swipe, rotation);\n\n              this._addArcSegments(arc);\n          }\n          return this;\n      };\n\n      Path.prototype._addArcSegments = function _addArcSegments (arc) {\n          var this$1$1 = this;\n\n          this.suspend();\n\n          var curvePoints = arc.curvePoints();\n\n          for (var i = 1; i < curvePoints.length; i += 3) {\n              this$1$1.curveTo(curvePoints[i], curvePoints[i + 1], curvePoints[i + 2]);\n          }\n\n          this.resume();\n          this.geometryChange();\n      };\n\n      Path.prototype.close = function close () {\n          this.options.closed = true;\n          this.geometryChange();\n\n          return this;\n      };\n\n      Path.prototype.rawBBox = function rawBBox () {\n          return this._bbox();\n      };\n\n      Path.prototype.toString = function toString (digits) {\n          var output = '';\n\n          var segments = this.segments;\n          var length = segments.length;\n          if (length > 0) {\n              var parts = [];\n              var print = printPoints(digits);\n              var currentType;\n\n              for (var i = 1; i < length; i++) {\n                  var type = segmentType(segments[i - 1], segments[i]);\n                  if (type !== currentType) {\n                      currentType = type;\n                      parts.push(type);\n                  }\n\n                  if (type === 'L') {\n                      parts.push(print(segments[i].anchor()));\n                  } else {\n                      parts.push(print(\n                          segments[i - 1].controlOut(), segments[i].controlIn(), segments[i].anchor()\n                      ));\n                  }\n              }\n\n              output = 'M' + print(segments[0].anchor()) + SPACE + parts.join(SPACE);\n              if (this.options.closed) {\n                  output += 'Z';\n              }\n          }\n\n          return output;\n      };\n\n      Path.prototype._containsPoint = function _containsPoint (point) {\n          var segments = this.segments;\n          var length = segments.length;\n          var intersectionsCount = 0;\n          var previous, current;\n\n          for (var idx = 1; idx < length; idx++) {\n              previous = segments[idx - 1];\n              current = segments[idx];\n              intersectionsCount += previous._intersectionsTo(current, point);\n          }\n\n          if (this.options.closed || !segments[0].anchor().equals(segments[length - 1].anchor())) {\n              intersectionsCount += lineIntersectionsCount(segments[0].anchor(), segments[length - 1].anchor(), point);\n          }\n\n          return intersectionsCount % 2 !== 0;\n      };\n\n      Path.prototype._isOnPath = function _isOnPath (point, width) {\n          var segments = this.segments;\n          var length = segments.length;\n          var pathWidth = width || this.options.stroke.width;\n\n          if (length > 1) {\n              if (segments[0]._isOnPathTo(segments[1], point, pathWidth, 'start')) {\n                  return true;\n              }\n\n              for (var idx = 2; idx <= length - 2; idx++) {\n                  if (segments[idx - 1]._isOnPathTo(segments[idx], point, pathWidth)) {\n                      return true;\n                  }\n              }\n\n              if (segments[length - 2]._isOnPathTo(segments[length - 1], point, pathWidth, 'end')) {\n                  return true;\n              }\n          }\n          return false;\n      };\n\n      Path.prototype._bbox = function _bbox (matrix) {\n          var segments = this.segments;\n          var length = segments.length;\n          var boundingBox;\n\n          if (length === 1) {\n              var anchor = segments[0].anchor().transformCopy(matrix);\n              boundingBox = new Rect$1(anchor, Size.ZERO);\n          } else if (length > 0) {\n              for (var i = 1; i < length; i++) {\n                  var segmentBox = segments[i - 1].bboxTo(segments[i], matrix);\n                  if (boundingBox) {\n                      boundingBox = Rect$1.union(boundingBox, segmentBox);\n                  } else {\n                      boundingBox = segmentBox;\n                  }\n              }\n          }\n\n          return boundingBox;\n      };\n\n      Path.parse = function parse (str, options) {\n          return MultiPath.parse(str, options);\n      };\n\n      Path.fromRect = function fromRect (rect, options) {\n          var path = new Path(options);\n          var ref = rect.cornerRadius;\n          var rx = ref[0];\n          var ry = ref[1];\n\n          if (rx === 0 && ry === 0) {\n              path.moveTo(rect.topLeft())\n                  .lineTo(rect.topRight())\n                  .lineTo(rect.bottomRight())\n                  .lineTo(rect.bottomLeft())\n                  .close();\n          } else {\n              var origin = rect.origin;\n              var x = origin.x;\n              var y = origin.y;\n              var width = rect.width();\n              var height = rect.height();\n              rx = limitValue(rx, 0, width / 2);\n              ry = limitValue(ry, 0, height / 2);\n\n              path.moveTo(x + rx, y)\n                  .lineTo(x + width - rx, y)\n                  .arcTo([ x + width, y + ry ], rx, ry, false)\n                  .lineTo(x + width, y + height - ry)\n                  .arcTo([ x + width - rx, y + height ], rx, ry, false)\n                  .lineTo(x + rx, y + height)\n                  .arcTo([ x, y + height - ry ], rx, ry, false)\n                  .lineTo(x, y + ry)\n                  .arcTo([ x + rx, y ], rx, ry, false);\n          }\n\n          return path;\n      };\n\n      Path.fromPoints = function fromPoints (points, options) {\n          if (points) {\n              var path = new Path(options);\n\n              for (var i = 0; i < points.length; i++) {\n                  var point = Point.create(points[i]);\n                  if (point) {\n                      if (i === 0) {\n                          path.moveTo(point);\n                      } else {\n                          path.lineTo(point);\n                      }\n                  }\n              }\n\n              return path;\n          }\n      };\n\n      Path.curveFromPoints = function curveFromPoints (points, options) {\n          if (points) {\n              var segments = pointsToCurve(points);\n              var path = new Path(options);\n              path.segments.push.apply(path.segments, segments);\n\n              return path;\n          }\n      };\n\n      Path.fromArc = function fromArc (arc, options) {\n          var path = new Path(options);\n          var startAngle = arc.startAngle;\n          var start = arc.pointAt(startAngle);\n          path.moveTo(start.x, start.y);\n          path.arc(startAngle, arc.endAngle, arc.radiusX, arc.radiusY, arc.anticlockwise);\n          return path;\n      };\n\n      Object.defineProperties( Path.prototype, prototypeAccessors );\n\n      return Path;\n  }(paintable(measurable(Element$1))));\n\n  var MultiPath = (function (superclass) {\n      function MultiPath(options) {\n          superclass.call(this, options);\n          this.paths = new GeometryElementsArray();\n          this.paths.addObserver(this);\n\n          if (!defined(this.options.stroke)) {\n              this.stroke('#000');\n          }\n      }\n\n      if ( superclass ) MultiPath.__proto__ = superclass;\n      MultiPath.prototype = Object.create( superclass && superclass.prototype );\n      MultiPath.prototype.constructor = MultiPath;\n\n      var prototypeAccessors$1 = { nodeType: { configurable: true } };\n\n      MultiPath.parse = function parse (str, options) {\n          var instance = new MultiPath(options);\n          return parsePath(instance, str);\n      };\n\n      MultiPath.prototype.toString = function toString (digits) {\n          var paths = this.paths;\n          var output = '';\n\n          if (paths.length > 0) {\n              var result = [];\n\n              for (var i = 0; i < paths.length; i++) {\n                  result.push(paths[i].toString(digits));\n              }\n\n              output = result.join(SPACE);\n          }\n\n          return output;\n      };\n\n      prototypeAccessors$1.nodeType.get = function () {\n          return 'MultiPath';\n      };\n\n      MultiPath.prototype.moveTo = function moveTo (x, y) {\n          var path = new Path();\n          path.moveTo(x, y);\n\n          this.paths.push(path);\n\n          return this;\n      };\n\n      MultiPath.prototype.lineTo = function lineTo (x, y) {\n          if (this.paths.length > 0) {\n              last(this.paths).lineTo(x, y);\n          }\n\n          return this;\n      };\n\n      MultiPath.prototype.curveTo = function curveTo (controlOut, controlIn, point) {\n          if (this.paths.length > 0) {\n              last(this.paths).curveTo(controlOut, controlIn, point);\n          }\n\n          return this;\n      };\n\n      MultiPath.prototype.arc = function arc (startAngle, endAngle, radiusX, radiusY, anticlockwise) {\n          if (this.paths.length > 0) {\n              last(this.paths).arc(startAngle, endAngle, radiusX, radiusY, anticlockwise);\n          }\n\n          return this;\n      };\n\n      MultiPath.prototype.arcTo = function arcTo (end, rx, ry, largeArc, swipe, rotation) {\n          if (this.paths.length > 0) {\n              last(this.paths).arcTo(end, rx, ry, largeArc, swipe, rotation);\n          }\n\n          return this;\n      };\n\n      MultiPath.prototype.close = function close () {\n          if (this.paths.length > 0) {\n              last(this.paths).close();\n          }\n\n          return this;\n      };\n\n      MultiPath.prototype._bbox = function _bbox (matrix) {\n          return elementsBoundingBox(this.paths, true, matrix);\n      };\n\n      MultiPath.prototype.rawBBox = function rawBBox () {\n          return elementsBoundingBox(this.paths, false);\n      };\n\n      MultiPath.prototype._containsPoint = function _containsPoint (point) {\n          var paths = this.paths;\n\n          for (var idx = 0; idx < paths.length; idx++) {\n              if (paths[idx]._containsPoint(point)) {\n                  return true;\n              }\n          }\n          return false;\n      };\n\n      MultiPath.prototype._isOnPath = function _isOnPath (point) {\n          var paths = this.paths;\n          var width = this.options.stroke.width;\n\n          for (var idx = 0; idx < paths.length; idx++) {\n              if (paths[idx]._isOnPath(point, width)) {\n                  return true;\n              }\n          }\n          return false;\n      };\n\n      MultiPath.prototype._clippedBBox = function _clippedBBox (transformation) {\n          return elementsClippedBoundingBox(this.paths, this.currentTransform(transformation));\n      };\n\n      Object.defineProperties( MultiPath.prototype, prototypeAccessors$1 );\n\n      return MultiPath;\n  }(paintable(measurable(Element$1))));\n\n  var DEFAULT_STROKE = \"#000\";\n\n  var Arc = (function (superclass) {\n      function Arc(geometry, options) {\n          if ( geometry === void 0 ) geometry = new Arc$1();\n          if ( options === void 0 ) options = {};\n\n          superclass.call(this, options);\n\n          this.geometry(geometry);\n\n          if (!defined(this.options.stroke)) {\n              this.stroke(DEFAULT_STROKE);\n          }\n      }\n\n      if ( superclass ) Arc.__proto__ = superclass;\n      Arc.prototype = Object.create( superclass && superclass.prototype );\n      Arc.prototype.constructor = Arc;\n\n      var prototypeAccessors = { nodeType: { configurable: true } };\n\n      prototypeAccessors.nodeType.get = function () {\n          return \"Arc\";\n      };\n\n      Arc.prototype._bbox = function _bbox (matrix) {\n          return this._geometry.bbox(matrix);\n      };\n\n      Arc.prototype.rawBBox = function rawBBox () {\n          return this.geometry().bbox();\n      };\n\n      Arc.prototype.toPath = function toPath () {\n          var path = new Path();\n          var curvePoints = this.geometry().curvePoints();\n\n          if (curvePoints.length > 0) {\n              path.moveTo(curvePoints[0].x, curvePoints[0].y);\n\n              for (var i = 1; i < curvePoints.length; i += 3) {\n                  path.curveTo(curvePoints[i], curvePoints[i + 1], curvePoints[i + 2]);\n              }\n          }\n\n          return path;\n      };\n\n      Arc.prototype._containsPoint = function _containsPoint (point) {\n          return this.geometry().containsPoint(point);\n      };\n\n      Arc.prototype._isOnPath = function _isOnPath (point) {\n          return this.geometry()._isOnPath(point, this.options.stroke.width / 2);\n      };\n\n      Object.defineProperties( Arc.prototype, prototypeAccessors );\n\n      return Arc;\n  }(paintable(measurable(withGeometry(Element$1)))));\n\n  var DEFAULT_FONT = \"12px sans-serif\";\n  var DEFAULT_FILL = \"#000\";\n\n  var Text = (function (superclass) {\n      function Text(content, position, options) {\n          if ( position === void 0 ) position = new Point();\n          if ( options === void 0 ) options = {};\n\n          superclass.call(this, options);\n\n          this.content(content);\n          this.position(position);\n\n          if (!this.options.font) {\n              this.options.font = DEFAULT_FONT;\n          }\n\n          if (!defined(this.options.fill)) {\n              this.fill(DEFAULT_FILL);\n          }\n      }\n\n      if ( superclass ) Text.__proto__ = superclass;\n      Text.prototype = Object.create( superclass && superclass.prototype );\n      Text.prototype.constructor = Text;\n\n      var prototypeAccessors = { nodeType: { configurable: true } };\n\n      prototypeAccessors.nodeType.get = function () {\n          return \"Text\";\n      };\n\n      Text.prototype.content = function content (value) {\n          if (defined(value)) {\n              this.options.set(\"content\", value);\n              return this;\n          }\n\n          return this.options.get(\"content\");\n      };\n\n      Text.prototype.measure = function measure () {\n          var metrics = measureText(this.content(), {\n              font: this.options.get(\"font\")\n          });\n\n          return metrics;\n      };\n\n      Text.prototype.rect = function rect () {\n          var size = this.measure();\n          var pos = this.position().clone();\n          return new Rect$1(pos, [ size.width, size.height ]);\n      };\n\n      Text.prototype.bbox = function bbox (transformation) {\n          var combinedMatrix = toMatrix(this.currentTransform(transformation));\n          return this.rect().bbox(combinedMatrix);\n      };\n\n      Text.prototype.rawBBox = function rawBBox () {\n          return this.rect().bbox();\n      };\n\n      Text.prototype._containsPoint = function _containsPoint (point) {\n          return this.rect().containsPoint(point);\n      };\n\n      Object.defineProperties( Text.prototype, prototypeAccessors );\n\n      return Text;\n  }(paintable(withPoints(Element$1, [ \"position\" ]))));\n\n  var Image$1 = (function (superclass) {\n      function Image(src, rect, options) {\n          if ( rect === void 0 ) rect = new Rect$1();\n          if ( options === void 0 ) options = {};\n\n          superclass.call(this, options);\n\n          this.src(src);\n          this.rect(rect);\n      }\n\n      if ( superclass ) Image.__proto__ = superclass;\n      Image.prototype = Object.create( superclass && superclass.prototype );\n      Image.prototype.constructor = Image;\n\n      var prototypeAccessors = { nodeType: { configurable: true } };\n\n      prototypeAccessors.nodeType.get = function () {\n          return \"Image\";\n      };\n\n      Image.prototype.src = function src (value) {\n          if (defined(value)) {\n              this.options.set(\"src\", value);\n              return this;\n          }\n\n          return this.options.get(\"src\");\n      };\n\n      Image.prototype.bbox = function bbox (transformation) {\n          var combinedMatrix = toMatrix(this.currentTransform(transformation));\n          return this._rect.bbox(combinedMatrix);\n      };\n\n      Image.prototype.rawBBox = function rawBBox () {\n          return this._rect.bbox();\n      };\n\n      Image.prototype._containsPoint = function _containsPoint (point) {\n          return this._rect.containsPoint(point);\n      };\n\n      Image.prototype._hasFill = function _hasFill () {\n          return this.src();\n      };\n\n      Object.defineProperties( Image.prototype, prototypeAccessors );\n\n      return Image;\n  }(withGeometry(Element$1, [ \"rect\" ])));\n\n  var traversable = function (TBase, childrenField) { return (\n      (function (TBase) {\n          function anonymous () {\n              TBase.apply(this, arguments);\n          }\n\n          if ( TBase ) anonymous.__proto__ = TBase;\n          anonymous.prototype = Object.create( TBase && TBase.prototype );\n          anonymous.prototype.constructor = anonymous;\n\n          anonymous.prototype.traverse = function traverse (callback) {\n              var children = this[childrenField];\n\n              for (var i = 0; i < children.length; i++) {\n                  var child = children[i];\n\n                  if (child.traverse) {\n                      child.traverse(callback);\n                  } else {\n                      callback(child);\n                  }\n              }\n\n              return this;\n          };\n\n          return anonymous;\n      }(TBase))\n  ); };\n\n  var Group = (function (superclass) {\n      function Group(options) {\n          superclass.call(this, options);\n          this.children = [];\n      }\n\n      if ( superclass ) Group.__proto__ = superclass;\n      Group.prototype = Object.create( superclass && superclass.prototype );\n      Group.prototype.constructor = Group;\n\n      var prototypeAccessors = { nodeType: { configurable: true } };\n\n      prototypeAccessors.nodeType.get = function () {\n          return \"Group\";\n      };\n\n      Group.prototype.childrenChange = function childrenChange (action, items, index) {\n          this.trigger(\"childrenChange\",{\n              action: action,\n              items: items,\n              index: index\n          });\n      };\n\n      Group.prototype.append = function append$1 () {\n          append(this.children, arguments);\n          this._reparent(arguments, this);\n\n          this.childrenChange(\"add\", arguments);\n\n          return this;\n      };\n\n      Group.prototype.insert = function insert (index, element) {\n          this.children.splice(index, 0, element);\n          element.parent = this;\n\n          this.childrenChange(\"add\", [ element ], index);\n\n          return this;\n      };\n\n      Group.prototype.insertAt = function insertAt (element, index) {\n          return this.insert(index, element);\n      };\n\n      Group.prototype.remove = function remove (element) {\n          var index = this.children.indexOf(element);\n          if (index >= 0) {\n              this.children.splice(index, 1);\n              element.parent = null;\n              this.childrenChange(\"remove\", [ element ], index);\n          }\n\n          return this;\n      };\n\n      Group.prototype.removeAt = function removeAt (index) {\n          if (0 <= index && index < this.children.length) {\n              var element = this.children[index];\n              this.children.splice(index, 1);\n              element.parent = null;\n              this.childrenChange(\"remove\", [ element ], index);\n          }\n\n          return this;\n      };\n\n      Group.prototype.clear = function clear () {\n          var items = this.children;\n          this.children = [];\n          this._reparent(items, null);\n\n          this.childrenChange(\"remove\", items, 0);\n\n          return this;\n      };\n\n      Group.prototype.bbox = function bbox (transformation) {\n          return elementsBoundingBox(this.children, true, this.currentTransform(transformation));\n      };\n\n      Group.prototype.rawBBox = function rawBBox () {\n          return elementsBoundingBox(this.children, false);\n      };\n\n      Group.prototype._clippedBBox = function _clippedBBox (transformation) {\n          return elementsClippedBoundingBox(this.children, this.currentTransform(transformation));\n      };\n\n      Group.prototype.currentTransform = function currentTransform (transformation) {\n          return Element$1.prototype.currentTransform.call(this, transformation) || null;\n      };\n\n      Group.prototype.containsPoint = function containsPoint (point, parentTransform) {\n          if (this.visible()) {\n              var children = this.children;\n              var transform = this.currentTransform(parentTransform);\n              for (var idx = 0; idx < children.length; idx++) {\n                  if (children[idx].containsPoint(point, transform)) {\n                      return true;\n                  }\n              }\n          }\n          return false;\n      };\n\n      Group.prototype._reparent = function _reparent (elements, newParent) {\n          var this$1$1 = this;\n\n          for (var i = 0; i < elements.length; i++) {\n              var child = elements[i];\n              var parent = child.parent;\n              if (parent && parent !== this$1$1 && parent.remove) {\n                  parent.remove(child);\n              }\n\n              child.parent = newParent;\n          }\n      };\n\n      Object.defineProperties( Group.prototype, prototypeAccessors );\n\n      return Group;\n  }(traversable(Element$1, \"children\")));\n\n  function translateToPoint(point, bbox, element) {\n      var transofrm = element.transform() || transform();\n      var matrix = transofrm.matrix();\n      matrix.e += point.x - bbox.origin.x;\n      matrix.f += point.y - bbox.origin.y;\n\n      transofrm.matrix(matrix);\n      element.transform(transofrm);\n  }\n\n  function alignStart(size, rect, align, axis, sizeField) {\n      var start;\n      if (align === \"start\") {\n          start = rect.origin[axis];\n      } else if (align === \"end\") {\n          start = rect.origin[axis] + rect.size[sizeField] - size;\n      } else {\n          start = rect.origin[axis] + (rect.size[sizeField] - size) / 2;\n      }\n\n      return start;\n  }\n\n  function alignStartReverse(size, rect, align, axis, sizeField) {\n      var start;\n      if (align === \"start\") {\n          start = rect.origin[axis] + rect.size[sizeField] - size;\n      } else if (align === \"end\") {\n          start = rect.origin[axis];\n      } else {\n          start = rect.origin[axis] + (rect.size[sizeField] - size) / 2;\n      }\n\n      return start;\n  }\n\n  var DEFAULT_OPTIONS = {\n      alignContent: \"start\",\n      justifyContent: \"start\",\n      alignItems: \"start\",\n      spacing: 0,\n      orientation: \"horizontal\",\n      lineSpacing: 0,\n      wrap: true,\n      revers: false\n  };\n\n  var forEach = function (elements, callback) {\n      elements.forEach(callback);\n  };\n\n  var forEachReverse = function (elements, callback) {\n      var length = elements.length;\n\n      for (var idx = length - 1; idx >= 0; idx--) {\n          callback(elements[idx], idx);\n      }\n  };\n\n  var Layout = (function (Group) {\n      function Layout(rect, options) {\n          Group.call(this, Object.assign({}, DEFAULT_OPTIONS, options));\n          this._rect = rect;\n          this._fieldMap = {};\n      }\n\n      if ( Group ) Layout.__proto__ = Group;\n      Layout.prototype = Object.create( Group && Group.prototype );\n      Layout.prototype.constructor = Layout;\n\n      Layout.prototype.rect = function rect (value) {\n          if (value) {\n              this._rect = value;\n              return this;\n          }\n\n          return this._rect;\n      };\n\n      Layout.prototype._initMap = function _initMap () {\n          var options = this.options;\n          var fieldMap = this._fieldMap;\n          if (options.orientation === \"horizontal\") {\n              fieldMap.sizeField = \"width\";\n              fieldMap.groupsSizeField = \"height\";\n              fieldMap.groupAxis = \"x\";\n              fieldMap.groupsAxis = \"y\";\n          } else {\n              fieldMap.sizeField = \"height\";\n              fieldMap.groupsSizeField = \"width\";\n              fieldMap.groupAxis = \"y\";\n              fieldMap.groupsAxis = \"x\";\n          }\n\n          if (options.reverse) {\n              this.forEach = forEachReverse;\n              this.justifyAlign = alignStartReverse;\n          } else {\n              this.forEach = forEach;\n              this.justifyAlign = alignStart;\n          }\n      };\n\n      Layout.prototype.reflow = function reflow () {\n          var this$1$1 = this;\n\n          if (!this._rect || this.children.length === 0) {\n              return;\n          }\n          this._initMap();\n\n          if (this.options.transform) {\n              this.transform(null);\n          }\n\n          var options = this.options;\n          var rect = this._rect;\n          var ref = this._initGroups();\n          var groups = ref.groups;\n          var groupsSize = ref.groupsSize;\n          var ref$1 = this._fieldMap;\n          var sizeField = ref$1.sizeField;\n          var groupsSizeField = ref$1.groupsSizeField;\n          var groupAxis = ref$1.groupAxis;\n          var groupsAxis = ref$1.groupsAxis;\n          var groupOrigin = new Point();\n          var elementOrigin = new Point();\n          var size = new Size();\n          var groupStart = alignStart(groupsSize, rect, options.alignContent, groupsAxis, groupsSizeField);\n          var elementStart, group, groupBox;\n\n          var arrangeElements = function (bbox, idx) {\n              var element = group.elements[idx];\n\n              elementOrigin[groupAxis] = elementStart;\n              elementOrigin[groupsAxis] = alignStart(bbox.size[groupsSizeField], groupBox, options.alignItems, groupsAxis, groupsSizeField);\n              translateToPoint(elementOrigin, bbox, element);\n              elementStart += bbox.size[sizeField] + options.spacing;\n          };\n\n          for (var groupIdx = 0; groupIdx < groups.length; groupIdx++) {\n              group = groups[groupIdx];\n              groupOrigin[groupAxis] = elementStart = this$1$1.justifyAlign(group.size, rect, options.justifyContent, groupAxis, sizeField);\n              groupOrigin[groupsAxis] = groupStart;\n              size[sizeField] = group.size;\n              size[groupsSizeField] = group.lineSize;\n              groupBox = new Rect$1(groupOrigin, size);\n              this$1$1.forEach(group.bboxes, arrangeElements);\n\n              groupStart += group.lineSize + options.lineSpacing;\n          }\n\n          if (!options.wrap && group.size > rect.size[sizeField]) {\n              var scale = rect.size[sizeField] / groupBox.size[sizeField];\n              var scaledStart = groupBox.topLeft().scale(scale, scale);\n              var scaledSize = groupBox.size[groupsSizeField] * scale;\n              var newStart = alignStart(scaledSize, rect, options.alignContent, groupsAxis, groupsSizeField);\n              var transform$1 = transform();\n              if (groupAxis === \"x\") {\n                  transform$1.translate(rect.origin.x - scaledStart.x, newStart - scaledStart.y);\n              } else {\n                  transform$1.translate(newStart - scaledStart.x, rect.origin.y - scaledStart.y);\n              }\n              transform$1.scale(scale, scale);\n\n              this.transform(transform$1);\n          }\n      };\n\n      Layout.prototype._initGroups = function _initGroups () {\n          var this$1$1 = this;\n\n          var ref = this;\n          var options = ref.options;\n          var children = ref.children;\n          var lineSpacing = options.lineSpacing;\n          var wrap = options.wrap;\n          var spacing = options.spacing;\n          var sizeField = this._fieldMap.sizeField;\n          var group = this._newGroup();\n          var groups = [];\n          var addGroup = function() {\n              groups.push(group);\n              groupsSize += group.lineSize + lineSpacing;\n          };\n          var groupsSize = -lineSpacing;\n\n          for (var idx = 0; idx < children.length; idx++) {\n              var element = children[idx];\n              var bbox = children[idx].clippedBBox();\n              if (element.visible() && bbox) {\n                  if (wrap && group.size + bbox.size[sizeField] + spacing > this$1$1._rect.size[sizeField]) {\n                      if (group.bboxes.length === 0) {\n                          this$1$1._addToGroup(group, bbox, element);\n                          addGroup();\n                          group = this$1$1._newGroup();\n                      } else {\n                          addGroup();\n                          group = this$1$1._newGroup();\n                          this$1$1._addToGroup(group, bbox, element);\n                      }\n                  } else {\n                      this$1$1._addToGroup(group, bbox, element);\n                  }\n              }\n          }\n\n          if (group.bboxes.length) {\n              addGroup();\n          }\n\n          return {\n              groups: groups,\n              groupsSize: groupsSize\n          };\n      };\n\n      Layout.prototype._addToGroup = function _addToGroup (group, bbox, element) {\n          group.size += bbox.size[this._fieldMap.sizeField] + this.options.spacing;\n          group.lineSize = Math.max(bbox.size[this._fieldMap.groupsSizeField], group.lineSize);\n          group.bboxes.push(bbox);\n          group.elements.push(element);\n      };\n\n      Layout.prototype._newGroup = function _newGroup () {\n          return {\n              lineSize: 0,\n              size: -this.options.spacing,\n              bboxes: [],\n              elements: []\n          };\n      };\n\n      return Layout;\n  }(Group));\n\n  var Rect = (function (superclass) {\n      function Rect(geometry, options) {\n          if ( geometry === void 0 ) geometry = new Rect$1();\n          if ( options === void 0 ) options = {};\n\n          superclass.call(this, options);\n\n          this.geometry(geometry);\n\n          if (!defined(this.options.stroke)) {\n              this.stroke(\"#000\");\n          }\n      }\n\n      if ( superclass ) Rect.__proto__ = superclass;\n      Rect.prototype = Object.create( superclass && superclass.prototype );\n      Rect.prototype.constructor = Rect;\n\n      var prototypeAccessors = { nodeType: { configurable: true } };\n\n      prototypeAccessors.nodeType.get = function () {\n          return \"Rect\";\n      };\n\n      Rect.prototype._bbox = function _bbox (matrix) {\n          return this._geometry.bbox(matrix);\n      };\n\n      Rect.prototype.rawBBox = function rawBBox () {\n          return this._geometry.bbox();\n      };\n\n      Rect.prototype._containsPoint = function _containsPoint (point) {\n          return this._geometry.containsPoint(point);\n      };\n\n      Rect.prototype._isOnPath = function _isOnPath (point) {\n          return this.geometry()._isOnPath(point, this.options.stroke.width / 2);\n      };\n\n      Object.defineProperties( Rect.prototype, prototypeAccessors );\n\n      return Rect;\n  }(paintable(measurable(withGeometry(Element$1)))));\n\n  function alignElements(elements, rect, alignment, axis, sizeField) {\n      for (var idx = 0; idx < elements.length; idx++) {\n          var bbox = elements[idx].clippedBBox();\n          if (bbox) {\n              var point = bbox.origin.clone();\n              point[axis] = alignStart(bbox.size[sizeField], rect, alignment || \"start\", axis, sizeField);\n              translateToPoint(point, bbox, elements[idx]);\n          }\n      }\n  }\n\n  function align(elements, rect, alignment) {\n      alignElements(elements, rect, alignment, \"x\", \"width\");\n  }\n\n  function vAlign(elements, rect, alignment) {\n      alignElements(elements, rect, alignment, \"y\", \"height\");\n  }\n\n  function stackElements(elements, stackAxis, otherAxis, sizeField) {\n      if (elements.length > 1) {\n          var origin = new Point();\n          var previousBBox = elements[0].bbox;\n\n          for (var idx = 1; idx < elements.length; idx++) {\n              var element = elements[idx].element;\n              var bbox = elements[idx].bbox;\n              origin[stackAxis] = previousBBox.origin[stackAxis] + previousBBox.size[sizeField];\n              origin[otherAxis] = bbox.origin[otherAxis];\n              translateToPoint(origin, bbox, element);\n              bbox.origin[stackAxis] = origin[stackAxis];\n              previousBBox = bbox;\n          }\n      }\n  }\n\n  function createStackElements(elements) {\n      var stackElements = [];\n\n      for (var idx = 0; idx < elements.length; idx++) {\n          var element = elements[idx];\n          var bbox = element.clippedBBox();\n          if (bbox) {\n              stackElements.push({\n                  element: element,\n                  bbox: bbox\n              });\n          }\n      }\n\n      return stackElements;\n  }\n\n  function stack(elements) {\n      stackElements(createStackElements(elements), \"x\", \"y\", \"width\");\n  }\n\n  function vStack(elements) {\n      stackElements(createStackElements(elements), \"y\", \"x\", \"height\");\n  }\n\n  function getStacks(elements, rect, sizeField) {\n      var maxSize = rect.size[sizeField];\n      var stacks = [];\n      var stack = [];\n      var stackSize = 0;\n      var element, bbox;\n\n      var addElementToStack = function() {\n          stack.push({\n              element: element,\n              bbox: bbox\n          });\n      };\n\n      for (var idx = 0; idx < elements.length; idx++) {\n          element = elements[idx];\n\n          bbox = element.clippedBBox();\n          if (bbox) {\n              var size = bbox.size[sizeField];\n              if (stackSize + size > maxSize) {\n                  if (stack.length) {\n                      stacks.push(stack);\n                      stack = [];\n                      addElementToStack();\n                      stackSize = size;\n                  } else {\n                      addElementToStack();\n                      stacks.push(stack);\n                      stack = [];\n                      stackSize = 0;\n                  }\n              } else {\n                  addElementToStack();\n                  stackSize += size;\n              }\n          }\n      }\n\n      if (stack.length) {\n          stacks.push(stack);\n      }\n\n      return stacks;\n  }\n\n  function wrapElements(elements, rect, axis, otherAxis, sizeField) {\n      var stacks = getStacks(elements, rect, sizeField);\n      var origin = rect.origin.clone();\n      var result = [];\n\n      for (var idx = 0; idx < stacks.length; idx++) {\n          var stack = stacks[idx];\n          var startElement = stack[0];\n          origin[otherAxis] = startElement.bbox.origin[otherAxis];\n          translateToPoint(origin, startElement.bbox, startElement.element);\n          startElement.bbox.origin[axis] = origin[axis];\n          stackElements(stack, axis, otherAxis, sizeField);\n          result.push([]);\n          for (var elementIdx = 0; elementIdx < stack.length; elementIdx++) {\n              result[idx].push(stack[elementIdx].element);\n          }\n      }\n      return result;\n  }\n\n  function wrap(elements, rect) {\n      return wrapElements(elements, rect, \"x\", \"y\", \"width\");\n  }\n\n  function vWrap(elements, rect) {\n      return wrapElements(elements, rect, \"y\", \"x\", \"height\");\n  }\n\n  function fit(element, rect) {\n      var bbox = element.clippedBBox();\n      if (bbox) {\n          var elementSize = bbox.size;\n          var rectSize = rect.size;\n          if (rectSize.width < elementSize.width || rectSize.height < elementSize.height) {\n              var scale = Math.min(rectSize.width / elementSize.width, rectSize.height / elementSize.height);\n              var transform$1 = element.transform() || transform();\n              transform$1.scale(scale, scale);\n              element.transform(transform$1);\n          }\n      }\n  }\n\n  var StopsArray = (function (ElementsArray) {\n      function StopsArray () {\n          ElementsArray.apply(this, arguments);\n      }\n\n      if ( ElementsArray ) StopsArray.__proto__ = ElementsArray;\n      StopsArray.prototype = Object.create( ElementsArray && ElementsArray.prototype );\n      StopsArray.prototype.constructor = StopsArray;\n\n      StopsArray.prototype._change = function _change () {\n          this.optionsChange({\n              field: \"stops\"\n          });\n      };\n\n      return StopsArray;\n  }(ElementsArray));\n\n  function optionsAccessor(name) {\n      return function(value) {\n          if (defined(value)) {\n              this.options.set(name, value);\n              return this;\n          }\n\n          return this.options.get(name);\n      };\n  }\n\n  function defineOptionsAccessors(fn, names) {\n      for (var i = 0; i < names.length; i++) {\n          fn[names[i]] = optionsAccessor(names[i]);\n      }\n  }\n\n  var withOptions = function (TBase, names) {\n      var result = (function (TBase) {\n          function result () {\n              TBase.apply(this, arguments);\n          }if ( TBase ) result.__proto__ = TBase;\n          result.prototype = Object.create( TBase && TBase.prototype );\n          result.prototype.constructor = result;\n\n          \n\n          return result;\n      }(TBase));\n      defineOptionsAccessors(result.prototype, names);\n\n      return result;\n  };\n\n  var options = [ \"offset\", \"color\", \"opacity\" ];\n\n  var GradientStop = (function (superclass) {\n      function GradientStop(offset, color, opacity) {\n          superclass.call(this);\n\n          this.options = new OptionsStore({\n              offset: offset,\n              color: color,\n              opacity: defined(opacity) ? opacity : 1\n          });\n\n          this.options.addObserver(this);\n      }\n\n      if ( superclass ) GradientStop.__proto__ = superclass;\n      GradientStop.prototype = Object.create( superclass && superclass.prototype );\n      GradientStop.prototype.constructor = GradientStop;\n\n      GradientStop.create = function create (arg) {\n          if (defined(arg)) {\n              var stop;\n              if (arg instanceof GradientStop) {\n                  stop = arg;\n              } else if (arg.length > 1) {\n                  stop = new GradientStop(arg[0], arg[1], arg[2]);\n              } else {\n                  stop = new GradientStop(arg.offset, arg.color, arg.opacity);\n              }\n\n              return stop;\n          }\n      };\n\n      return GradientStop;\n  }(withOptions(HasObservers, options)));\n\n  var Gradient = (function (HasObservers) {\n      function Gradient(options) {\n          if ( options === void 0 ) options = {};\n\n          HasObservers.call(this);\n\n          this.stops = new StopsArray(this._createStops(options.stops));\n          this.stops.addObserver(this);\n          this._userSpace = options.userSpace;\n          this.id = definitionId();\n      }\n\n      if ( HasObservers ) Gradient.__proto__ = HasObservers;\n      Gradient.prototype = Object.create( HasObservers && HasObservers.prototype );\n      Gradient.prototype.constructor = Gradient;\n\n      var prototypeAccessors = { nodeType: { configurable: true } };\n\n      prototypeAccessors.nodeType.get = function () {\n          return \"Gradient\";\n      };\n\n      Gradient.prototype.userSpace = function userSpace (value) {\n          if (defined(value)) {\n              this._userSpace = value;\n              this.optionsChange();\n              return this;\n          }\n\n          return this._userSpace;\n      };\n\n      Gradient.prototype._createStops = function _createStops (stops) {\n          if ( stops === void 0 ) stops = [];\n\n          var result = [];\n          for (var idx = 0; idx < stops.length; idx++) {\n              result.push(GradientStop.create(stops[idx]));\n          }\n\n          return result;\n      };\n\n      Gradient.prototype.addStop = function addStop (offset, color, opacity) {\n          this.stops.push(new GradientStop(offset, color, opacity));\n      };\n\n      Gradient.prototype.removeStop = function removeStop (stop) {\n          var index = this.stops.indexOf(stop);\n          if (index >= 0) {\n              this.stops.splice(index, 1);\n          }\n      };\n\n      Gradient.prototype.optionsChange = function optionsChange (e) {\n          this.trigger(\"optionsChange\", {\n              field: \"gradient\" + (e ? \".\" + e.field : \"\"),\n              value: this\n          });\n      };\n\n      Gradient.prototype.geometryChange = function geometryChange () {\n          this.optionsChange();\n      };\n\n      Object.defineProperties( Gradient.prototype, prototypeAccessors );\n\n      return Gradient;\n  }(HasObservers));\n\n  var points = [ \"start\", \"end\" ];\n\n  var LinearGradient = (function (superclass) {\n      function LinearGradient(options) {\n          if ( options === void 0 ) options = {};\n\n          superclass.call(this, options);\n\n          this.start(options.start || new Point());\n          this.end(options.end || new Point(1, 0));\n      }\n\n      if ( superclass ) LinearGradient.__proto__ = superclass;\n      LinearGradient.prototype = Object.create( superclass && superclass.prototype );\n      LinearGradient.prototype.constructor = LinearGradient;\n\n      return LinearGradient;\n  }(withPoints(Gradient, points)));\n\n  var RadialGradient = (function (superclass) {\n      function RadialGradient(options) {\n          if ( options === void 0 ) options = {};\n\n          superclass.call(this, options);\n\n          this.center(options.center || new Point());\n          this._radius = defined(options.radius) ? options.radius : 1;\n          this._fallbackFill = options.fallbackFill;\n      }\n\n      if ( superclass ) RadialGradient.__proto__ = superclass;\n      RadialGradient.prototype = Object.create( superclass && superclass.prototype );\n      RadialGradient.prototype.constructor = RadialGradient;\n\n      RadialGradient.prototype.radius = function radius (value) {\n          if (defined(value)) {\n              this._radius = value;\n              this.geometryChange();\n              return this;\n          }\n\n          return this._radius;\n      };\n\n      RadialGradient.prototype.fallbackFill = function fallbackFill (value) {\n          if (defined(value)) {\n              this._fallbackFill = value;\n              this.optionsChange();\n              return this;\n          }\n\n          return this._fallbackFill;\n      };\n\n      return RadialGradient;\n  }(withPoints(Gradient, [ \"center\" ])));\n\n  var defaultColor = \"#aba4a6\";\r\n  var defaultLine = { width: 2, gap: 18 };\r\n  var defaultDot = { radius: 10, gap: 10 };\r\n  var defaultGrid = { size: 18, gap: 2 };\r\n\r\n  var Pattern = (function (Group) {\n      function Pattern(options) {\r\n          Group.call(this);\r\n\r\n          var width = options.width;\n          var height = options.height;\r\n          this._size = Size.create([width, height]);\r\n          this.id = definitionId();\r\n      }\n\n      if ( Group ) Pattern.__proto__ = Group;\n      Pattern.prototype = Object.create( Group && Group.prototype );\n      Pattern.prototype.constructor = Pattern;\n\n      var prototypeAccessors = { nodeType: { configurable: true } };\r\n\r\n      prototypeAccessors.nodeType.get = function () {\r\n          return PATTERN;\r\n      };\n\n      Pattern.prototype.size = function size (value) {\r\n          if (value) {\r\n              this._size = Size.create(value);\r\n              return this;\r\n          }\r\n\r\n          return this._size;\r\n      };\n\n      Object.defineProperties( Pattern.prototype, prototypeAccessors );\n\n      return Pattern;\n  }(Group));\r\n\r\n  var drawBackground = function (pattern, color, size) {\r\n      if (color) {\r\n          pattern.append(\r\n              new Rect(new Rect$1([0, 0], size), { fill: { color: color }, stroke: null })\r\n          );\r\n      }\r\n  };\r\n\r\n  function dotsPattern(options) {\n      if ( options === void 0 ) options = {};\n\r\n      var gap = options.gap; if ( gap === void 0 ) gap = defaultDot.gap;\n      var radius = options.radius; if ( radius === void 0 ) radius = defaultDot.radius;\n      var color = options.color; if ( color === void 0 ) color = defaultColor;\n      var background = options.background;\r\n      var shapeOptions = { fill: { color: color }, stroke: null };\r\n      var size = 4 * radius + 2 * gap;\r\n      var yC2 = 3 * radius + 1.5 * gap;\r\n      var center1 = [size / 2, radius + 1/2 * gap];\r\n      var center2 = [0, yC2];\r\n      var center3 = [size, yC2];\r\n\r\n      var pattern = new Pattern({ width: size, height: size });\r\n\r\n      drawBackground(pattern, background, [size, size]);\r\n\r\n      pattern.append(\r\n          new Circle(new Circle$1(center1, radius), shapeOptions),\r\n          new Circle(new Circle$1(center2, radius), shapeOptions),\r\n          new Circle(new Circle$1(center3, radius), shapeOptions)\r\n      );\r\n\r\n      return pattern;\r\n  };\r\n\r\n  function verticalStripesPattern(options) {\n      if ( options === void 0 ) options = {};\n\r\n      var gap = options.gap; if ( gap === void 0 ) gap = defaultLine.gap;\n      var width = options.width; if ( width === void 0 ) width = defaultLine.width;\n      var color = options.color; if ( color === void 0 ) color = defaultColor;\n      var background = options.background;\r\n      var size = width + gap;\r\n      var shapeOptions = { fill: null, stroke: { color: color, width: width / 2 } };\r\n      var pattern = new Pattern({ width: size, height: size });\r\n\r\n      drawBackground(pattern, background, [size, size]);\r\n\r\n      var xStart = width / 4;\r\n      var xEnd = size - width / 4;\r\n\r\n      var startLine = new Path(shapeOptions);\r\n      startLine.moveTo(xStart, 0).lineTo(xStart, size);\r\n\r\n      var endLine = new Path(shapeOptions);\r\n      endLine.moveTo(xEnd, 0).lineTo(xEnd, size);\r\n\r\n      pattern.append(startLine, endLine);\r\n\r\n      return pattern;\r\n  };\r\n\r\n  function crosshatchPattern(options) {\n      if ( options === void 0 ) options = {};\n\r\n      var gap = options.gap; if ( gap === void 0 ) gap = defaultLine.gap;\n      var width = options.width; if ( width === void 0 ) width = defaultLine.width;\n      var color = options.color; if ( color === void 0 ) color = defaultColor;\n      var background = options.background;\r\n      var size = Math.sqrt(2) * (width + gap);\r\n      var shapeOptions = { fill: null, stroke: { color: color, width: width } };\r\n      var pattern = new Pattern({ width: size, height: size });\r\n\r\n      drawBackground(pattern, background, [size, size]);\r\n\r\n      var line1 = new Path(shapeOptions);\r\n      line1.moveTo(0, 0).lineTo(size, size);\r\n\r\n      var line2 = new Path(shapeOptions);\r\n      line2.moveTo(size, 0).lineTo(0, size);\r\n\r\n      pattern.append(line1, line2);\r\n\r\n      return pattern;\r\n  };\r\n\r\n  function diagonalStripesPattern(options) {\n      if ( options === void 0 ) options = {};\n\r\n      var gap = options.gap; if ( gap === void 0 ) gap = defaultLine.gap;\n      var width = options.width; if ( width === void 0 ) width = defaultLine.width;\n      var color = options.color; if ( color === void 0 ) color = defaultColor;\n      var background = options.background;\r\n      var size = Math.sqrt(2) * (width + gap);\r\n      var shapeOptions = { fill: null, stroke: { color: color, width: width, lineCap: 'square' } };\r\n      var pattern = new Pattern({ width: size, height: size });\r\n      \r\n      drawBackground(pattern, background, [size, size]);\r\n\r\n      var line1 = new Path(shapeOptions);\r\n      line1.moveTo(0, size / 2).lineTo(size / 2, 0);\r\n\r\n      var line2 = new Path(shapeOptions);\r\n      line2.moveTo(size / 2, size).lineTo(size, size / 2);\r\n\r\n      pattern.append(line1, line2);\r\n\r\n      return pattern;\r\n  };\r\n\r\n  function gridPattern(options) {\n      if ( options === void 0 ) options = {};\n\r\n      var gap = options.gap; if ( gap === void 0 ) gap = defaultGrid.gap;\n      var squareSize = options.size; if ( squareSize === void 0 ) squareSize = defaultGrid.size;\n      var color = options.color; if ( color === void 0 ) color = defaultColor;\n      var background = options.background;\r\n      var size = squareSize + gap;\r\n      var halfGap = gap / 2;\r\n      var shapeOptions = { fill: { color: color }, stroke: null };\r\n      var pattern = new Pattern({ width: size, height: size });\r\n\r\n      drawBackground(pattern, background, [size, size]);\r\n\r\n      var rect = new Rect(new Rect$1([halfGap, halfGap], [squareSize, squareSize]), shapeOptions);\r\n      pattern.append(rect);\r\n\r\n      return pattern;\r\n  };\n\n  function swing(position) {\n      return 0.5 - Math.cos(position * Math.PI) / 2;\n  }\n\n  function linear(position) {\n      return position;\n  }\n\n  function easeOutElastic(position, time, start, diff) {\n      var s = 1.70158,\n          p = 0,\n          a = diff;\n\n      if (position === 0) {\n          return start;\n      }\n\n      if (position === 1) {\n          return start + diff;\n      }\n\n      if (!p) {\n          p = 0.5;\n      }\n\n      if (a < Math.abs(diff)) {\n          a = diff;\n          s = p / 4;\n      } else {\n          s = p / (2 * Math.PI) * Math.asin(diff / a);\n      }\n\n      return a * Math.pow(2, -10 * position) *\n             Math.sin((Number(position) - s) * (1.1 * Math.PI) / p) + diff + start;\n  }\n\n  var easingFunctions = /*#__PURE__*/Object.freeze({\n      __proto__: null,\n      easeOutElastic: easeOutElastic,\n      linear: linear,\n      swing: swing\n  });\n\n  var instance$2;\n\n  var AnimationFactory = (function (Class) {\n      function AnimationFactory() {\n          Class.call(this);\n\n          this._items = [];\n      }\n\n      if ( Class ) AnimationFactory.__proto__ = Class;\n      AnimationFactory.prototype = Object.create( Class && Class.prototype );\n      AnimationFactory.prototype.constructor = AnimationFactory;\n\n      var staticAccessors = { current: { configurable: true } };\n\n      staticAccessors.current.get = function () {\n          if (!instance$2) {\n              instance$2 = new AnimationFactory();\n          }\n\n          return instance$2;\n      };\n\n      AnimationFactory.prototype.register = function register (name, type) {\n          this._items.push({\n              name: name,\n              type: type\n          });\n      };\n\n      AnimationFactory.prototype.create = function create (element, options) {\n          var items = this._items;\n          var match;\n\n          if (options && options.type) {\n              var type = options.type.toLowerCase();\n              for (var i = 0; i < items.length; i++) {\n                  if (items[i].name.toLowerCase() === type) {\n                      match = items[i];\n                      break;\n                  }\n              }\n          }\n\n          if (match) {\n              return new match.type(element, options);\n          }\n      };\n\n      Object.defineProperties( AnimationFactory, staticAccessors );\n\n      return AnimationFactory;\n  }(Class));\n\n  var Animation = (function (Class) {\n      function Animation(element, options) {\n          Class.call(this);\n\n          this.options = Object.assign({}, this.options, options);\n          this.element = element;\n      }\n\n      if ( Class ) Animation.__proto__ = Class;\n      Animation.prototype = Object.create( Class && Class.prototype );\n      Animation.prototype.constructor = Animation;\n\n      var prototypeAccessors = { options: { configurable: true } };\n\n      Animation.create = function create (type, element, options) {\n          return AnimationFactory.current.create(type, element, options);\n      };\n\n      prototypeAccessors.options.get = function () {\n          return this._options || {\n              duration: 500,\n              easing: \"swing\"\n          };\n      };\n\n      prototypeAccessors.options.set = function (value) {\n          this._options = value;\n      };\n\n      Animation.prototype.setup = function setup () {};\n      Animation.prototype.step = function step () {};\n\n      Animation.prototype.play = function play () {\n          var this$1$1 = this;\n\n          var options = this.options;\n          var duration = options.duration;\n          var delay = options.delay; if ( delay === void 0 ) delay = 0;\n          var easing = easingFunctions[options.easing];\n          var start = now() + delay;\n          var finish = start + duration;\n\n          if (duration === 0) {\n              this.step(1);\n              this.abort();\n          } else {\n              setTimeout(function () {\n                  var loop = function () {\n                      if (this$1$1._stopped) {\n                          return;\n                      }\n\n                      var wallTime = now();\n\n                      var time = limitValue(wallTime - start, 0, duration);\n                      var position = time / duration;\n                      var easingPosition = easing(position, time, 0, 1, duration);\n\n                      this$1$1.step(easingPosition);\n\n                      if (wallTime < finish) {\n                          animationFrame(loop);\n                      } else {\n                          this$1$1.abort();\n                      }\n                  };\n\n                  loop();\n              }, delay);\n          }\n      };\n\n      Animation.prototype.abort = function abort () {\n          this._stopped = true;\n      };\n\n      Animation.prototype.destroy = function destroy () {\n          this.abort();\n      };\n\n      Object.defineProperties( Animation.prototype, prototypeAccessors );\n\n      return Animation;\n  }(Class));\n\n  var instance$1;\n\n  var PathParser = (function (Class) {\n      function PathParser () {\n          Class.apply(this, arguments);\n      }\n\n      if ( Class ) PathParser.__proto__ = Class;\n      PathParser.prototype = Object.create( Class && Class.prototype );\n      PathParser.prototype.constructor = PathParser;\n\n      var staticAccessors = { current: { configurable: true } };\n\n      staticAccessors.current.get = function () {\n          if (!instance$1) {\n              instance$1 = new PathParser();\n          }\n\n          return instance$1;\n      };\n\n      PathParser.prototype.parse = function parse (str, options) {\n          var multiPath = new MultiPath(options);\n          return parsePath(multiPath, str);\n      };\n\n      Object.defineProperties( PathParser, staticAccessors );\n\n      return PathParser;\n  }(Class));\n\n  var BaseNode = (function (Class) {\n      function BaseNode(srcElement) {\n          Class.call(this);\n\n          this.childNodes = [];\n          this.parent = null;\n\n          if (srcElement) {\n              this.srcElement = srcElement;\n              this.observe();\n          }\n      }\n\n      if ( Class ) BaseNode.__proto__ = Class;\n      BaseNode.prototype = Object.create( Class && Class.prototype );\n      BaseNode.prototype.constructor = BaseNode;\n\n      BaseNode.prototype.destroy = function destroy () {\n          var this$1$1 = this;\n\n          if (this.srcElement) {\n              this.srcElement.removeObserver(this);\n          }\n\n          var children = this.childNodes;\n          for (var i = 0; i < children.length; i++) {\n              this$1$1.childNodes[i].destroy();\n          }\n\n          this.parent = null;\n      };\n\n      BaseNode.prototype.load = function load () {};\n\n      BaseNode.prototype.observe = function observe () {\n          if (this.srcElement) {\n              this.srcElement.addObserver(this);\n          }\n      };\n\n      BaseNode.prototype.append = function append (node) {\n          this.childNodes.push(node);\n          node.parent = this;\n      };\n\n      BaseNode.prototype.insertAt = function insertAt (node, pos) {\n          this.childNodes.splice(pos, 0, node);\n          node.parent = this;\n      };\n\n      BaseNode.prototype.remove = function remove (index, count) {\n          var this$1$1 = this;\n\n          var end = index + count;\n          for (var i = index; i < end; i++) {\n              this$1$1.childNodes[i].removeSelf();\n          }\n          this.childNodes.splice(index, count);\n      };\n\n      BaseNode.prototype.removeSelf = function removeSelf () {\n          this.clear();\n          this.destroy();\n      };\n\n      BaseNode.prototype.clear = function clear () {\n          this.remove(0, this.childNodes.length);\n      };\n\n      BaseNode.prototype.invalidate = function invalidate () {\n          if (this.parent) {\n              this.parent.invalidate();\n          }\n      };\n\n      BaseNode.prototype.geometryChange = function geometryChange () {\n          this.invalidate();\n      };\n\n      BaseNode.prototype.optionsChange = function optionsChange () {\n          this.invalidate();\n      };\n\n      BaseNode.prototype.childrenChange = function childrenChange (e) {\n          if (e.action === \"add\") {\n              this.load(e.items, e.index);\n          } else if (e.action === \"remove\") {\n              this.remove(e.index, e.items.length);\n          }\n\n          this.invalidate();\n      };\n\n      return BaseNode;\n  }(Class));\n\n  var events = [\n      \"click\",\n      \"mouseenter\",\n      \"mouseleave\",\n      \"mousemove\",\n      \"resize\"\n  ];\n\n  var Surface$3 = (function (Observable) {\n      function Surface(element, options) {\n          Observable.call(this);\n\n          this.options = Object.assign({}, options);\n          this.element = element;\n          this.element._kendoExportVisual = this.exportVisual.bind(this);\n\n          this._click = this._handler(\"click\");\n          this._mouseenter = this._handler(\"mouseenter\");\n          this._mouseleave = this._handler(\"mouseleave\");\n          this._mousemove = this._handler(\"mousemove\");\n\n          this._visual = new Group();\n\n          elementSize(element, this.options);\n\n          this.bind(events, this.options);\n\n          this._enableTracking();\n      }\n\n      if ( Observable ) Surface.__proto__ = Observable;\n      Surface.prototype = Object.create( Observable && Observable.prototype );\n      Surface.prototype.constructor = Surface;\n\n      Surface.prototype.draw = function draw (element) {\n          this._visual.children.push(element);\n      };\n\n      Surface.prototype.clear = function clear () {\n          this._visual.children = [];\n      };\n\n      Surface.prototype.destroy = function destroy () {\n          this._visual = null;\n          this.element._kendoExportVisual = null;\n          this.unbind();\n      };\n\n      Surface.prototype.eventTarget = function eventTarget (e) {\n          var this$1$1 = this;\n\n          var domNode = eventElement(e);\n          var node;\n\n          while (!node && domNode) {\n              node = domNode._kendoNode;\n              if (domNode === this$1$1.element) {\n                  break;\n              }\n\n              domNode = domNode.parentElement;\n          }\n\n          if (node) {\n              return node.srcElement;\n          }\n      };\n\n      Surface.prototype.exportVisual = function exportVisual () {\n          return this._visual;\n      };\n\n      Surface.prototype.getSize = function getSize () {\n          return elementSize(this.element);\n      };\n\n      Surface.prototype.currentSize = function currentSize (size) {\n          if (size) {\n              this._size = size;\n          } else {\n              return this._size;\n          }\n      };\n\n      Surface.prototype.setSize = function setSize (size) {\n          elementSize(this.element, size);\n\n          this.currentSize(size);\n          this._resize();\n      };\n\n      Surface.prototype.resize = function resize (force) {\n          var size = this.getSize();\n          var currentSize = this.currentSize();\n\n          if (force || (size.width > 0 || size.height > 0) && (!currentSize || size.width !== currentSize.width || size.height !== currentSize.height)) {\n              this.currentSize(size);\n              this._resize(size, force);\n              this.trigger(\"resize\", size);\n          }\n      };\n\n      Surface.prototype.size = function size (value) {\n          if (!value) {\n              return this.getSize();\n          }\n\n          this.setSize(value);\n      };\n\n      Surface.prototype.suspendTracking = function suspendTracking () {\n          this._suspendedTracking = true;\n      };\n\n      Surface.prototype.resumeTracking = function resumeTracking () {\n          this._suspendedTracking = false;\n      };\n\n      Surface.prototype._enableTracking = function _enableTracking () {};\n\n      Surface.prototype._resize = function _resize () {};\n\n      Surface.prototype._handler = function _handler (eventName) {\n          var this$1$1 = this;\n\n          return function (e) {\n              var node = this$1$1.eventTarget(e);\n              if (node && !this$1$1._suspendedTracking) {\n                  this$1$1.trigger(eventName, {\n                      element: node,\n                      originalEvent: e,\n                      type: eventName\n                  });\n              }\n          };\n      };\n\n      Surface.prototype._elementOffset = function _elementOffset () {\n          var element = this.element;\n          var padding = elementPadding(element);\n          var ref = elementOffset(element);\n          var left = ref.left;\n          var top = ref.top;\n\n          return {\n              left: left + padding.left,\n              top: top + padding.top\n          };\n      };\n\n      Surface.prototype._surfacePoint = function _surfacePoint (e) {\n          var offset = this._elementOffset();\n          var coord = eventCoordinates(e);\n          var x = coord.x - offset.left;\n          var y = coord.y - offset.top;\n\n          var inverseTransform = elementScale(this.element).invert();\n          var point = new Point(\n              x,\n              y\n          ).transform(inverseTransform);\n\n          return point;\n      };\n\n      return Surface;\n  }(Observable));\n\n  function renderAttr(name, value) {\n      return (defined(value) && value !== null) ? (\" \" + name + \"=\\\"\" + value + \"\\\" \") : \"\";\n  }\n\n  function renderAllAttr(attrs) {\n      var output = \"\";\n      for (var i = 0; i < attrs.length; i++) {\n          output += renderAttr(attrs[i][0], attrs[i][1]);\n      }\n\n      return output;\n  }\n\n  function renderStyle(attrs) {\n      var output = \"\";\n      for (var i = 0; i < attrs.length; i++) {\n          var value = attrs[i][1];\n          if (defined(value)) {\n              output += attrs[i][0] + \":\" + value + \";\";\n          }\n      }\n\n      if (output !== \"\") {\n          return output;\n      }\n  }\n\n  var NODE_MAP$1 = {};\n\n  var setStyle = function (element, styleString) {\r\n      var styles = kendo_common_cmn_chunk_js.p(styleString);\r\n      Object.keys(styles).forEach(function (key) {\r\n          element.style[key] = styles[key];\r\n      });\r\n  };\r\n\r\n  var styleAttr = 'data-style';\r\n  var replaceStyleAttr = function (html) { return (html || '').replace(/\\sstyle=/g, ' ' + styleAttr + '='); };\r\n  var restoreStyleAttr = function (container) {\r\n      Array.from(container.querySelectorAll('[' + styleAttr +']')).forEach(function (element) {\r\n          var styleString = element.getAttribute(styleAttr);\r\n          element.removeAttribute(styleAttr);\r\n          setStyle(element, styleString);\r\n      });\r\n  };\r\n\r\n  var setInnerHTML = function (container, html) {\r\n      container.innerHTML = replaceStyleAttr(html);\r\n      restoreStyleAttr(container);\r\n  };\n\n  var SVG_NS = \"http://www.w3.org/2000/svg\";\n  var NONE = \"none\";\n  var POINT_DIGITS = 3;\n\n  var renderSVG = function(container, svg) {\n      setInnerHTML(container, svg);\n  };\n\n  if (typeof document !== \"undefined\") {\n      var testFragment = \"<svg xmlns='\" + SVG_NS + \"'></svg>\";\n      var testContainer = document.createElement(\"div\");\n      var hasParser = typeof DOMParser !== \"undefined\";\n\n      testContainer.innerHTML = testFragment;\n\n      if (hasParser && testContainer.firstChild.namespaceURI !== SVG_NS) {\n          renderSVG = function(container, svg) {\n              var parser = new DOMParser();\n              var chartDoc = parser.parseFromString(replaceStyleAttr(svg), \"text/xml\");\n              restoreStyleAttr(chartDoc);\n              var importedDoc = document.adoptNode(chartDoc.documentElement);\n\n              container.innerHTML = \"\";\n              container.appendChild(importedDoc);\n          };\n      }\n  }\n\n  var renderSVG$1 = renderSVG;\n\n  var TRANSFORM = \"transform\";\n  var DefinitionMap = {\n      clip: \"clip-path\",\n      fill: \"fill\"\n  };\n\n  function isDefinition(type, value) {\n      return type === \"clip\" || (type === \"fill\" && (!value || value.nodeType === \"Gradient\" || value.nodeType === PATTERN));\n  }\n\n  function baseUrl() {\n      var base = document.getElementsByTagName(\"base\")[0];\n      var href = document.location.href;\n      var url = \"\";\n\n      if (base && !(support$1.browser || {}).msie) {\n          var hashIndex = href.indexOf(\"#\");\n          if (hashIndex !== -1) {\n              href = href.substring(0, hashIndex);\n          }\n\n          url = href;\n      }\n\n      return url;\n  }\n\n  var Node$1 = (function (BaseNode) {\n      function Node(srcElement, options) {\n          BaseNode.call(this, srcElement);\n          this.definitions = {};\n\n          this.options = options;\n      }\n\n      if ( BaseNode ) Node.__proto__ = BaseNode;\n      Node.prototype = Object.create( BaseNode && BaseNode.prototype );\n      Node.prototype.constructor = Node;\n\n      Node.prototype.destroy = function destroy () {\n          if (this.element) {\n              this.element._kendoNode = null;\n              this.element = null;\n          }\n\n          this.clearDefinitions();\n          BaseNode.prototype.destroy.call(this);\n      };\n\n      Node.prototype.load = function load (elements, pos) {\n          var this$1$1 = this;\n\n          for (var i = 0; i < elements.length; i++) {\n              var srcElement = elements[i];\n              var children = srcElement.children;\n\n              var childNode = new NODE_MAP$1[srcElement.nodeType](srcElement, this$1$1.options);\n\n              if (defined(pos)) {\n                  this$1$1.insertAt(childNode, pos);\n              } else {\n                  this$1$1.append(childNode);\n              }\n\n              childNode.createDefinitions();\n\n              if (children && children.length > 0) {\n                  childNode.load(children);\n              }\n\n              var element = this$1$1.element;\n              if (element) {\n                  childNode.attachTo(element, pos);\n              }\n          }\n      };\n\n      Node.prototype.root = function root () {\n          var root = this;\n\n          while (root.parent) {\n              root = root.parent;\n          }\n\n          return root;\n      };\n\n      Node.prototype.attachTo = function attachTo (domElement, pos) {\n          var container = document.createElement(\"div\");\n          renderSVG$1(container,\n              \"<svg xmlns='\" + SVG_NS + \"' version='1.1'>\" +\n                  this.render() +\n              \"</svg>\"\n          );\n\n          var element = container.firstChild.firstChild;\n          if (element) {\n              if (defined(pos)) {\n                  domElement.insertBefore(element, domElement.childNodes[pos] || null);\n              } else {\n                  domElement.appendChild(element);\n              }\n              this.setElement(element);\n          }\n      };\n\n      Node.prototype.setElement = function setElement (element) {\n          if (this.element) {\n              this.element._kendoNode = null;\n          }\n\n          this.element = element;\n          this.element._kendoNode = this;\n\n          var nodes = this.childNodes;\n          for (var i = 0; i < nodes.length; i++) {\n              var childElement = element.childNodes[i];\n              nodes[i].setElement(childElement);\n          }\n      };\n\n      Node.prototype.clear = function clear () {\n          this.clearDefinitions();\n\n          if (this.element) {\n              this.element.innerHTML = \"\";\n          }\n\n          var children = this.childNodes;\n          for (var i = 0; i < children.length; i++) {\n              children[i].destroy();\n          }\n\n          this.childNodes = [];\n      };\n\n      Node.prototype.removeSelf = function removeSelf () {\n          if (this.element) {\n              var parentNode = this.element.parentNode;\n              if (parentNode) {\n                  parentNode.removeChild(this.element);\n              }\n              this.element = null;\n          }\n\n          BaseNode.prototype.removeSelf.call(this);\n      };\n\n      Node.prototype.template = function template () {\n          return this.renderChildren();\n      };\n\n      Node.prototype.render = function render () {\n          return this.template();\n      };\n\n      Node.prototype.renderChildren = function renderChildren () {\n          var nodes = this.childNodes;\n          var output = \"\";\n\n          for (var i = 0; i < nodes.length; i++) {\n              output += nodes[i].render();\n          }\n\n          return output;\n      };\n\n      Node.prototype.optionsChange = function optionsChange (e) {\n          var field = e.field;\n          var value = e.value;\n\n          if (field === \"visible\") {\n              this.css(\"display\", value ? \"\" : NONE);\n          } else if (DefinitionMap[field] && isDefinition(field, value)) {\n              this.updateDefinition(field, value);\n          } else if (field === \"opacity\") {\n              this.attr(\"opacity\", value);\n          } else if (field === \"cursor\") {\n              this.css(\"cursor\", value);\n          } else if (field === \"id\") {\n              if (value) {\n                  this.attr(\"id\", value);\n              } else {\n                  this.removeAttr(\"id\");\n              }\n          }\n\n          BaseNode.prototype.optionsChange.call(this, e);\n      };\n\n      Node.prototype.accessibilityOptionsChange = function accessibilityOptionsChange (e) {\n          var field = e.field;\n          var value = e.value;\n\n\n          if (field === \"role\") {\n              if (value) {\n                  this.attr(\"role\", value);\n              } else {\n                  this.removeAttr(\"role\");\n              }\n          } else if (field === \"ariaLabel\") {\n              if (value) {\n                  this.attr(\"aria-label\", htmlEncode(value));\n              } else {\n                  this.removeAttr(\"aria-label\");\n              }\n          } else if (field === \"ariaRoleDescription\") {\n              if (value) {\n                  this.attr(\"aria-roledescription\", htmlEncode(value));\n              } else {\n                  this.removeAttr(\"aria-roledescription\");\n              }\n          } else if (field === \"ariaChecked\") {\n              if (defined(value)) {\n                  this.attr(\"aria-checked\", value);\n              } else {\n                  this.removeAttr(\"aria-checked\");\n              }\n          } else if (field === \"className\") {\n              this.className(value);\n          }\n      };\n\n      Node.prototype.attr = function attr (name, value) {\n          if (this.element) {\n              this.element.setAttribute(name, value);\n          }\n      };\n\n      Node.prototype.allAttr = function allAttr (attrs) {\n          var this$1$1 = this;\n\n          for (var i = 0; i < attrs.length; i++) {\n              this$1$1.attr(attrs[i][0], attrs[i][1]);\n          }\n      };\n\n      Node.prototype.toggleAttr = function toggleAttr (name, value) {\n          if (value) {\n              this.attr(name, value);\n          } else {\n              this.removeAttr(name);\n          }\n      };\n\n      Node.prototype.css = function css (name, value) {\n          if (this.element) {\n              this.element.style[name] = value;\n          }\n      };\n\n      Node.prototype.allCss = function allCss (styles) {\n          var this$1$1 = this;\n\n          for (var i = 0; i < styles.length; i++) {\n              this$1$1.css(styles[i][0], styles[i][1]);\n          }\n      };\n\n      Node.prototype.className = function className (value) {\n          var this$1$1 = this;\n\n          if (this.element) {\n              (ref = this.element.classList).remove.apply(ref, this.element.classList);\n              value.split(\" \").forEach(function (item) {\n                  this$1$1.element.classList.add(item);\n              });\n          }\n          var ref;\n      };\n\n      Node.prototype.removeAttr = function removeAttr (name) {\n          if (this.element) {\n              this.element.removeAttribute(name);\n          }\n      };\n\n      Node.prototype.mapTransform = function mapTransform (transform) {\n          var attrs = [];\n          if (transform) {\n              attrs.push([\n                  TRANSFORM,\n                  \"matrix(\" + transform.matrix().toString(6) + \")\"\n              ]);\n          }\n\n          return attrs;\n      };\n\n      Node.prototype.renderTransform = function renderTransform () {\n          return renderAllAttr(\n              this.mapTransform(this.srcElement.transform())\n          );\n      };\n\n      Node.prototype.transformChange = function transformChange (value) {\n          if (value) {\n              this.allAttr(this.mapTransform(value));\n          } else {\n              this.removeAttr(TRANSFORM);\n          }\n      };\n\n      Node.prototype.mapStyle = function mapStyle () {\n          var options = this.srcElement.options;\n          var style = [ [ \"cursor\", options.cursor ] ];\n\n          if (options.visible === false) {\n              style.push([ \"display\", NONE ]);\n          }\n\n          return style;\n      };\n\n      Node.prototype.renderStyle = function renderStyle$1 () {\n          return renderAttr(\"style\", renderStyle(this.mapStyle(true)));\n      };\n\n      Node.prototype.renderOpacity = function renderOpacity () {\n          return renderAttr(\"opacity\", this.srcElement.options.opacity);\n      };\n\n      Node.prototype.renderId = function renderId () {\n          return renderAttr(\"id\", this.srcElement.options.id);\n      };\n\n      Node.prototype.renderClassName = function renderClassName () {\n          return renderAttr(\"class\", this.srcElement.options.className);\n      };\n\n      Node.prototype.renderRole = function renderRole () {\n          return renderAttr(\"role\", this.srcElement.options.role);\n      };\n\n      Node.prototype.renderAriaLabel = function renderAriaLabel () {\n          var value = this.srcElement.options.ariaLabel;\n          if (value) {\n              value = htmlEncode(value);\n          }\n          return renderAttr(\"aria-label\", value);\n      };\n\n      Node.prototype.renderAriaRoleDescription = function renderAriaRoleDescription () {\n          var value = this.srcElement.options.ariaRoleDescription;\n          if (value) {\n              value = htmlEncode(value);\n          }\n          return renderAttr(\"aria-roledescription\", value);\n      };\n\n      Node.prototype.renderAriaChecked = function renderAriaChecked () {\n          return renderAttr(\"aria-checked\", this.srcElement.options.ariaChecked);\n      };\n\n      Node.prototype.createDefinitions = function createDefinitions () {\n          var srcElement = this.srcElement;\n          var definitions = this.definitions;\n          if (srcElement) {\n              var options = srcElement.options;\n              var hasDefinitions;\n\n              for (var field in DefinitionMap) {\n                  var definition = options.get(field);\n                  if (definition && isDefinition(field, definition)) {\n                      definitions[field] = definition;\n                      hasDefinitions = true;\n                  }\n              }\n              if (hasDefinitions) {\n                  this.definitionChange({\n                      action: \"add\",\n                      definitions: definitions\n                  });\n              }\n          }\n      };\n\n      Node.prototype.definitionChange = function definitionChange (e) {\n          if (this.parent) {\n              this.parent.definitionChange(e);\n          }\n      };\n\n      Node.prototype.updateDefinition = function updateDefinition (type, value) {\n          var definitions = this.definitions;\n          var current = definitions[type];\n          var attr = DefinitionMap[type];\n          var definition = {};\n          if (current) {\n              definition[type] = current;\n              this.definitionChange({\n                  action: \"remove\",\n                  definitions: definition\n              });\n              delete definitions[type];\n          }\n\n          if (!value) {\n              if (current) {\n                  this.removeAttr(attr);\n              }\n          } else {\n              definition[type] = value;\n              this.definitionChange({\n                  action: \"add\",\n                  definitions: definition\n              });\n              definitions[type] = value;\n              this.attr(attr, this.refUrl(value.id));\n          }\n      };\n\n      Node.prototype.clearDefinitions = function clearDefinitions () {\n          var definitions = this.definitions;\n\n          this.definitionChange({\n              action: \"remove\",\n              definitions: definitions\n          });\n          this.definitions = {};\n      };\n\n      Node.prototype.renderDefinitions = function renderDefinitions () {\n          return renderAllAttr(this.mapDefinitions());\n      };\n\n      Node.prototype.mapDefinitions = function mapDefinitions () {\n          var this$1$1 = this;\n\n          var definitions = this.definitions;\n          var attrs = [];\n\n          for (var field in definitions) {\n              attrs.push([ DefinitionMap[field], this$1$1.refUrl(definitions[field].id) ]);\n          }\n\n          return attrs;\n      };\n\n      Node.prototype.refUrl = function refUrl (id) {\n          var skipBaseHref = (this.options || {}).skipBaseHref;\n          var baseHref = this.baseUrl().replace(/'/g, \"\\\\'\");\n          var base = skipBaseHref ? '' : baseHref;\n          return (\"url(\" + base + \"#\" + id + \")\");\n      };\n\n      Node.prototype.baseUrl = function baseUrl$1 () {\n          return baseUrl();\n      };\n\n      return Node;\n  }(BaseNode));\n\n  var GradientStopNode = (function (Node) {\n      function GradientStopNode () {\n          Node.apply(this, arguments);\n      }\n\n      if ( Node ) GradientStopNode.__proto__ = Node;\n      GradientStopNode.prototype = Object.create( Node && Node.prototype );\n      GradientStopNode.prototype.constructor = GradientStopNode;\n\n      GradientStopNode.prototype.template = function template () {\n          return (\"<stop \" + (this.renderOffset()) + \" \" + (this.renderStyle()) + \" />\");\n      };\n\n      GradientStopNode.prototype.renderOffset = function renderOffset () {\n          return renderAttr(\"offset\", this.srcElement.offset());\n      };\n\n      GradientStopNode.prototype.mapStyle = function mapStyle () {\n          var srcElement = this.srcElement;\n          return [\n              [ \"stop-color\", srcElement.color() ],\n              [ \"stop-opacity\", srcElement.opacity() ]\n          ];\n      };\n\n      GradientStopNode.prototype.optionsChange = function optionsChange (e) {\n          if (e.field === \"offset\") {\n              this.attr(e.field, e.value);\n          } else if (e.field === \"color\" || e.field === \"opacity\") {\n              this.css(\"stop-\" + e.field, e.value);\n          }\n      };\n\n      return GradientStopNode;\n  }(Node$1));\n\n  var GradientNode = (function (Node) {\n      function GradientNode(srcElement) {\n          Node.call(this, srcElement);\n\n          this.id = srcElement.id;\n\n          this.loadStops();\n      }\n\n      if ( Node ) GradientNode.__proto__ = Node;\n      GradientNode.prototype = Object.create( Node && Node.prototype );\n      GradientNode.prototype.constructor = GradientNode;\n\n      GradientNode.prototype.loadStops = function loadStops () {\n          var this$1$1 = this;\n\n          var stops = this.srcElement.stops;\n          var element = this.element;\n\n          for (var idx = 0; idx < stops.length; idx++) {\n              var stopNode = new GradientStopNode(stops[idx]);\n              this$1$1.append(stopNode);\n              if (element) {\n                  stopNode.attachTo(element);\n              }\n          }\n      };\n\n      GradientNode.prototype.optionsChange = function optionsChange (e) {\n          if (e.field === \"gradient.stops\") {\n              BaseNode.prototype.clear.call(this);\n              this.loadStops();\n          } else if (e.field === \"gradient\") {\n              this.allAttr(this.mapCoordinates());\n          }\n      };\n\n      GradientNode.prototype.renderCoordinates = function renderCoordinates () {\n          return renderAllAttr(this.mapCoordinates());\n      };\n\n      GradientNode.prototype.mapSpace = function mapSpace () {\n          return [ \"gradientUnits\", this.srcElement.userSpace() ? \"userSpaceOnUse\" : \"objectBoundingBox\" ];\n      };\n\n      return GradientNode;\n  }(Node$1));\n\n  var LinearGradientNode = (function (GradientNode) {\n      function LinearGradientNode () {\n          GradientNode.apply(this, arguments);\n      }\n\n      if ( GradientNode ) LinearGradientNode.__proto__ = GradientNode;\n      LinearGradientNode.prototype = Object.create( GradientNode && GradientNode.prototype );\n      LinearGradientNode.prototype.constructor = LinearGradientNode;\n\n      LinearGradientNode.prototype.template = function template () {\n          return (\"<linearGradient id='\" + (this.id) + \"' \" + (this.renderCoordinates()) + \">\" + (this.renderChildren()) + \"</linearGradient>\");\n      };\n\n      LinearGradientNode.prototype.mapCoordinates = function mapCoordinates () {\n          var srcElement = this.srcElement;\n          var start = srcElement.start();\n          var end = srcElement.end();\n          var attrs = [\n              [ \"x1\", start.x ],\n              [ \"y1\", start.y ],\n              [ \"x2\", end.x ],\n              [ \"y2\", end.y ],\n              this.mapSpace()\n          ];\n\n          return attrs;\n      };\n\n      return LinearGradientNode;\n  }(GradientNode));\n\n  var RadialGradientNode = (function (GradientNode) {\n      function RadialGradientNode () {\n          GradientNode.apply(this, arguments);\n      }\n\n      if ( GradientNode ) RadialGradientNode.__proto__ = GradientNode;\n      RadialGradientNode.prototype = Object.create( GradientNode && GradientNode.prototype );\n      RadialGradientNode.prototype.constructor = RadialGradientNode;\n\n      RadialGradientNode.prototype.template = function template () {\n          return (\"<radialGradient id='\" + (this.id) + \"' \" + (this.renderCoordinates()) + \">\" + (this.renderChildren()) + \"</radialGradient>\");\n      };\n\n      RadialGradientNode.prototype.mapCoordinates = function mapCoordinates () {\n          var srcElement = this.srcElement;\n          var center = srcElement.center();\n          var radius = srcElement.radius();\n          var attrs = [\n              [ \"cx\", center.x ],\n              [ \"cy\", center.y ],\n              [ \"r\", radius ],\n              this.mapSpace()\n          ];\n          return attrs;\n      };\n\n      return RadialGradientNode;\n  }(GradientNode));\n\n  var PatternNode = (function (Node) {\n      function PatternNode(pattern) {\n          Node.call(this, pattern);\n\n          this.id = pattern.id;\n          this.load(pattern.children);\n      }\n\n      if ( Node ) PatternNode.__proto__ = Node;\n      PatternNode.prototype = Object.create( Node && Node.prototype );\n      PatternNode.prototype.constructor = PatternNode;\n\n      PatternNode.prototype.template = function template () {\n          var width = this.srcElement.size().getWidth();\n          var height = this.srcElement.size().getHeight();\n\n          return \"<pattern id='\" + (this.srcElement.id) + \"' width='\" + width + \"' height='\" + height + \"' patternUnits='userSpaceOnUse'>\" +\n                      \"\" + (this.renderChildren()) +\n                  \"</pattern>\";\n      };\n\n      return PatternNode;\n  }(Node$1));\n\n  var ClipNode = (function (Node) {\n      function ClipNode(srcElement) {\n          Node.call(this);\n\n          this.srcElement = srcElement;\n          this.id = srcElement.id;\n\n          this.load([ srcElement ]);\n      }\n\n      if ( Node ) ClipNode.__proto__ = Node;\n      ClipNode.prototype = Object.create( Node && Node.prototype );\n      ClipNode.prototype.constructor = ClipNode;\n\n      ClipNode.prototype.renderClipRule = function renderClipRule () {\n          return renderAttr(\"clip-rule\", \"evenodd\");\n      };\n      ClipNode.prototype.template = function template () {\n          return (\"<clipPath \" + (this.renderClipRule()) + \" id='\" + (this.id) + \"'>\" + (this.renderChildren()) + \"</clipPath>\");\n      };\n\n      return ClipNode;\n  }(Node$1));\n\n  var DefinitionNode = (function (Node) {\n      function DefinitionNode() {\n          Node.call(this);\n          this.definitionMap = {};\n      }\n\n      if ( Node ) DefinitionNode.__proto__ = Node;\n      DefinitionNode.prototype = Object.create( Node && Node.prototype );\n      DefinitionNode.prototype.constructor = DefinitionNode;\n\n      DefinitionNode.prototype.attachTo = function attachTo (domElement) {\n          this.element = domElement;\n      };\n\n      DefinitionNode.prototype.template = function template () {\n          return (\"<defs>\" + (this.renderChildren()) + \"</defs>\");\n      };\n\n      DefinitionNode.prototype.definitionChange = function definitionChange (e) {\n          var definitions = e.definitions;\n          var action = e.action;\n\n          if (action === \"add\") {\n              this.addDefinitions(definitions);\n          } else if (action === \"remove\") {\n              this.removeDefinitions(definitions);\n          }\n      };\n\n      DefinitionNode.prototype.createDefinition = function createDefinition (type, item) {\n          var nodeType;\n          if (type === \"clip\") {\n              nodeType = ClipNode;\n          } else if (type === \"fill\") {\n              if (item instanceof LinearGradient) {\n                  nodeType = LinearGradientNode;\n              } else if (item instanceof RadialGradient) {\n                  nodeType = RadialGradientNode;\n              } else if (item.nodeType === PATTERN) {\n                  nodeType = PatternNode;\n              }\n          }\n          return new nodeType(item);\n      };\n\n      DefinitionNode.prototype.addDefinitions = function addDefinitions (definitions) {\n          var this$1$1 = this;\n\n          for (var field in definitions) {\n              this$1$1.addDefinition(field, definitions[field]);\n          }\n      };\n\n      DefinitionNode.prototype.addDefinition = function addDefinition (type, srcElement) {\n          var ref = this;\n          var element = ref.element;\n          var definitionMap = ref.definitionMap;\n          var id = srcElement.id;\n          var mapItem = definitionMap[id];\n          if (!mapItem) {\n              var node = this.createDefinition(type, srcElement);\n              definitionMap[id] = {\n                  element: node,\n                  count: 1\n              };\n              this.append(node);\n              if (element) {\n                  node.attachTo(this.element);\n              }\n          } else {\n              mapItem.count++;\n          }\n      };\n\n      DefinitionNode.prototype.removeDefinitions = function removeDefinitions (definitions) {\n          var this$1$1 = this;\n\n          for (var field in definitions) {\n              this$1$1.removeDefinition(definitions[field]);\n          }\n      };\n\n      DefinitionNode.prototype.removeDefinition = function removeDefinition (srcElement) {\n          var definitionMap = this.definitionMap;\n          var id = srcElement.id;\n          var mapItem = definitionMap[id];\n\n          if (mapItem) {\n              mapItem.count--;\n              if (mapItem.count === 0) {\n                  this.remove(this.childNodes.indexOf(mapItem.element), 1);\n                  delete definitionMap[id];\n              }\n          }\n      };\n\n      return DefinitionNode;\n  }(Node$1));\n\n  var RootNode$1 = (function (Node) {\n      function RootNode(options) {\n          Node.call(this);\n          this.options = options;\n          this.defs = new DefinitionNode();\n      }\n\n      if ( Node ) RootNode.__proto__ = Node;\n      RootNode.prototype = Object.create( Node && Node.prototype );\n      RootNode.prototype.constructor = RootNode;\n\n      RootNode.prototype.attachTo = function attachTo (domElement) {\n          this.element = domElement;\n          this.defs.attachTo(domElement.firstElementChild);\n      };\n\n      RootNode.prototype.clear = function clear () {\n          BaseNode.prototype.clear.call(this);\n      };\n\n      RootNode.prototype.template = function template () {\n          return this.defs.render() + this.renderChildren();\n      };\n\n      RootNode.prototype.definitionChange = function definitionChange (e) {\n          this.defs.definitionChange(e);\n      };\n\n      return RootNode;\n  }(Node$1));\n\n  var ATTRIBUTE_MAP = {\n      \"fill.opacity\": \"fill-opacity\",\n      \"stroke.color\": \"stroke\",\n      \"stroke.width\": \"stroke-width\",\n      \"stroke.opacity\": \"stroke-opacity\"\n  };\n\n  var PathNode$1 = (function (Node) {\n      function PathNode () {\n          Node.apply(this, arguments);\n      }\n\n      if ( Node ) PathNode.__proto__ = Node;\n      PathNode.prototype = Object.create( Node && Node.prototype );\n      PathNode.prototype.constructor = PathNode;\n\n      PathNode.prototype.geometryChange = function geometryChange () {\n          this.attr(\"d\", this.renderData());\n          this.invalidate();\n      };\n\n      PathNode.prototype.optionsChange = function optionsChange (e) {\n          switch (e.field) {\n          case \"fill\":\n              if (e.value) {\n                  this.allAttr(this.mapFill(e.value));\n              } else {\n                  this.removeAttr(\"fill\");\n              }\n              break;\n\n          case \"fill.color\":\n              this.allAttr(this.mapFill({ color: e.value }));\n              break;\n\n          case \"stroke\":\n              if (e.value) {\n                  this.allAttr(this.mapStroke(e.value));\n              } else {\n                  this.removeAttr(\"stroke\");\n              }\n              break;\n\n          case \"transform\":\n              this.transformChange(e.value);\n              break;\n\n          default:\n              var name = ATTRIBUTE_MAP[e.field];\n              if (name) {\n                  this.attr(name, e.value);\n              }\n              break;\n          }\n\n          this.accessibilityOptionsChange(e);\n\n          Node.prototype.optionsChange.call(this, e);\n      };\n\n      PathNode.prototype.content = function content () {\n          if (this.element) {\n              this.element.textContent = this.srcElement.content();\n          }\n      };\n\n      PathNode.prototype.renderData = function renderData () {\n          return this.srcElement.toString(POINT_DIGITS) || undefined;\n      };\n\n      PathNode.prototype.mapStroke = function mapStroke (stroke) {\n          var attrs = [];\n\n          if (stroke && !isTransparent(stroke.color)) {\n              attrs.push([ \"stroke\", stroke.color ]);\n              attrs.push([ \"stroke-width\", stroke.width ]);\n              attrs.push([ \"stroke-linecap\", this.renderLinecap(stroke) ]);\n              attrs.push([ \"stroke-linejoin\", stroke.lineJoin ]);\n\n              if (defined(stroke.opacity)) {\n                  attrs.push([ \"stroke-opacity\", stroke.opacity ]);\n              }\n\n              if (defined(stroke.dashType)) {\n                  attrs.push([ \"stroke-dasharray\", this.renderDashType(stroke) ]);\n              }\n          } else {\n              attrs.push([ \"stroke\", NONE ]);\n          }\n\n          return attrs;\n      };\n\n      PathNode.prototype.renderStroke = function renderStroke () {\n          return renderAllAttr(\n              this.mapStroke(this.srcElement.options.stroke)\n          );\n      };\n\n      PathNode.prototype.renderDashType = function renderDashType (stroke) {\n          var dashType = stroke.dashType;\n          var width = stroke.width; if ( width === void 0 ) width = 1;\n\n          if (dashType && dashType !== SOLID) {\n              var dashArray = DASH_ARRAYS[dashType.toLowerCase()];\n              var result = [];\n\n              for (var i = 0; i < dashArray.length; i++) {\n                  result.push(dashArray[i] * width);\n              }\n\n              return result.join(\" \");\n          }\n      };\n\n      PathNode.prototype.renderLinecap = function renderLinecap (stroke) {\n          var dashType = stroke.dashType;\n          var lineCap = stroke.lineCap;\n\n          return (dashType && dashType !== SOLID) ? BUTT : lineCap;\n      };\n\n      PathNode.prototype.mapFill = function mapFill (fill) {\n          var attrs = [];\n          if (!(fill && (fill.nodeType === \"Gradient\" || fill.nodeType === PATTERN))) {\n              if (fill && !isTransparent(fill.color)) {\n                  attrs.push([ \"fill\", fill.color ]);\n\n                  if (defined(fill.opacity)) {\n                      attrs.push([ \"fill-opacity\", fill.opacity ]);\n                  }\n              } else {\n                  attrs.push([ \"fill\", NONE ]);\n              }\n          }\n\n          return attrs;\n      };\n\n      PathNode.prototype.renderFill = function renderFill () {\n          return renderAllAttr(\n              this.mapFill(this.srcElement.options.fill)\n          );\n      };\n\n      PathNode.prototype.template = function template () {\n          return \"<path \" + (this.renderId()) + \" \" + (this.renderStyle()) + \" \" + (this.renderOpacity()) + \" \" + (renderAttr('d', this.renderData())) +\n                  \"\" + (this.renderStroke()) + (this.renderFill()) + (this.renderDefinitions()) + (this.renderTransform()) +\n                  (this.renderClassName()) + \" \" + (this.renderRole()) +\n                  (this.renderAriaLabel()) + \" \" + (this.renderAriaRoleDescription()) +\n                  (this.renderAriaChecked()) + \" ></path>\";\n      };\n\n      return PathNode;\n  }(Node$1));\n\n  var ArcNode$1 = (function (PathNode) {\n      function ArcNode () {\n          PathNode.apply(this, arguments);\n      }\n\n      if ( PathNode ) ArcNode.__proto__ = PathNode;\n      ArcNode.prototype = Object.create( PathNode && PathNode.prototype );\n      ArcNode.prototype.constructor = ArcNode;\n\n      ArcNode.prototype.renderData = function renderData () {\n          return this.srcElement.toPath().toString(POINT_DIGITS);\n      };\n\n      return ArcNode;\n  }(PathNode$1));\n\n  var CircleNode$1 = (function (PathNode) {\n      function CircleNode () {\n          PathNode.apply(this, arguments);\n      }\n\n      if ( PathNode ) CircleNode.__proto__ = PathNode;\n      CircleNode.prototype = Object.create( PathNode && PathNode.prototype );\n      CircleNode.prototype.constructor = CircleNode;\n\n      CircleNode.prototype.geometryChange = function geometryChange () {\n          var center = this.center();\n          this.attr(\"cx\", center.x);\n          this.attr(\"cy\", center.y);\n          this.attr(\"r\", this.radius());\n          this.invalidate();\n      };\n\n      CircleNode.prototype.center = function center () {\n          return this.srcElement.geometry().center;\n      };\n\n      CircleNode.prototype.radius = function radius () {\n          return this.srcElement.geometry().radius;\n      };\n\n      CircleNode.prototype.template = function template () {\n          return \"<circle \" + (this.renderId()) + \" \" + (this.renderStyle()) + \" \" + (this.renderOpacity()) +\n                      \"cx='\" + (this.center().x) + \"' cy='\" + (this.center().y) + \"' r='\" + (this.radius()) + \"'\" +\n                      (this.renderStroke()) + \" \" + (this.renderFill()) + \" \" + (this.renderDefinitions()) +\n                      (this.renderClassName()) + \" \" + (this.renderRole()) +\n                      (this.renderAriaLabel()) + \" \" + (this.renderAriaRoleDescription()) +\n                      (this.renderAriaChecked()) + \" \" + (this.renderTransform()) + \" ></circle>\";\n      };\n\n      return CircleNode;\n  }(PathNode$1));\n\n  var GroupNode$1 = (function (Node) {\n      function GroupNode () {\n          Node.apply(this, arguments);\n      }\n\n      if ( Node ) GroupNode.__proto__ = Node;\n      GroupNode.prototype = Object.create( Node && Node.prototype );\n      GroupNode.prototype.constructor = GroupNode;\n\n      GroupNode.prototype.template = function template () {\n          return (\"<g\" + (this.renderId() + \n              this.renderTransform() + \n              this.renderClassName() + \n              this.renderStyle() + \n              this.renderOpacity() + \n              this.renderRole() + \n              this.renderAriaLabel() + \n              this.renderAriaRoleDescription() + \n              this.renderAriaChecked() +\n              this.renderDefinitions()) + \">\" + (this.renderChildren()) + \"</g>\");\n      };\n\n      GroupNode.prototype.optionsChange = function optionsChange (e) {\n          var field = e.field;\n          var value = e.value;\n\n          if (field === \"transform\") {\n              this.transformChange(value);\n          }\n\n          this.accessibilityOptionsChange(e);\n\n          Node.prototype.optionsChange.call(this, e);\n      };\n\n      return GroupNode;\n  }(Node$1));\n\n  var ImageNode$1 = (function (PathNode) {\n      function ImageNode () {\n          PathNode.apply(this, arguments);\n      }\n\n      if ( PathNode ) ImageNode.__proto__ = PathNode;\n      ImageNode.prototype = Object.create( PathNode && PathNode.prototype );\n      ImageNode.prototype.constructor = ImageNode;\n\n      ImageNode.prototype.geometryChange = function geometryChange () {\n          this.allAttr(this.mapPosition());\n          this.invalidate();\n      };\n\n      ImageNode.prototype.optionsChange = function optionsChange (e) {\n          if (e.field === \"src\") {\n              this.allAttr(this.mapSource());\n          }\n\n          PathNode.prototype.optionsChange.call(this, e);\n      };\n\n      ImageNode.prototype.mapPosition = function mapPosition () {\n          var rect = this.srcElement.rect();\n          var tl = rect.topLeft();\n\n          return [\n              [ \"x\", tl.x ],\n              [ \"y\", tl.y ],\n              [ \"width\", rect.width() + \"px\" ],\n              [ \"height\", rect.height() + \"px\" ]\n          ];\n      };\n\n      ImageNode.prototype.renderPosition = function renderPosition () {\n          return renderAllAttr(this.mapPosition());\n      };\n\n      ImageNode.prototype.mapSource = function mapSource (encode) {\n          var src = this.srcElement.src();\n\n          if (encode) {\n              src = htmlEncode(src);\n          }\n\n          return [ [ \"xlink:href\", src ] ];\n      };\n\n      ImageNode.prototype.renderSource = function renderSource () {\n          return renderAllAttr(this.mapSource(true));\n      };\n\n      ImageNode.prototype.template = function template () {\n          return \"<image preserveAspectRatio='none' \" + (this.renderId()) + \" \" + (this.renderStyle()) + \" \" + (this.renderTransform()) + \" \" + (this.renderOpacity()) +\n                 (this.renderPosition()) + \" \" + (this.renderSource()) + \" \" + (this.renderDefinitions()) +\n                 (this.renderClassName()) + \" \" + (this.renderRole()) +\n                  (this.renderAriaLabel()) + \" \" + (this.renderAriaRoleDescription()) +\n                  (this.renderAriaChecked()) + \" >\" +\n                 \"</image>\";\n      };\n\n      return ImageNode;\n  }(PathNode$1));\n\n  var MultiPathNode$1 = (function (PathNode) {\n      function MultiPathNode () {\n          PathNode.apply(this, arguments);\n      }\n\n      if ( PathNode ) MultiPathNode.__proto__ = PathNode;\n      MultiPathNode.prototype = Object.create( PathNode && PathNode.prototype );\n      MultiPathNode.prototype.constructor = MultiPathNode;\n\n      MultiPathNode.prototype.renderData = function renderData () {\n          return this.srcElement.toString(POINT_DIGITS) || 'undefined';\n      };\n\n      return MultiPathNode;\n  }(PathNode$1));\n\n  var RectNode$1 = (function (PathNode) {\n      function RectNode () {\n          PathNode.apply(this, arguments);\n      }\n\n      if ( PathNode ) RectNode.__proto__ = PathNode;\n      RectNode.prototype = Object.create( PathNode && PathNode.prototype );\n      RectNode.prototype.constructor = RectNode;\n\n      RectNode.prototype.geometryChange = function geometryChange () {\n          var geometry = this.srcElement.geometry();\n          this.attr(\"x\", geometry.origin.x);\n          this.attr(\"y\", geometry.origin.y);\n          this.attr(\"width\", geometry.size.width);\n          this.attr(\"height\", geometry.size.height);\n          this.attr(\"rx\", geometry.cornerRadius[0]);\n          this.attr(\"ry\", geometry.cornerRadius[1]);\n          this.invalidate();\n      };\n\n      RectNode.prototype.size = function size () {\n          return this.srcElement.geometry().size;\n      };\n\n      RectNode.prototype.origin = function origin () {\n          return this.srcElement.geometry().origin;\n      };\n\n      RectNode.prototype.rx = function rx () {\n          return this.srcElement.geometry().cornerRadius[0];\n      };\n\n      RectNode.prototype.ry = function ry () {\n          return this.srcElement.geometry().cornerRadius[1];\n      };\n\n      RectNode.prototype.template = function template () {\n          return \"<rect \" + (this.renderId()) + \" \" + (this.renderStyle()) + \" \" + (this.renderOpacity()) + \" x='\" + (this.origin().x) + \"' y='\" + (this.origin().y) + \"' \" +\n                      \"rx='\" + (this.rx()) + \"' ry='\" + (this.ry()) + \"' \" +\n                      \"width='\" + (this.size().width) + \"' height='\" + (this.size().height) + \"' \" + (this.renderStroke()) + \" \" +\n                      (this.renderFill()) + \" \" + (this.renderDefinitions()) + \" \" + (this.renderTransform()) +\n                      (this.renderClassName()) + \" \" + (this.renderRole()) +\n                      (this.renderAriaLabel()) + \" \" + (this.renderAriaRoleDescription()) +\n                      (this.renderAriaChecked()) + \" />\";\n      };\n\n      return RectNode;\n  }(PathNode$1));\n\n  var ENTITY_REGEX = /&(?:[a-zA-Z]+|#\\d+);/g;\n\n  function decodeEntities(text) {\n      if (!text || typeof text !== \"string\" || !ENTITY_REGEX.test(text)) {\n          return text;\n      }\n\n      var element = decodeEntities._element;\n      ENTITY_REGEX.lastIndex = 0;\n\n      return text.replace(ENTITY_REGEX, function (match) {\n          element.innerHTML = match;\n\n          return element.textContent || element.innerText;\n      });\n  }\n\n  if (typeof document !== \"undefined\") {\n      decodeEntities._element = document.createElement(\"span\");\n  }\n\n  var TextNode$1 = (function (PathNode) {\n      function TextNode () {\n          PathNode.apply(this, arguments);\n      }\n\n      if ( PathNode ) TextNode.__proto__ = PathNode;\n      TextNode.prototype = Object.create( PathNode && PathNode.prototype );\n      TextNode.prototype.constructor = TextNode;\n\n      TextNode.prototype.geometryChange = function geometryChange () {\n          var pos = this.pos();\n          this.attr(\"x\", pos.x);\n          this.attr(\"y\", pos.y);\n          this.invalidate();\n      };\n\n      TextNode.prototype.optionsChange = function optionsChange (e) {\n          if (e.field === \"font\") {\n              this.attr(\"style\", renderStyle(this.mapStyle()));\n              this.geometryChange();\n          } else if (e.field === \"content\") {\n              PathNode.prototype.content.call(this, this.srcElement.content());\n          }\n\n          PathNode.prototype.optionsChange.call(this, e);\n      };\n\n      TextNode.prototype.mapStyle = function mapStyle (encode) {\n          var style = PathNode.prototype.mapStyle.call(this, encode);\n          var font = this.srcElement.options.font;\n\n          if (encode) {\n              font = htmlEncode(font);\n          }\n\n          style.push([ \"font\", font ], [ \"white-space\", \"pre\" ]);\n\n          return style;\n      };\n\n      TextNode.prototype.pos = function pos () {\n          var pos = this.srcElement.position();\n          var size = this.srcElement.measure();\n          return pos.clone().setY(pos.y + size.baseline);\n      };\n\n      TextNode.prototype.renderContent = function renderContent () {\n          var content = this.srcElement.content();\n          content = decodeEntities(content);\n          content = htmlEncode(content);\n\n          return normalizeText(content);\n      };\n\n      TextNode.prototype.renderTextAnchor = function renderTextAnchor () {\n          var anchor;\n\n          if ((this.options || {}).rtl && !(support$1.browser.msie || support$1.browser.edge)) {\n              anchor = 'end';\n          }\n\n          return renderAttr(\"text-anchor\", anchor);\n      };\n\n      TextNode.prototype.renderPaintOrder = function renderPaintOrder () {\n          var paintOrder = this.srcElement.options.paintOrder;\n          return paintOrder ? renderAttr(\"paint-order\", paintOrder) : \"\";\n      };\n\n      TextNode.prototype.template = function template () {\n          return \"<text \" + (this.renderId()) + \" \" + (this.renderTextAnchor()) + \" \" + (this.renderStyle()) + \" \" + (this.renderOpacity()) +\n                      \"x='\" + (this.pos().x) + \"' y='\" + (this.pos().y) + \"' \" + (this.renderStroke()) + \" \" + (this.renderTransform()) + \" \" + (this.renderDefinitions()) +\n                      \"\" + (this.renderPaintOrder()) +\n                      \"\" + (this.renderFill()) +\n                      (this.renderClassName()) + \" \" + (this.renderRole()) +\n                      (this.renderAriaLabel()) + \" \" + (this.renderAriaRoleDescription()) +\n                      (this.renderAriaChecked()) + \">\" + (this.renderContent()) + \"</text>\";\n      };\n\n      return TextNode;\n  }(PathNode$1));\n\n  NODE_MAP$1.Arc = ArcNode$1;\n  NODE_MAP$1.Circle = CircleNode$1;\n  NODE_MAP$1.Group = GroupNode$1;\n  NODE_MAP$1.Image = ImageNode$1;\n  NODE_MAP$1.MultiPath = MultiPathNode$1;\n  NODE_MAP$1.Path = PathNode$1;\n  NODE_MAP$1.Rect = RectNode$1;\n  NODE_MAP$1.Text = TextNode$1;\n\n  var RTL = 'rtl';\n\n  function alignToScreen(element) {\n      var ctm;\n\n      try {\n          ctm = element.getScreenCTM ? element.getScreenCTM() : null;\n      } catch (e) { } // eslint-disable-line no-empty\n\n      if (ctm) {\n          var left = - ctm.e % 1;\n          var top = - ctm.f % 1;\n          var style = element.style;\n\n          if (left !== 0 || top !== 0) {\n              style.left = left + \"px\";\n              style.top = top + \"px\";\n          }\n      }\n  }\n\n  var Surface$2 = (function (BaseSurface) {\n      function Surface(element, options) {\n          BaseSurface.call(this, element, options);\n\n          this._root = new RootNode$1(Object.assign({\n              rtl: elementStyles(element, 'direction').direction === RTL\n          }, this.options));\n\n          renderSVG$1(this.element, this._template(''));\n\n          this._rootElement = this.element.firstElementChild;\n          this._rootElement.style.width = '100%';\n          this._rootElement.style.height = '100%';\n          this._rootElement.style.overflow = 'hidden';\n\n          alignToScreen(this._rootElement);\n\n          this._root.attachTo(this._rootElement);\n\n          bindEvents(this.element, {\n              click: this._click,\n              mouseover: this._mouseenter,\n              mouseout: this._mouseleave,\n              mousemove: this._mousemove\n          });\n\n          this.resize();\n      }\n\n      if ( BaseSurface ) Surface.__proto__ = BaseSurface;\n      Surface.prototype = Object.create( BaseSurface && BaseSurface.prototype );\n      Surface.prototype.constructor = Surface;\n\n      var prototypeAccessors = { type: { configurable: true } };\n\n      prototypeAccessors.type.get = function () {\n          return \"svg\";\n      };\n\n      Surface.prototype.destroy = function destroy () {\n          if (this._root) {\n              this._root.destroy();\n              this._root = null;\n              this._rootElement = null;\n              unbindEvents(this.element, {\n                  click: this._click,\n                  mouseover: this._mouseenter,\n                  mouseout: this._mouseleave,\n                  mousemove: this._mousemove\n              });\n          }\n\n          BaseSurface.prototype.destroy.call(this);\n      };\n\n      Surface.prototype.translate = function translate (offset) {\n          var viewBox = (Math.round(offset.x)) + \" \" + (Math.round(offset.y)) + \" \" + (this._size.width) + \" \" + (this._size.height);\n\n          this._offset = offset;\n          this._rootElement.setAttribute(\"viewBox\", viewBox);\n      };\n\n      Surface.prototype.draw = function draw (element) {\n          BaseSurface.prototype.draw.call(this, element);\n          this._root.load([ element ]);\n      };\n\n      Surface.prototype.clear = function clear () {\n          BaseSurface.prototype.clear.call(this);\n          this._root.clear();\n      };\n\n      Surface.prototype.svg = function svg () {\n          return \"<?xml version='1.0' ?>\" + this._template();\n      };\n\n      Surface.prototype.exportVisual = function exportVisual () {\n          var ref = this;\n          var visual = ref._visual;\n          var offset = ref._offset;\n\n          if (offset) {\n              var wrap = new Group();\n              wrap.children.push(visual);\n\n              wrap.transform(\n                  transform().translate(-offset.x, -offset.y)\n              );\n\n              visual = wrap;\n          }\n\n          return visual;\n      };\n\n      Surface.prototype._resize = function _resize () {\n          if (this._offset) {\n              this.translate(this._offset);\n          }\n      };\n\n      Surface.prototype._template = function _template (svgStyles) {\n          var styles = typeof svgStyles === 'string' ? svgStyles :\n              \"style='width: 100%; height: 100%; overflow: hidden;' \";\n          return (\"<svg \" + styles + \"xmlns='\" + SVG_NS + \"' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>\" + (this._root.render()) + \"</svg>\");\n      };\n\n      Object.defineProperties( Surface.prototype, prototypeAccessors );\n\n      return Surface;\n  }(Surface$3));\n\n  var NODE_MAP = {};\n\n  var Node = (function (BaseNode) {\n      function Node(srcElement) {\n          BaseNode.call(this, srcElement);\n          if (srcElement) {\n              this.initClip();\n          }\n      }\n\n      if ( BaseNode ) Node.__proto__ = BaseNode;\n      Node.prototype = Object.create( BaseNode && BaseNode.prototype );\n      Node.prototype.constructor = Node;\n\n      Node.prototype.initClip = function initClip () {\n          var clip = this.srcElement.clip();\n          if (clip) {\n              this.clip = clip;\n              clip.addObserver(this);\n          }\n      };\n\n      Node.prototype.clear = function clear () {\n          if (this.srcElement) {\n              this.srcElement.removeObserver(this);\n          }\n\n          this.clearClip();\n\n          BaseNode.prototype.clear.call(this);\n      };\n\n      Node.prototype.clearClip = function clearClip () {\n          if (this.clip) {\n              this.clip.removeObserver(this);\n              delete this.clip;\n          }\n      };\n\n      Node.prototype.setClip = function setClip (ctx) {\n          if (this.clip) {\n              ctx.beginPath();\n\n              var clipNode = new NODE_MAP[this.clip.nodeType](this.clip);\n              clipNode.renderPoints(ctx, this.clip);\n\n              ctx.clip(\"evenodd\");\n          }\n      };\n\n      Node.prototype.optionsChange = function optionsChange (e) {\n          if (e.field === \"clip\") {\n              this.clearClip();\n              this.initClip();\n          }\n\n          BaseNode.prototype.optionsChange.call(this, e);\n      };\n\n      Node.prototype.setTransform = function setTransform (ctx) {\n          if (this.srcElement) {\n              var transform = this.srcElement.transform();\n              if (transform) {\n                  ctx.transform.apply(ctx, transform.matrix().toArray(6));\n              }\n          }\n      };\n\n      Node.prototype.loadElements = function loadElements (elements, pos, cors) {\n          var this$1$1 = this;\n\n          for (var i = 0; i < elements.length; i++) {\n              var srcElement = elements[i];\n              var children = srcElement.children;\n\n              var childNode = new NODE_MAP[srcElement.nodeType](srcElement, cors);\n\n              if (children && children.length > 0) {\n                  childNode.load(children, pos, cors);\n              }\n\n              if (defined(pos)) {\n                  this$1$1.insertAt(childNode, pos);\n              } else {\n                  this$1$1.append(childNode);\n              }\n          }\n      };\n\n      Node.prototype.load = function load (elements, pos, cors) {\n          this.loadElements(elements, pos, cors);\n\n          this.invalidate();\n      };\n\n      Node.prototype.setOpacity = function setOpacity (ctx) {\n          if (this.srcElement) {\n              var opacity = this.srcElement.opacity();\n              if (defined(opacity)) {\n                  this.globalAlpha(ctx, opacity);\n              }\n          }\n      };\n\n      Node.prototype.globalAlpha = function globalAlpha (ctx, value) {\n          var opactity = value;\n          if (opactity && ctx.globalAlpha) {\n              opactity *= ctx.globalAlpha;\n          }\n          ctx.globalAlpha = opactity;\n      };\n\n      Node.prototype.visible = function visible () {\n          var src = this.srcElement;\n          return !src || (src && src.options.visible !== false);\n      };\n\n      return Node;\n  }(BaseNode));\n\n  var GroupNode = (function (superclass) {\n      function GroupNode () {\n          superclass.apply(this, arguments);\n      }\n\n      if ( superclass ) GroupNode.__proto__ = superclass;\n      GroupNode.prototype = Object.create( superclass && superclass.prototype );\n      GroupNode.prototype.constructor = GroupNode;\n\n      GroupNode.prototype.renderTo = function renderTo (ctx) {\n          if (!this.visible()) {\n              return;\n          }\n\n          ctx.save();\n\n          this.setTransform(ctx);\n          this.setClip(ctx);\n          this.setOpacity(ctx);\n\n          var childNodes = this.childNodes;\n          for (var i = 0; i < childNodes.length; i++) {\n              var child = childNodes[i];\n              if (child.visible()) {\n                  child.renderTo(ctx);\n              }\n          }\n\n          ctx.restore();\n      };\n\n      return GroupNode;\n  }(traversable(Node, \"childNodes\")));\n\n  var FRAME_DELAY = 1000 / 60;\n\n  var RootNode = (function (superclass) {\n      function RootNode(canvas, size) {\n          superclass.call(this);\n\n          this.canvas = canvas;\n          this.size = size;\n          this.ctx = canvas.getContext(\"2d\");\n\n          var invalidateHandler = this._invalidate.bind(this);\n          this.invalidate = throttle(function () {\n              animationFrame(invalidateHandler);\n          }, FRAME_DELAY);\n      }\n\n      if ( superclass ) RootNode.__proto__ = superclass;\n      RootNode.prototype = Object.create( superclass && superclass.prototype );\n      RootNode.prototype.constructor = RootNode;\n\n      RootNode.prototype.destroy = function destroy () {\n          superclass.prototype.destroy.call(this);\n          this.canvas = null;\n          this.ctx = null;\n      };\n\n      RootNode.prototype.load = function load (elements, pos, cors) {\n          this.loadElements(elements, pos, cors);\n          this._invalidate();\n      };\n\n      RootNode.prototype._rescale = function _rescale (scale) {\n          var ref = this;\n          var canvas = ref.canvas;\n          var size = ref.size;\n          canvas.width = size.width * scale;\n          canvas.height = size.height * scale;\n          this.ctx.scale(scale, scale);\n      };\n\n      RootNode.prototype._devicePixelRatio = function _devicePixelRatio () {\n          if (typeof window.devicePixelRatio === 'number') {\n              return window.devicePixelRatio;\n          }\n\n          return 1;\n      };\n\n      RootNode.prototype._invalidate = function _invalidate (options) {\n          if (!this.ctx) {\n              return;\n          }\n\n          var fixedScale = options && options.fixedScale;\n          var scale = fixedScale ? 1 : this._devicePixelRatio();\n          this._rescale(scale);\n\n          this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n          this.renderTo(this.ctx);\n      };\n\n      return RootNode;\n  }(traversable(GroupNode, \"childNodes\")));\n\n  var QuadRoot = (function (Class) {\n      function QuadRoot() {\n          Class.call(this);\n\n          this.shapes = [];\n      }\n\n      if ( Class ) QuadRoot.__proto__ = Class;\n      QuadRoot.prototype = Object.create( Class && Class.prototype );\n      QuadRoot.prototype.constructor = QuadRoot;\n\n      QuadRoot.prototype._add = function _add (shape, bbox) {\n          this.shapes.push({\n              bbox: bbox,\n              shape: shape\n          });\n          shape._quadNode = this;\n      };\n\n      QuadRoot.prototype.pointShapes = function pointShapes (point) {\n          var shapes = this.shapes;\n          var length = shapes.length;\n          var result = [];\n          for (var idx = 0; idx < length; idx++) {\n              if (shapes[idx].bbox.containsPoint(point)) {\n                  result.push(shapes[idx].shape);\n              }\n          }\n          return result;\n      };\n\n      QuadRoot.prototype.insert = function insert (shape, bbox) {\n          this._add(shape, bbox);\n      };\n\n      QuadRoot.prototype.remove = function remove (shape) {\n          var shapes = this.shapes;\n          var length = shapes.length;\n\n          for (var idx = 0; idx < length; idx++) {\n              if (shapes[idx].shape === shape) {\n                  shapes.splice(idx, 1);\n                  break;\n              }\n          }\n      };\n\n      return QuadRoot;\n  }(Class));\n\n  var QuadNode = (function (QuadRoot) {\n      function QuadNode(rect) {\n          QuadRoot.call(this);\n          this.children = [];\n          this.rect = rect;\n      }\n\n      if ( QuadRoot ) QuadNode.__proto__ = QuadRoot;\n      QuadNode.prototype = Object.create( QuadRoot && QuadRoot.prototype );\n      QuadNode.prototype.constructor = QuadNode;\n\n      QuadNode.prototype.inBounds = function inBounds (rect) {\n          var nodeRect = this.rect;\n          var nodeBottomRight = nodeRect.bottomRight();\n          var bottomRight = rect.bottomRight();\n          var inBounds = nodeRect.origin.x <= rect.origin.x && nodeRect.origin.y <= rect.origin.y && bottomRight.x <= nodeBottomRight.x &&\n              bottomRight.y <= nodeBottomRight.y;\n          return inBounds;\n      };\n\n      QuadNode.prototype.pointShapes = function pointShapes (point) {\n          var children = this.children;\n          var length = children.length;\n          var result = QuadRoot.prototype.pointShapes.call(this, point);\n          for (var idx = 0; idx < length; idx++) {\n              append(result, children[idx].pointShapes(point));\n          }\n          return result;\n      };\n\n      QuadNode.prototype.insert = function insert (shape, bbox) {\n          var children = this.children;\n          var inserted = false;\n\n          if (this.inBounds(bbox)) {\n              if (this.shapes.length < 4) {\n                  this._add(shape, bbox);\n              } else {\n                  if (!children.length) {\n                      this._initChildren();\n                  }\n\n                  for (var idx = 0; idx < children.length; idx++) {\n                      if (children[idx].insert(shape, bbox)) {\n                          inserted = true;\n                          break;\n                      }\n                  }\n\n                  if (!inserted) {\n                      this._add(shape, bbox);\n                  }\n              }\n              inserted = true;\n          }\n\n          return inserted;\n      };\n\n      QuadNode.prototype._initChildren = function _initChildren () {\n          var ref = this;\n          var rect = ref.rect;\n          var children = ref.children;\n          var center = rect.center();\n          var halfWidth = rect.width() / 2;\n          var halfHeight = rect.height() / 2;\n\n          children.push(\n              new QuadNode(new Rect$1([ rect.origin.x, rect.origin.y ], [ halfWidth, halfHeight ])),\n              new QuadNode(new Rect$1([ center.x, rect.origin.y ], [ halfWidth, halfHeight ])),\n              new QuadNode(new Rect$1([ rect.origin.x, center.y ], [ halfWidth, halfHeight ])),\n              new QuadNode(new Rect$1([ center.x, center.y ], [ halfWidth, halfHeight ]))\n          );\n      };\n\n      return QuadNode;\n  }(QuadRoot));\n\n  var ROOT_SIZE = 3000;\n  var LEVEL_STEP = 10000;\n  var MAX_LEVEL = 75;\n\n  var ShapesQuadTree = (function (Class) {\n      function ShapesQuadTree() {\n          Class.call(this);\n\n          this.initRoots();\n      }\n\n      if ( Class ) ShapesQuadTree.__proto__ = Class;\n      ShapesQuadTree.prototype = Object.create( Class && Class.prototype );\n      ShapesQuadTree.prototype.constructor = ShapesQuadTree;\n\n      ShapesQuadTree.prototype.initRoots = function initRoots () {\n          this.rootMap = {};\n          this.root = new QuadRoot();\n          this.rootElements = [];\n      };\n\n      ShapesQuadTree.prototype.clear = function clear () {\n          var this$1$1 = this;\n\n          var rootElements = this.rootElements;\n          for (var idx = 0; idx < rootElements.length; idx++) {\n              this$1$1.remove(rootElements[idx]);\n          }\n          this.initRoots();\n      };\n\n      ShapesQuadTree.prototype.pointShape = function pointShape (point) {\n          var sectorRoot = ( this.rootMap[ Math.floor( point.x / ROOT_SIZE ) ] || {} )[ Math.floor( point.y / ROOT_SIZE ) ];\n          var result = this.root.pointShapes(point);\n\n          if (sectorRoot) {\n              result = result.concat(sectorRoot.pointShapes(point));\n          }\n\n          this.assignZindex(result);\n\n          result.sort(zIndexComparer);\n          for (var idx = 0; idx < result.length; idx++) {\n              if (result[idx].containsPoint(point)) {\n                  return result[idx];\n              }\n          }\n      };\n\n      ShapesQuadTree.prototype.assignZindex = function assignZindex (elements) {\n          var this$1$1 = this;\n\n          for (var idx = 0; idx < elements.length; idx++) {\n              var element = elements[idx];\n              var zIndex = 0;\n              var levelWeight = Math.pow(LEVEL_STEP, MAX_LEVEL);\n              var parents = [];\n\n              while (element) {\n                  parents.push(element);\n                  element = element.parent;\n              }\n\n              while (parents.length) {\n                  element = parents.pop();\n                  zIndex += ((element.parent ? element.parent.children : this$1$1.rootElements).indexOf(element) + 1) * levelWeight;\n                  levelWeight /= LEVEL_STEP;\n              }\n\n              elements[idx]._zIndex = zIndex;\n          }\n      };\n\n      ShapesQuadTree.prototype.optionsChange = function optionsChange (e) {\n          if (e.field === \"transform\" || e.field === \"stroke.width\") {\n              this.bboxChange(e.element);\n          }\n      };\n\n      ShapesQuadTree.prototype.geometryChange = function geometryChange (e) {\n          this.bboxChange(e.element);\n      };\n\n      ShapesQuadTree.prototype.bboxChange = function bboxChange (element) {\n          var this$1$1 = this;\n\n          if (element.nodeType === \"Group\") {\n              for (var idx = 0; idx < element.children.length; idx++) {\n                  this$1$1.bboxChange(element.children[idx]);\n              }\n          } else {\n              if (element._quadNode) {\n                  element._quadNode.remove(element);\n              }\n              this._insertShape(element);\n          }\n      };\n\n      ShapesQuadTree.prototype.add = function add (elements) {\n          var elementsArray = Array.isArray(elements) ? elements.slice(0) : [ elements ];\n\n          append(this.rootElements, elementsArray);\n          this._insert(elementsArray);\n      };\n\n      ShapesQuadTree.prototype.childrenChange = function childrenChange (e) {\n          var this$1$1 = this;\n\n          if (e.action === \"remove\") {\n              for (var idx = 0; idx < e.items.length; idx++) {\n                  this$1$1.remove(e.items[idx]);\n              }\n          } else {\n              this._insert(Array.prototype.slice.call(e.items, 0));\n          }\n      };\n\n      ShapesQuadTree.prototype._insert = function _insert (elements) {\n          var this$1$1 = this;\n\n          var element;\n\n          while (elements.length > 0) {\n              element = elements.pop();\n              element.addObserver(this$1$1);\n              if (element.nodeType === \"Group\") {\n                  append(elements, element.children);\n              } else {\n                  this$1$1._insertShape(element);\n              }\n          }\n      };\n\n      ShapesQuadTree.prototype._insertShape = function _insertShape (shape) {\n          var bbox = shape.bbox();\n          if (bbox) {\n              var sectors = this.getSectors(bbox);\n              var x = sectors[0][0];\n              var y = sectors[1][0];\n\n              if (this.inRoot(sectors)) {\n                  this.root.insert(shape, bbox);\n              } else {\n                  var rootMap = this.rootMap;\n                  if (!rootMap[x]) {\n                      rootMap[x] = {};\n                  }\n\n                  if (!rootMap[x][y]) {\n                      rootMap[x][y] = new QuadNode(\n                          new Rect$1([ x * ROOT_SIZE, y * ROOT_SIZE ], [ ROOT_SIZE, ROOT_SIZE ])\n                      );\n                  }\n\n                  rootMap[x][y].insert(shape, bbox);\n              }\n          }\n      };\n\n      ShapesQuadTree.prototype.remove = function remove (element) {\n          var this$1$1 = this;\n\n          element.removeObserver(this);\n\n          if (element.nodeType === \"Group\") {\n              var children = element.children;\n              for (var idx = 0; idx < children.length; idx++) {\n                  this$1$1.remove(children[idx]);\n              }\n          } else if (element._quadNode) {\n              element._quadNode.remove(element);\n              delete element._quadNode;\n          }\n      };\n\n      ShapesQuadTree.prototype.inRoot = function inRoot (sectors) {\n          return sectors[0].length > 1 || sectors[1].length > 1;\n      };\n\n      ShapesQuadTree.prototype.getSectors = function getSectors (rect) {\n          var bottomRight = rect.bottomRight();\n          var bottomX = Math.floor(bottomRight.x / ROOT_SIZE);\n          var bottomY = Math.floor(bottomRight.y / ROOT_SIZE);\n          var sectors = [ [], [] ];\n          for (var x = Math.floor(rect.origin.x / ROOT_SIZE); x <= bottomX; x++) {\n              sectors[0].push(x);\n          }\n          for (var y = Math.floor(rect.origin.y / ROOT_SIZE); y <= bottomY; y++) {\n              sectors[1].push(y);\n          }\n          return sectors;\n      };\n\n      return ShapesQuadTree;\n  }(Class));\n\n  function zIndexComparer(x1, x2) {\n      if (x1._zIndex < x2._zIndex) {\n          return 1;\n      }\n      if (x1._zIndex > x2._zIndex) {\n          return -1;\n      }\n\n      return 0;\n  }\n\n  var SurfaceCursor = function SurfaceCursor(surface) {\n      surface.bind(\"mouseenter\", this._mouseenter.bind(this));\n      surface.bind(\"mouseleave\", this._mouseleave.bind(this));\n\n      this.element = surface.element;\n  };\n\n  SurfaceCursor.prototype.clear = function clear () {\n      this._resetCursor();\n  };\n\n  SurfaceCursor.prototype.destroy = function destroy () {\n      this._resetCursor();\n      delete this.element;\n  };\n\n  SurfaceCursor.prototype._mouseenter = function _mouseenter (e) {\n      var cursor = this._shapeCursor(e);\n\n      if (!cursor) {\n          this._resetCursor();\n      } else {\n          if (!this._current) {\n              this._defaultCursor = this._getCursor();\n          }\n\n          this._setCursor(cursor);\n      }\n  };\n\n  SurfaceCursor.prototype._mouseleave = function _mouseleave () {\n      this._resetCursor();\n  };\n\n  SurfaceCursor.prototype._shapeCursor = function _shapeCursor (e) {\n      var shape = e.element;\n\n      while (shape && !defined(shape.options.cursor)) {\n          shape = shape.parent;\n      }\n\n      if (shape) {\n          return shape.options.cursor;\n      }\n  };\n\n  SurfaceCursor.prototype._getCursor = function _getCursor () {\n      if (this.element) {\n          return this.element.style.cursor;\n      }\n  };\n\n  SurfaceCursor.prototype._setCursor = function _setCursor (cursor) {\n      if (this.element) {\n          this.element.style.cursor = cursor;\n          this._current = cursor;\n      }\n  };\n\n  SurfaceCursor.prototype._resetCursor = function _resetCursor () {\n      if (this._current) {\n          this._setCursor(this._defaultCursor || \"\");\n          delete this._current;\n      }\n  };\n\n  function renderPath(ctx, path) {\n      var segments = path.segments;\n\n      if (segments.length === 0) {\n          return;\n      }\n\n      var segment = segments[0];\n      var anchor = segment.anchor();\n      ctx.moveTo(anchor.x, anchor.y);\n\n      for (var i = 1; i < segments.length; i++) {\n          segment = segments[i];\n          anchor = segment.anchor();\n\n          var prevSeg = segments[i - 1];\n          var prevOut = prevSeg.controlOut();\n          var controlIn = segment.controlIn();\n\n          if (prevOut && controlIn) {\n              ctx.bezierCurveTo(prevOut.x, prevOut.y,\n                  controlIn.x, controlIn.y,\n                  anchor.x, anchor.y);\n          } else {\n              ctx.lineTo(anchor.x, anchor.y);\n          }\n      }\n\n      if (path.options.closed) {\n          ctx.closePath();\n      }\n  }\n\n  function addGradientStops(gradient, stops) {\n      for (var idx = 0; idx < stops.length; idx++) {\n          var stop = stops[idx];\n          var color = parseColor$2(stop.color());\n\n          color.a *= stop.opacity();\n\n          gradient.addColorStop(stop.offset(), color.toCssRgba());\n      }\n  }\n\n  var PathNode = (function (Node) {\n      function PathNode () {\n          Node.apply(this, arguments);\n      }\n\n      if ( Node ) PathNode.__proto__ = Node;\n      PathNode.prototype = Object.create( Node && Node.prototype );\n      PathNode.prototype.constructor = PathNode;\n\n      PathNode.prototype.renderTo = function renderTo (ctx) {\n          ctx.save();\n\n          this.setTransform(ctx);\n          this.setClip(ctx);\n          this.setOpacity(ctx);\n\n          ctx.beginPath();\n\n          this.renderPoints(ctx, this.srcElement);\n\n          this.setLineDash(ctx);\n          this.setLineCap(ctx);\n          this.setLineJoin(ctx);\n\n          this.setFill(ctx);\n          this.setStroke(ctx);\n\n          ctx.restore();\n      };\n\n      PathNode.prototype.setFill = function setFill (ctx) {\n          var fill = this.srcElement.options.fill;\n          var hasFill = false;\n\n          if (fill) {\n              if (fill.nodeType === \"Gradient\") {\n                  this.setGradientFill(ctx, fill);\n                  hasFill = true;\n              } else if (fill.nodeType === PATTERN) {\n                  this.setPatternFill(ctx, fill);\n                  hasFill = true;\n              } else if (!isTransparent(fill.color)) {\n                  ctx.fillStyle = fill.color;\n\n                  ctx.save();\n                  this.globalAlpha(ctx, fill.opacity);\n                  ctx.fill();\n                  ctx.restore();\n\n                  hasFill = true;\n              }\n          }\n\n          return hasFill;\n      };\n\n      PathNode.prototype.setGradientFill = function setGradientFill (ctx, fill) {\n          var bbox = this.srcElement.rawBBox();\n          var gradient;\n\n          if (fill instanceof LinearGradient) {\n              var start = fill.start();\n              var end = fill.end();\n              gradient = ctx.createLinearGradient(start.x, start.y, end.x, end.y);\n          } else if (fill instanceof RadialGradient) {\n              var center = fill.center();\n              gradient = ctx.createRadialGradient(center.x, center.y, 0, center.x, center.y, fill.radius());\n          }\n\n          addGradientStops(gradient, fill.stops);\n\n          ctx.save();\n\n          if (!fill.userSpace()) {\n              ctx.transform(bbox.width(), 0, 0, bbox.height(), bbox.origin.x, bbox.origin.y);\n          }\n          ctx.fillStyle = gradient;\n          ctx.fill();\n\n          ctx.restore();\n      };\n\n      PathNode.prototype.setPatternFill = function setPatternFill (ctx, pattern) {\n          var size = pattern.size();\n          var patternCanvas = document.createElement(\"canvas\");\n          var patternContext = patternCanvas.getContext(\"2d\");\n\n          patternCanvas.width = size.getWidth();\n          patternCanvas.height = size.getHeight();\n\n          this.childNodes.length = 0;\n          this.loadElements(pattern.children);\n\n          var childNodes = this.childNodes;\n          for (var i = 0; i < childNodes.length; i++) {\n              var child = childNodes[i];\n              child.renderTo(patternContext);\n          }\n\n          ctx.save();\n          ctx.fillStyle = ctx.createPattern(patternCanvas, \"repeat\");\n          ctx.fill();\n          ctx.restore();\n      };\n\n      PathNode.prototype.setStroke = function setStroke (ctx) {\n          var stroke = this.srcElement.options.stroke;\n          if (stroke && !isTransparent(stroke.color) && stroke.width > 0) {\n              ctx.strokeStyle = stroke.color;\n              ctx.lineWidth = valueOrDefault(stroke.width, 1);\n              ctx.lineJoin = valueOrDefault(stroke.lineJoin, ctx.lineJoin);\n\n              ctx.save();\n              this.globalAlpha(ctx, stroke.opacity);\n              ctx.stroke();\n              ctx.restore();\n\n              return true;\n          }\n      };\n\n      PathNode.prototype.dashType = function dashType () {\n          var stroke = this.srcElement.options.stroke;\n          if (stroke && stroke.dashType) {\n              return stroke.dashType.toLowerCase();\n          }\n      };\n\n      PathNode.prototype.setLineDash = function setLineDash (ctx) {\n          var dashType = this.dashType();\n          if (dashType && dashType !== SOLID) {\n              var dashArray = DASH_ARRAYS[dashType];\n              if (ctx.setLineDash) {\n                  ctx.setLineDash(dashArray);\n              } else {\n                  ctx.mozDash = dashArray;\n                  ctx.webkitLineDash = dashArray;\n              }\n          }\n      };\n\n      PathNode.prototype.setLineCap = function setLineCap (ctx) {\n          var dashType = this.dashType();\n          var stroke = this.srcElement.options.stroke;\n          if (dashType && dashType !== SOLID) {\n              ctx.lineCap = BUTT;\n          } else if (stroke && stroke.lineCap) {\n              ctx.lineCap = stroke.lineCap;\n          }\n      };\n\n      PathNode.prototype.setLineJoin = function setLineJoin (ctx) {\n          var stroke = this.srcElement.options.stroke;\n          if (stroke && stroke.lineJoin) {\n              ctx.lineJoin = stroke.lineJoin;\n          }\n      };\n\n      PathNode.prototype.renderPoints = function renderPoints (ctx, path) {\n          renderPath(ctx, path);\n      };\n\n      return PathNode;\n  }(Node));\n\n  var ArcNode = (function (PathNode) {\n      function ArcNode () {\n          PathNode.apply(this, arguments);\n      }\n\n      if ( PathNode ) ArcNode.__proto__ = PathNode;\n      ArcNode.prototype = Object.create( PathNode && PathNode.prototype );\n      ArcNode.prototype.constructor = ArcNode;\n\n      ArcNode.prototype.renderPoints = function renderPoints (ctx) {\n          var path = this.srcElement.toPath();\n          renderPath(ctx, path);\n      };\n\n      return ArcNode;\n  }(PathNode));\n\n  var CircleNode = (function (PathNode) {\n      function CircleNode () {\n          PathNode.apply(this, arguments);\n      }\n\n      if ( PathNode ) CircleNode.__proto__ = PathNode;\n      CircleNode.prototype = Object.create( PathNode && PathNode.prototype );\n      CircleNode.prototype.constructor = CircleNode;\n\n      CircleNode.prototype.renderPoints = function renderPoints (ctx) {\n          var ref = this.srcElement.geometry();\n          var center = ref.center;\n          var radius = ref.radius;\n\n          ctx.arc(center.x, center.y, radius, 0, Math.PI * 2);\n      };\n\n      return CircleNode;\n  }(PathNode));\n\n  var ImageNode = (function (PathNode) {\n      function ImageNode(srcElement, cors) {\n          PathNode.call(this, srcElement);\n\n          this.onLoad = this.onLoad.bind(this);\n          this.onError = this.onError.bind(this);\n\n          this.loading = createPromise();\n\n          var img = this.img = new Image();\n          var src = srcElement.src();\n\n          if (cors && !(/^data:/i.test(src))) {\n              img.crossOrigin = cors;\n          }\n\n          if (src) {\n              img.src = src;\n          }\n\n          if (img.complete) {\n              this.onLoad();\n          } else {\n              img.onload = this.onLoad;\n              img.onerror = this.onError;\n          }\n      }\n\n      if ( PathNode ) ImageNode.__proto__ = PathNode;\n      ImageNode.prototype = Object.create( PathNode && PathNode.prototype );\n      ImageNode.prototype.constructor = ImageNode;\n\n      ImageNode.prototype.renderTo = function renderTo (ctx) {\n          if (this.loading.state() === \"resolved\") {\n              ctx.save();\n\n              this.setTransform(ctx);\n              this.setClip(ctx);\n\n              this.drawImage(ctx);\n\n              ctx.restore();\n          }\n      };\n\n      ImageNode.prototype.optionsChange = function optionsChange (e) {\n          if (e.field === \"src\") {\n              this.loading = createPromise();\n              this.img.src = this.srcElement.src();\n          } else {\n              PathNode.prototype.optionsChange.call(this, e);\n          }\n      };\n\n      ImageNode.prototype.onLoad = function onLoad () {\n          this.loading.resolve();\n          this.invalidate();\n      };\n\n      ImageNode.prototype.onError = function onError () {\n          this.loading.reject(new Error(\n              \"Unable to load image '\" + this.img.src +\n              \"'. Check for connectivity and verify CORS headers.\"\n          ));\n      };\n\n      ImageNode.prototype.drawImage = function drawImage (ctx) {\n          var rect = this.srcElement.rect();\n          var topLeft = rect.topLeft();\n\n          ctx.drawImage(\n              this.img, topLeft.x, topLeft.y, rect.width(), rect.height()\n          );\n      };\n\n      return ImageNode;\n  }(PathNode));\n\n  var MultiPathNode = (function (PathNode) {\n      function MultiPathNode () {\n          PathNode.apply(this, arguments);\n      }\n\n      if ( PathNode ) MultiPathNode.__proto__ = PathNode;\n      MultiPathNode.prototype = Object.create( PathNode && PathNode.prototype );\n      MultiPathNode.prototype.constructor = MultiPathNode;\n\n      MultiPathNode.prototype.renderPoints = function renderPoints (ctx) {\n          var paths = this.srcElement.paths;\n          for (var i = 0; i < paths.length; i++) {\n              renderPath(ctx, paths[i]);\n          }\n      };\n\n      return MultiPathNode;\n  }(PathNode));\n\n  var RectNode = (function (PathNode) {\n      function RectNode () {\n          PathNode.apply(this, arguments);\n      }\n\n      if ( PathNode ) RectNode.__proto__ = PathNode;\n      RectNode.prototype = Object.create( PathNode && PathNode.prototype );\n      RectNode.prototype.constructor = RectNode;\n\n      RectNode.prototype.renderPoints = function renderPoints (ctx) {\n          var geometry = this.srcElement.geometry();\n          var ref = geometry.cornerRadius;\n          var rx = ref[0];\n          var ry = ref[1];\n\n          if (rx === 0 && ry === 0) {\n              var origin = geometry.origin;\n              var size = geometry.size;\n              ctx.rect(origin.x, origin.y, size.width, size.height);\n          } else {\n              PathNode.prototype.renderPoints.call(this, ctx, Path.fromRect(geometry));\n          }\n      };\n\n      return RectNode;\n  }(PathNode));\n\n  var TextNode = (function (PathNode) {\n      function TextNode () {\n          PathNode.apply(this, arguments);\n      }\n\n      if ( PathNode ) TextNode.__proto__ = PathNode;\n      TextNode.prototype = Object.create( PathNode && PathNode.prototype );\n      TextNode.prototype.constructor = TextNode;\n\n      TextNode.prototype.renderTo = function renderTo (ctx) {\n          var text = this.srcElement;\n          var pos = text.position();\n          var size = text.measure();\n\n          ctx.save();\n\n          this.setTransform(ctx);\n          this.setClip(ctx);\n          this.setOpacity(ctx);\n\n          ctx.beginPath();\n\n          ctx.font = text.options.font;\n          ctx.textAlign = 'left';\n\n          if (text.options.paintOrder === 'stroke') {\n              this.stroke(ctx, text, pos, size);\n              this.fill(ctx, text, pos, size);\n          } else {\n              this.fill(ctx, text, pos, size);\n              this.stroke(ctx, text, pos, size);\n          }\n\n          ctx.restore();\n      };\n\n      TextNode.prototype.stroke = function stroke (ctx, text, pos, size) {\n          if (this.setStroke(ctx)) {\n              this.setLineDash(ctx);\n              ctx.strokeText(text.content(), pos.x, pos.y + size.baseline);\n          }\n      };\n\n      TextNode.prototype.fill = function fill (ctx, text, pos, size) {\n          if (this.setFill(ctx)) {\n              ctx.fillText(text.content(), pos.x, pos.y + size.baseline);\n          }\n      };\n\n      return TextNode;\n  }(PathNode));\n\n  NODE_MAP.Arc = ArcNode;\n  NODE_MAP.Circle = CircleNode;\n  NODE_MAP.Group = GroupNode;\n  NODE_MAP.Image = ImageNode;\n  NODE_MAP.MultiPath = MultiPathNode;\n  NODE_MAP.Path = PathNode;\n  NODE_MAP.Rect = RectNode;\n  NODE_MAP.Text = TextNode;\n\n\n  var Surface$1 = (function (BaseSurface) {\n      function Surface(element, options) {\n          BaseSurface.call(this, element, options);\n\n          this.element.innerHTML = this._template(this);\n\n          var canvas = this.element.firstElementChild;\n          canvas.style.width = '100%';\n          canvas.style.height = '100%';\n\n          var size = elementSize(element);\n\n          canvas.width = size.width;\n          canvas.height = size.height;\n\n          this._rootElement = canvas;\n\n          this._root = new RootNode(canvas, size);\n\n          this._mouseTrackHandler = this._trackMouse.bind(this);\n\n          bindEvents(this.element, {\n              click: this._mouseTrackHandler,\n              mousemove: this._mouseTrackHandler\n          });\n      }\n\n      if ( BaseSurface ) Surface.__proto__ = BaseSurface;\n      Surface.prototype = Object.create( BaseSurface && BaseSurface.prototype );\n      Surface.prototype.constructor = Surface;\n\n      var prototypeAccessors = { type: { configurable: true } };\n\n      prototypeAccessors.type.get = function () {\n          return \"canvas\";\n      };\n\n      Surface.prototype.destroy = function destroy () {\n          BaseSurface.prototype.destroy.call(this);\n\n          if (this._root) {\n              this._root.destroy();\n              this._root = null;\n          }\n\n          if (this._searchTree) {\n              this._searchTree.clear();\n              delete this._searchTree;\n          }\n\n          if (this._cursor) {\n              this._cursor.destroy();\n              delete this._cursor;\n          }\n\n          unbindEvents(this.element, {\n              click: this._mouseTrackHandler,\n              mousemove: this._mouseTrackHandler\n          });\n      };\n\n      Surface.prototype.draw = function draw (element) {\n          BaseSurface.prototype.draw.call(this, element);\n          this._root.load([ element ], undefined, this.options.cors);\n\n          if (this._searchTree) {\n              this._searchTree.add([ element ]);\n          }\n      };\n\n      Surface.prototype.clear = function clear () {\n          BaseSurface.prototype.clear.call(this);\n          this._root.clear();\n\n          if (this._searchTree) {\n              this._searchTree.clear();\n          }\n\n          if (this._cursor) {\n              this._cursor.clear();\n          }\n      };\n\n      Surface.prototype.eventTarget = function eventTarget (e) {\n          if (this._searchTree) {\n              var point = this._surfacePoint(e);\n              var shape = this._searchTree.pointShape(point);\n              return shape;\n          }\n      };\n\n      Surface.prototype.image = function image () {\n          var ref = this;\n          var root = ref._root;\n          var rootElement = ref._rootElement;\n          var loadingStates = [];\n\n          root.traverse(function (childNode) {\n              if (childNode.loading) {\n                  loadingStates.push(childNode.loading);\n              }\n          });\n\n          var promise = createPromise();\n          var resolveDataURL = function () {\n              root._invalidate({ fixedScale: true });\n\n              try {\n                  var data = rootElement.toDataURL();\n                  promise.resolve(data);\n              } catch (e) {\n                  promise.reject(e);\n              }\n          };\n\n          promiseAll(loadingStates).then(resolveDataURL, resolveDataURL);\n\n          return promise;\n      };\n\n      Surface.prototype.suspendTracking = function suspendTracking () {\n          BaseSurface.prototype.suspendTracking.call(this);\n          if (this._searchTree) {\n              this._searchTree.clear();\n              delete this._searchTree;\n          }\n      };\n\n      Surface.prototype.resumeTracking = function resumeTracking () {\n          BaseSurface.prototype.resumeTracking.call(this);\n          if (!this._searchTree) {\n              this._searchTree = new ShapesQuadTree();\n\n              var childNodes = this._root.childNodes;\n              var rootElements = [];\n              for (var idx = 0; idx < childNodes.length; idx++) {\n                  rootElements.push(childNodes[idx].srcElement);\n              }\n              this._searchTree.add(rootElements);\n          }\n      };\n\n      Surface.prototype._resize = function _resize () {\n          this._rootElement.width = this._size.width;\n          this._rootElement.height = this._size.height;\n\n          this._root.size = this._size;\n          this._root.invalidate();\n      };\n\n      Surface.prototype._template = function _template () {\n          return \"<canvas></canvas>\";\n      };\n\n      Surface.prototype._enableTracking = function _enableTracking () {\n          this._searchTree = new ShapesQuadTree();\n          this._cursor = new SurfaceCursor(this);\n\n          BaseSurface.prototype._enableTracking.call(this);\n      };\n\n      Surface.prototype._trackMouse = function _trackMouse (e) {\n          if (this._suspendedTracking) {\n              return;\n          }\n\n          var shape = this.eventTarget(e);\n\n          if (e.type !== \"click\") {\n              var currentShape = this._currentShape;\n              if (currentShape && currentShape !== shape) {\n                  this.trigger(\"mouseleave\", {\n                      element: currentShape,\n                      originalEvent: e,\n                      type: \"mouseleave\"\n                  });\n              }\n\n              if (shape && currentShape !== shape) {\n                  this.trigger(\"mouseenter\", {\n                      element: shape,\n                      originalEvent: e,\n                      type: \"mouseenter\"\n                  });\n              }\n\n              this.trigger(\"mousemove\", {\n                  element: shape,\n                  originalEvent: e,\n                  type: \"mousemove\"\n              });\n\n              this._currentShape = shape;\n          } else if (shape) {\n              this.trigger(\"click\", {\n                  element: shape,\n                  originalEvent: e,\n                  type: \"click\"\n              });\n          }\n      };\n\n      Object.defineProperties( Surface.prototype, prototypeAccessors );\n\n      return Surface;\n  }(Surface$3));\n\n  var instance;\n  var support;\n\n  var hasDocument = function () { return typeof document !== \"undefined\"; };\n\n  var supportsCanvas = function () { return hasDocument() &&\n      document.createElement(\"canvas\").getContext; };\n\n  var supportsSVG = function () { return hasDocument() &&\n      document.implementation.hasFeature(\"http://www.w3.org/TR/SVG11/feature#BasicStructure\", \"1.1\"); };\n\n  var SurfaceFactory = (function (Class) {\n      function SurfaceFactory() {\n          Class.call(this);\n\n          this._items = [ {\n              name: \"svg\",\n              type: Surface$2\n          }, {\n              name: \"canvas\",\n              type: Surface$1\n          } ];\n      }\n\n      if ( Class ) SurfaceFactory.__proto__ = Class;\n      SurfaceFactory.prototype = Object.create( Class && Class.prototype );\n      SurfaceFactory.prototype.constructor = SurfaceFactory;\n\n      var staticAccessors = { support: { configurable: true },current: { configurable: true } };\n\n      staticAccessors.support.get = function () {\n          if (!support) {\n              support = {\n                  canvas: supportsCanvas(),\n                  svg: supportsSVG()\n              };\n          }\n\n          return support;\n      };\n\n      staticAccessors.current.get = function () {\n          if (!instance) {\n              instance = new SurfaceFactory();\n          }\n\n          return instance;\n      };\n\n      SurfaceFactory.prototype.create = function create (element, options) {\n          var items = this._items;\n          var match = items[0];\n\n          if (options && options.type) {\n              var preferred = options.type.toLowerCase();\n              for (var i = 0; i < items.length; i++) {\n                  if (items[i].name === preferred) {\n                      match = items[i];\n                      break;\n                  }\n              }\n          }\n\n          if (match) {\n              return new match.type(element, options);\n          }\n\n          logToConsole(\n              \"Warning: Unable to create Kendo UI Drawing Surface. Possible causes:\\n\" +\n              \"- The browser does not support SVG and Canvas. User agent: \" + (navigator.userAgent));\n      };\n\n      Object.defineProperties( SurfaceFactory, staticAccessors );\n\n      return SurfaceFactory;\n  }(Class));\n\n  var Surface = (function (BaseSurface) {\n      function Surface () {\n          BaseSurface.apply(this, arguments);\n      }\n\n      if ( BaseSurface ) Surface.__proto__ = BaseSurface;\n      Surface.prototype = Object.create( BaseSurface && BaseSurface.prototype );\n      Surface.prototype.constructor = Surface;\n\n      var staticAccessors = { support: { configurable: true } };\n\n      staticAccessors.support.get = function () {\n          return SurfaceFactory.support;\n      };\n\n      Surface.create = function create (element, options) {\n          return SurfaceFactory.current.create(element, options);\n      };\n\n      Object.defineProperties( Surface, staticAccessors );\n\n      return Surface;\n  }(Surface$3));\n\n  function exportGroup(group) {\n      var root = new RootNode$1({\n          skipBaseHref: true\n      });\n      var bbox = group.clippedBBox();\n      var rootGroup = group;\n\n      if (bbox) {\n          var origin = bbox.getOrigin();\n          var exportRoot = new Group();\n          exportRoot.transform(transform().translate(-origin.x, -origin.y));\n          exportRoot.children.push(group);\n          rootGroup = exportRoot;\n      }\n\n      root.load([ rootGroup ]);\n\n      var svg = \"<?xml version='1.0' ?><svg xmlns='\" + SVG_NS + \"' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>\" + (root.render()) + \"</svg>\";\n\n      root.destroy();\n\n      return svg;\n  }\n\n  var svg = /*#__PURE__*/Object.freeze({\n      __proto__: null,\n      ArcNode: ArcNode$1,\n      CircleNode: CircleNode$1,\n      ClipNode: ClipNode,\n      DefinitionNode: DefinitionNode,\n      GradientStopNode: GradientStopNode,\n      GroupNode: GroupNode$1,\n      ImageNode: ImageNode$1,\n      LinearGradientNode: LinearGradientNode,\n      MultiPathNode: MultiPathNode$1,\n      Node: Node$1,\n      PathNode: PathNode$1,\n      RadialGradientNode: RadialGradientNode,\n      RectNode: RectNode$1,\n      RootNode: RootNode$1,\n      Surface: Surface$2,\n      TextNode: TextNode$1,\n      exportGroup: exportGroup\n  });\n\n  var canvas = /*#__PURE__*/Object.freeze({\n      __proto__: null,\n      ArcNode: ArcNode,\n      CircleNode: CircleNode,\n      GroupNode: GroupNode,\n      ImageNode: ImageNode,\n      MultiPathNode: MultiPathNode,\n      Node: Node,\n      PathNode: PathNode,\n      RectNode: RectNode,\n      RootNode: RootNode,\n      Surface: Surface$1,\n      TextNode: TextNode\n  });\n\n  function exportImage(group, options) {\n      var defaults = {\n          width: \"800px\", height: \"600px\",\n          cors: \"Anonymous\"\n      };\n\n      var exportRoot = group;\n      var bbox = group.clippedBBox();\n\n\n      if (bbox) {\n          var origin = bbox.getOrigin();\n          exportRoot = new Group();\n          exportRoot.transform(transform().translate(-origin.x, -origin.y));\n          exportRoot.children.push(group);\n\n          var size = bbox.getSize();\n          defaults.width = size.width + \"px\";\n          defaults.height = size.height + \"px\";\n      }\n\n      var surfaceOptions = Object.assign(defaults, options);\n\n      var container = document.createElement(\"div\");\n      var style = container.style;\n\n      style.display = \"none\";\n      style.width = surfaceOptions.width;\n      style.height = surfaceOptions.height;\n      document.body.appendChild(container);\n\n      var surface = new Surface$1(container, surfaceOptions);\n      surface.suspendTracking();\n      surface.draw(exportRoot);\n\n      var promise = surface.image();\n      var destroy = function () {\n          surface.destroy();\n          document.body.removeChild(container);\n      };\n      promise.then(destroy, destroy);\n\n      return promise;\n  }\n\n  function exportSVG(group, options) {\n      var svg = exportGroup(group);\n\n      if (!options || !options.raw) {\n          svg = \"data:image/svg+xml;base64,\" + encodeBase64(svg);\n      }\n\n      return createPromise().resolve(svg);\n  }\n\n  var drawing = /*#__PURE__*/Object.freeze({\n      __proto__: null,\n      Animation: Animation,\n      AnimationFactory: AnimationFactory,\n      Arc: Arc,\n      BaseNode: BaseNode,\n      Circle: Circle,\n      Element: Element$1,\n      Gradient: Gradient,\n      GradientStop: GradientStop,\n      Group: Group,\n      HasObservers: HasObservers,\n      Image: Image$1,\n      Layout: Layout,\n      LinearGradient: LinearGradient,\n      MultiPath: MultiPath,\n      OptionsStore: OptionsStore,\n      Path: Path,\n      PathParser: PathParser,\n      Pattern: Pattern,\n      QuadNode: QuadNode,\n      RadialGradient: RadialGradient,\n      Rect: Rect,\n      ShapesQuadTree: ShapesQuadTree,\n      Surface: Surface,\n      SurfaceFactory: SurfaceFactory,\n      Text: Text,\n      align: align,\n      canvas: canvas,\n      crosshatchPattern: crosshatchPattern,\n      diagonalStripesPattern: diagonalStripesPattern,\n      dotsPattern: dotsPattern,\n      exportImage: exportImage,\n      exportSVG: exportSVG,\n      fit: fit,\n      gridPattern: gridPattern,\n      parsePath: parsePath,\n      stack: stack,\n      svg: svg,\n      util: util,\n      vAlign: vAlign,\n      vStack: vStack,\n      vWrap: vWrap,\n      verticalStripesPattern: verticalStripesPattern,\n      wrap: wrap\n  });\n\n  /* eslint-disable no-multi-spaces, key-spacing, indent, camelcase, space-before-blocks, eqeqeq, brace-style */\n  /* eslint-disable space-infix-ops, space-before-function-paren, array-bracket-spacing, object-curly-spacing */\n  /* eslint-disable no-nested-ternary, max-params, default-case, no-else-return, no-empty */\n  /* eslint-disable no-param-reassign, no-var, block-scoped-var */\n\n  // XXX: remove this junk (assume `true`) when we no longer have to support IE < 10\n  // IE 9 (at least compatibility) reports having Uint8Array but the request response does not contain ArrayBuffer which results in missing table head error\n  var HAS_TYPED_ARRAYS = typeof Uint8Array !== 'undefined' && support$1.browser && (!support$1.browser.msie || support$1.browser.version > 9);\n\n  var BASE64 = (function(){\n      var keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n      return {\n          decode: function(str) {\n              var input = str.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\"), i = 0, n = input.length, output = [];\n\n              while (i < n) {\n                  var enc1 = keyStr.indexOf(input.charAt(i++));\n                  var enc2 = keyStr.indexOf(input.charAt(i++));\n                  var enc3 = keyStr.indexOf(input.charAt(i++));\n                  var enc4 = keyStr.indexOf(input.charAt(i++));\n\n                  var chr1 = (enc1 << 2) | (enc2 >>> 4);\n                  var chr2 = ((enc2 & 15) << 4) | (enc3 >>> 2);\n                  var chr3 = ((enc3 & 3) << 6) | enc4;\n\n                  output.push(chr1);\n                  if (enc3 != 64) {\n                      output.push(chr2);\n                  }\n                  if (enc4 != 64) {\n                      output.push(chr3);\n                  }\n              }\n\n              return output;\n          },\n          encode: function(bytes) {\n              var i = 0, n = bytes.length;\n              var output = \"\";\n\n              while (i < n) {\n                  var chr1 = bytes[i++];\n                  var chr2 = bytes[i++];\n                  var chr3 = bytes[i++];\n\n                  var enc1 = chr1 >>> 2;\n                  var enc2 = ((chr1 & 3) << 4) | (chr2 >>> 4);\n                  var enc3 = ((chr2 & 15) << 2) | (chr3 >>> 6);\n                  var enc4 = chr3 & 63;\n\n                  if (i - n == 2) {\n                      enc3 = enc4 = 64;\n                  } else if (i - n == 1) {\n                      enc4 = 64;\n                  }\n\n                  output += keyStr.charAt(enc1) + keyStr.charAt(enc2) + keyStr.charAt(enc3) + keyStr.charAt(enc4);\n              }\n              return output;\n          }\n      };\n  }());\n\n  function BinaryStream(data) {\n      var offset = 0, length = 0;\n      if (data == null) {\n          data = HAS_TYPED_ARRAYS ? new Uint8Array(256) : [];\n      } else {\n          length = data.length;\n      }\n\n      var ensure = HAS_TYPED_ARRAYS ? function(len) {\n          if (len >= data.length) {\n              var tmp = new Uint8Array(Math.max(len + 256, data.length * 2));\n              tmp.set(data, 0);\n              data = tmp;\n          }\n      } : function() {};\n\n      var get = HAS_TYPED_ARRAYS ? function() {\n          return new Uint8Array(data.buffer, 0, length);\n      } : function() {\n          return data;\n      };\n\n      var write = HAS_TYPED_ARRAYS ? function(bytes) {\n          if (typeof bytes == \"string\") {\n              return writeString(bytes);\n          }\n          var len = bytes.length;\n          ensure(offset + len);\n          data.set(bytes, offset);\n          offset += len;\n          if (offset > length) {\n              length = offset;\n          }\n      } : function(bytes) {\n          if (typeof bytes == \"string\") {\n              return writeString(bytes);\n          }\n          for (var i = 0; i < bytes.length; ++i) {\n              writeByte(bytes[i]);\n          }\n      };\n\n      var slice = HAS_TYPED_ARRAYS ? function(start, length) {\n          if (data.buffer.slice) {\n              return new Uint8Array(data.buffer.slice(start, start + length));\n          } else {\n              // IE10\n              var x = new Uint8Array(length);\n              x.set(new Uint8Array(data.buffer, start, length));\n              return x;\n          }\n      } : function(start, length) {\n          return data.slice(start, start + length);\n      };\n\n      function eof() {\n          return offset >= length;\n      }\n      function readByte() {\n          return offset < length ? data[offset++] : 0;\n      }\n      function writeByte(b) {\n          ensure(offset);\n          data[offset++] = b & 0xFF;\n          if (offset > length) {\n              length = offset;\n          }\n      }\n      function readShort() {\n          return (readByte() << 8) | readByte();\n      }\n      function writeShort(w) {\n          writeByte(w >> 8);\n          writeByte(w);\n      }\n      function readShort_() {\n          var w = readShort();\n          return w >= 0x8000 ? w - 0x10000 : w;\n      }\n      function writeShort_(w) {\n          writeShort(w < 0 ? w + 0x10000 : w);\n      }\n      function readLong() {\n          return (readShort() * 0x10000) + readShort();\n      }\n      function writeLong(w) {\n          writeShort((w >>> 16) & 0xFFFF);\n          writeShort(w & 0xFFFF);\n      }\n      function readLong_() {\n          var w = readLong();\n          return w >= 0x80000000 ? w - 0x100000000 : w;\n      }\n      function writeLong_(w) {\n          writeLong(w < 0 ? w + 0x100000000 : w);\n      }\n      function readFixed() {\n          return readLong() / 0x10000;\n      }\n      function writeFixed(f) {\n          writeLong(Math.round(f * 0x10000));\n      }\n      function readFixed_() {\n          return readLong_() / 0x10000;\n      }\n      function writeFixed_(f) {\n          writeLong_(Math.round(f * 0x10000));\n      }\n      function read(len) {\n          return times(len, readByte);\n      }\n      function readString(len) {\n          return String.fromCharCode.apply(String, read(len));\n      }\n      function writeString(str) {\n          for (var i = 0; i < str.length; ++i) {\n              writeByte(str.charCodeAt(i));\n          }\n      }\n      function times(n, reader) {\n          for (var ret = new Array(n), i = 0; i < n; ++i) {\n              ret[i] = reader();\n          }\n          return ret;\n      }\n\n      var stream = {\n          eof         : eof,\n          readByte    : readByte,\n          writeByte   : writeByte,\n          readShort   : readShort,\n          writeShort  : writeShort,\n          readLong    : readLong,\n          writeLong   : writeLong,\n          readFixed   : readFixed,\n          writeFixed  : writeFixed,\n\n          // signed numbers.\n          readShort_  : readShort_,\n          writeShort_ : writeShort_,\n          readLong_   : readLong_,\n          writeLong_  : writeLong_,\n          readFixed_  : readFixed_,\n          writeFixed_ : writeFixed_,\n\n          read        : read,\n          write       : write,\n          readString  : readString,\n          writeString : writeString,\n\n          times       : times,\n          get         : get,\n          slice       : slice,\n\n          offset: function(pos) {\n              if (pos != null) {\n                  offset = pos;\n                  return stream;\n              }\n              return offset;\n          },\n\n          skip: function(nbytes) {\n              offset += nbytes;\n          },\n\n          toString: function() {\n              throw new Error(\"FIX CALLER.  BinaryStream is no longer convertible to string!\");\n          },\n\n          length: function() { return length; },\n\n          saveExcursion: function(f) {\n              var pos = offset;\n              try {\n                  return f();\n              } finally {\n                  offset = pos;\n              }\n          },\n\n          writeBase64: function(base64) {\n              if (window.atob) {\n                  writeString(window.atob(base64));\n              } else {\n                  write(BASE64.decode(base64));\n              }\n          },\n          base64: function() {\n              return BASE64.encode(get());\n          }\n      };\n\n      return stream;\n  }\n\n  function ucs2decode(string) {\n      var output = [],\n          counter = 0,\n          length = string.length,\n          value,\n          extra;\n      while (counter < length) {\n          value = string.charCodeAt(counter++);\n          if (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n              // high surrogate, and there is a next character\n              extra = string.charCodeAt(counter++);\n              if ((extra & 0xFC00) == 0xDC00) { // low surrogate\n                  output.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n              } else {\n                  // unmatched surrogate; only append this code unit, in case the next\n                  // code unit is the high surrogate of a surrogate pair\n                  output.push(value);\n                  counter--;\n              }\n          } else {\n              output.push(value);\n          }\n      }\n      return output;\n  }\n\n  function ucs2encode(array) {\n      return array.map(function(value){\n          var output = \"\";\n          if (value > 0xFFFF) {\n              value -= 0x10000;\n              output += String.fromCharCode(value >>> 10 & 0x3FF | 0xD800);\n              value = 0xDC00 | value & 0x3FF;\n          }\n          output += String.fromCharCode(value);\n          return output;\n      }).join(\"\");\n  }\n\n  function atobUint8Array(base64) {\n      var data = window.atob(base64);\n      var result = new Uint8Array(data.length);\n\n      for (var idx = 0; idx < data.length; idx++) {\n          result[idx] = data.charCodeAt(idx);\n      }\n\n      return result;\n  }\n\n  function createUint8Array(data) {\n      var result = new Uint8Array(data.length);\n\n      for (var idx = 0; idx < data.length; idx++) {\n          result[idx] = data[idx];\n      }\n\n      return result;\n  }\n\n  function base64ToUint8Array(base64) {\n      if (window.atob) {\n          return atobUint8Array(base64);\n      }\n\n      return createUint8Array(BASE64.decode(base64));\n  }\n\n  /* eslint-disable no-multi-spaces, key-spacing, indent, camelcase, space-before-blocks, eqeqeq, brace-style */\n  /* eslint-disable space-infix-ops, space-before-function-paren, array-bracket-spacing, object-curly-spacing */\n  /* eslint-disable no-nested-ternary, max-params, default-case, no-else-return, no-empty */\n  /* eslint-disable no-param-reassign, no-var, block-scoped-var */\n\n\n  function hasOwnProperty$2(obj, key) {\n      return Object.prototype.hasOwnProperty.call(obj, key);\n  }\n\n  function sortedKeys(obj) {\n      return Object.keys(obj).sort(function(a, b){ return a - b; }).map(parseFloat);\n  }\n\n  ///\n  var Directory = function Directory(data) {\n      this.raw = data;\n      this.scalerType = data.readLong();\n      this.tableCount = data.readShort();\n      this.searchRange = data.readShort();\n      this.entrySelector = data.readShort();\n      this.rangeShift = data.readShort();\n\n      var tables = this.tables = {};\n      for (var i = 0; i < this.tableCount; ++i) {\n          var entry = {\n              tag  : data.readString(4),\n              checksum : data.readLong(),\n              offset   : data.readLong(),\n              length   : data.readLong()\n          };\n          tables[entry.tag] = entry;\n      }\n  };\n\n  Directory.prototype.readTable = function readTable (name, Ctor) {\n      var def = this.tables[name];\n      if (!def) {\n          throw new Error(\"Table \" + name + \" not found in directory\");\n      }\n      return (this[name] = def.table = new Ctor(this, def));\n  };\n\n  Directory.prototype.render = function render (tables) {\n          var this$1$1 = this;\n\n      var tableCount = Object.keys(tables).length;\n\n      var maxpow2 = Math.pow(2, Math.floor(Math.log(tableCount) / Math.LN2));\n      var searchRange = maxpow2 * 16;\n      var entrySelector = Math.floor(Math.log(maxpow2) / Math.LN2);\n      var rangeShift = tableCount * 16 - searchRange;\n\n      var out = BinaryStream();\n      out.writeLong(this.scalerType);\n      out.writeShort(tableCount);\n      out.writeShort(searchRange);\n      out.writeShort(entrySelector);\n      out.writeShort(rangeShift);\n\n      var directoryLength = tableCount * 16;\n      var offset = out.offset() + directoryLength;\n      var headOffset = null;\n      var tableData = BinaryStream();\n\n      for (var tag in tables) {\n          if (hasOwnProperty$2(tables, tag)) {\n              var table = tables[tag];\n\n              out.writeString(tag);\n              out.writeLong(this$1$1.checksum(table));\n              out.writeLong(offset);\n              out.writeLong(table.length);\n\n              tableData.write(table);\n              if (tag == \"head\") {\n                  headOffset = offset;\n              }\n              offset += table.length;\n\n              while (offset % 4) {\n                  tableData.writeByte(0);\n                  offset++;\n              }\n          }\n      }\n\n      out.write(tableData.get());\n      var sum = this.checksum(out.get());\n      var adjustment = 0xB1B0AFBA - sum;\n\n      out.offset(headOffset + 8);\n      out.writeLong(adjustment);\n      return out.get();\n  };\n\n  Directory.prototype.checksum = function checksum (data) {\n      data = BinaryStream(data);\n      var sum = 0;\n      while (!data.eof()) {\n          sum += data.readLong();\n      }\n      return sum & 0xFFFFFFFF;\n  };\n\n  var Table = function Table(file, def) {\n      this.definition = def;\n      this.length = def.length;\n      this.offset = def.offset;\n      this.file = file;\n      this.rawData = file.raw;\n      this.parse(file.raw);\n  };\n\n  Table.prototype.raw = function raw () {\n      return this.rawData.slice(this.offset, this.length);\n  };\n\n  Table.prototype.parse = function parse () {};\n\n  var HeadTable = (function (Table) {\n      function HeadTable () {\n          Table.apply(this, arguments);\n      }\n\n      if ( Table ) HeadTable.__proto__ = Table;\n      HeadTable.prototype = Object.create( Table && Table.prototype );\n      HeadTable.prototype.constructor = HeadTable;\n\n      HeadTable.prototype.parse = function parse (data) {\n          data.offset(this.offset);\n          this.version             = data.readLong();\n          this.revision            = data.readLong();\n          this.checkSumAdjustment  = data.readLong();\n          this.magicNumber         = data.readLong();\n          this.flags               = data.readShort();\n          this.unitsPerEm          = data.readShort();\n          this.created             = data.read(8);\n          this.modified            = data.read(8);\n\n          this.xMin = data.readShort_();\n          this.yMin = data.readShort_();\n          this.xMax = data.readShort_();\n          this.yMax = data.readShort_();\n\n          this.macStyle           = data.readShort();\n          this.lowestRecPPEM      = data.readShort();\n          this.fontDirectionHint  = data.readShort_();\n          this.indexToLocFormat   = data.readShort_();\n          this.glyphDataFormat    = data.readShort_();\n      };\n\n      HeadTable.prototype.render = function render (indexToLocFormat) {\n          var out = BinaryStream();\n          out.writeLong(this.version);\n          out.writeLong(this.revision);\n          out.writeLong(0);       // checksum adjustment; shall be computed later\n          out.writeLong(this.magicNumber);\n          out.writeShort(this.flags);\n          out.writeShort(this.unitsPerEm);\n          out.write(this.created);\n          out.write(this.modified);\n          out.writeShort_(this.xMin);\n          out.writeShort_(this.yMin);\n          out.writeShort_(this.xMax);\n          out.writeShort_(this.yMax);\n          out.writeShort(this.macStyle);\n          out.writeShort(this.lowestRecPPEM);\n          out.writeShort_(this.fontDirectionHint);\n          out.writeShort_(indexToLocFormat); // this will depend on the `loca` table\n          out.writeShort_(this.glyphDataFormat);\n          return out.get();\n      };\n\n      return HeadTable;\n  }(Table));\n\n  var LocaTable = (function (Table) {\n      function LocaTable () {\n          Table.apply(this, arguments);\n      }\n\n      if ( Table ) LocaTable.__proto__ = Table;\n      LocaTable.prototype = Object.create( Table && Table.prototype );\n      LocaTable.prototype.constructor = LocaTable;\n\n      LocaTable.prototype.parse = function parse (data) {\n          data.offset(this.offset);\n          var format = this.file.head.indexToLocFormat;\n          if (format === 0) {\n              this.offsets = data.times(this.length / 2, function(){\n                  return 2 * data.readShort();\n              });\n          } else {\n              this.offsets = data.times(this.length / 4, data.readLong);\n          }\n      };\n\n      LocaTable.prototype.offsetOf = function offsetOf (id) {\n          return this.offsets[id];\n      };\n\n      LocaTable.prototype.lengthOf = function lengthOf (id) {\n          return this.offsets[id + 1] - this.offsets[id];\n      };\n\n      LocaTable.prototype.render = function render (offsets) {\n          var out = BinaryStream();\n          var needsLongFormat = offsets[offsets.length - 1] > 0xFFFF;\n          for (var i = 0; i < offsets.length; ++i) {\n              if (needsLongFormat) {\n                  out.writeLong(offsets[i]);\n              } else {\n                  out.writeShort(offsets[i] / 2);\n              }\n          }\n          return {\n              format: needsLongFormat ? 1 : 0,\n              table: out.get()\n          };\n      };\n\n      return LocaTable;\n  }(Table));\n\n  var HheaTable = (function (Table) {\n      function HheaTable () {\n          Table.apply(this, arguments);\n      }\n\n      if ( Table ) HheaTable.__proto__ = Table;\n      HheaTable.prototype = Object.create( Table && Table.prototype );\n      HheaTable.prototype.constructor = HheaTable;\n\n      HheaTable.prototype.parse = function parse (data) {\n          data.offset(this.offset);\n\n          this.version              = data.readLong();\n          this.ascent               = data.readShort_();\n          this.descent              = data.readShort_();\n          this.lineGap              = data.readShort_();\n          this.advanceWidthMax      = data.readShort();\n          this.minLeftSideBearing   = data.readShort_();\n          this.minRightSideBearing  = data.readShort_();\n          this.xMaxExtent           = data.readShort_();\n          this.caretSlopeRise       = data.readShort_();\n          this.caretSlopeRun        = data.readShort_();\n          this.caretOffset          = data.readShort_();\n\n          data.skip(4 * 2);       // reserved\n\n          this.metricDataFormat     = data.readShort_();\n          this.numOfLongHorMetrics  = data.readShort();\n      };\n\n      HheaTable.prototype.render = function render (ids) {\n          var out = BinaryStream();\n          out.writeLong(this.version);\n          out.writeShort_(this.ascent);\n          out.writeShort_(this.descent);\n          out.writeShort_(this.lineGap);\n          out.writeShort(this.advanceWidthMax);\n          out.writeShort_(this.minLeftSideBearing);\n          out.writeShort_(this.minRightSideBearing);\n          out.writeShort_(this.xMaxExtent);\n          out.writeShort_(this.caretSlopeRise);\n          out.writeShort_(this.caretSlopeRun);\n          out.writeShort_(this.caretOffset);\n\n          out.write([ 0, 0, 0, 0, 0, 0, 0, 0 ]); // reserved bytes\n\n          out.writeShort_(this.metricDataFormat);\n          out.writeShort(ids.length);\n          return out.get();\n      };\n\n      return HheaTable;\n  }(Table));\n\n  var MaxpTable = (function (Table) {\n      function MaxpTable () {\n          Table.apply(this, arguments);\n      }\n\n      if ( Table ) MaxpTable.__proto__ = Table;\n      MaxpTable.prototype = Object.create( Table && Table.prototype );\n      MaxpTable.prototype.constructor = MaxpTable;\n\n      MaxpTable.prototype.parse = function parse (data) {\n          data.offset(this.offset);\n          this.version = data.readLong();\n          this.numGlyphs = data.readShort();\n          this.maxPoints = data.readShort();\n          this.maxContours = data.readShort();\n          this.maxComponentPoints = data.readShort();\n          this.maxComponentContours = data.readShort();\n          this.maxZones = data.readShort();\n          this.maxTwilightPoints = data.readShort();\n          this.maxStorage = data.readShort();\n          this.maxFunctionDefs = data.readShort();\n          this.maxInstructionDefs = data.readShort();\n          this.maxStackElements = data.readShort();\n          this.maxSizeOfInstructions = data.readShort();\n          this.maxComponentElements = data.readShort();\n          this.maxComponentDepth = data.readShort();\n      };\n\n      MaxpTable.prototype.render = function render (glyphIds) {\n          var out = BinaryStream();\n          out.writeLong(this.version);\n          out.writeShort(glyphIds.length);\n          out.writeShort(this.maxPoints);\n          out.writeShort(this.maxContours);\n          out.writeShort(this.maxComponentPoints);\n          out.writeShort(this.maxComponentContours);\n          out.writeShort(this.maxZones);\n          out.writeShort(this.maxTwilightPoints);\n          out.writeShort(this.maxStorage);\n          out.writeShort(this.maxFunctionDefs);\n          out.writeShort(this.maxInstructionDefs);\n          out.writeShort(this.maxStackElements);\n          out.writeShort(this.maxSizeOfInstructions);\n          out.writeShort(this.maxComponentElements);\n          out.writeShort(this.maxComponentDepth);\n          return out.get();\n      };\n\n      return MaxpTable;\n  }(Table));\n\n  var HmtxTable = (function (Table) {\n      function HmtxTable () {\n          Table.apply(this, arguments);\n      }\n\n      if ( Table ) HmtxTable.__proto__ = Table;\n      HmtxTable.prototype = Object.create( Table && Table.prototype );\n      HmtxTable.prototype.constructor = HmtxTable;\n\n      HmtxTable.prototype.parse = function parse (data) {\n          data.offset(this.offset);\n          var dir = this.file, hhea = dir.hhea;\n          this.metrics = data.times(hhea.numOfLongHorMetrics, function(){\n              return {\n                  advance: data.readShort(),\n                  lsb: data.readShort_()\n              };\n          });\n          var lsbCount = dir.maxp.numGlyphs - dir.hhea.numOfLongHorMetrics;\n          this.leftSideBearings = data.times(lsbCount, data.readShort_);\n      };\n\n      HmtxTable.prototype.forGlyph = function forGlyph (id) {\n          var metrics = this.metrics;\n          var n = metrics.length;\n          if (id < n) {\n              return metrics[id];\n          }\n          return {\n              advance: metrics[n - 1].advance,\n              lsb: this.leftSideBearings[id - n]\n          };\n      };\n\n      HmtxTable.prototype.render = function render (glyphIds) {\n          var this$1$1 = this;\n\n          var out = BinaryStream();\n          for (var i = 0; i < glyphIds.length; ++i) {\n              var m = this$1$1.forGlyph(glyphIds[i]);\n              out.writeShort(m.advance);\n              out.writeShort_(m.lsb);\n          }\n          return out.get();\n      };\n\n      return HmtxTable;\n  }(Table));\n\n  var GlyfTable = (function(){\n      var SimpleGlyph = function SimpleGlyph(raw) {\n          this.raw = raw;\n      };\n\n      var prototypeAccessors = { compound: { configurable: true } };\n\n      prototypeAccessors.compound.get = function () {\n          return false;\n      };\n\n      SimpleGlyph.prototype.render = function render () {\n          return this.raw.get();\n      };\n\n      Object.defineProperties( SimpleGlyph.prototype, prototypeAccessors );\n\n      var ARG_1_AND_2_ARE_WORDS     = 0x0001;\n      var WE_HAVE_A_SCALE           = 0x0008;\n      var MORE_COMPONENTS           = 0x0020;\n      var WE_HAVE_AN_X_AND_Y_SCALE  = 0x0040;\n      var WE_HAVE_A_TWO_BY_TWO      = 0x0080;\n      //var WE_HAVE_INSTRUCTIONS      = 0x0100;\n\n      var CompoundGlyph = function CompoundGlyph(data) {\n          this.raw = data;\n          var ids = this.glyphIds = [];\n          var offsets = this.idOffsets = [];\n          while (true) {      // eslint-disable-line no-constant-condition\n              var flags = data.readShort();\n              offsets.push(data.offset());\n              ids.push(data.readShort());\n\n              if (!(flags & MORE_COMPONENTS)) {\n                  break;\n              }\n\n              data.skip(flags & ARG_1_AND_2_ARE_WORDS ? 4 : 2);\n\n              if (flags & WE_HAVE_A_TWO_BY_TWO) {\n                  data.skip(8);\n              } else if (flags & WE_HAVE_AN_X_AND_Y_SCALE) {\n                  data.skip(4);\n              } else if (flags & WE_HAVE_A_SCALE) {\n                  data.skip(2);\n              }\n          }\n      };\n\n      var prototypeAccessors$1 = { compound: { configurable: true } };\n\n      prototypeAccessors$1.compound.get = function () {\n          return true;\n      };\n\n      CompoundGlyph.prototype.render = function render (old2new) {\n              var this$1$1 = this;\n\n          var out = BinaryStream(this.raw.get());\n          for (var i = 0; i < this.glyphIds.length; ++i) {\n              var id = this$1$1.glyphIds[i];\n              out.offset(this$1$1.idOffsets[i]);\n              out.writeShort(old2new[id]);\n          }\n          return out.get();\n      };\n\n      Object.defineProperties( CompoundGlyph.prototype, prototypeAccessors$1 );\n\n      return (function (Table) {\n          function anonymous () {\n              Table.apply(this, arguments);\n          }\n\n          if ( Table ) anonymous.__proto__ = Table;\n          anonymous.prototype = Object.create( Table && Table.prototype );\n          anonymous.prototype.constructor = anonymous;\n\n          anonymous.prototype.parse = function parse () {\n              this.cache = {};\n          };\n\n          anonymous.prototype.glyphFor = function glyphFor (id) {\n              var cache = this.cache;\n              if (hasOwnProperty$2(cache, id)) {\n                  return cache[id];\n              }\n\n              var loca = this.file.loca;\n              var length = loca.lengthOf(id);\n\n              if (length === 0) {\n                  return (cache[id] = null);\n              }\n\n              var data = this.rawData;\n              var offset = this.offset + loca.offsetOf(id);\n              var raw = BinaryStream(data.slice(offset, length));\n\n              var numberOfContours = raw.readShort_();\n              var xMin = raw.readShort_();\n              var yMin = raw.readShort_();\n              var xMax = raw.readShort_();\n              var yMax = raw.readShort_();\n\n              var glyph = cache[id] = numberOfContours < 0 ? new CompoundGlyph(raw) : new SimpleGlyph(raw);\n\n              glyph.numberOfContours = numberOfContours;\n              glyph.xMin = xMin;\n              glyph.yMin = yMin;\n              glyph.xMax = xMax;\n              glyph.yMax = yMax;\n\n              return glyph;\n          };\n\n          anonymous.prototype.render = function render (glyphs, oldIds, old2new) {\n              var out = BinaryStream(), offsets = [];\n              for (var i = 0; i < oldIds.length; ++i) {\n                  var id = oldIds[i];\n                  var glyph = glyphs[id];\n                  if (out.offset() % 2) {\n                      out.writeByte(0);\n                  }\n                  offsets.push(out.offset());\n                  if (glyph) {\n                      out.write(glyph.render(old2new));\n                  }\n              }\n              if (out.offset() % 2) {\n                  out.writeByte(0);\n              }\n              offsets.push(out.offset());\n              return {\n                  table: out.get(),\n                  offsets: offsets\n              };\n          };\n\n          return anonymous;\n      }(Table));\n  }());\n\n  var NameTable = (function(){\n      var NameEntry = function NameEntry(text, entry) {\n          this.text = text;\n          this.length = text.length;\n          this.platformID = entry.platformID;\n          this.platformSpecificID = entry.platformSpecificID;\n          this.languageID = entry.languageID;\n          this.nameID = entry.nameID;\n      };\n\n      return (function (Table) {\n          function anonymous () {\n              Table.apply(this, arguments);\n          }\n\n          if ( Table ) anonymous.__proto__ = Table;\n          anonymous.prototype = Object.create( Table && Table.prototype );\n          anonymous.prototype.constructor = anonymous;\n\n          anonymous.prototype.parse = function parse (data) {\n              data.offset(this.offset);\n              data.readShort();   // format\n              var count = data.readShort();\n              var stringOffset = this.offset + data.readShort();\n              var nameRecords = data.times(count, function(){\n                  return {\n                      platformID         : data.readShort(),\n                      platformSpecificID : data.readShort(),\n                      languageID         : data.readShort(),\n                      nameID             : data.readShort(),\n                      length             : data.readShort(),\n                      offset             : data.readShort() + stringOffset\n                  };\n              });\n              var strings = this.strings = {};\n              for (var i = 0; i < nameRecords.length; ++i) {\n                  var rec = nameRecords[i];\n                  data.offset(rec.offset);\n                  var text = data.readString(rec.length);\n                  if (!strings[rec.nameID]) {\n                      strings[rec.nameID] = [];\n                  }\n                  strings[rec.nameID].push(new NameEntry(text, rec));\n              }\n              this.postscriptEntry = strings[6][0];\n              this.postscriptName = this.postscriptEntry.text.replace(/[^\\x20-\\x7F]/g, \"\");\n          };\n\n          anonymous.prototype.render = function render (psName) {\n              var this$1$1 = this;\n\n              var strings = this.strings;\n              var strCount = 0;\n              for (var i in strings) {\n                  if (hasOwnProperty$2(strings, i)) {\n                      strCount += strings[i].length;\n                  }\n              }\n              var out = BinaryStream();\n              var strTable = BinaryStream();\n\n              out.writeShort(0);  // format\n              out.writeShort(strCount);\n              out.writeShort(6 + 12 * strCount); // stringOffset\n\n              for (i in strings) {\n                  if (hasOwnProperty$2(strings, i)) {\n                      var list = i == 6 ? [\n                          new NameEntry(psName, this$1$1.postscriptEntry)\n                      ] : strings[i];\n                      for (var j = 0; j < list.length; ++j) {\n                          var str = list[j];\n                          out.writeShort(str.platformID);\n                          out.writeShort(str.platformSpecificID);\n                          out.writeShort(str.languageID);\n                          out.writeShort(str.nameID);\n                          out.writeShort(str.length);\n                          out.writeShort(strTable.offset());\n\n                          strTable.writeString(str.text);\n                      }\n                  }\n              }\n\n              out.write(strTable.get());\n\n              return out.get();\n          };\n\n          return anonymous;\n      }(Table));\n  })();\n\n  var PostTable = (function(){\n      var POSTSCRIPT_GLYPHS = \".notdef .null nonmarkingreturn space exclam quotedbl numbersign dollar percent ampersand quotesingle parenleft parenright asterisk plus comma hyphen period slash zero one two three four five six seven eight nine colon semicolon less equal greater question at A B C D E F G H I J K L M N O P Q R S T U V W X Y Z bracketleft backslash bracketright asciicircum underscore grave a b c d e f g h i j k l m n o p q r s t u v w x y z braceleft bar braceright asciitilde Adieresis Aring Ccedilla Eacute Ntilde Odieresis Udieresis aacute agrave acircumflex adieresis atilde aring ccedilla eacute egrave ecircumflex edieresis iacute igrave icircumflex idieresis ntilde oacute ograve ocircumflex odieresis otilde uacute ugrave ucircumflex udieresis dagger degree cent sterling section bullet paragraph germandbls registered copyright trademark acute dieresis notequal AE Oslash infinity plusminus lessequal greaterequal yen mu partialdiff summation product pi integral ordfeminine ordmasculine Omega ae oslash questiondown exclamdown logicalnot radical florin approxequal Delta guillemotleft guillemotright ellipsis nonbreakingspace Agrave Atilde Otilde OE oe endash emdash quotedblleft quotedblright quoteleft quoteright divide lozenge ydieresis Ydieresis fraction currency guilsinglleft guilsinglright fi fl daggerdbl periodcentered quotesinglbase quotedblbase perthousand Acircumflex Ecircumflex Aacute Edieresis Egrave Iacute Icircumflex Idieresis Igrave Oacute Ocircumflex apple Ograve Uacute Ucircumflex Ugrave dotlessi circumflex tilde macron breve dotaccent ring cedilla hungarumlaut ogonek caron Lslash lslash Scaron scaron Zcaron zcaron brokenbar Eth eth Yacute yacute Thorn thorn minus multiply onesuperior twosuperior threesuperior onehalf onequarter threequarters franc Gbreve gbreve Idotaccent Scedilla scedilla Cacute cacute Ccaron ccaron dcroat\".split(/\\s+/g);\n\n      return (function (Table) {\n          function anonymous () {\n              Table.apply(this, arguments);\n          }\n\n          if ( Table ) anonymous.__proto__ = Table;\n          anonymous.prototype = Object.create( Table && Table.prototype );\n          anonymous.prototype.constructor = anonymous;\n\n          anonymous.prototype.parse = function parse (data) {\n              var this$1$1 = this;\n\n              data.offset(this.offset);\n\n              this.format = data.readLong();\n              this.italicAngle = data.readFixed_();\n              this.underlinePosition = data.readShort_();\n              this.underlineThickness = data.readShort_();\n              this.isFixedPitch = data.readLong();\n              this.minMemType42 = data.readLong();\n              this.maxMemType42 = data.readLong();\n              this.minMemType1 = data.readLong();\n              this.maxMemType1 = data.readLong();\n\n              var numberOfGlyphs;\n\n              switch (this.format) {\n                case 0x00010000:\n                case 0x00030000:\n                  break;\n\n                case 0x00020000:\n                  numberOfGlyphs = data.readShort();\n                  this.glyphNameIndex = data.times(numberOfGlyphs, data.readShort);\n                  this.names = [];\n                  var limit = this.offset + this.length;\n                  while (data.offset() < limit) {\n                      this$1$1.names.push(data.readString(data.readByte()));\n                  }\n                  break;\n\n                case 0x00025000:\n                  numberOfGlyphs = data.readShort();\n                  this.offsets = data.read(numberOfGlyphs);\n                  break;\n\n                case 0x00040000:\n                  this.map = data.times(this.file.maxp.numGlyphs, data.readShort);\n                  break;\n              }\n          };\n\n          anonymous.prototype.glyphFor = function glyphFor (code) {\n              switch (this.format) {\n                case 0x00010000:\n                  return POSTSCRIPT_GLYPHS[code] || \".notdef\";\n\n                case 0x00020000:\n                  var index = this.glyphNameIndex[code];\n                  if (index < POSTSCRIPT_GLYPHS.length) {\n                      return POSTSCRIPT_GLYPHS[index];\n                  }\n                  return this.names[index - POSTSCRIPT_GLYPHS.length] || \".notdef\";\n\n                case 0x00025000:\n\n                case 0x00030000:\n                  return \".notdef\";\n\n                case 0x00040000:\n                  return this.map[code] || 0xFFFF;\n              }\n          };\n\n          anonymous.prototype.render = function render (mapping) {\n              var this$1$1 = this;\n\n              if (this.format == 0x00030000) {\n                  return this.raw();\n              }\n\n              // keep original header, but set format to 2.0\n              var out = BinaryStream(this.rawData.slice(this.offset, 32));\n              out.writeLong(0x00020000);\n              out.offset(32);\n\n              var indexes = [];\n              var strings = [];\n\n              for (var i = 0; i < mapping.length; ++i) {\n                  var id = mapping[i];\n                  var post = this$1$1.glyphFor(id);\n                  var index = POSTSCRIPT_GLYPHS.indexOf(post);\n                  if (index >= 0) {\n                      indexes.push(index);\n                  } else {\n                      indexes.push(POSTSCRIPT_GLYPHS.length + strings.length);\n                      strings.push(post);\n                  }\n              }\n\n              out.writeShort(mapping.length);\n\n              for (i = 0; i < indexes.length; ++i) {\n                  out.writeShort(indexes[i]);\n              }\n\n              for (i = 0; i < strings.length; ++i) {\n                  out.writeByte(strings[i].length);\n                  out.writeString(strings[i]);\n              }\n\n              return out.get();\n          };\n\n          return anonymous;\n      }(Table));\n  })();\n\n  var CmapTable = (function(){\n      var CmapEntry = function CmapEntry(data, offset, codeMap) {\n          var self = this;\n          self.platformID = data.readShort();\n          self.platformSpecificID = data.readShort();\n          self.offset = offset + data.readLong();\n\n          data.saveExcursion(function(){\n              var code;\n              data.offset(self.offset);\n              self.format = data.readShort();\n\n              switch (self.format) {\n              case 0:\n                  self.length = data.readShort();\n                  self.language = data.readShort();\n                  for (var i = 0; i < 256; ++i) {\n                      codeMap[i] = data.readByte();\n                  }\n                  break;\n\n              case 4:\n                  self.length = data.readShort();\n                  self.language = data.readShort();\n                  var segCount = data.readShort() / 2;\n\n                  data.skip(6);   // searchRange, entrySelector, rangeShift\n                  var endCode = data.times(segCount, data.readShort);\n                  data.skip(2);   // reserved pad\n                  var startCode = data.times(segCount, data.readShort);\n                  var idDelta = data.times(segCount, data.readShort_);\n                  var idRangeOffset = data.times(segCount, data.readShort);\n\n                  var count = (self.length + self.offset - data.offset()) / 2;\n                  var glyphIds = data.times(count, data.readShort);\n\n                  for (i = 0; i < segCount; ++i) {\n                      var start = startCode[i], end = endCode[i];\n                      for (code = start; code <= end; ++code) {\n                          var glyphId;\n                          if (idRangeOffset[i] === 0) {\n                              glyphId = code + idDelta[i];\n                          } else {\n                              ///\n                              // When non-zero, idRangeOffset contains for each segment the byte offset of the Glyph ID\n                              // into the glyphIds table, from the *current* `i` cell of idRangeOffset.  In other words,\n                              // this offset spans from the first into the second array.  This works, because the arrays\n                              // are consecutive in the TTF file:\n                              //\n                              // [ ...idRangeOffset... ][ ...glyphIds... ]\n                              //   ...... 48 ......   .... ID ....\n                              //          ^----- 48 bytes -----^\n                              //\n                              // (but I can't stop wondering why is it not just a plain index, possibly incremented by 1\n                              // so that we can have that special `zero` value.)\n                              //\n                              // The elements of idRangeOffset are even numbers, because both arrays contain 16-bit words,\n                              // yet the offset is in bytes.  That is why we divide it by 2.  Then we subtract the\n                              // remaining segments (segCount-i), and add the code-start offset, to which we need to add\n                              // the corresponding delta to get the actual glyph ID.\n                              ///\n                              var index = idRangeOffset[i] / 2 - (segCount - i) + (code - start);\n                              glyphId = glyphIds[index] || 0;\n                              if (glyphId !== 0) {\n                                  glyphId += idDelta[i];\n                              }\n                          }\n                          codeMap[code] = glyphId & 0xFFFF;\n                      }\n                  }\n                  break;\n\n              case 6:\n                  self.length = data.readShort();\n                  self.language = data.readShort();\n                  code = data.readShort();\n                  var length = data.readShort();\n                  while (length-- > 0) {\n                      codeMap[code++] = data.readShort();\n                  }\n                  break;\n\n              case 12:\n                  data.readShort(); // reserved\n                  self.length = data.readLong();\n                  self.language = data.readLong();\n                  var ngroups = data.readLong();\n                  while (ngroups-- > 0) {\n                      code = data.readLong();\n                      var endCharCode = data.readLong();\n                      var glyphCode = data.readLong();\n                      while (code <= endCharCode) {\n                          codeMap[code++] = glyphCode++;\n                      }\n                  }\n                  break;\n\n              default:\n                  if (window.console) {\n                      window.console.error(\"Unhandled CMAP format: \" + self.format);\n                  }\n              }\n          });\n      };\n\n      function renderCharmap(ncid2ogid, ogid2ngid) {\n          var codes = sortedKeys(ncid2ogid);\n          var startCodes = [];\n          var endCodes = [];\n          var last = null;\n          var diff = null;\n\n          function new_gid(charcode) {\n              return ogid2ngid[ncid2ogid[charcode]];\n          }\n\n          for (var i = 0; i < codes.length; ++i) {\n              var code = codes[i];\n              var gid = new_gid(code);\n              var delta = gid - code;\n              if (last == null || delta !== diff) {\n                  if (last) {\n                      endCodes.push(last);\n                  }\n                  startCodes.push(code);\n                  diff = delta;\n              }\n              last = code;\n          }\n\n          if (last) {\n              endCodes.push(last);\n          }\n          endCodes.push(0xFFFF);\n          startCodes.push(0xFFFF);\n\n          var segCount = startCodes.length;\n          var segCountX2 = segCount * 2;\n          var searchRange = 2 * Math.pow(2, Math.floor(Math.log(segCount) / Math.LN2));\n          var entrySelector = Math.log(searchRange / 2) / Math.LN2;\n          var rangeShift = segCountX2 - searchRange;\n\n          var deltas = [];\n          var rangeOffsets = [];\n          var glyphIds = [];\n\n          for (i = 0; i < segCount; ++i) {\n              var startCode = startCodes[i];\n              var endCode = endCodes[i];\n              if (startCode == 0xFFFF) {\n                  deltas.push(0);\n                  rangeOffsets.push(0);\n                  break;\n              }\n              var startGlyph = new_gid(startCode);\n              if (startCode - startGlyph >= 0x8000) {\n                  deltas.push(0);\n                  rangeOffsets.push(2 * (glyphIds.length + segCount - i));\n                  for (var j = startCode; j <= endCode; ++j) {\n                      glyphIds.push(new_gid(j));\n                  }\n              } else {\n                  deltas.push(startGlyph - startCode);\n                  rangeOffsets.push(0);\n              }\n          }\n\n          var out = BinaryStream();\n\n          out.writeShort(3);      // platformID\n          out.writeShort(1);      // platformSpecificID\n          out.writeLong(12);      // offset\n          out.writeShort(4);      // format\n          out.writeShort(16 + segCount * 8 + glyphIds.length * 2); // length\n          out.writeShort(0);      // language\n          out.writeShort(segCountX2);\n          out.writeShort(searchRange);\n          out.writeShort(entrySelector);\n          out.writeShort(rangeShift);\n\n          endCodes.forEach(out.writeShort);\n          out.writeShort(0);      // reserved pad\n          startCodes.forEach(out.writeShort);\n          deltas.forEach(out.writeShort_);\n          rangeOffsets.forEach(out.writeShort);\n          glyphIds.forEach(out.writeShort);\n\n          return out.get();\n      }\n\n      return (function (Table) {\n          function anonymous () {\n              Table.apply(this, arguments);\n          }\n\n          if ( Table ) anonymous.__proto__ = Table;\n          anonymous.prototype = Object.create( Table && Table.prototype );\n          anonymous.prototype.constructor = anonymous;\n\n          anonymous.prototype.parse = function parse (data) {\n              var self = this;\n              var offset = self.offset;\n              data.offset(offset);\n              self.codeMap = {};\n              self.version = data.readShort();\n              var tableCount = data.readShort();\n              self.tables = data.times(tableCount, function(){\n                  return new CmapEntry(data, offset, self.codeMap);\n              });\n          };\n\n          anonymous.render = function render (ncid2ogid, ogid2ngid) {\n              var out = BinaryStream();\n              out.writeShort(0);  // version\n              out.writeShort(1);  // tableCount\n              out.write(renderCharmap(ncid2ogid, ogid2ngid));\n              return out.get();\n          };\n\n          return anonymous;\n      }(Table));\n\n  })();\n\n  var OS2Table = (function (Table) {\n      function OS2Table () {\n          Table.apply(this, arguments);\n      }\n\n      if ( Table ) OS2Table.__proto__ = Table;\n      OS2Table.prototype = Object.create( Table && Table.prototype );\n      OS2Table.prototype.constructor = OS2Table;\n\n      OS2Table.prototype.parse = function parse (data) {\n          data.offset(this.offset);\n          this.version = data.readShort();\n          this.averageCharWidth = data.readShort_();\n          this.weightClass = data.readShort();\n          this.widthClass = data.readShort();\n          this.type = data.readShort();\n          this.ySubscriptXSize = data.readShort_();\n          this.ySubscriptYSize = data.readShort_();\n          this.ySubscriptXOffset = data.readShort_();\n          this.ySubscriptYOffset = data.readShort_();\n          this.ySuperscriptXSize = data.readShort_();\n          this.ySuperscriptYSize = data.readShort_();\n          this.ySuperscriptXOffset = data.readShort_();\n          this.ySuperscriptYOffset = data.readShort_();\n          this.yStrikeoutSize = data.readShort_();\n          this.yStrikeoutPosition = data.readShort_();\n          this.familyClass = data.readShort_();\n\n          this.panose = data.times(10, data.readByte);\n          this.charRange = data.times(4, data.readLong);\n\n          this.vendorID = data.readString(4);\n          this.selection = data.readShort();\n          this.firstCharIndex = data.readShort();\n          this.lastCharIndex = data.readShort();\n\n          if (this.version > 0) {\n              this.ascent = data.readShort_();\n              this.descent = data.readShort_();\n              this.lineGap = data.readShort_();\n              this.winAscent = data.readShort();\n              this.winDescent = data.readShort();\n              this.codePageRange = data.times(2, data.readLong);\n\n              if (this.version > 1) {\n                  this.xHeight = data.readShort();\n                  this.capHeight = data.readShort();\n                  this.defaultChar = data.readShort();\n                  this.breakChar = data.readShort();\n                  this.maxContext = data.readShort();\n              }\n          }\n      };\n\n      OS2Table.prototype.render = function render () {\n          return this.raw();\n      };\n\n      return OS2Table;\n  }(Table));\n\n  var subsetTag = 100000;\n\n  function nextSubsetTag() {\n      var ret = \"\", n = String(subsetTag);\n      for (var i = 0; i < n.length; ++i) {\n          ret += String.fromCharCode(n.charCodeAt(i) - 48 + 65);\n      }\n      ++subsetTag;\n      return ret;\n  }\n\n  var Subfont = function Subfont(font) {\n      this.font = font;\n      this.subset = {};\n      this.unicodes = {};\n      this.ogid2ngid = { 0: 0 };\n      this.ngid2ogid = { 0: 0 };\n      this.ncid2ogid = {};\n      this.next = this.firstChar = 1;\n      this.nextGid = 1;\n      this.psName = nextSubsetTag() + \"+\" + this.font.psName;\n  };\n\n  Subfont.prototype.use = function use (ch) {\n      var self = this;\n      if (typeof ch == \"string\") {\n          return ucs2decode(ch).reduce(function(ret, code){\n              return ret + String.fromCharCode(self.use(code));\n          }, \"\");\n      }\n      var code = self.unicodes[ch];\n      if (!code) {\n          code = self.next++;\n          self.subset[code] = ch;\n          self.unicodes[ch] = code;\n\n          // generate new GID (glyph ID) and maintain newGID ->\n          // oldGID and back mappings\n          var old_gid = self.font.cmap.codeMap[ch];\n          if (old_gid) {\n              self.ncid2ogid[code] = old_gid;\n              if (self.ogid2ngid[old_gid] == null) {\n                  var new_gid = self.nextGid++;\n                  self.ogid2ngid[old_gid] = new_gid;\n                  self.ngid2ogid[new_gid] = old_gid;\n              }\n          }\n      }\n      return code;\n  };\n\n  Subfont.prototype.encodeText = function encodeText (text) {\n      return this.use(text);\n  };\n\n  Subfont.prototype.glyphIds = function glyphIds () {\n      return sortedKeys(this.ogid2ngid);\n  };\n\n  Subfont.prototype.glyphsFor = function glyphsFor (glyphIds, result) {\n          var this$1$1 = this;\n\n      if (!result) {\n          result = {};\n      }\n      for (var i = 0; i < glyphIds.length; ++i) {\n          var id = glyphIds[i];\n          if (!result[id]) {\n              var glyph = result[id] = this$1$1.font.glyf.glyphFor(id);\n              if (glyph && glyph.compound) {\n                  this$1$1.glyphsFor(glyph.glyphIds, result);\n              }\n          }\n      }\n      return result;\n  };\n\n  Subfont.prototype.render = function render () {\n          var this$1$1 = this;\n\n      var glyphs = this.glyphsFor(this.glyphIds());\n\n      // add missing sub-glyphs\n      for (var old_gid in glyphs) {\n          if (hasOwnProperty$2(glyphs, old_gid)) {\n              old_gid = parseInt(old_gid, 10);\n              if (this$1$1.ogid2ngid[old_gid] == null) {\n                  var new_gid = this$1$1.nextGid++;\n                  this$1$1.ogid2ngid[old_gid] = new_gid;\n                  this$1$1.ngid2ogid[new_gid] = old_gid;\n              }\n          }\n      }\n\n      // must obtain old_gid_ids in an order matching sorted\n      // new_gid_ids\n      var new_gid_ids = sortedKeys(this.ngid2ogid);\n      var old_gid_ids = new_gid_ids.map(function(id){\n          return this.ngid2ogid[id];\n      }, this);\n\n      var font = this.font;\n      var glyf = font.glyf.render(glyphs, old_gid_ids, this.ogid2ngid);\n      var loca = font.loca.render(glyf.offsets);\n\n      this.lastChar = this.next - 1;\n\n      var tables = {\n          \"cmap\" : CmapTable.render(this.ncid2ogid, this.ogid2ngid),\n          \"glyf\" : glyf.table,\n          \"loca\" : loca.table,\n          \"hmtx\" : font.hmtx.render(old_gid_ids),\n          \"hhea\" : font.hhea.render(old_gid_ids),\n          \"maxp\" : font.maxp.render(old_gid_ids),\n          \"post\" : font.post.render(old_gid_ids),\n          \"name\" : font.name.render(this.psName),\n          \"head\" : font.head.render(loca.format),\n          \"OS/2\" : font.os2.render()\n      };\n\n      return this.font.directory.render(tables);\n  };\n\n  Subfont.prototype.cidToGidMap = function cidToGidMap () {\n          var this$1$1 = this;\n\n      var out = BinaryStream(), len = 0;\n      for (var cid = this.firstChar; cid < this.next; ++cid) {\n          while (len < cid) {\n              out.writeShort(0);\n              len++;\n          }\n          var old_gid = this$1$1.ncid2ogid[cid];\n          if (old_gid) {\n              var new_gid = this$1$1.ogid2ngid[old_gid];\n              out.writeShort(new_gid);\n          } else {\n              out.writeShort(0);\n          }\n          len++;\n      }\n      return out.get();\n  };\n\n  var TTFFont = function TTFFont(rawData, name) {\n      var self = this;\n      var data = self.contents = BinaryStream(rawData);\n      if (data.readString(4) == \"ttcf\") {\n          var offset;\n          var parse = function() {\n              data.offset(offset);\n              self.parse();\n          };\n          if (!name) {\n              throw new Error(\"Must specify a name for TTC files\");\n          }\n          data.readLong();    // version\n          var numFonts = data.readLong();\n          for (var i = 0; i < numFonts; ++i) {\n              offset = data.readLong();\n              data.saveExcursion(parse);\n              if (self.psName == name) {\n                  return;\n              }\n          }\n          throw new Error(\"Font \" + name + \" not found in collection\");\n      } else {\n          data.offset(0);\n          self.parse();\n      }\n  };\n\n  TTFFont.prototype.parse = function parse () {\n      var dir = this.directory = new Directory(this.contents);\n\n      this.head = dir.readTable(\"head\", HeadTable);\n      this.loca = dir.readTable(\"loca\", LocaTable);\n      this.hhea = dir.readTable(\"hhea\", HheaTable);\n      this.maxp = dir.readTable(\"maxp\", MaxpTable);\n      this.hmtx = dir.readTable(\"hmtx\", HmtxTable);\n      this.glyf = dir.readTable(\"glyf\", GlyfTable);\n      this.name = dir.readTable(\"name\", NameTable);\n      this.post = dir.readTable(\"post\", PostTable);\n      this.cmap = dir.readTable(\"cmap\", CmapTable);\n      this.os2  = dir.readTable(\"OS/2\", OS2Table);\n\n      this.psName = this.name.postscriptName;\n      this.ascent = this.os2.ascent || this.hhea.ascent;\n      this.descent = this.os2.descent || this.hhea.descent;\n      this.lineGap = this.os2.lineGap || this.hhea.lineGap;\n      this.scale = 1000 / this.head.unitsPerEm;\n  };\n\n  TTFFont.prototype.widthOfGlyph = function widthOfGlyph (glyph) {\n      return this.hmtx.forGlyph(glyph).advance * this.scale;\n  };\n\n  TTFFont.prototype.makeSubset = function makeSubset () {\n      return new Subfont(this);\n  };\n\n  var deflate = kendo_pakoEsm_cmn_chunk_js.d;\n\n  function supportsDeflate() {\n      return true;\n  }\n\n  /* eslint-disable no-multi-spaces, key-spacing, indent, camelcase, space-before-blocks, eqeqeq, brace-style */\n  /* eslint-disable space-infix-ops, space-before-function-paren, array-bracket-spacing, object-curly-spacing */\n  /* eslint-disable no-nested-ternary, max-params, default-case, no-else-return, no-empty */\n  /* eslint-disable no-param-reassign, no-var, block-scoped-var */\n\n\n  var browser$1 = support$1.browser;\n  var NL = \"\\n\";\n\n  var RESOURCE_COUNTER = 0;\n\n  var PAPER_SIZE = {\n      a0        : [ 2383.94 , 3370.39 ],\n      a1        : [ 1683.78 , 2383.94 ],\n      a2        : [ 1190.55 , 1683.78 ],\n      a3        : [ 841.89  , 1190.55 ],\n      a4        : [ 595.28  , 841.89  ],\n      a5        : [ 419.53  , 595.28  ],\n      a6        : [ 297.64  , 419.53  ],\n      a7        : [ 209.76  , 297.64  ],\n      a8        : [ 147.40  , 209.76  ],\n      a9        : [ 104.88  , 147.40  ],\n      a10       : [ 73.70   , 104.88  ],\n      b0        : [ 2834.65 , 4008.19 ],\n      b1        : [ 2004.09 , 2834.65 ],\n      b2        : [ 1417.32 , 2004.09 ],\n      b3        : [ 1000.63 , 1417.32 ],\n      b4        : [ 708.66  , 1000.63 ],\n      b5        : [ 498.90  , 708.66  ],\n      b6        : [ 354.33  , 498.90  ],\n      b7        : [ 249.45  , 354.33  ],\n      b8        : [ 175.75  , 249.45  ],\n      b9        : [ 124.72  , 175.75  ],\n      b10       : [ 87.87   , 124.72  ],\n      c0        : [ 2599.37 , 3676.54 ],\n      c1        : [ 1836.85 , 2599.37 ],\n      c2        : [ 1298.27 , 1836.85 ],\n      c3        : [ 918.43  , 1298.27 ],\n      c4        : [ 649.13  , 918.43  ],\n      c5        : [ 459.21  , 649.13  ],\n      c6        : [ 323.15  , 459.21  ],\n      c7        : [ 229.61  , 323.15  ],\n      c8        : [ 161.57  , 229.61  ],\n      c9        : [ 113.39  , 161.57  ],\n      c10       : [ 79.37   , 113.39  ],\n      executive : [ 521.86  , 756.00  ],\n      folio     : [ 612.00  , 936.00  ],\n      legal     : [ 612.00  , 1008.00 ],\n      letter    : [ 612.00  , 792.00  ],\n      tabloid   : [ 792.00  , 1224.00 ]\n  };\n\n  function makeOutput() {\n      var indentLevel = 0, output = BinaryStream();\n      function out() {\n          var arguments$1 = arguments;\n\n          for (var i = 0; i < arguments.length; ++i) {\n              var x = arguments$1[i];\n              if (x === undefined) {\n                  throw new Error(\"Cannot output undefined to PDF\");\n              }\n              else if (x instanceof PDFValue) {\n                  x.beforeRender(out);\n                  x.render(out);\n              }\n              else if (isArray(x)) {\n                  renderArray(x, out);\n              }\n              else if (isDate(x)) {\n                  renderDate(x, out);\n              }\n              else if (typeof x == \"number\") {\n                  if (isNaN(x)) {\n                      throw new Error(\"Cannot output NaN to PDF\");\n                  }\n                  // make sure it doesn't end up in exponent notation\n                  var num = x.toFixed(7);\n                  if (num.indexOf(\".\") >= 0) {\n                      num = num.replace(/\\.?0+$/, \"\");\n                  }\n                  if (num == \"-0\") {\n                      num = \"0\";\n                  }\n                  output.writeString(num);\n              }\n              else if (/string|boolean/.test(typeof x)) {\n                  output.writeString(String(x));\n              }\n              else if (typeof x.get == \"function\") {\n                  output.write(x.get());\n              }\n              else if (typeof x == \"object\") {\n                  if (!x) {\n                      output.writeString(\"null\");\n                  } else {\n                      out(new PDFDictionary(x));\n                  }\n              }\n          }\n      }\n      out.writeData = function(data) {\n          output.write(data);\n      };\n      out.withIndent = function(f) {\n          ++indentLevel;\n          f(out);\n          --indentLevel;\n      };\n      out.indent = function() {\n          out(NL, pad(\"\", indentLevel * 2, \"  \"));\n          out.apply(null, arguments);\n      };\n      out.offset = function() {\n          return output.offset();\n      };\n      out.toString = function() {\n          throw new Error(\"FIX CALLER\");\n      };\n      out.get = function() {\n          return output.get();\n      };\n      out.stream = function() {\n          return output;\n      };\n      return out;\n  }\n\n  function wrapObject(value, id) {\n      var beforeRender = value.beforeRender;\n      var renderValue = value.render;\n\n      value.beforeRender = function(){};\n\n      value.render = function(out) {\n          out(id, \" 0 R\");\n      };\n\n      value.renderFull = function(out) {\n          value._offset = out.offset();\n          out(id, \" 0 obj \");\n          beforeRender.call(value, out);\n          renderValue.call(value, out);\n          out(\" endobj\");\n      };\n  }\n\n  function getPaperOptions(getOption) {\n      if (typeof getOption != \"function\") {\n          var options = getOption;\n          getOption = function(key, def) {\n              return key in options ? options[key] : def;\n          };\n      }\n      var paperSize = getOption(\"paperSize\", PAPER_SIZE.a4);\n      if (!paperSize) {\n          return {};\n      }\n      if (typeof paperSize == \"string\") {\n          paperSize = PAPER_SIZE[paperSize.toLowerCase()];\n          if (paperSize == null) {\n              throw new Error(\"Unknown paper size\");\n          }\n      }\n\n      paperSize[0] = unitsToPoints(paperSize[0]);\n      paperSize[1] = unitsToPoints(paperSize[1]);\n\n      if (getOption(\"landscape\", false)) {\n          paperSize = [\n              Math.max(paperSize[0], paperSize[1]),\n              Math.min(paperSize[0], paperSize[1])\n          ];\n      }\n\n      var margin = getOption(\"margin\");\n      if (margin) {\n          if (typeof margin == \"string\" || typeof margin == \"number\") {\n              margin = unitsToPoints(margin, 0);\n              margin = { left: margin, top: margin, right: margin, bottom: margin };\n          } else {\n              margin = {\n                  left   : unitsToPoints(margin.left, 0),\n                  top    : unitsToPoints(margin.top, 0),\n                  right  : unitsToPoints(margin.right, 0),\n                  bottom : unitsToPoints(margin.bottom, 0)\n              };\n          }\n          if (getOption(\"addMargin\")) {\n              paperSize[0] += margin.left + margin.right;\n              paperSize[1] += margin.top + margin.bottom;\n          }\n      }\n      return { paperSize: paperSize, margin: margin };\n  }\n\n  var FONT_CACHE = {\n      \"Times-Roman\"           : true,\n      \"Times-Bold\"            : true,\n      \"Times-Italic\"          : true,\n      \"Times-BoldItalic\"      : true,\n      \"Helvetica\"             : true,\n      \"Helvetica-Bold\"        : true,\n      \"Helvetica-Oblique\"     : true,\n      \"Helvetica-BoldOblique\" : true,\n      \"Courier\"               : true,\n      \"Courier-Bold\"          : true,\n      \"Courier-Oblique\"       : true,\n      \"Courier-BoldOblique\"   : true,\n      \"Symbol\"                : true,\n      \"ZapfDingbats\"          : true\n  };\n\n  function loadBinary(url, cont) {\n      // IE throws Accesss denied error for Data URIs\n      var m;\n      if (browser$1.msie && (m = /^data:.*?;base64,/i.exec(url))) {\n          cont(base64ToUint8Array(url.substr(m[0].length)));\n          return;\n      }\n\n      function error() {\n          if (window.console) {\n              if (window.console.error) {\n                  window.console.error(\"Cannot load URL: %s\", url);\n              } else {\n                  window.console.log(\"Cannot load URL: %s\", url);\n              }\n          }\n          cont(null);\n      }\n      var req = new XMLHttpRequest();\n      req.open('GET', url, true);\n      if (HAS_TYPED_ARRAYS) {\n          req.responseType = \"arraybuffer\";\n      }\n      req.onload = function() {\n          if (req.status == 200 || req.status == 304) {\n              if (HAS_TYPED_ARRAYS) {\n                  cont(new Uint8Array(req.response));\n              } else {\n                  cont(new window.VBArray(req.responseBody).toArray()); // IE9 only\n              }\n          } else {\n              error();\n          }\n      };\n      req.onerror = error;\n      req.send(null);\n  }\n\n  function loadFont(url, cont) {\n      var font = FONT_CACHE[url];\n      if (font) {\n          cont(font);\n      } else {\n          loadBinary(url, function(data){\n              if (data == null) {\n                  throw new Error(\"Cannot load font from \" + url);\n              } else {\n                  var font = new TTFFont(data);\n                  FONT_CACHE[url] = font;\n                  cont(font);\n              }\n          });\n      }\n  }\n\n  var IMAGE_CACHE$1 = {};\n\n  function clearImageCache() {\n      IMAGE_CACHE$1 = {};\n  }\n\n  function loadImage(url, size, cont, options) {\n      var img = IMAGE_CACHE$1[url], bloburl, blob;\n      if (img) {\n          cont(img);\n      } else {\n          img = new Image();\n          if (!(/^data:/i.test(url))) {\n              img.crossOrigin = \"Anonymous\";\n          }\n          if (HAS_TYPED_ARRAYS && !(/^data:/i.test(url))) {\n              // IE10 fails to load images from another domain even when the server sends the\n              // proper CORS headers.  a XHR, however, will be able to load the data.\n              // http://stackoverflow.com/a/19734516/154985\n              //\n              // On the other hand, it's worth doing it this way for all browsers which support\n              // responseType = \"blob\" (HAS_TYPED_ARRAYS will be true), because we can inspect the\n              // mime type and if it's a JPEG (very common case) we can save a lot of time in\n              // _load below.\n              var xhr = new XMLHttpRequest();\n              xhr.onload = function() {\n                  blob = xhr.response;\n                  if (browser$1.mozilla && blob.type == \"image/svg+xml\") {\n                      // Firefox won't render SVGs that don't contain width and height attributes.\n                      var reader = new FileReader();\n                      reader.onload = function() {\n                          var doc = new window.DOMParser().parseFromString(this.result, \"image/svg+xml\");\n                          var svg = doc.documentElement;\n                          if (svg.getAttribute(\"width\") && svg.getAttribute(\"height\")) {\n                              // we're good, continue with the existing blob.\n                              bloburl = URL.createObjectURL(blob);\n                              _load(bloburl);\n                          } else {\n                              svg.setAttribute(\"width\", size.width);\n                              svg.setAttribute(\"height\", size.height);\n                              var xml = new window.XMLSerializer().serializeToString(svg);\n                              var dataURL = \"data:image/svg+xml;base64,\" + (encodeBase64(xml));\n                              _load(dataURL);\n                          }\n                      };\n                      reader.readAsText(blob);\n                  } else {\n                      bloburl = URL.createObjectURL(blob);\n                      _load(bloburl);\n                  }\n              };\n              xhr.onerror = _onerror;\n              xhr.open(\"GET\", url, true);\n              xhr.responseType = \"blob\";\n              xhr.send();\n          } else {\n              _load(url);\n          }\n      }\n\n      function _load(url) {\n          img.src = url;\n          if (img.complete && !browser$1.msie) {\n              // IE, bless its little heart, says img.complete == true even though the image is\n              // not loaded (width=0), therefore we must go the onload route (ticket 929635).\n              _onload.call(img);\n          } else {\n              img.onload = _onload;\n              img.onerror = _onerror;\n          }\n      }\n\n      function _trycanvas() {\n          if (!size) {\n              size = { width: img.width, height: img.height };\n          }\n\n          var canvas = document.createElement(\"canvas\");\n          canvas.width = size.width;\n          canvas.height = size.height;\n\n          var ctx = canvas.getContext(\"2d\");\n          ctx.drawImage(img, 0, 0, size.width, size.height);\n\n          var imgdata;\n          try {\n              imgdata = ctx.getImageData(0, 0, size.width, size.height);\n          } catch (ex) {\n              // it tainted the canvas -- can't draw it.\n              _onerror();\n              return;\n          } finally {\n              if (bloburl) {\n                  URL.revokeObjectURL(bloburl);\n              }\n          }\n\n          // in case it contains transparency, we must separate rgb data from the alpha\n          // channel and create a PDFRawImage image with opacity.  otherwise we can use a\n          // PDFJpegImage.\n          //\n          // to do this in one step, we create the rgb and alpha streams anyway, even if\n          // we might end up not using them if hasAlpha remains false.\n\n          var hasAlpha = false, rgb = BinaryStream(), alpha = BinaryStream();\n          var rawbytes = imgdata.data;\n          var i = 0;\n          while (i < rawbytes.length) {\n              rgb.writeByte(rawbytes[i++]);\n              rgb.writeByte(rawbytes[i++]);\n              rgb.writeByte(rawbytes[i++]);\n              var a = rawbytes[i++];\n              if (a < 255) {\n                  hasAlpha = true;\n              }\n              alpha.writeByte(a);\n          }\n\n          if (hasAlpha || options.keepPNG) {\n              img = new PDFRawImage(size.width, size.height, rgb, alpha);\n          } else {\n              // no transparency, encode as JPEG.\n              var data = canvas.toDataURL(\"image/jpeg\", options.jpegQuality);\n              data = data.substr(data.indexOf(\";base64,\") + 8);\n\n              var stream = BinaryStream();\n              stream.writeBase64(data);\n              img = new PDFJpegImage(stream);\n          }\n\n          cont(IMAGE_CACHE$1[url] = img);\n      }\n\n      function _onerror() {\n          cont(IMAGE_CACHE$1[url] = \"ERROR\");\n      }\n\n      function _onload() {\n          if (size) {\n              var svg = (blob && blob.type === 'image/svg+xml') || (\n                /^data:image\\/svg\\+xml;/i.test(this.src.substring(0, 19))\n              );\n\n              var upscale = size.width >= img.width || size.height >= img.height;\n\n              // Use the original image if requested size is bigger than the source,\n              // unless it's an SVG that can be upscaled.\n              if (!svg && upscale) {\n                  size = null;\n              }\n          }\n          if (!size && blob && /^image\\/jpe?g$/i.test(blob.type)) {\n              // If we know we got a JPEG, we can skip the process of rendering it to a\n              // canvas, getting the pixel data, searching for transparency we know we won't\n              // find, getting back a data URI and then decoding the BASE64 to finally get the\n              // binary we already have.  Also, we avoid downgrading the image quality, with\n              // the possible drawback of making a bigger PDF; still, seems legit.\n              //\n              // Besides saving a lot of work, this also reuses the buffer memory\n              // (BinaryStream does not create a copy), potentially saving some GC cycles.\n              var reader = new FileReader();\n              reader.onload = function() {\n                  try {\n                      var img = new PDFJpegImage(BinaryStream(new Uint8Array(this.result)));\n                      URL.revokeObjectURL(bloburl);\n                      cont(IMAGE_CACHE$1[url] = img);\n                  } catch (ex) {\n                      // if there's an error parsing the JPEG stream, it could be due to a\n                      // misconfigured server (improper content-type:\n                      // https://github.com/telerik/kendo-ui-core/issues/4184).  If that's the case,\n                      // the canvas will still be able to draw it.\n                      _trycanvas();\n                  }\n              };\n              reader.readAsArrayBuffer(blob);\n          } else {\n              _trycanvas();\n          }\n      }\n  }\n\n  function manyLoader(loadOne) {\n      return function(urls, callback) {\n          var n = urls.length, i = n;\n          if (n === 0) {\n              return callback();\n          }\n          function next() {\n              if (--n === 0) {\n                  callback();\n              }\n          }\n          while (i-- > 0) {\n              loadOne(urls[i], next);\n          }\n      };\n  }\n\n  var loadFonts = manyLoader(loadFont);\n  var loadImages = function(images, callback, options) {\n      options = Object.assign({\n          jpegQuality : 0.92,\n          keepPNG     : false\n      }, options);\n      var urls = Object.keys(images), n = urls.length;\n      if (n === 0) {\n          return callback();\n      }\n      function next() {\n          if (--n === 0) {\n              callback();\n          }\n      }\n      urls.forEach(function(url){\n          loadImage(url, images[url], next, options);\n      });\n  };\n\n  var PDFDocument = function PDFDocument (options) {\n      var self = this;\n      var out = makeOutput();\n      var objcount = 0;\n      var objects = [];\n\n      function getOption(name, defval) {\n          return (options && options[name] != null) ? options[name] : defval;\n      }\n\n      self.getOption = getOption;\n\n      self.attach = function(value) {\n          if (objects.indexOf(value) < 0) {\n              wrapObject(value, ++objcount);\n              objects.push(value);\n          }\n          return value;\n      };\n\n      self.pages = [];\n\n      self.FONTS = {};\n      self.IMAGES = {};\n      self.GRAD_COL_FUNCTIONS = {}; // cache for color gradient functions\n      self.GRAD_OPC_FUNCTIONS = {}; // cache for opacity gradient functions\n      self.GRAD_COL = {}; // cache for whole color gradient objects\n      self.GRAD_OPC = {}; // cache for whole opacity gradient objects\n\n      var catalog = self.attach(new PDFCatalog());\n      var pageTree = self.attach(new PDFPageTree());\n\n      if (getOption(\"autoPrint\")) {\n          var nameTree = {};\n          nameTree.JavaScript = new PDFDictionary({ Names: [\n              new PDFString(\"JS\"), self.attach(new PDFDictionary({\n                  S: _(\"JavaScript\"),\n                  JS: new PDFString(\"print(true);\")\n              }))\n          ] });\n          catalog.props.Names = new PDFDictionary(nameTree);\n      }\n\n      catalog.setPages(pageTree);\n\n      var info = self.attach(new PDFDictionary({\n          Producer : new PDFString(getOption(\"producer\", \"Kendo UI PDF Generator\"), true), // XXX: kendo.version?\n          Title    : new PDFString(getOption(\"title\", \"\"), true),\n          Author   : new PDFString(getOption(\"author\", \"\"), true),\n          Subject  : new PDFString(getOption(\"subject\", \"\"), true),\n          Keywords : new PDFString(getOption(\"keywords\", \"\"), true),\n          Creator  : new PDFString(getOption(\"creator\", \"Kendo UI PDF Generator\"), true),\n          CreationDate : getOption(\"date\", new Date())\n      }));\n\n      self.addPage = function(options) {\n          var paperOptions  = getPaperOptions(function(name, defval){\n              return (options && options[name] != null) ? options[name] : defval;\n          });\n          var paperSize = paperOptions.paperSize;\n          var margin    = paperOptions.margin;\n          var contentWidth  = paperSize[0];\n          var contentHeight = paperSize[1];\n          if (margin) {\n              contentWidth -= margin.left + margin.right;\n              contentHeight -= margin.top + margin.bottom;\n          }\n          var content = new PDFStream(makeOutput(), null, true);\n          var props = {\n              Contents : self.attach(content),\n              Parent   : pageTree,\n              MediaBox : [ 0, 0, paperSize[0], paperSize[1] ]\n          };\n          var page = new PDFPage(self, props);\n          page._content = content;\n          pageTree.addPage(self.attach(page));\n\n          // canvas-like coord. system.  (0,0) is upper-left.\n          // text must be vertically mirorred before drawing.\n          page.transform(1, 0, 0, -1, 0, paperSize[1]);\n\n          if (margin) {\n              page.translate(margin.left, margin.top);\n              // XXX: clip to right/bottom margin.  Make this optional?\n              page.rect(0, 0, contentWidth, contentHeight);\n              page.clip();\n          }\n\n          self.pages.push(page);\n          return page;\n      };\n\n      self.render = function() {\n          var i;\n          /// file header\n          out(\"%PDF-1.4\", NL, \"%\\xc2\\xc1\\xda\\xcf\\xce\", NL, NL);\n\n          /// file body\n          for (i = 0; i < objects.length; ++i) {\n              objects[i].renderFull(out);\n              out(NL, NL);\n          }\n\n          /// cross-reference table\n          var xrefOffset = out.offset();\n          out(\"xref\", NL, 0, \" \", objects.length + 1, NL);\n          out(\"0000000000 65535 f \", NL);\n          for (i = 0; i < objects.length; ++i) {\n              out(zeropad(objects[i]._offset, 10), \" 00000 n \", NL);\n          }\n          out(NL);\n\n          /// trailer\n          out(\"trailer\", NL);\n          out(new PDFDictionary({\n              Size: objects.length + 1,\n              Root: catalog,\n              Info: info\n          }), NL, NL);\n\n          /// end\n          out(\"startxref\", NL, xrefOffset, NL);\n          out(\"%%EOF\", NL);\n\n          return out.stream().offset(0);\n      };\n\n      self.loadFonts = loadFonts;\n      self.loadImages = loadImages;\n  };\n\n  PDFDocument.prototype.getFont = function getFont (url) {\n      var font = this.FONTS[url];\n      if (!font) {\n          font = FONT_CACHE[url];\n          if (!font) {\n              throw new Error(\"Font \" + url + \" has not been loaded\");\n          }\n          if (font === true) {\n              font = this.attach(new PDFStandardFont(url));\n          } else {\n              font = this.attach(new PDFFont(this, font));\n          }\n          this.FONTS[url] = font;\n      }\n      return font;\n  };\n\n  PDFDocument.prototype.getImage = function getImage (url) {\n      var img = this.IMAGES[url];\n      if (!img) {\n          img = IMAGE_CACHE$1[url];\n          if (!img) {\n              throw new Error(\"Image \" + url + \" has not been loaded\");\n          }\n          if (img === \"ERROR\") {\n              return null;\n          }\n          img = this.IMAGES[url] = this.attach(img.asStream(this));\n      }\n      return img;\n  };\n\n  PDFDocument.prototype.getOpacityGS = function getOpacityGS (opacity, forStroke) {\n      var id = parseFloat(opacity).toFixed(3);\n      opacity = parseFloat(id);\n      id += forStroke ? \"S\" : \"F\";\n      var cache = this._opacityGSCache || (this._opacityGSCache = {});\n      var gs = cache[id];\n      if (!gs) {\n          var props = {\n              Type: _(\"ExtGState\")\n          };\n          if (forStroke) {\n              props.CA = opacity;\n          } else {\n              props.ca = opacity;\n          }\n          gs = this.attach(new PDFDictionary(props));\n          gs._resourceName = _(\"GS\" + (++RESOURCE_COUNTER));\n          cache[id] = gs;\n      }\n      return gs;\n  };\n\n  PDFDocument.prototype.dict = function dict (props) {\n      return new PDFDictionary(props);\n  };\n\n  PDFDocument.prototype.name = function name (str) {\n      return _(str);\n  };\n\n  PDFDocument.prototype.stream = function stream (props, content) {\n      return new PDFStream(content, props);\n  };\n\n  /* -----[ utils ]----- */\n\n  function pad(str, len, ch) {\n      while (str.length < len) {\n          str = ch + str;\n      }\n      return str;\n  }\n\n  function zeropad(n, len) {\n      return pad(String(n), len, \"0\");\n  }\n\n  function hasOwnProperty$1(obj, key) {\n      return Object.prototype.hasOwnProperty.call(obj, key);\n  }\n\n  var isArray = Array.isArray || function(obj) {\n      return obj instanceof Array;\n  };\n\n  function isDate(obj) {\n      return obj instanceof Date;\n  }\n\n  function renderArray(a, out) {\n      out(\"[\");\n      if (a.length > 0) {\n          out.withIndent(function(){\n              for (var i = 0; i < a.length; ++i) {\n                  if (i > 0 && i % 8 === 0) {\n                      out.indent(a[i]);\n                  } else {\n                      out(\" \", a[i]);\n                  }\n              }\n          });\n          //out.indent();\n      }\n      out(\" ]\");\n  }\n\n  function renderDate(date, out) {\n      out(\"(D:\",\n          zeropad(date.getUTCFullYear(), 4),\n          zeropad(date.getUTCMonth() + 1, 2),\n          zeropad(date.getUTCDate(), 2),\n          zeropad(date.getUTCHours(), 2),\n          zeropad(date.getUTCMinutes(), 2),\n          zeropad(date.getUTCSeconds(), 2),\n          \"Z)\");\n  }\n\n  function mm2pt(mm) {\n      return mm * (72/25.4);\n  }\n\n  function cm2pt(cm) {\n      return mm2pt(cm * 10);\n  }\n\n  function in2pt(inch)  {\n      return inch * 72;\n  }\n\n\n  function unitsToPoints(x, def) {\n      if (typeof x == \"number\") {\n          return x;\n      }\n      if (typeof x == \"string\") {\n          var m;\n          m = /^\\s*([0-9.]+)\\s*(mm|cm|in|pt)\\s*$/.exec(x);\n          if (m) {\n              var num = parseFloat(m[1]);\n              if (!isNaN(num)) {\n                  if (m[2] == \"pt\") {\n                      return num;\n                  }\n                  return {\n                      \"mm\": mm2pt,\n                      \"cm\": cm2pt,\n                      \"in\": in2pt\n                  }[m[2]](num);\n              }\n          }\n      }\n      if (def != null) {\n          return def;\n      }\n      throw new Error(\"Can't parse unit: \" + x);\n  }\n\n  /* -----[ PDF basic objects ]----- */\n\n  var PDFValue = function PDFValue () {};\n\n  PDFValue.prototype.beforeRender = function beforeRender () {};\n\n  var PDFString = (function (PDFValue) {\n      function PDFString(value, utf16be) {\n          PDFValue.call(this);\n          this.value = value;\n          this.utf16be = Boolean(utf16be);\n      }\n\n      if ( PDFValue ) PDFString.__proto__ = PDFValue;\n      PDFString.prototype = Object.create( PDFValue && PDFValue.prototype );\n      PDFString.prototype.constructor = PDFString;\n\n      PDFString.prototype.render = function render (out) {\n          var txt = this.value;\n          if (this.utf16be) {\n              txt = BOM + encodeUTF16BE(txt);\n              txt = txt.replace(/([\\(\\)\\\\])/g, \"\\\\$1\");\n              out(\"(\", txt, \")\");\n          } else {\n              // out.writeString truncates charcodes to 8 bits and\n              // 0x128 & 0xFF is 40, the code for open paren.\n              // therefore we need to do the chopping here to make\n              // sure we backslash all cases.\n              var data = [ 40 ]; // open PDF string '('\n              for (var i = 0; i < txt.length; ++i) {\n                  var code = txt.charCodeAt(i) & 0xFF;\n                  if (code == 40 || code == 41 || code == 92) {\n                      // backslash before (, ) and \\\n                      data.push(92);\n                  }\n                  data.push(code);\n              }\n              data.push(41);  // ')' close PDF string\n              out.writeData(data);\n          }\n      };\n\n      PDFString.prototype.toString = function toString () {\n          return this.value;\n      };\n\n      return PDFString;\n  }(PDFValue));\n\n  var PDFHexString = (function (PDFString) {\n      function PDFHexString(value) {\n          PDFString.call(this, value);\n          this.value = value;\n      }\n\n      if ( PDFString ) PDFHexString.__proto__ = PDFString;\n      PDFHexString.prototype = Object.create( PDFString && PDFString.prototype );\n      PDFHexString.prototype.constructor = PDFHexString;\n\n      PDFHexString.prototype.render = function render (out) {\n          var this$1$1 = this;\n\n          out(\"<\");\n          for (var i = 0; i < this.value.length; ++i) {\n              out(zeropad(this$1$1.value.charCodeAt(i).toString(16), 4));\n          }\n          out(\">\");\n      };\n\n      return PDFHexString;\n  }(PDFString));\n\n  /// names\n  var PDFName = (function (PDFValue) {\n      function PDFName(name) {\n          PDFValue.call(this);\n          this.name = name;\n      }\n\n      if ( PDFValue ) PDFName.__proto__ = PDFValue;\n      PDFName.prototype = Object.create( PDFValue && PDFValue.prototype );\n      PDFName.prototype.constructor = PDFName;\n\n      PDFName.get = function get (name) {\n          return _(name);\n      };\n\n      PDFName.prototype.render = function render (out) {\n          out(\"/\" + this.escape());\n      };\n\n      PDFName.prototype.escape = function escape () {\n          return this.name.replace(/[^\\x21-\\x7E]/g, function(c){\n              return \"#\" + zeropad(c.charCodeAt(0).toString(16), 2);\n          });\n      };\n\n      PDFName.prototype.toString = function toString () {\n          return this.name;\n      };\n\n      return PDFName;\n  }(PDFValue));\n\n  function _(name) {\n      return new PDFName(name);\n  }\n\n  /// dictionary\n\n  var PDFDictionary = (function (PDFValue) {\n      function PDFDictionary(props) {\n          PDFValue.call(this);\n          this.props = props;\n      }\n\n      if ( PDFValue ) PDFDictionary.__proto__ = PDFValue;\n      PDFDictionary.prototype = Object.create( PDFValue && PDFValue.prototype );\n      PDFDictionary.prototype.constructor = PDFDictionary;\n\n      PDFDictionary.prototype.render = function render (out) {\n          var props = this.props, empty = true;\n          out(\"<<\");\n          out.withIndent(function(){\n              for (var i in props) {\n                  if (hasOwnProperty$1(props, i) && !/^_/.test(i)) {\n                      empty = false;\n                      out.indent(_(i), \" \", props[i]);\n                  }\n              }\n          });\n          if (!empty) {\n              out.indent();\n          }\n          out(\">>\");\n      };\n\n      return PDFDictionary;\n  }(PDFValue));\n\n  /// streams\n\n  var PDFStream = (function (PDFValue) {\n      function PDFStream(data, props, compress) {\n          PDFValue.call(this);\n          if (typeof data == \"string\") {\n              var tmp = BinaryStream();\n              tmp.write(data);\n              data = tmp;\n          }\n          this.data = data;\n          this.props = props || {};\n          this.compress = compress;\n      }\n\n      if ( PDFValue ) PDFStream.__proto__ = PDFValue;\n      PDFStream.prototype = Object.create( PDFValue && PDFValue.prototype );\n      PDFStream.prototype.constructor = PDFStream;\n\n      PDFStream.prototype.render = function render (out) {\n          var data = this.data.get(), props = this.props;\n          if (this.compress && supportsDeflate()) {\n              if (!props.Filter) {\n                  props.Filter = [];\n              } else if (!(props.Filter instanceof Array)) {\n                  props.Filter = [ props.Filter ];\n              }\n              props.Filter.unshift(_(\"FlateDecode\"));\n              data = deflate(data);\n          }\n          props.Length = data.length;\n          out(new PDFDictionary(props), \" stream\", NL);\n          out.writeData(data);\n          out(NL, \"endstream\");\n      };\n\n      return PDFStream;\n  }(PDFValue));\n\n  /// catalog\n\n  var PDFCatalog = (function (PDFDictionary) {\n      function PDFCatalog() {\n          PDFDictionary.call(this, {\n              Type: _(\"Catalog\")\n          });\n      }\n\n      if ( PDFDictionary ) PDFCatalog.__proto__ = PDFDictionary;\n      PDFCatalog.prototype = Object.create( PDFDictionary && PDFDictionary.prototype );\n      PDFCatalog.prototype.constructor = PDFCatalog;\n\n      PDFCatalog.prototype.setPages = function setPages (pagesObj) {\n          this.props.Pages = pagesObj;\n      };\n\n      return PDFCatalog;\n  }(PDFDictionary));\n\n  /// page tree\n\n  var PDFPageTree = (function (PDFDictionary) {\n      function PDFPageTree() {\n          PDFDictionary.call(this, {\n              Type  : _(\"Pages\"),\n              Kids  : [],\n              Count : 0\n          });\n      }\n\n      if ( PDFDictionary ) PDFPageTree.__proto__ = PDFDictionary;\n      PDFPageTree.prototype = Object.create( PDFDictionary && PDFDictionary.prototype );\n      PDFPageTree.prototype.constructor = PDFPageTree;\n\n      PDFPageTree.prototype.addPage = function addPage (pageObj) {\n          this.props.Kids.push(pageObj);\n          this.props.Count++;\n      };\n\n      return PDFPageTree;\n  }(PDFDictionary));\n\n  /// images\n\n  // JPEG\n\n  var SOF_CODES = [0xc0, 0xc1, 0xc2, 0xc3, 0xc5, 0xc6, 0xc7, 0xc9, 0xca, 0xcb, 0xcd, 0xce, 0xcf];\n\n  var PDFJpegImage = function PDFJpegImage(data) {\n      // we must determine the correct color space.  we'll parse a bit\n      // of the JPEG stream for this, it's still better than going\n      // through the canvas.\n      // https://github.com/telerik/kendo-ui-core/issues/2845\n      data.offset(0);\n      var width, height, colorSpace, bitsPerComponent;\n      var soi = data.readShort();\n      if (soi != 0xFFD8) {\n          // XXX: do we have some better options here?\n          throw new Error(\"Invalid JPEG image\");\n      }\n      while (!data.eof()) {\n          var ff = data.readByte();\n          if (ff != 0xFF) {\n              throw new Error(\"Invalid JPEG image\");\n          }\n          var marker = data.readByte();\n          var length = data.readShort();\n          if (SOF_CODES.indexOf(marker) >= 0) {\n              // \"start of frame\" marker\n              bitsPerComponent = data.readByte();\n              height = data.readShort();\n              width = data.readShort();\n              colorSpace = data.readByte();\n              break;\n          }\n          data.skip(length - 2);\n      }\n\n      if (colorSpace == null) {\n          throw new Error(\"Invalid JPEG image\");\n      }\n\n      var props = {\n          Type         : _(\"XObject\"),\n          Subtype      : _(\"Image\"),\n          Width        : width,\n          Height       : height,\n          BitsPerComponent : bitsPerComponent,\n          Filter       : _(\"DCTDecode\")\n      };\n\n      switch (colorSpace) {\n      case 1:\n          props.ColorSpace = _(\"DeviceGray\");\n          break;\n      case 3:\n          props.ColorSpace = _(\"DeviceRGB\");\n          break;\n      case 4:\n          props.ColorSpace = _(\"DeviceCMYK\");\n          props.Decode = [ 1, 0, 1, 0, 1, 0, 1, 0 ]; // invert colors\n          break;\n      }\n\n      this.asStream = function() {\n          data.offset(0);\n          var stream = new PDFStream(data, props);\n          stream._resourceName = _(\"I\" + (++RESOURCE_COUNTER));\n          return stream;\n      };\n  };\n\n  // PDFRawImage will be used for images with transparency (PNG)\n\n  var PDFRawImage = function PDFRawImage(width, height, rgb, alpha) {\n      this.asStream = function(pdf) {\n          var mask = new PDFStream(alpha, {\n              Type         : _(\"XObject\"),\n              Subtype      : _(\"Image\"),\n              Width        : width,\n              Height       : height,\n              BitsPerComponent : 8,\n              ColorSpace   : _(\"DeviceGray\")\n          }, true);\n          var stream = new PDFStream(rgb, {\n              Type         : _(\"XObject\"),\n              Subtype      : _(\"Image\"),\n              Width        : width,\n              Height       : height,\n              BitsPerComponent : 8,\n              ColorSpace   : _(\"DeviceRGB\"),\n              SMask        : pdf.attach(mask)\n          }, true);\n          stream._resourceName = _(\"I\" + (++RESOURCE_COUNTER));\n          return stream;\n      };\n  };\n\n  /// standard fonts\n\n  var PDFStandardFont = (function (PDFDictionary) {\n      function PDFStandardFont(name){\n          PDFDictionary.call(this, {\n              Type     : _(\"Font\"),\n              Subtype  : _(\"Type1\"),\n              BaseFont : _(name)\n          });\n\n          this._resourceName = _(\"F\" + (++RESOURCE_COUNTER));\n      }\n\n      if ( PDFDictionary ) PDFStandardFont.__proto__ = PDFDictionary;\n      PDFStandardFont.prototype = Object.create( PDFDictionary && PDFDictionary.prototype );\n      PDFStandardFont.prototype.constructor = PDFStandardFont;\n\n      PDFStandardFont.prototype.encodeText = function encodeText (str) {\n          return new PDFString(String(str));\n      };\n\n      return PDFStandardFont;\n  }(PDFDictionary));\n\n  /// TTF fonts\n\n  var PDFFont = (function (PDFDictionary) {\n      function PDFFont(pdf, font, props){\n          PDFDictionary.call(this, {});\n\n          props = this.props;\n          props.Type = _(\"Font\");\n          props.Subtype = _(\"Type0\");\n          props.Encoding = _(\"Identity-H\");\n\n          this._pdf = pdf;\n          this._font = font;\n          this._sub = font.makeSubset();\n          this._resourceName = _(\"F\" + (++RESOURCE_COUNTER));\n\n          var head = font.head;\n\n          this.name = font.psName;\n          var scale = this.scale = font.scale;\n          this.bbox = [\n              head.xMin * scale,\n              head.yMin * scale,\n              head.xMax * scale,\n              head.yMax * scale\n          ];\n\n          this.italicAngle = font.post.italicAngle;\n          this.ascent = font.ascent * scale;\n          this.descent = font.descent * scale;\n          this.lineGap = font.lineGap * scale;\n          this.capHeight = font.os2.capHeight || this.ascent;\n          this.xHeight = font.os2.xHeight || 0;\n          this.stemV = 0;\n\n          this.familyClass = (font.os2.familyClass || 0) >> 8;\n          this.isSerif = this.familyClass >= 1 && this.familyClass <= 7;\n          this.isScript = this.familyClass == 10;\n\n          this.flags = ((font.post.isFixedPitch ? 1 : 0) |\n                      (this.isSerif ? 1 << 1 : 0) |\n                      (this.isScript ? 1 << 3 : 0) |\n                      (this.italicAngle !== 0 ? 1 << 6 : 0) |\n                      (1 << 5));\n          }\n\n      if ( PDFDictionary ) PDFFont.__proto__ = PDFDictionary;\n      PDFFont.prototype = Object.create( PDFDictionary && PDFDictionary.prototype );\n      PDFFont.prototype.constructor = PDFFont;\n\n          PDFFont.prototype.encodeText = function encodeText (text) {\n              return new PDFHexString(this._sub.encodeText(String(text)));\n          };\n\n          PDFFont.prototype.getTextWidth = function getTextWidth (fontSize, text) {\n              var this$1$1 = this;\n\n              var width = 0, codeMap = this._font.cmap.codeMap;\n              for (var i = 0; i < text.length; ++i) {\n                  var glyphId = codeMap[text.charCodeAt(i)];\n                  width += this$1$1._font.widthOfGlyph(glyphId || 0);\n              }\n              return width * fontSize / 1000;\n          };\n\n          PDFFont.prototype.beforeRender = function beforeRender () {\n              var self = this;\n              var sub = self._sub;\n\n              // write the TTF data\n              var data = sub.render();\n              var fontStream = new PDFStream(BinaryStream(data), {\n                  Length1: data.length\n              }, true);\n\n              var descriptor = self._pdf.attach(new PDFDictionary({\n                  Type         : _(\"FontDescriptor\"),\n                  FontName     : _(self._sub.psName),\n                  FontBBox     : self.bbox,\n                  Flags        : self.flags,\n                  StemV        : self.stemV,\n                  ItalicAngle  : self.italicAngle,\n                  Ascent       : self.ascent,\n                  Descent      : self.descent,\n                  CapHeight    : self.capHeight,\n                  XHeight      : self.xHeight,\n                  FontFile2    : self._pdf.attach(fontStream)\n              }));\n\n              var cmap = sub.ncid2ogid;\n              var firstChar = sub.firstChar;\n              var lastChar = sub.lastChar;\n              var charWidths = [];\n              (function loop(i, chunk){\n                  if (i <= lastChar) {\n                      var gid = cmap[i];\n                      if (gid == null) {\n                          loop(i + 1);\n                      } else {\n                          if (!chunk) {\n                              charWidths.push(i, chunk = []);\n                          }\n                          chunk.push(self._font.widthOfGlyph(gid));\n                          loop(i + 1, chunk);\n                      }\n                  }\n              })(firstChar);\n\n              // As if two dictionaries weren't enough, we need another\n              // one, the \"descendant font\".  Only that one can be of\n              // Subtype CIDFontType2.  PDF is the X11 of document\n              // formats: portable but full of legacy that nobody cares\n              // about anymore.\n\n              var descendant = new PDFDictionary({\n                  Type: _(\"Font\"),\n                  Subtype: _(\"CIDFontType2\"),\n                  BaseFont: _(self._sub.psName),\n                  CIDSystemInfo: new PDFDictionary({\n                      Registry   : new PDFString(\"Adobe\"),\n                      Ordering   : new PDFString(\"Identity\"),\n                      Supplement : 0\n                  }),\n                  FontDescriptor: descriptor,\n                  FirstChar: firstChar,\n                  LastChar: lastChar,\n                  DW: Math.round(self._font.widthOfGlyph(0)),\n                  W: charWidths,\n                  CIDToGIDMap: self._pdf.attach(self._makeCidToGidMap())\n              });\n\n              var dict = self.props;\n              dict.BaseFont = _(self._sub.psName);\n              dict.DescendantFonts = [ self._pdf.attach(descendant) ];\n\n              // Compute the ToUnicode map so that apps can extract\n              // meaningful text from the PDF.\n              var unimap = new PDFToUnicodeCmap(firstChar, lastChar, sub.subset);\n              var unimapStream = new PDFStream(makeOutput(), null, true);\n              unimapStream.data(unimap);\n              dict.ToUnicode = self._pdf.attach(unimapStream);\n          };\n\n          PDFFont.prototype._makeCidToGidMap = function _makeCidToGidMap () {\n              return new PDFStream(BinaryStream(this._sub.cidToGidMap()), null, true);\n          };\n\n      return PDFFont;\n  }(PDFDictionary));\n\n  var PDFToUnicodeCmap = (function (PDFValue) {\n      function PDFToUnicodeCmap(firstChar, lastChar, map){\n          PDFValue.call(this);\n          this.firstChar = firstChar;\n          this.lastChar = lastChar;\n          this.map = map;\n      }\n\n      if ( PDFValue ) PDFToUnicodeCmap.__proto__ = PDFValue;\n      PDFToUnicodeCmap.prototype = Object.create( PDFValue && PDFValue.prototype );\n      PDFToUnicodeCmap.prototype.constructor = PDFToUnicodeCmap;\n\n      PDFToUnicodeCmap.prototype.render = function render (out) {\n          out.indent(\"/CIDInit /ProcSet findresource begin\");\n          out.indent(\"12 dict begin\");\n          out.indent(\"begincmap\");\n          out.indent(\"/CIDSystemInfo <<\");\n          out.indent(\"  /Registry (Adobe)\");\n          out.indent(\"  /Ordering (UCS)\");\n          out.indent(\"  /Supplement 0\");\n          out.indent(\">> def\");\n          out.indent(\"/CMapName /Adobe-Identity-UCS def\");\n          out.indent(\"/CMapType 2 def\");\n          out.indent(\"1 begincodespacerange\");\n          out.indent(\"  <0000><ffff>\");\n          out.indent(\"endcodespacerange\");\n\n          var self = this;\n          out.indent(self.lastChar - self.firstChar + 1, \" beginbfchar\");\n          out.withIndent(function(){\n              for (var code = self.firstChar; code <= self.lastChar; ++code) {\n                  var unicode = self.map[code];\n                  var str = ucs2encode([ unicode ]);\n                  out.indent(\"<\", zeropad(code.toString(16), 4), \">\", \"<\");\n                  for (var i = 0; i < str.length; ++i) {\n                      out(zeropad(str.charCodeAt(i).toString(16), 4));\n                  }\n                  out(\">\");\n              }\n          });\n          out.indent(\"endbfchar\");\n\n          out.indent(\"endcmap\");\n          out.indent(\"CMapName currentdict /CMap defineresource pop\");\n          out.indent(\"end\");\n          out.indent(\"end\");\n      };\n\n      return PDFToUnicodeCmap;\n  }(PDFValue));\n\n  /// gradients\n\n  function makeHash(a) {\n      return a.map(function(x){\n          return isArray(x) ? makeHash(x)\n              : typeof x == \"number\" ? (Math.round(x * 1000) / 1000).toFixed(3)\n              : x;\n      }).join(\" \");\n  }\n\n  function cacheColorGradientFunction(pdf, r1, g1, b1, r2, g2, b2) {\n      var hash = makeHash([ r1, g1, b1, r2, g2, b2 ]);\n      var func = pdf.GRAD_COL_FUNCTIONS[hash];\n      if (!func) {\n          func = pdf.GRAD_COL_FUNCTIONS[hash] = pdf.attach(new PDFDictionary({\n              FunctionType: 2,\n              Domain: [ 0, 1 ],\n              Range: [ 0, 1, 0, 1, 0, 1 ],\n              N: 1,\n              C0: [ r1 , g1 , b1 ],\n              C1: [ r2 , g2 , b2 ]\n          }));\n      }\n      return func;\n  }\n\n  function cacheOpacityGradientFunction(pdf, a1, a2) {\n      var hash = makeHash([ a1, a2 ]);\n      var func = pdf.GRAD_OPC_FUNCTIONS[hash];\n      if (!func) {\n          func = pdf.GRAD_OPC_FUNCTIONS[hash] = pdf.attach(new PDFDictionary({\n              FunctionType: 2,\n              Domain: [ 0, 1 ],\n              Range: [ 0, 1 ],\n              N: 1,\n              C0: [ a1 ],\n              C1: [ a2 ]\n          }));\n      }\n      return func;\n  }\n\n  function makeGradientFunctions(pdf, stops) {\n      var hasAlpha = false;\n      var opacities = [];\n      var colors = [];\n      var offsets = [];\n      var encode = [];\n      var i, prev, cur, prevColor, curColor;\n      for (i = 1; i < stops.length; ++i) {\n          prev = stops[i - 1];\n          cur = stops[i];\n          prevColor = prev.color;\n          curColor = cur.color;\n          colors.push(cacheColorGradientFunction(\n              pdf,\n              prevColor.r, prevColor.g, prevColor.b,\n              curColor.r,  curColor.g,  curColor.b\n          ));\n          if (prevColor.a < 1 || curColor.a < 1) {\n              hasAlpha = true;\n          }\n          offsets.push(cur.offset);\n          encode.push(0, 1);\n      }\n      if (hasAlpha) {\n          for (i = 1; i < stops.length; ++i) {\n              prev = stops[i - 1];\n              cur = stops[i];\n              prevColor = prev.color;\n              curColor = cur.color;\n              opacities.push(cacheOpacityGradientFunction(\n                  pdf, prevColor.a, curColor.a\n              ));\n          }\n      }\n      offsets.pop();\n      return {\n          hasAlpha  : hasAlpha,\n          colors    : assemble(colors),\n          opacities : hasAlpha ? assemble(opacities) : null\n      };\n      function assemble(funcs) {\n          if (funcs.length == 1) {\n              return funcs[0];\n          }\n          return {\n              FunctionType: 3,\n              Functions: funcs,\n              Domain: [ 0, 1 ],\n              Bounds: offsets,\n              Encode: encode\n          };\n      }\n  }\n\n  function cacheColorGradient(pdf, isRadial, stops, coords, funcs, box) {\n      var shading, hash;\n      // if box is given then we have user-space coordinates, which\n      // means the gradient is designed for a certain position/size\n      // on page.  caching won't do any good.\n      if (!box) {\n          var a = [ isRadial ].concat(coords);\n          stops.forEach(function(x){\n              a.push(x.offset, x.color.r, x.color.g, x.color.b);\n          });\n          hash = makeHash(a);\n          shading = pdf.GRAD_COL[hash];\n      }\n      if (!shading) {\n          shading = new PDFDictionary({\n              Type: _(\"Shading\"),\n              ShadingType: isRadial ? 3 : 2,\n              ColorSpace: _(\"DeviceRGB\"),\n              Coords: coords,\n              Domain: [ 0, 1 ],\n              Function: funcs,\n              Extend: [ true, true ]\n          });\n          pdf.attach(shading);\n          shading._resourceName = \"S\" + (++RESOURCE_COUNTER);\n          if (hash) {\n              pdf.GRAD_COL[hash] = shading;\n          }\n      }\n      return shading;\n  }\n\n  function cacheOpacityGradient(pdf, isRadial, stops, coords, funcs, box) {\n      var opacity, hash;\n      // if box is given then we have user-space coordinates, which\n      // means the gradient is designed for a certain position/size\n      // on page.  caching won't do any good.\n      if (!box) {\n          var a = [ isRadial ].concat(coords);\n          stops.forEach(function(x){\n              a.push(x.offset, x.color.a);\n          });\n          hash = makeHash(a);\n          opacity = pdf.GRAD_OPC[hash];\n      }\n      if (!opacity) {\n          opacity = new PDFDictionary({\n              Type: _(\"ExtGState\"),\n              AIS: false,\n              CA: 1,\n              ca: 1,\n              SMask: {\n                  Type: _(\"Mask\"),\n                  S: _(\"Luminosity\"),\n                  G: pdf.attach(new PDFStream(\"/a0 gs /s0 sh\", {\n                      Type: _(\"XObject\"),\n                      Subtype: _(\"Form\"),\n                      FormType: 1,\n                      BBox: (box ? [\n                          box.left, box.top + box.height, box.left + box.width, box.top\n                      ] : [ 0, 1, 1, 0 ]),\n                      Group: {\n                          Type: _(\"Group\"),\n                          S: _(\"Transparency\"),\n                          CS: _(\"DeviceGray\"),\n                          I: true\n                      },\n                      Resources: {\n                          ExtGState: {\n                              a0: { CA: 1, ca: 1 }\n                          },\n                          Shading: {\n                              s0: {\n                                  ColorSpace: _(\"DeviceGray\"),\n                                  Coords: coords,\n                                  Domain: [ 0, 1 ],\n                                  ShadingType: isRadial ? 3 : 2,\n                                  Function: funcs,\n                                  Extend: [ true, true ]\n                              }\n                          }\n                      }\n                  }))\n              }\n          });\n          pdf.attach(opacity);\n          opacity._resourceName = \"O\" + (++RESOURCE_COUNTER);\n          if (hash) {\n              pdf.GRAD_OPC[hash] = opacity;\n          }\n      }\n      return opacity;\n  }\n\n  function cacheGradient(pdf, gradient, box) {\n      var isRadial = gradient.type == \"radial\";\n      var funcs = makeGradientFunctions(pdf, gradient.stops);\n      var coords = isRadial ? [\n          gradient.start.x , gradient.start.y , gradient.start.r,\n          gradient.end.x   , gradient.end.y   , gradient.end.r\n      ] : [\n          gradient.start.x , gradient.start.y,\n          gradient.end.x   , gradient.end.y\n      ];\n      var shading = cacheColorGradient(\n          pdf, isRadial, gradient.stops, coords, funcs.colors, gradient.userSpace && box\n      );\n      var opacity = funcs.hasAlpha ? cacheOpacityGradient(\n          pdf, isRadial, gradient.stops, coords, funcs.opacities, gradient.userSpace && box\n      ) : null;\n      return {\n          hasAlpha: funcs.hasAlpha,\n          shading: shading,\n          opacity: opacity\n      };\n  }\n\n  /// page object\n\n  var PDFPage = (function (PDFDictionary) {\n      function PDFPage(pdf, props){\n          PDFDictionary.call(this, props);\n\n          this._pdf = pdf;\n          this._rcount = 0;\n          this._textMode = false;\n          this._fontResources = {};\n          this._gsResources = {};\n          this._xResources = {};\n          this._patResources = {};\n          this._shResources = {};\n          this._opacity = 1;\n          this._matrix = [ 1, 0, 0, 1, 0, 0 ];\n          this._annotations = [];\n\n          this._font = null;\n          this._fontSize = null;\n\n          this._contextStack = [];\n\n          props = this.props;\n          props.Type = _(\"Page\");\n          props.ProcSet = [\n              _(\"PDF\"),\n              _(\"Text\"),\n              _(\"ImageB\"),\n              _(\"ImageC\"),\n              _(\"ImageI\")\n          ];\n          props.Resources = new PDFDictionary({\n              Font      : new PDFDictionary(this._fontResources),\n              ExtGState : new PDFDictionary(this._gsResources),\n              XObject   : new PDFDictionary(this._xResources),\n              Pattern   : new PDFDictionary(this._patResources),\n              Shading   : new PDFDictionary(this._shResources)\n          });\n          props.Annots = this._annotations;\n      }\n\n      if ( PDFDictionary ) PDFPage.__proto__ = PDFDictionary;\n      PDFPage.prototype = Object.create( PDFDictionary && PDFDictionary.prototype );\n      PDFPage.prototype.constructor = PDFPage;\n\n      PDFPage.prototype._out = function _out () {\n          this._content.data.apply(null, arguments);\n      };\n\n      PDFPage.prototype.transform = function transform (a, b, c, d, e, f) {\n          if (!isIdentityMatrix(arguments)) {\n              this._matrix = mmul$1(arguments, this._matrix);\n              this._out(a, \" \", b, \" \", c, \" \", d, \" \", e, \" \", f, \" cm\");\n              // XXX: debug\n              // this._out(\" % current matrix: \", this._matrix);\n              this._out(NL);\n          }\n      };\n\n      PDFPage.prototype.translate = function translate (dx, dy) {\n          this.transform(1, 0, 0, 1, dx, dy);\n      };\n\n      PDFPage.prototype.scale = function scale (sx, sy) {\n          this.transform(sx, 0, 0, sy, 0, 0);\n      };\n\n      PDFPage.prototype.rotate = function rotate (angle) {\n          var cos = Math.cos(angle), sin = Math.sin(angle);\n          this.transform(cos, sin, -sin, cos, 0, 0);\n      };\n\n      PDFPage.prototype.beginText = function beginText () {\n          this._textMode = true;\n          this._out(\"BT\", NL);\n      };\n\n      PDFPage.prototype.endText = function endText () {\n          this._textMode = false;\n          this._out(\"ET\", NL);\n      };\n\n      PDFPage.prototype._requireTextMode = function _requireTextMode () {\n          if (!this._textMode) {\n              throw new Error(\"Text mode required; call page.beginText() first\");\n          }\n      };\n\n      PDFPage.prototype._requireFont = function _requireFont () {\n          if (!this._font) {\n              throw new Error(\"No font selected; call page.setFont() first\");\n          }\n      };\n\n      PDFPage.prototype.setFont = function setFont (font, size) {\n          this._requireTextMode();\n          if (font == null) {\n              font = this._font;\n          } else if (!(font instanceof PDFFont)) {\n              font = this._pdf.getFont(font);\n          }\n          if (size == null) {\n              size = this._fontSize;\n          }\n          this._fontResources[font._resourceName] = font;\n          this._font = font;\n          this._fontSize = size;\n          this._out(font._resourceName, \" \", size, \" Tf\", NL);\n      };\n\n      PDFPage.prototype.setTextLeading = function setTextLeading (size) {\n          this._requireTextMode();\n          this._out(size, \" TL\", NL);\n      };\n\n      PDFPage.prototype.setTextRenderingMode = function setTextRenderingMode (mode) {\n          this._requireTextMode();\n          this._out(mode, \" Tr\", NL);\n      };\n\n      PDFPage.prototype.showText = function showText (text, requestedWidth) {\n          this._requireFont();\n          if (text.length > 1 && requestedWidth && this._font instanceof PDFFont) {\n              var outputWidth = this._font.getTextWidth(this._fontSize, text);\n              var scale = requestedWidth / outputWidth * 100;\n              this._out(scale, \" Tz \");\n          }\n          this._out(this._font.encodeText(text), \" Tj\", NL);\n      };\n\n      PDFPage.prototype.showTextNL = function showTextNL (text) {\n          this._requireFont();\n          this._out(this._font.encodeText(text), \" '\", NL);\n      };\n\n      PDFPage.prototype.addLink = function addLink (uri, box) {\n          var ll = this._toPage({ x: box.left, y: box.bottom });\n          var ur = this._toPage({ x: box.right, y: box.top });\n          this._annotations.push(new PDFDictionary({\n              Type    : _(\"Annot\"),\n              Subtype : _(\"Link\"),\n              Rect    : [ ll.x, ll.y, ur.x, ur.y ],\n              Border  : [ 0, 0, 0 ],\n              A       : new PDFDictionary({\n                  Type : _(\"Action\"),\n                  S    : _(\"URI\"),\n                  URI  : new PDFString(uri)\n              })\n          }));\n      };\n\n      PDFPage.prototype.setStrokeColor = function setStrokeColor (r, g, b) {\n          this._out(r, \" \", g, \" \", b, \" RG\", NL);\n      };\n\n      PDFPage.prototype.setOpacity = function setOpacity (opacity) {\n          this.setFillOpacity(opacity);\n          this.setStrokeOpacity(opacity);\n          this._opacity *= opacity;\n      };\n\n      PDFPage.prototype.setStrokeOpacity = function setStrokeOpacity (opacity) {\n          if (opacity < 1) {\n              var gs = this._pdf.getOpacityGS(this._opacity * opacity, true);\n              this._gsResources[gs._resourceName] = gs;\n              this._out(gs._resourceName, \" gs\", NL);\n          }\n      };\n\n      PDFPage.prototype.setFillColor = function setFillColor (r, g, b) {\n          this._out(r, \" \", g, \" \", b, \" rg\", NL);\n      };\n\n      PDFPage.prototype.setFillOpacity = function setFillOpacity (opacity) {\n          if (opacity < 1) {\n              var gs = this._pdf.getOpacityGS(this._opacity * opacity, false);\n              this._gsResources[gs._resourceName] = gs;\n              this._out(gs._resourceName, \" gs\", NL);\n          }\n      };\n\n      PDFPage.prototype.gradient = function gradient (gradient$1, box) {\n          this.save();\n          this.rect(box.left, box.top, box.width, box.height);\n          this.clip();\n          if (!gradient$1.userSpace) {\n              this.transform(box.width, 0, 0, box.height, box.left, box.top);\n          }\n          var g = cacheGradient(this._pdf, gradient$1, box);\n          var sname = g.shading._resourceName, oname;\n          this._shResources[sname] = g.shading;\n          if (g.hasAlpha) {\n              oname = g.opacity._resourceName;\n              this._gsResources[oname] = g.opacity;\n              this._out(\"/\" + oname + \" gs \");\n          }\n          this._out(\"/\" + sname + \" sh\", NL);\n          this.restore();\n      };\n\n      PDFPage.prototype.setDashPattern = function setDashPattern (dashArray, dashPhase) {\n          this._out(dashArray, \" \", dashPhase, \" d\", NL);\n      };\n\n      PDFPage.prototype.setLineWidth = function setLineWidth (width) {\n          this._out(width, \" w\", NL);\n      };\n\n      PDFPage.prototype.setLineCap = function setLineCap (lineCap) {\n          this._out(lineCap, \" J\", NL);\n      };\n\n      PDFPage.prototype.setLineJoin = function setLineJoin (lineJoin) {\n          this._out(lineJoin, \" j\", NL);\n      };\n\n      PDFPage.prototype.setMitterLimit = function setMitterLimit (mitterLimit) {\n          this._out(mitterLimit, \" M\", NL);\n      };\n\n      PDFPage.prototype.save = function save () {\n          this._contextStack.push(this._context());\n          this._out(\"q\", NL);\n      };\n\n      PDFPage.prototype.restore = function restore () {\n          this._out(\"Q\", NL);\n          this._context(this._contextStack.pop());\n      };\n\n\n      // paths\n      PDFPage.prototype.moveTo = function moveTo (x, y) {\n          this._out(x, \" \", y, \" m\", NL);\n      };\n\n      PDFPage.prototype.lineTo = function lineTo (x, y) {\n          this._out(x, \" \", y, \" l\", NL);\n      };\n\n      PDFPage.prototype.bezier = function bezier (x1, y1, x2, y2, x3, y3) {\n          this._out(x1, \" \", y1, \" \", x2, \" \", y2, \" \", x3, \" \", y3, \" c\", NL);\n      };\n\n      PDFPage.prototype.bezier1 = function bezier1 (x1, y1, x3, y3) {\n          this._out(x1, \" \", y1, \" \", x3, \" \", y3, \" y\", NL);\n      };\n\n      PDFPage.prototype.bezier2 = function bezier2 (x2, y2, x3, y3) {\n          this._out(x2, \" \", y2, \" \", x3, \" \", y3, \" v\", NL);\n      };\n\n      PDFPage.prototype.close = function close () {\n          this._out(\"h\", NL);\n      };\n\n      PDFPage.prototype.rect = function rect (x, y, w, h) {\n          this._out(x, \" \", y, \" \", w, \" \", h, \" re\", NL);\n      };\n\n      PDFPage.prototype.ellipse = function ellipse (x, y, rx, ry) {\n          function _X(v) { return x + v; }\n          function _Y(v) { return y + v; }\n\n          // how to get to the \"magic number\" is explained here:\n          // http://www.whizkidtech.redprince.net/bezier/circle/kappa/\n          var k = 0.5522847498307936;\n\n          this.moveTo(_X(0), _Y(ry));\n          this.bezier(\n              _X(rx * k) , _Y(ry),\n              _X(rx)     , _Y(ry * k),\n              _X(rx)     , _Y(0)\n          );\n          this.bezier(\n              _X(rx)     , _Y(-ry * k),\n              _X(rx * k) , _Y(-ry),\n              _X(0)      , _Y(-ry)\n          );\n          this.bezier(\n              _X(-rx * k) , _Y(-ry),\n              _X(-rx)     , _Y(-ry * k),\n              _X(-rx)     , _Y(0)\n          );\n          this.bezier(\n              _X(-rx)     , _Y(ry * k),\n              _X(-rx * k) , _Y(ry),\n              _X(0)       , _Y(ry)\n          );\n      };\n\n      PDFPage.prototype.circle = function circle (x, y, r) {\n          this.ellipse(x, y, r, r);\n      };\n\n      PDFPage.prototype.stroke = function stroke () {\n          this._out(\"S\", NL);\n      };\n\n      PDFPage.prototype.nop = function nop () {\n          this._out(\"n\", NL);\n      };\n\n      PDFPage.prototype.clip = function clip () {\n          this._out(\"W n\", NL);\n      };\n\n      PDFPage.prototype.clipStroke = function clipStroke () {\n          this._out(\"W S\", NL);\n      };\n\n      PDFPage.prototype.closeStroke = function closeStroke () {\n          this._out(\"s\", NL);\n      };\n\n      PDFPage.prototype.fill = function fill () {\n          this._out(\"f\", NL);\n      };\n\n      PDFPage.prototype.fillStroke = function fillStroke () {\n          this._out(\"B\", NL);\n      };\n\n      PDFPage.prototype.drawImage = function drawImage (url) {\n          var img = this._pdf.getImage(url);\n          if (img) { // the result can be null for a cross-domain image\n              this._xResources[img._resourceName] = img;\n              this._out(img._resourceName, \" Do\", NL);\n          }\n      };\n\n      PDFPage.prototype.comment = function comment (txt) {\n          var self = this;\n          txt.split(/\\r?\\n/g).forEach(function(line){\n              self._out(\"% \", line, NL);\n          });\n      };\n\n      // internal\n      PDFPage.prototype._context = function _context (val) {\n          if (val != null) {\n              this._opacity = val.opacity;\n              this._matrix = val.matrix;\n          } else {\n              return {\n                  opacity: this._opacity,\n                  matrix: this._matrix\n              };\n          }\n      };\n\n      PDFPage.prototype._toPage = function _toPage (p) {\n          var m = this._matrix;\n          var a = m[0], b = m[1], c = m[2], d = m[3], e = m[4], f = m[5];\n          return {\n              x: a*p.x + c*p.y + e,\n              y: b*p.x + d*p.y + f\n          };\n      };\n\n      return PDFPage;\n  }(PDFDictionary));\n\n  function unquote(str) {\n      return str.replace(/^\\s*(['\"])(.*)\\1\\s*$/, \"$2\");\n  }\n\n  function parseFontDef(fontdef) {\n      // XXX: this is very crude for now and buggy.  Proper parsing is quite involved.\n      var rx = /^\\s*((normal|italic)\\s+)?((normal|small-caps)\\s+)?((normal|bold|\\d+)\\s+)?(([0-9.]+)(px|pt))(\\/(([0-9.]+)(px|pt)|normal))?\\s+(.*?)\\s*$/i;\n      var m = rx.exec(fontdef);\n      if (!m) {\n          return { fontSize: 12, fontFamily: \"sans-serif\" };\n      }\n      var fontSize = m[8] ? parseInt(m[8], 10) : 12;\n      return {\n          italic     : m[2] && m[2].toLowerCase() == \"italic\",\n          variant    : m[4],\n          bold       : m[6] && /bold|700/i.test(m[6]),\n          fontSize   : fontSize,\n          lineHeight : m[12] ? m[12] == \"normal\" ? fontSize : parseInt(m[12], 10) : null,\n          fontFamily : m[14].split(/\\s*,\\s*/g).map(unquote)\n      };\n  }\n\n  function getFontURL$1(style) {\n      function mkFamily(name) {\n          if (style.bold) {\n              name += \"|bold\";\n          }\n          if (style.italic) {\n              name += \"|italic\";\n          }\n          return name.toLowerCase();\n      }\n      var fontFamily = style.fontFamily;\n      var name, url;\n      if (fontFamily instanceof Array) {\n          for (var i = 0; i < fontFamily.length; ++i) {\n              name = mkFamily(fontFamily[i]);\n              url = FONT_MAPPINGS[name];\n              if (url) {\n                  break;\n              }\n          }\n      } else {\n          url = FONT_MAPPINGS[fontFamily.toLowerCase()];\n      }\n      while (typeof url == \"function\") {\n          url = url();\n      }\n      if (!url) {\n          url = \"Times-Roman\";\n      }\n      return url;\n  }\n\n  var FONT_MAPPINGS = {\n      \"serif\"                    : \"Times-Roman\",\n      \"serif|bold\"               : \"Times-Bold\",\n      \"serif|italic\"             : \"Times-Italic\",\n      \"serif|bold|italic\"        : \"Times-BoldItalic\",\n      \"sans-serif\"               : \"Helvetica\",\n      \"sans-serif|bold\"          : \"Helvetica-Bold\",\n      \"sans-serif|italic\"        : \"Helvetica-Oblique\",\n      \"sans-serif|bold|italic\"   : \"Helvetica-BoldOblique\",\n      \"monospace\"                : \"Courier\",\n      \"monospace|bold\"           : \"Courier-Bold\",\n      \"monospace|italic\"         : \"Courier-Oblique\",\n      \"monospace|bold|italic\"    : \"Courier-BoldOblique\",\n      \"zapfdingbats\"             : \"ZapfDingbats\",\n      \"zapfdingbats|bold\"        : \"ZapfDingbats\",\n      \"zapfdingbats|italic\"      : \"ZapfDingbats\",\n      \"zapfdingbats|bold|italic\" : \"ZapfDingbats\"\n  };\n\n  function fontAlias(alias, name) {\n      alias = alias.toLowerCase();\n      FONT_MAPPINGS[alias] = function() {\n          return FONT_MAPPINGS[name];\n      };\n      FONT_MAPPINGS[alias + \"|bold\"] = function() {\n          return FONT_MAPPINGS[name + \"|bold\"];\n      };\n      FONT_MAPPINGS[alias + \"|italic\"] = function() {\n          return FONT_MAPPINGS[name + \"|italic\"];\n      };\n      FONT_MAPPINGS[alias + \"|bold|italic\"] = function() {\n          return FONT_MAPPINGS[name + \"|bold|italic\"];\n      };\n  }\n\n  // Let's define some common names to an appropriate replacement.\n  // These are overridable via pdf.defineFont, should the user want to\n  // include the proper versions.\n\n  fontAlias(\"Times New Roman\" , \"serif\");\n  fontAlias(\"Courier New\"     , \"monospace\");\n  fontAlias(\"Arial\"           , \"sans-serif\");\n  fontAlias(\"Helvetica\"       , \"sans-serif\");\n  fontAlias(\"Verdana\"         , \"sans-serif\");\n  fontAlias(\"Tahoma\"          , \"sans-serif\");\n  fontAlias(\"Georgia\"         , \"sans-serif\");\n  fontAlias(\"Monaco\"          , \"monospace\");\n  fontAlias(\"Andale Mono\"     , \"monospace\");\n\n  function defineFont(name, url) {\n      if (arguments.length == 1) {\n          for (var i in name) {\n              if (hasOwnProperty$1(name, i)) {\n                  defineFont(i, name[i]);\n              }\n          }\n      } else {\n          name = name.toLowerCase();\n          FONT_MAPPINGS[name] = url;\n\n          // special handling for DejaVu fonts: if they get defined,\n          // let them also replace the default families, for good\n          // Unicode support out of the box.\n          switch (name) {\n            case \"dejavu sans\"               : FONT_MAPPINGS[\"sans-serif\"]              = url; break;\n            case \"dejavu sans|bold\"          : FONT_MAPPINGS[\"sans-serif|bold\"]         = url; break;\n            case \"dejavu sans|italic\"        : FONT_MAPPINGS[\"sans-serif|italic\"]       = url; break;\n            case \"dejavu sans|bold|italic\"   : FONT_MAPPINGS[\"sans-serif|bold|italic\"]  = url; break;\n            case \"dejavu serif\"              : FONT_MAPPINGS[\"serif\"]                   = url; break;\n            case \"dejavu serif|bold\"         : FONT_MAPPINGS[\"serif|bold\"]              = url; break;\n            case \"dejavu serif|italic\"       : FONT_MAPPINGS[\"serif|italic\"]            = url; break;\n            case \"dejavu serif|bold|italic\"  : FONT_MAPPINGS[\"serif|bold|italic\"]       = url; break;\n            case \"dejavu mono\"               : FONT_MAPPINGS[\"monospace\"]               = url; break;\n            case \"dejavu mono|bold\"          : FONT_MAPPINGS[\"monospace|bold\"]          = url; break;\n            case \"dejavu mono|italic\"        : FONT_MAPPINGS[\"monospace|italic\"]        = url; break;\n            case \"dejavu mono|bold|italic\"   : FONT_MAPPINGS[\"monospace|bold|italic\"]   = url; break;\n          }\n      }\n  }\n\n  function mmul$1(a, b) {\n      var a1 = a[0], b1 = a[1], c1 = a[2], d1 = a[3], e1 = a[4], f1 = a[5];\n      var a2 = b[0], b2 = b[1], c2 = b[2], d2 = b[3], e2 = b[4], f2 = b[5];\n      return [\n          a1*a2 + b1*c2,          a1*b2 + b1*d2,\n          c1*a2 + d1*c2,          c1*b2 + d1*d2,\n          e1*a2 + f1*c2 + e2,     e1*b2 + f1*d2 + f2\n      ];\n  }\n\n  function isIdentityMatrix(m) {\n      return m[0] === 1 && m[1] === 0 && m[2] === 0 && m[3] === 1 && m[4] === 0 && m[5] === 0;\n  }\n\n  var TEXT_RENDERING_MODE$1 = {\n      fill           : 0,\n      stroke         : 1,\n      fillAndStroke  : 2,\n      invisible      : 3,\n      fillAndClip    : 4,\n      strokeAndClip  : 5,\n      fillStrokeClip : 6,\n      clip           : 7\n  };\n\n  /* eslint-disable no-multi-spaces, key-spacing, indent, camelcase, space-before-blocks, eqeqeq, brace-style */\n  /* eslint-disable space-infix-ops, space-before-function-paren, array-bracket-spacing, object-curly-spacing */\n  /* eslint-disable no-nested-ternary, max-params, default-case, no-else-return, no-empty */\n  /* eslint-disable no-param-reassign, no-var, block-scoped-var */\n\n\n  var DEFAULT_IMAGE_DPI = 300;\n  var TEXT_RENDERING_MODE = TEXT_RENDERING_MODE$1;\n\n  var DASH_PATTERNS = {\n      dash           : [ 4 ],\n      dashDot        : [ 4, 2, 1, 2 ],\n      dot            : [ 1, 2 ],\n      longDash       : [ 8, 2 ],\n      longDashDot    : [ 8, 2, 1, 2 ],\n      longDashDotDot : [ 8, 2, 1, 2, 1, 2 ],\n      solid          : []\n  };\n\n  var LINE_CAP = {\n      butt   : 0,\n      round  : 1,\n      square : 2\n  };\n\n  var LINE_JOIN = {\n      miter : 0,\n      round : 1,\n      bevel : 2\n  };\n\n  function render(group, callback) {\n      var fonts = [], images = {}, options = group.options;\n\n      function getOption(name, defval, hash) {\n          if (!hash) {\n              hash = options;\n          }\n          if (hash.pdf && hash.pdf[name] != null) {\n              return hash.pdf[name];\n          }\n          return defval;\n      }\n\n      var multiPage = getOption(\"multiPage\");\n      var imgDPI = getOption(\"imgDPI\", DEFAULT_IMAGE_DPI);\n\n      clearImageCache();\n\n      group.traverse(function(element){\n          dispatch({\n              Image: function(element) {\n                  var url = element.src();\n                  var size = element.bbox().size;\n                  if (imgDPI) {\n                      var prev = images[url];\n                      size = {\n                        width: Math.ceil(size.width * imgDPI / 72),\n                        height: Math.ceil(size.height * imgDPI / 72)\n                      };\n\n                      if (prev) {\n                        size.width = Math.max(prev.width, size.width);\n                        size.height = Math.max(prev.height, size.height);\n                      }\n                  }\n\n                  images[url] = size;\n              },\n              Text: function(element) {\n                  var style = parseFontDef(element.options.font);\n                  var url = getFontURL$1(style);\n                  if (fonts.indexOf(url) < 0) {\n                      fonts.push(url);\n                  }\n              }\n          }, element);\n      });\n\n      function doIt() {\n          if (--count > 0) {\n              return;\n          }\n\n          var pdf = new (PDFDocument)({\n              producer  : getOption(\"producer\"),\n              title     : getOption(\"title\"),\n              author    : getOption(\"author\"),\n              subject   : getOption(\"subject\"),\n              keywords  : getOption(\"keywords\"),\n              creator   : getOption(\"creator\"),\n              date      : getOption(\"date\"),\n\n              autoPrint : getOption(\"autoPrint\")\n          });\n\n          function drawPage(group) {\n              var options = group.options;\n\n              var tmp = optimize(group);\n              var bbox = tmp.bbox;\n              group = tmp.root;\n              // var tmp, bbox;\n\n              var paperSize = getOption(\"paperSize\", getOption(\"paperSize\", \"auto\"), options), addMargin = false;\n              if (paperSize == \"auto\") {\n                  if (bbox) {\n                      var size = bbox.getSize();\n                      paperSize = [ size.width, size.height ];\n                      addMargin = true;\n                      var origin = bbox.getOrigin();\n                      tmp = new Group();\n                      tmp.transform(new Matrix(1, 0, 0, 1, -origin.x, -origin.y));\n                      tmp.append(group);\n                      group = tmp;\n                  }\n                  else {\n                      paperSize = \"A4\";\n                  }\n              }\n\n              var page;\n              page = pdf.addPage({\n                  paperSize : paperSize,\n                  margin    : getOption(\"margin\", getOption(\"margin\"), options),\n                  addMargin : addMargin,\n                  landscape : getOption(\"landscape\", getOption(\"landscape\", false), options)\n              });\n              drawElement(group, page, pdf);\n          }\n\n          if (multiPage) {\n              group.children.forEach(drawPage);\n          } else {\n              drawPage(group);\n          }\n\n          callback(pdf.render(), pdf);\n      }\n\n      var count = 2;\n      loadFonts(fonts, doIt);\n      loadImages(images, doIt, {\n          jpegQuality : getOption(\"jpegQuality\", 0.92),\n          keepPNG     : getOption(\"keepPNG\", false)\n      });\n  }\n\n  function toDataURL(group, callback) {\n      render(group, function(data){\n          callback(\"data:application/pdf;base64,\" + data.base64());\n      });\n  }\n\n  function toBlob(group, callback) {\n      render(group, function(data){\n          callback(new window.Blob([ data.get() ], { type: \"application/pdf\" }));\n      });\n  }\n\n  function saveAs(group, filename, proxy, callback) {\n      // XXX: Safari has Blob, but does not support the download attribute\n      //      so we'd end up converting to dataURL and using the proxy anyway.\n      if (window.Blob && !support$1.browser.safari) {\n          toBlob(group, function(blob){\n              saveAs$1({ dataURI: blob, fileName: filename });\n              if (callback) {\n                  callback(blob);\n              }\n          });\n      } else {\n          toDataURL(group, function(dataURL){\n              saveAs$1({ dataURI: dataURL, fileName: filename, proxyURL: proxy });\n              if (callback) {\n                  callback(dataURL);\n              }\n          });\n      }\n  }\n\n  function dispatch(handlers, element) {\n      var handler = handlers[element.nodeType];\n      if (handler) {\n          return handler.call.apply(handler, arguments);\n      }\n      return element;\n  }\n\n  function drawElement(element, page, pdf) {\n      if (element.options._pdfDebug) {\n          page.comment(\"BEGIN: \" + element.options._pdfDebug);\n      }\n\n      var transform = element.transform();\n      var opacity = element.opacity();\n\n      page.save();\n\n      if (opacity != null && opacity < 1) {\n          page.setOpacity(opacity);\n      }\n\n      setStrokeOptions(element, page, pdf);\n      setFillOptions(element, page, pdf);\n\n      if (transform) {\n          var m = transform.matrix();\n          page.transform(m.a, m.b, m.c, m.d, m.e, m.f);\n      }\n\n      setClipping$1(element, page, pdf);\n\n      dispatch({\n          Path      : drawPath,\n          MultiPath : drawMultiPath,\n          Circle    : drawCircle,\n          Arc       : drawArc,\n          Text      : drawText$1,\n          Image     : drawImage,\n          Group     : drawGroup,\n          Rect      : drawRect\n      }, element, page, pdf);\n\n      page.restore();\n\n      if (element.options._pdfDebug) {\n          page.comment(\"END: \" + element.options._pdfDebug);\n      }\n  }\n\n  function setStrokeOptions(element, page) {\n      var stroke = element.stroke && element.stroke();\n      if (!stroke) {\n          return;\n      }\n\n      var color = stroke.color;\n      if (color) {\n          color = parseColor$1(color);\n          if (color == null) {\n              return; // no stroke\n          }\n          page.setStrokeColor(color.r, color.g, color.b);\n          if (color.a != 1) {\n              page.setStrokeOpacity(color.a);\n          }\n      }\n\n      var width = stroke.width;\n      if (width != null) {\n          if (width === 0) {\n              return; // no stroke\n          }\n          page.setLineWidth(width);\n      }\n\n      var dashType = stroke.dashType;\n      if (dashType) {\n          page.setDashPattern(DASH_PATTERNS[dashType], 0);\n      }\n\n      var lineCap = stroke.lineCap;\n      if (lineCap) {\n          page.setLineCap(LINE_CAP[lineCap]);\n      }\n\n      var lineJoin = stroke.lineJoin;\n      if (lineJoin) {\n          page.setLineJoin(LINE_JOIN[lineJoin]);\n      }\n\n      var opacity = stroke.opacity;\n      if (opacity != null) {\n          page.setStrokeOpacity(opacity);\n      }\n  }\n\n  function setFillOptions(element, page) {\n      var fill = element.fill && element.fill();\n      if (!fill) {\n          return;\n      }\n\n      if (fill instanceof Gradient) {\n          return;\n      }\n\n      var color = fill.color;\n      if (color) {\n          color = parseColor$1(color);\n          if (color == null) {\n              return; // no fill\n          }\n          page.setFillColor(color.r, color.g, color.b);\n          if (color.a != 1) {\n              page.setFillOpacity(color.a);\n          }\n      }\n\n      var opacity = fill.opacity;\n      if (opacity != null) {\n          page.setFillOpacity(opacity);\n      }\n  }\n\n  function setClipping$1(element, page, pdf) {\n      // XXX: only Path supported at the moment.\n      var clip = element.clip();\n      if (clip) {\n          _drawPath(clip, page, pdf);\n          page.clip();\n          // page.setStrokeColor(Math.random(), Math.random(), Math.random());\n          // page.setLineWidth(1);\n          // page.stroke();\n      }\n  }\n\n  function shouldDraw(thing) {\n      return (thing &&\n              (thing instanceof Gradient ||\n               (thing.color && !/^(none|transparent)$/i.test(thing.color) &&\n                (thing.width == null || thing.width > 0) &&\n                (thing.opacity == null || thing.opacity > 0))));\n  }\n\n  function maybeGradient(element, page, pdf, stroke) {\n      var fill = element.fill();\n      if (fill instanceof Gradient) {\n          if (stroke) {\n              page.clipStroke();\n          } else {\n              page.clip();\n          }\n          var isRadial = fill instanceof RadialGradient;\n          var start, end;\n          if (isRadial) {\n              start = { x: fill.center().x , y: fill.center().y , r: 0 };\n              end   = { x: fill.center().x , y: fill.center().y , r: fill.radius() };\n          } else {\n              start = { x: fill.start().x , y: fill.start().y };\n              end   = { x: fill.end().x   , y: fill.end().y   };\n          }\n\n          var stops = fill.stops.elements().map(function(stop){\n              var offset = stop.offset();\n              if (/%$/.test(offset)) {\n                  offset = parseFloat(offset) / 100;\n              } else {\n                  offset = parseFloat(offset);\n              }\n              var color = parseColor$1(stop.color());\n              color.a *= stop.opacity();\n              return {\n                  offset: offset,\n                  color: color\n              };\n          });\n\n          // Duplicats first and last stop to fix\n          // https://github.com/telerik/kendo-ui-core/issues/1782\n          stops.unshift(stops[0]);\n          stops.push(stops[stops.length - 1]);\n\n          var gradient = {\n              userSpace : fill.userSpace(),\n              type      : isRadial ? \"radial\" : \"linear\",\n              start     : start,\n              end       : end,\n              stops     : stops\n          };\n          var box = element.rawBBox();\n          var tl = box.topLeft(), size = box.getSize();\n          box = {\n              left   : tl.x,\n              top    : tl.y,\n              width  : size.width,\n              height : size.height\n          };\n          page.gradient(gradient, box);\n          return true;\n      }\n  }\n\n  function maybeFillStroke(element, page, pdf) {\n      if (shouldDraw(element.fill()) && shouldDraw(element.stroke())) {\n          if (!maybeGradient(element, page, pdf, true)) {\n              page.fillStroke();\n          }\n      } else if (shouldDraw(element.fill())) {\n          if (!maybeGradient(element, page, pdf, false)) {\n              page.fill();\n          }\n      } else if (shouldDraw(element.stroke())) {\n          page.stroke();\n      } else {\n          // we should not get here; the path should have been\n          // optimized away.  but let's be prepared.\n          page.nop();\n      }\n  }\n\n  function maybeDrawRect(path, page) {\n      var segments = path.segments;\n      if (segments.length == 4 && path.options.closed) {\n          // detect if this path looks like a rectangle parallel to the axis\n          var a = [];\n          for (var i = 0; i < segments.length; ++i) {\n              if (segments[i].controlIn()) { // has curve?\n                  return false;\n              }\n              a[i] = segments[i].anchor();\n          }\n          // it's a rectangle if the y/x/y/x or x/y/x/y coords of\n          // consecutive points are the same.\n          var isRect = (\n              a[0].y == a[1].y && a[1].x == a[2].x && a[2].y == a[3].y && a[3].x == a[0].x\n          ) || (\n              a[0].x == a[1].x && a[1].y == a[2].y && a[2].x == a[3].x && a[3].y == a[0].y\n          );\n          if (isRect) {\n              // this saves a bunch of instructions in PDF:\n              // moveTo, lineTo, lineTo, lineTo, close -> rect.\n              page.rect(a[0].x, a[0].y,\n                        a[2].x - a[0].x /*width*/,\n                        a[2].y - a[0].y /*height*/);\n              return true;\n          }\n      }\n  }\n\n  function _drawPath(element, page, pdf) {\n      var segments = element.segments;\n      if (segments.length === 0) {\n          return;\n      }\n      if (!maybeDrawRect(element, page, pdf)) {\n          for (var prev, i = 0; i < segments.length; ++i) {\n              var seg = segments[i];\n              var anchor = seg.anchor();\n              if (!prev) {\n                  page.moveTo(anchor.x, anchor.y);\n              } else {\n                  var prevOut = prev.controlOut();\n                  var controlIn = seg.controlIn();\n                  if (prevOut && controlIn) {\n                      page.bezier(\n                          prevOut.x   , prevOut.y,\n                          controlIn.x , controlIn.y,\n                          anchor.x    , anchor.y\n                      );\n                  } else {\n                      page.lineTo(anchor.x, anchor.y);\n                  }\n              }\n              prev = seg;\n          }\n          if (element.options.closed) {\n              page.close();\n          }\n      }\n  }\n\n  function drawPath(element, page, pdf) {\n      _drawPath(element, page, pdf);\n      maybeFillStroke(element, page, pdf);\n  }\n\n  function drawMultiPath(element, page, pdf) {\n      var paths = element.paths;\n      for (var i = 0; i < paths.length; ++i) {\n          _drawPath(paths[i], page, pdf);\n      }\n      maybeFillStroke(element, page, pdf);\n  }\n\n  function drawCircle(element, page, pdf) {\n      var g = element.geometry();\n      page.circle(g.center.x, g.center.y, g.radius);\n      maybeFillStroke(element, page, pdf);\n  }\n\n  function drawArc(element, page, pdf) {\n      var points = element.geometry().curvePoints();\n      page.moveTo(points[0].x, points[0].y);\n      for (var i = 1; i < points.length;) {\n          page.bezier(\n              points[i].x, points[i++].y,\n              points[i].x, points[i++].y,\n              points[i].x, points[i++].y\n          );\n      }\n      maybeFillStroke(element, page, pdf);\n  }\n\n  function drawText$1(element, page) {\n      var style = parseFontDef(element.options.font);\n      var pos = element._position;\n      var mode;\n\n      page.transform(1, 0, 0, -1, pos.x, pos.y + style.fontSize);\n\n      var draw = function (renderMode) {\n          page.beginText();\n          page.setFont(getFontURL$1(style), style.fontSize);\n          page.setTextRenderingMode(renderMode);\n          page.showText(element.content(), element._pdfRect ? element._pdfRect.width() : null);\n      };\n\n      if (element.fill() && element.stroke()) {\n          mode = TEXT_RENDERING_MODE.fillAndStroke;\n          if (element.options.paintOrder === \"stroke\") {\n              draw(TEXT_RENDERING_MODE.stroke);\n              mode = TEXT_RENDERING_MODE.fill;\n          }\n      } else if (element.fill()) {\n          mode = TEXT_RENDERING_MODE.fill;\n      } else if (element.stroke()) {\n          mode = TEXT_RENDERING_MODE.stroke;\n      }\n\n      draw(mode);\n      page.endText();\n  }\n\n  function drawGroup(element, page, pdf) {\n      if (element._pdfLink) {\n          page.addLink(element._pdfLink.url, element._pdfLink);\n      }\n      var children = element.children;\n      for (var i = 0; i < children.length; ++i) {\n          drawElement(children[i], page, pdf);\n      }\n  }\n\n  function drawImage(element, page) {\n      var url = element.src();\n      if (!url) {\n          return;\n      }\n\n      var rect = element.rect();\n      var tl = rect.getOrigin();\n      var sz = rect.getSize();\n      page.transform(sz.width, 0, 0, -sz.height, tl.x, tl.y + sz.height);\n      page.drawImage(url);\n  }\n\n  function drawRect(element, page, pdf) {\n      var geometry = element.geometry();\n      var ref = geometry.cornerRadius;\n      var rx = ref[0];\n      var ry = ref[1];\n      if (rx === 0 && ry === 0) {\n          page.rect(geometry.origin.x, geometry.origin.y, geometry.size.width, geometry.size.height);\n          maybeFillStroke(element, page, pdf);\n      } else {\n          drawPath(Path.fromRect(geometry, element.options), page, pdf);\n      }\n  }\n\n  function parseColor$1(value) {\n      var color = parseColor$2(value, true);\n      return color ? color.toRGB() : null;\n  }\n\n  function optimize(root) {\n      var clipbox = false;\n      var matrix = Matrix.unit();\n      var currentBox = null;\n      var changed;\n      do {\n          changed = false;\n          root = opt(root);\n      } while (root && changed);\n      return { root: root, bbox: currentBox };\n\n      function change(newShape) {\n          changed = true;\n          return newShape;\n      }\n\n      function visible(shape) {\n          return (shape.visible() && shape.opacity() > 0 &&\n                  ( shouldDraw(shape.fill()) ||\n                    shouldDraw(shape.stroke()) ));\n      }\n\n      function optArray(a) {\n          var b = [];\n          for (var i = 0; i < a.length; ++i) {\n              var el = opt(a[i]);\n              if (el != null) {\n                  b.push(el);\n              }\n          }\n          return b;\n      }\n\n      function withClipping(shape, f) {\n          var saveclipbox = clipbox;\n          var savematrix = matrix;\n\n          if (shape.transform()) {\n              matrix = matrix.multiplyCopy(shape.transform().matrix());\n          }\n\n          var clip = shape.clip();\n          if (clip && typeof clip.bbox === 'function') {\n              clip = clip.bbox();\n              if (clip) {\n                  clip = clip.bbox(matrix);\n                  clipbox = clipbox ? Rect$1.intersect(clipbox, clip) : clip;\n              }\n          }\n\n          try {\n              return f();\n          }\n          finally {\n              clipbox = saveclipbox;\n              matrix = savematrix;\n          }\n      }\n\n      function inClipbox(shape) {\n          if (clipbox == null) {\n              return false;\n          }\n\n          var box = shape.rawBBox();\n          if (box) {\n              box = box.bbox(matrix);\n          }\n\n          if (clipbox && box) {\n              box = Rect$1.intersect(box, clipbox);\n          }\n          return box;\n      }\n\n      function opt(shape) {\n          return withClipping(shape, function(){\n              if (!(shape instanceof Group || shape instanceof MultiPath)) {\n                  var box = inClipbox(shape);\n                  if (!box) {\n                      return change(null);\n                  }\n                  currentBox = currentBox ? Rect$1.union(currentBox, box) : box;\n              }\n              return dispatch({\n                  Path: function(shape) {\n                      if (shape.segments.length === 0 || !visible(shape)) {\n                          return change(null);\n                      }\n                      return shape;\n                  },\n                  MultiPath: function(shape) {\n                      if (!visible(shape)) {\n                          return change(null);\n                      }\n                      var el = new MultiPath(shape.options);\n                      el.paths = optArray(shape.paths);\n                      if (el.paths.length === 0) {\n                          return change(null);\n                      }\n                      return el;\n                  },\n                  Circle: function(shape) {\n                      if (!visible(shape)) {\n                          return change(null);\n                      }\n                      return shape;\n                  },\n                  Arc: function(shape) {\n                      if (!visible(shape)) {\n                          return change(null);\n                      }\n                      return shape;\n                  },\n                  Text: function(shape) {\n                      if (!/\\S/.test(shape.content()) || !visible(shape)) {\n                          return change(null);\n                      }\n                      return shape;\n                  },\n                  Image: function(shape) {\n                      if (!(shape.visible() && shape.opacity() > 0)) {\n                          return change(null);\n                      }\n                      return shape;\n                  },\n                  Group: function(shape) {\n                      if (!(shape.visible() && shape.opacity() > 0)) {\n                          return change(null);\n                      }\n                      var el = new Group(shape.options);\n                      el.children = optArray(shape.children);\n                      el._pdfLink = shape._pdfLink;\n                      if (shape !== root && el.children.length === 0 && !shape._pdfLink) {\n                          return change(null);\n                      }\n                      return el;\n                  },\n                  Rect: function(shape) {\n                      if (!visible(shape)) {\n                          return change(null);\n                      }\n                      return shape;\n                  }\n              }, shape);\n          });\n      }\n  }\n\n  function exportPDF(group, options) {\n      var promise = createPromise();\n\n      for (var i in options) {\n          if (i == \"margin\" && group.options.pdf && group.options.pdf._ignoreMargin) {\n              // This hackish option is set by the page breaking code in drawDOM.  The idea is\n              // that margin is already taken into account there (that's required to do proper\n              // page breaking) and we don't want to set it again here, as it would double the\n              // top-left margin, and truncate the content on bottom/right.\n              continue;\n          }\n          group.options.set(\"pdf.\" + i, options[i]);\n      }\n\n      toDataURL(group, promise.resolve);\n\n      return promise;\n  }\n\n  // XXX: the duplication is in order to keep exportPDF return a data\n  // URI, which is what previous versions do.  Currently only IE9 does\n  // not support Blob, IMO we should switch to Blob by default\n  // everywhere.\n  function exportPDFToBlob(group, options) {\n      var promise = createPromise();\n\n      for (var i in options) {\n          if (i == \"margin\" && group.options.pdf && group.options.pdf._ignoreMargin) {\n              // This hackish option is set by the page breaking code in drawDOM.  The idea is\n              // that margin is already taken into account there (that's required to do proper\n              // page breaking) and we don't want to set it again here, as it would double the\n              // top-left margin, and truncate the content on bottom/right.\n              continue;\n          }\n          group.options.set(\"pdf.\" + i, options[i]);\n      }\n\n      if (window.Blob && !support$1.browser.safari) {\n          toBlob(group, promise.resolve);\n      } else {\n          toDataURL(group, promise.resolve);\n      }\n\n      return promise;\n  }\n\n  var pdf = /*#__PURE__*/Object.freeze({\n      __proto__: null,\n      BinaryStream: BinaryStream,\n      Document: PDFDocument,\n      TEXT_RENDERING_MODE: TEXT_RENDERING_MODE$1,\n      clearImageCache: clearImageCache,\n      defineFont: defineFont,\n      exportPDF: exportPDF,\n      exportPDFToBlob: exportPDFToBlob,\n      getFontURL: getFontURL$1,\n      getPaperOptions: getPaperOptions,\n      loadFonts: loadFonts,\n      loadImages: loadImages,\n      parseFontDef: parseFontDef,\n      render: render,\n      saveAs: saveAs,\n      toBlob: toBlob,\n      toDataURL: toDataURL\n  });\n\n  /* eslint-disable no-multi-spaces, key-spacing, indent, camelcase, space-before-blocks, eqeqeq, brace-style */\n  /* eslint-disable space-infix-ops, space-before-function-paren, array-bracket-spacing, object-curly-spacing */\n  /* eslint-disable no-nested-ternary, max-params, default-case, no-else-return, no-empty, yoda */\n  /* eslint-disable no-param-reassign, no-var, block-scoped-var */\n\n\n  var browser = support$1.browser || {};\n  /*\n\n    XXX: to test:\n\n    - cloneNodes function:\n      - drawing document containing canvas with page breaking\n      - drawing document with named radio <input>-s (should not clear selection)\n      - IE9/IE10 don't support el.dataset; do they copy user data?\n\n    - repeating table headers/footers on page breaking\n\n    - forceBreak, keepTogether\n\n    - avoidLinks\n\n   */\n\n  /* -----[ local vars ]----- */\n\n  function slice(thing) {\n      return Array.prototype.slice.call(thing);\n  }\n\n  var KENDO_PSEUDO_ELEMENT = \"KENDO-PSEUDO-ELEMENT\";\n  var KENDO_BULLET_TYPE = 'data-kendo-bullet-type';\n\n  var IMAGE_CACHE = {};\n\n  var nodeInfo = {};\n  nodeInfo._root = nodeInfo;\n\n  /* -----[ Custom Text node to speed up rendering in PDF ]----- */\n\n  var inBrowser = typeof window !== 'undefined';\n  var microsoft = inBrowser ? browser.msie || browser.edge : false;\n\n  var TextRect = (function (Text) {\n    function TextRect(str, rect, options) {\n          Text.call(this, str, rect.getOrigin(), options);\n          this._pdfRect = rect;\n      }\n\n    if ( Text ) TextRect.__proto__ = Text;\n    TextRect.prototype = Object.create( Text && Text.prototype );\n    TextRect.prototype.constructor = TextRect;\n      TextRect.prototype.rect = function rect () {\n          // this is the crux of it: we can avoid a call to\n          // measure(), which is what the base class does, since we\n          // already know the rect.  measure() is s-l-o-w.\n          return this._pdfRect;\n      };\n      TextRect.prototype.rawBBox = function rawBBox () {\n          // also let's avoid creating a new rectangle.\n          return this._pdfRect;\n      };\n\n    return TextRect;\n  }(Text));\n\n  function addClass(el, cls) {\n      if (el.classList) {\n          el.classList.add(cls);\n      } else {\n          el.className += \" \" + cls;\n      }\n  }\n\n  function removeClass(el, cls) {\n      if (el.classList) {\n          el.classList.remove(cls);\n      } else {\n          el.className = el.className.split(/\\s+/).reduce(function(a, word){\n              if (word != cls) {\n                  a.push(word);\n              }\n              return a;\n          }, []).join(\" \");\n      }\n  }\n\n  function setCSS(el, styles) {\n      Object.keys(styles).forEach(function(key){\n          el.style[key] = styles[key];\n      });\n  }\n\n  var matches = typeof Element !== \"undefined\" && Element.prototype && (function(p){\n      if (p.matches) {\n          return function(el, selector) { return el.matches(selector); };\n      }\n      if (p.webkitMatchesSelector) {\n          return function(el, selector) { return el.webkitMatchesSelector(selector); };\n      }\n      if (p.mozMatchesSelector) {\n          return function(el, selector) { return el.mozMatchesSelector(selector); };\n      }\n      if (p.msMatchesSelector) {\n          return function(el, selector) { return el.msMatchesSelector(selector); };\n      }\n      return function(s) {\n  \treturn [].indexOf.call(document.querySelectorAll(s), this) !== -1;\n      };\n  })(Element.prototype);\n\n  function closest(el, selector) {\n      if (el.closest) {\n          return el.closest(selector);\n      }\n      // IE: stringifying rather than simply comparing with `document`,\n      // which is not iframe-proof and fails in editor export —\n      // https://github.com/telerik/kendo/issues/6721\n      while (el && !/^\\[object (?:HTML)?Document\\]$/.test(String(el))) {\n          if (el.nodeType == 1 /* Element */ && matches(el, selector)) {\n              return el;\n          }\n          el = el.parentNode;\n      }\n  }\n\n  // clone nodes ourselves, so that we redraw <canvas> (DOM or\n  // jQuery clone will not)\n  var cloneNodes = (function($){\n      if ($) {\n          // if we have Kendo and jQuery, use this version as it will\n          // maintain proper links between cloned element and Kendo\n          // widgets (i.e. it clones jQuery data(), which isn't the same\n          // as element's data attributes).\n          // https://github.com/telerik/kendo-ui-core/issues/2750\n          return function cloneNodes(el) {\n              var clone = el.cloneNode(false);\n              if (el.nodeType == 1 /* Element */) {\n                  var $el = $(el), $clone = $(clone), i;\n                  var data = $el.data();\n                  for (i in data) {\n                      $clone.data(i, data[i]);\n                  }\n                  if (/^canvas$/i.test(el.tagName)) {\n                      clone.getContext(\"2d\").drawImage(el, 0, 0);\n                  } else if (/^(?:input|select|textarea|option)$/i.test(el.tagName)) {\n                      // drop the name attributes so that we don't affect the selection of the\n                      // original nodes (i.e. checked status of radio buttons) when we insert our copy\n                      // into the DOM.  https://github.com/telerik/kendo/issues/5409\n                      clone.removeAttribute(\"id\");\n                      clone.removeAttribute(\"name\");\n                      if (!/^textarea$/i.test(el.tagName)) {\n                          clone.value = el.value;\n                      }\n                      clone.checked = el.checked;\n                      clone.selected = el.selected;\n                  }\n\n                  if (el._kendoExportVisual) {\n                      clone._kendoExportVisual = el._kendoExportVisual;\n                  }\n\n                  for (i = el.firstChild; i; i = i.nextSibling) {\n                      clone.appendChild(cloneNodes(i));\n                  }\n              }\n              return clone;\n          };\n      } else {\n          // the no-jQuery version\n          return function cloneNodes(el) {\n              var clone = (function dive(node){\n                  var clone = node.cloneNode(false);\n                  if (node._kendoExportVisual) {\n                      clone._kendoExportVisual = node._kendoExportVisual;\n                  }\n                  for (var i = node.firstChild; i; i = i.nextSibling) {\n                      clone.appendChild(dive(i));\n                  }\n                  return clone;\n              })(el);\n\n              // re-draw canvases - https://github.com/telerik/kendo/issues/4872\n              var canvases = el.querySelectorAll(\"canvas\");\n              if (canvases.length) {\n                  slice(clone.querySelectorAll(\"canvas\")).forEach(function (canvas, i) {\n                      canvas.getContext(\"2d\").drawImage(canvases[i], 0, 0);\n                  });\n              }\n\n              // remove \"name\" attributes from <input> elements -\n              // https://github.com/telerik/kendo/issues/5409\n              var orig = el.querySelectorAll(\"input, select, textarea, option\");\n              slice(clone.querySelectorAll(\"input, select, textarea, option\")).forEach(function (el, i) {\n                  el.removeAttribute(\"id\");\n                  el.removeAttribute(\"name\");\n                  if (!/^textarea$/i.test(el.tagName)) {\n                      el.value = orig[i].value;\n                  }\n                  el.checked = orig[i].checked;\n                  el.selected = orig[i].selected;\n              });\n\n              return clone;\n          };\n      }\n  })(typeof window !== \"undefined\" && window.kendo && window.kendo.jQuery);\n\n  function getXY(thing) {\n      if (typeof thing == \"number\") {\n          return { x: thing, y: thing };\n      }\n      if (Array.isArray(thing)) {\n          return { x: thing[0], y: thing[1] };\n      }\n      return { x: thing.x, y: thing.y };\n  }\n\n  function drawDOM(element, options) {\n      if (!options) {\n          options = {};\n      }\n      var promise = createPromise();\n\n      if (!element) {\n          return promise.reject(\"No element to export\");\n      }\n\n      if (typeof window.getComputedStyle != \"function\") {\n          throw new Error(\"window.getComputedStyle is missing.  You are using an unsupported browser, or running in IE8 compatibility mode.  Drawing HTML is supported in Chrome, Firefox, Safari and IE9+.\");\n      }\n\n      defineFont(getFontFaces(element.ownerDocument));\n\n      var scale = getXY(options.scale || 1);\n\n      function doOne(element) {\n          var group = new Group();\n\n          // translate to start of page\n          var pos = element.getBoundingClientRect();\n          setTransform(group, [\n              scale.x,\n              0,\n              0,\n              scale.y,\n              (-pos.left * scale.x),\n              (-pos.top * scale.y)\n          ]);\n\n          nodeInfo._clipbox = false;\n          nodeInfo._matrix = Matrix.unit();\n          nodeInfo._stackingContext = {\n              element: element,\n              group: group\n          };\n\n          if (options.avoidLinks === true) {\n              nodeInfo._avoidLinks = \"a\";\n          } else {\n              nodeInfo._avoidLinks = options.avoidLinks;\n          }\n\n          addClass(element, \"k-pdf-export\");\n          renderElement(element, group);\n          removeClass(element, \"k-pdf-export\");\n\n          return group;\n      }\n\n      cacheImages([ element ], function(){\n          var forceBreak = options && options.forcePageBreak;\n          var hasPaperSize = options && options.paperSize && options.paperSize != \"auto\";\n          var paperOptions = getPaperOptions(function(key, def){\n              if (key == \"paperSize\") {\n                  // PDF.getPaperOptions croaks on \"auto\", just pass dummy A4 as we might\n                  // still be interested in margins.\n                  return hasPaperSize ? options[key] : \"A4\";\n              }\n              return key in options ? options[key] : def;\n          });\n          var pageWidth = hasPaperSize && paperOptions.paperSize[0];\n          var pageHeight = hasPaperSize && paperOptions.paperSize[1];\n          var margin = options.margin && paperOptions.margin;\n          var hasMargin = Boolean(margin);\n          if (forceBreak || pageHeight) {\n              if (!margin) {\n                  margin = { left: 0, top: 0, right: 0, bottom: 0 };\n              }\n\n              // we want paper size and margin to be unaffected by\n              // scaling in the output, so we have to reverse-scale\n              // before our calculations begin.\n              if (pageWidth)  { pageWidth  /= scale.x; }\n              if (pageHeight) { pageHeight /= scale.y; }\n              margin.left   /= scale.x;\n              margin.right  /= scale.x;\n              margin.top    /= scale.y;\n              margin.bottom /= scale.y;\n\n              var group = new Group({\n                  pdf: {\n                      multiPage     : true,\n                      paperSize     : hasPaperSize ? paperOptions.paperSize : \"auto\",\n                      _ignoreMargin : hasMargin // HACK!  see exportPDF in pdf/drawing.js\n                  }\n              });\n              handlePageBreaks(\n                  function(x) {\n                      if (options.progress) {\n                          var canceled = false, pageNum = 0;\n                          (function next(){\n                              if (pageNum < x.pages.length) {\n                                  var page = doOne(x.pages[pageNum]);\n                                  group.append(page);\n                                  options.progress({\n                                      page: page,\n                                      pageNum: ++pageNum,\n                                      totalPages: x.pages.length,\n                                      cancel: function() {\n                                          canceled = true;\n                                      }\n                                  });\n                                  if (!canceled) {\n                                      setTimeout(next);\n                                  } else {\n                                      // XXX: should we also fail() the deferred object?\n                                      x.container.parentNode.removeChild(x.container);\n                                  }\n                              } else {\n                                  x.container.parentNode.removeChild(x.container);\n                                  promise.resolve(group);\n                              }\n                          })();\n                      } else {\n                          x.pages.forEach(function(page){\n                              group.append(doOne(page));\n                          });\n                          x.container.parentNode.removeChild(x.container);\n                          promise.resolve(group);\n                      }\n                  },\n                  element,\n                  forceBreak,\n                  pageWidth ? pageWidth - margin.left - margin.right : null,\n                  pageHeight ? pageHeight - margin.top - margin.bottom : null,\n                  margin,\n                  options\n              );\n          } else {\n              promise.resolve(doOne(element));\n          }\n      });\n\n      function makeTemplate(template$1) {\n          if (template$1 != null) {\n              if (typeof template$1 == \"string\") {\n                  template$1 = template(template$1.replace(/^\\s+|\\s+$/g, \"\"));\n              }\n              if (typeof template$1 == \"function\") {\n                  return function(data) {\n                      var el = template$1(data);\n                      if (el && typeof el == \"string\") {\n                          var div = document.createElement(\"div\");\n                          setInnerHTML(div, el);\n                          el = div.firstElementChild;\n                      }\n                      return el;\n                  };\n              }\n              // assumed DOM element\n              return function() {\n                  return template$1.cloneNode(true);\n              };\n          }\n      }\n\n      function handlePageBreaks(callback, element, forceBreak, pageWidth, pageHeight, margin, options) {\n          var template = makeTemplate(options.template);\n          var doc = element.ownerDocument;\n          var pages = [];\n          var copy = options._destructive ? element : cloneNodes(element);\n          var container = doc.createElement(\"KENDO-PDF-DOCUMENT\");\n          var adjust = 0;\n\n          // make sure <tfoot> elements are at the end (Grid widget\n          // places TFOOT before TBODY, tricking our algorithm to\n          // insert a page break right after the header).\n          // https://github.com/telerik/kendo/issues/4699\n          slice(copy.querySelectorAll(\"tfoot\")).forEach(function(tfoot){\n              tfoot.parentNode.appendChild(tfoot);\n          });\n\n          // remember the index of each LI from an ordered list.\n          // we'll use it to reconstruct the proper numbering.\n          slice(copy.querySelectorAll(\"ol\")).forEach(function(ol){\n              slice(ol.children).forEach(function(li, index){\n                  li.setAttribute(\"kendo-split-index\", index);\n              });\n          });\n\n          setCSS(container, {\n              display   : \"block\",\n              position  : \"absolute\",\n              boxSizing : \"content-box\",\n              left      : \"-10000px\",\n              top       : \"-10000px\"\n          });\n\n          if (pageWidth) {\n              // subtle: if we don't set the width *and* margins here, the layout in this\n              // container will be different from the one in our final page elements, and we'll\n              // split at the wrong places.\n              setCSS(container, {\n                  width        : pageWidth + \"px\",\n                  paddingLeft  : margin.left + \"px\",\n                  paddingRight : margin.right + \"px\"\n              });\n\n              // when the first element has a margin-top (i.e. a <h1>) the page will be\n              // inadvertently enlarged by that number (the browser will report the container's\n              // bounding box top to start at the element's top, rather than including its\n              // margin).  Adding overflow: hidden seems to fix it.\n              //\n              // to understand the difference, try the following snippets in your browser:\n              //\n              // 1. <div style=\"background: yellow\">\n              //      <h1 style=\"margin: 3em\">Foo</h1>\n              //    </div>\n              //\n              // 2. <div style=\"background: yellow; overflow: hidden\">\n              //      <h1 style=\"margin: 3em\">Foo</h1>\n              //    </div>\n              //\n              // this detail is not important when automatic page breaking is not requested, hence\n              // doing it only if pageWidth is defined.\n              setCSS(copy, { overflow: \"hidden\" });\n          }\n\n          element.parentNode.insertBefore(container, element);\n          container.appendChild(copy);\n\n          // With cache disabled, images will still have height zero until their `complete` attribute\n          // is true.  `whenImagesAreActuallyLoaded` will wait for it.\n          if (options.beforePageBreak) {\n              whenImagesAreActuallyLoaded([ container ], function() {\n                  options.beforePageBreak(container, doPageBreak);\n              });\n          } else {\n              whenImagesAreActuallyLoaded([ container ], doPageBreak);\n          }\n\n          function doPageBreak() {\n              if (forceBreak != \"-\" || pageHeight) {\n                  splitElement(copy);\n              }\n\n              {\n                  var page = makePage();\n                  copy.parentNode.insertBefore(page, copy);\n                  page.appendChild(copy);\n              }\n\n              if (template) {\n                  pages.forEach(function(page, i){\n                      var el = template({\n                          element    : page,\n                          pageNum    : i + 1,\n                          totalPages : pages.length\n                      });\n                      if (el) {\n                          page.appendChild(el);\n                      }\n                  });\n              }\n\n              cacheImages(pages, callback.bind(null, { pages: pages, container: container }));\n          }\n\n          function keepTogether(el) {\n              if (options.keepTogether && matches(el, options.keepTogether) && el.offsetHeight <= pageHeight - adjust) {\n                  return true;\n              }\n\n              var tag = el.tagName;\n              if (/^h[1-6]$/i.test(tag) && el.offsetHeight >= pageHeight - adjust) {\n                  return false;\n              }\n\n              return (el.getAttribute(\"data-kendo-chart\") ||\n                      /^(?:img|tr|thead|th|tfoot|iframe|svg|object|canvas|input|textarea|select|video|h[1-6])/i.test(el.tagName));\n          }\n\n          function splitElement(element) {\n              if (element.tagName == \"TABLE\") {\n                  setCSS(element, { tableLayout: \"fixed\" });\n              }\n              if (keepTogether(element)) {\n                  return;\n              }\n              var style = getComputedStyle$1(element);\n              var bottomPadding = parseFloat(getPropertyValue(style, \"padding-bottom\"));\n              var bottomBorder = parseFloat(getPropertyValue(style, \"border-bottom-width\"));\n              var saveAdjust = adjust;\n              adjust += bottomPadding + bottomBorder;\n              var isFirst = true;\n              for (var el = element.firstChild; el; el = el.nextSibling) {\n                  if (el.nodeType == 1 /* Element */) {\n                      isFirst = false;\n                      if (matches(el, forceBreak)) {\n                          breakAtElement(el);\n                          continue;\n                      }\n                      if (!pageHeight) {\n                          // we're in \"manual breaks mode\"\n                          splitElement(el);\n                          continue;\n                      }\n                      if (!/^(?:static|relative)$/.test(getPropertyValue(getComputedStyle$1(el), \"position\"))) {\n                          continue;\n                      }\n                      var fall = fallsOnMargin(el);\n                      if (fall == 1) {\n                          // element starts on next page, break before anyway.\n                          breakAtElement(el);\n                      }\n                      else if (fall) {\n                          // elements ends up on next page, or possibly doesn't fit on a page at\n                          // all.  break before it anyway if it's an <img> or <tr>, otherwise\n                          // attempt to split.\n                          if (keepTogether(el)) {\n                              breakAtElement(el);\n                          } else {\n                              splitElement(el);\n                          }\n                      }\n                      else {\n                          splitElement(el);\n                      }\n                  }\n                  else if (el.nodeType == 3 /* Text */ && pageHeight) {\n                      splitText(el, isFirst);\n                      isFirst = false;\n                  }\n              }\n              adjust = saveAdjust;\n          }\n\n          function firstInParent(el) {\n              var p = el.parentNode, first = p.firstChild;\n              if (el === first) {\n                  return true;\n              }\n              if (el === p.children[0]) {\n                  if (first.nodeType == 7 /* comment */ ||\n                      first.nodeType == 8 /* processing instruction */) {\n                      return true;\n                  }\n                  if (first.nodeType == 3 /* text */) {\n                      // if whitespace only we can probably consider it's first\n                      return !/\\S/.test(first.data);\n                  }\n              }\n              return false;\n          }\n\n          function breakAtElement(el) {\n              if (el.nodeType == 1 && el !== copy && firstInParent(el)) {\n                  return breakAtElement(el.parentNode);\n              }\n              var table, colgroup, thead, grid, gridHead;\n              table = closest(el, \"table\");\n              colgroup = table && table.querySelector(\"colgroup\");\n              if (options.repeatHeaders) {\n                  thead = table && table.querySelector(\"thead\");\n\n                  // If we break page in a Kendo Grid, repeat its header.  This ugly hack is\n                  // necessary because a scrollable grid will keep the header in a separate\n                  // <table> element from its content.\n                  //\n                  // XXX: This is likely to break as soon as the widget HTML is modified.\n                  grid = closest(el, \".k-grid\");\n                  if (grid && grid.querySelector(\".k-auto-scrollable\")) {\n                      gridHead = grid.querySelector(\".k-grid-header\");\n                  }\n              }\n              var page = makePage();\n              var range = doc.createRange();\n              range.setStartBefore(copy);\n              range.setEndBefore(el);\n              page.appendChild(range.extractContents());\n              copy.parentNode.insertBefore(page, copy);\n              preventBulletOnListItem(el.parentNode);\n              if (table) {\n                  table = closest(el, \"table\"); // that's the <table> on next page!\n                  if (options.repeatHeaders && thead) {\n                      table.insertBefore(thead.cloneNode(true), table.firstChild);\n                  }\n                  if (colgroup) {\n                      table.insertBefore(colgroup.cloneNode(true), table.firstChild);\n                  }\n              }\n              if (options.repeatHeaders && gridHead) {\n                  grid = closest(el, \".k-grid\");\n                  grid.insertBefore(gridHead.cloneNode(true), grid.firstChild);\n              }\n          }\n\n          function makePage() {\n              var page = doc.createElement(\"KENDO-PDF-PAGE\");\n              setCSS(page, {\n                  display  : \"block\",\n                  boxSizing: \"content-box\",\n                  width    : pageWidth ? (pageWidth + \"px\") : \"auto\",\n                  padding  : (margin.top + \"px \" +\n                              margin.right + \"px \" +\n                              margin.bottom + \"px \" +\n                              margin.left + \"px\"),\n\n                  // allow absolutely positioned elements to be relative to current page\n                  position : \"relative\",\n\n                  // without the following we might affect layout of subsequent pages\n                  height   : pageHeight ? (pageHeight + \"px\") : \"auto\",\n                  overflow : pageHeight || pageWidth ? \"hidden\" : \"visible\",\n                  clear    : \"both\"\n              });\n\n              // debug\n              // $(\"<div>\").css({\n              //     position  : \"absolute\",\n              //     left      : margin.left,\n              //     top       : margin.top,\n              //     width     : pageWidth,\n              //     height    : pageHeight,\n              //     boxSizing : \"border-box\",\n              //     background: \"rgba(255, 255, 0, 0.5)\"\n              //     //border    : \"1px solid red\"\n              // }).appendTo(page);\n\n              if (options && options.pageClassName) {\n                  page.className = options.pageClassName;\n              }\n              pages.push(page);\n              return page;\n          }\n\n          function fallsOnMargin(thing) {\n              var box = thing.getBoundingClientRect();\n              if (box.width === 0 || box.height === 0) {\n                  // I'd say an element with dimensions zero fits on current page.\n                  return 0;\n              }\n              var top = copy.getBoundingClientRect().top;\n              var available = pageHeight - adjust;\n              return (box.height > available) ? 3\n                  : (box.top - top > available) ? 1\n                  : (box.bottom - top > available) ? 2\n                  : 0;\n          }\n\n          function splitText(node, isFirst) {\n              if (!/\\S/.test(node.data)) {\n                  return;\n              }\n\n              var len = node.data.length;\n              var range = doc.createRange();\n              range.selectNodeContents(node);\n              var fall = fallsOnMargin(range);\n              if (!fall) {\n                  return;     // the whole text fits on current page\n              }\n\n              var nextnode = node;\n              if (fall == 1) {\n                  // starts on next page, break before anyway.\n                  if (isFirst) {\n                      // avoid leaving an empty <p>, <li>, etc. on previous page.\n                      breakAtElement(node.parentNode);\n                  } else {\n                      breakAtElement(node);\n                  }\n              }\n              else {\n                  (function findEOP(min, pos, max) {\n                      range.setEnd(node, pos);\n                      if (min == pos || pos == max) {\n                          return pos;\n                      }\n                      if (fallsOnMargin(range)) {\n                          return findEOP(min, (min + pos) >> 1, pos);\n                      } else {\n                          return findEOP(pos, (pos + max) >> 1, max);\n                      }\n                  })(0, len >> 1, len);\n\n                  if (!/\\S/.test(range.toString()) && isFirst) {\n                      // avoid leaving an empty <p>, <li>, etc. on previous page.\n                      breakAtElement(node.parentNode);\n                  } else {\n                      // This is only needed for IE, but it feels cleaner to do it anyway.  Without\n                      // it, IE will truncate a very long text (playground/pdf-long-text-2.html).\n                      nextnode = node.splitText(range.endOffset);\n\n                      var page = makePage();\n                      range.setStartBefore(copy);\n                      page.appendChild(range.extractContents());\n                      copy.parentNode.insertBefore(page, copy);\n                      preventBulletOnListItem(nextnode.parentNode);\n                  }\n              }\n\n              splitText(nextnode);\n          }\n\n          function preventBulletOnListItem(el) {\n              // set a hint on continued LI elements, to tell the\n              // renderer not to draw the bullet again.\n              // https://github.com/telerik/kendo-ui-core/issues/2732\n              var li = closest(el, \"li\");\n              if (li) {\n                  li.setAttribute(\"kendo-no-bullet\", \"1\");\n                  preventBulletOnListItem(li.parentNode);\n              }\n          }\n      }\n\n      return promise;\n  }\n\n  // This is needed for the Spreadsheet print functionality.  Since\n  // there we only need to draw text, this cuts through the ceremony\n  // of drawDOM/renderElement and renders the text node directly.\n  function drawText(element) {\n      var group = new Group();\n      nodeInfo._clipbox = false;\n      nodeInfo._matrix = Matrix.unit();\n      nodeInfo._stackingContext = {\n          element: element,\n          group: group\n      };\n      pushNodeInfo(element, getComputedStyle$1(element), group);\n      if (element.firstChild.nodeType == 3 /* Text */) {\n          // avoid the penalty of renderElement\n          renderText(element, element.firstChild, group);\n      } else {\n          _renderElement(element, group);\n      }\n      popNodeInfo();\n      return group;\n  }\n\n  var parseBackgroundImage = (function(){\n      var tok_linear_gradient  = /^((-webkit-|-moz-|-o-|-ms-)?linear-gradient\\s*)\\(/;\n      //var tok_radial_gradient  = /^((-webkit-|-moz-|-o-|-ms-)?radial-gradient\\s*)\\(/;\n      var tok_percent          = /^([-0-9.]+%)/;\n      var tok_length           = /^([-0-9.]+px)/;\n      var tok_keyword          = /^(left|right|top|bottom|to|center)\\W/;\n      var tok_angle            = /^([-0-9.]+(deg|grad|rad|turn)|0)/;\n      var tok_whitespace       = /^(\\s+)/;\n      var tok_popen            = /^(\\()/;\n      var tok_pclose           = /^(\\))/;\n      var tok_comma            = /^(,)/;\n      var tok_url              = /^(url)\\(/;\n      var tok_content          = /^(.*?)\\)/;\n\n      var cache1 = {}, cache2 = {};\n\n      function parse(input) {\n          var orig = input;\n          if (hasOwnProperty(cache1, orig)) {\n              return cache1[orig];\n          }\n          function skip_ws() {\n              var m = tok_whitespace.exec(input);\n              if (m) {\n                  input = input.substr(m[1].length);\n              }\n          }\n          function read(token) {\n              skip_ws();\n              var m = token.exec(input);\n              if (m) {\n                  input = input.substr(m[1].length);\n                  return m[1];\n              }\n          }\n\n          function read_stop() {\n              var color = parseColor$2(input, true);\n              var length, percent;\n              if (color) {\n                  var match =\n                      /^#[0-9a-f]+/i.exec(input) ||\n                      /^rgba?\\(.*?\\)/i.exec(input) ||\n                      /^..*?\\b/.exec(input); // maybe named color\n                  input = input.substr(match[0].length);\n                  color = color.toRGB();\n                  if (!(length = read(tok_length))) {\n                      percent = read(tok_percent);\n                  }\n                  return { color: color, length: length, percent: percent };\n              }\n          }\n\n          function read_linear_gradient(propName) {\n              var angle;\n              var to1, to2;\n              var stops = [];\n              var reverse = false;\n\n              if (read(tok_popen)) {\n                  // 1. [ <angle> || to <side-or-corner>, ]?\n                  angle = read(tok_angle);\n                  if (angle == \"0\") {\n                      angle = \"0deg\"; // Edge\n                  }\n                  if (angle) {\n                      angle = parseAngle(angle);\n                      read(tok_comma);\n                  }\n                  else {\n                      to1 = read(tok_keyword);\n                      if (to1 == \"to\") {\n                          to1 = read(tok_keyword);\n                      } else if (to1 && /^-/.test(propName)) {\n                          reverse = true;\n                      }\n                      to2 = read(tok_keyword);\n                      read(tok_comma);\n                  }\n\n                  if (/-moz-/.test(propName) && angle == null && to1 == null) {\n                      var x = read(tok_percent), y = read(tok_percent);\n                      reverse = true;\n                      if (x == \"0%\") {\n                          to1 = \"left\";\n                      } else if (x == \"100%\") {\n                          to1 = \"right\";\n                      }\n                      if (y == \"0%\") {\n                          to2 = \"top\";\n                      } else if (y == \"100%\") {\n                          to2 = \"bottom\";\n                      }\n                      read(tok_comma);\n                  }\n\n                  // 2. color stops\n                  while (input && !read(tok_pclose)) {\n                      var stop = read_stop();\n                      if (!stop) {\n                          break;\n                      }\n                      stops.push(stop);\n                      read(tok_comma);\n                  }\n\n                  return {\n                      type    : \"linear\",\n                      angle   : angle,\n                      to      : to1 && to2 ? to1 + \" \" + to2 : to1 ? to1 : to2 ? to2 : null,\n                      stops   : stops,\n                      reverse : reverse\n                  };\n              }\n          }\n\n          function read_url() {\n              if (read(tok_popen)) {\n                  var url = read(tok_content);\n                  url = url.replace(/^['\"]+|[\"']+$/g, \"\");\n                  read(tok_pclose);\n                  return { type: \"url\", url: url };\n              }\n          }\n\n          var tok;\n\n          if ((tok = read(tok_linear_gradient))) {\n              tok = read_linear_gradient(tok);\n          }\n          else if ((tok = read(tok_url))) {\n              tok = read_url();\n          }\n\n          return (cache1[orig] = tok || { type: \"none\" });\n      }\n\n      return function(input) {\n          if (hasOwnProperty(cache2, input)) {\n              return cache2[input];\n          }\n          return (cache2[input] = splitProperty(input).map(parse));\n      };\n  })();\n\n  var splitProperty = (function(){\n      var cache = {};\n      return function(input, separator) {\n          if (!separator) {\n              separator = /^\\s*,\\s*/;\n          }\n\n          var cacheKey = input + separator;\n\n          if (hasOwnProperty(cache, cacheKey)) {\n              return cache[cacheKey];\n          }\n\n          var ret = [];\n          var last = 0, pos = 0;\n          var in_paren = 0;\n          var in_string = false;\n          var m;\n\n          function looking_at(rx) {\n              return (m = rx.exec(input.substr(pos)));\n          }\n\n          function trim(str) {\n              return str.replace(/^\\s+|\\s+$/g, \"\");\n          }\n\n          while (pos < input.length) {\n              if (!in_string && looking_at(/^[\\(\\[\\{]/)) {\n                  in_paren++;\n                  pos++;\n              }\n              else if (!in_string && looking_at(/^[\\)\\]\\}]/)) {\n                  in_paren--;\n                  pos++;\n              }\n              else if (!in_string && looking_at(/^[\\\"\\']/)) {\n                  in_string = m[0];\n                  pos++;\n              }\n              else if (in_string == \"'\" && looking_at(/^\\\\\\'/)) {\n                  pos += 2;\n              }\n              else if (in_string == '\"' && looking_at(/^\\\\\\\"/)) {\n                  pos += 2;\n              }\n              else if (in_string == \"'\" && looking_at(/^\\'/)) {\n                  in_string = false;\n                  pos++;\n              }\n              else if (in_string == '\"' && looking_at(/^\\\"/)) {\n                  in_string = false;\n                  pos++;\n              }\n              else if (looking_at(separator)) {\n                  if (!in_string && !in_paren && pos > last) {\n                      ret.push(trim(input.substring(last, pos)));\n                      last = pos + m[0].length;\n                  }\n                  pos += m[0].length;\n              }\n              else {\n                  pos++;\n              }\n          }\n          if (last < pos) {\n              ret.push(trim(input.substring(last, pos)));\n          }\n          return (cache[cacheKey] = ret);\n      };\n  })();\n\n  var getFontURL = (function(cache){\n      return function(el){\n          // XXX: for IE we get here the whole cssText of the rule,\n          // because the computedStyle.src is empty.  Next time we need\n          // to fix these regexps we better write a CSS parser. :-\\\n          var url = cache[el];\n          if (!url) {\n              var m;\n              if ((m = /url\\((['\"]?)([^'\")]*?)\\1\\)\\s+format\\((['\"]?)truetype\\3\\)/.exec(el))) {\n                  url = cache[el] = m[2];\n              } else if ((m = /url\\((['\"]?)([^'\")]*?\\.ttf)\\1\\)/.exec(el))) {\n                  url = cache[el] = m[2];\n              }\n          }\n          return url;\n      };\n  })(Object.create(null));\n\n  var getFontHeight = (function(cache){\n      return function(font) {\n          var height = cache[font];\n          if (height == null) {\n              height = cache[font] = measureText(\"Mapq\", { font: font }).height;\n          }\n          return height;\n      };\n  })(Object.create(null));\n\n  function getFontFaces(doc) {\n      if (doc == null) {\n          doc = document;\n      }\n      var result = {};\n      for (var i = 0; i < doc.styleSheets.length; ++i) {\n          doStylesheet(doc.styleSheets[i]);\n      }\n      return result;\n      function doStylesheet(ss) {\n          if (ss) {\n              var rules = null;\n              try {\n                  rules = ss.cssRules;\n              } catch (ex) {}\n              if (rules) {\n                  addRules(ss, rules);\n              }\n          }\n      }\n      function findFonts(rule) {\n          var src = getPropertyValue(rule.style, \"src\");\n          if (src) {\n              return splitProperty(src).reduce(function(a, el){\n                  var font = getFontURL(el);\n                  if (font) {\n                      a.push(font);\n                  }\n                  return a;\n              }, []);\n          } else {\n              // Internet Explorer\n              // XXX: this is gross.  should work though for valid CSS.\n              var font = getFontURL(rule.cssText);\n              return font ? [ font ] : [];\n          }\n      }\n      function addRules(styleSheet, rules) {\n          for (var i = 0; i < rules.length; ++i) {\n              var r = rules[i];\n              switch (r.type) {\n                case 3:       // CSSImportRule\n                  doStylesheet(r.styleSheet);\n                  break;\n                case 5:       // CSSFontFaceRule\n                  var style  = r.style;\n                  var family = splitProperty(getPropertyValue(style, \"font-family\"));\n                  var bold   = /^([56789]00|bold)$/i.test(getPropertyValue(style, \"font-weight\"));\n                  var italic = \"italic\" == getPropertyValue(style, \"font-style\");\n                  var src    = findFonts(r);\n                  if (src.length > 0) {\n                      addRule(styleSheet, family, bold, italic, src[0]);\n                  }\n              }\n          }\n      }\n      function addRule(styleSheet, names, bold, italic, url) {\n          // We get full resolved absolute URLs in Chrome, but sadly\n          // not in Firefox.\n          if (!(/^data:/i.test(url))) {\n              if (!(/^[^\\/:]+:\\/\\//.test(url) || /^\\//.test(url))) {\n                  url = String(styleSheet.href).replace(/[^\\/]*$/, \"\") + url;\n              }\n          }\n          names.forEach(function(name){\n              name = name.replace(/^(['\"]?)(.*?)\\1$/, \"$2\"); // it's quoted\n              if (bold) {\n                  name += \"|bold\";\n              }\n              if (italic) {\n                  name += \"|italic\";\n              }\n              result[name] = url;\n          });\n      }\n  }\n\n  function hasOwnProperty(obj, key) {\n      return Object.prototype.hasOwnProperty.call(obj, key);\n  }\n\n  function getCounter(name) {\n      name = \"_counter_\" + name;\n      return nodeInfo[name];\n  }\n\n  function getAllCounters(name) {\n      var values = [], p = nodeInfo;\n      name = \"_counter_\" + name;\n      while (p) {\n          if (hasOwnProperty(p, name)) {\n              values.push(p[name]);\n          }\n          p = Object.getPrototypeOf(p);\n      }\n      return values.reverse();\n  }\n\n  function incCounter(name, inc) {\n      var p = nodeInfo;\n      name = \"_counter_\" + name;\n      while (p && !hasOwnProperty(p, name)) {\n          p = Object.getPrototypeOf(p);\n      }\n      if (!p) {\n          p = nodeInfo._root;\n      }\n      p[name] = (p[name] || 0) + (inc == null ? 1 : inc);\n  }\n\n  function resetCounter(name, val) {\n      name = \"_counter_\" + name;\n      nodeInfo[name] = val == null ? 0 : val;\n  }\n\n  function doCounters(a, f, def) {\n      for (var i = 0; i < a.length;) {\n          var name = a[i++];\n          var val = parseFloat(a[i]);\n          if (isNaN(val)) {\n              f(name, def);\n          } else {\n              f(name, val);\n              ++i;\n          }\n      }\n  }\n\n  function updateCounters(style) {\n      var counterReset = getPropertyValue(style, \"counter-reset\");\n      if (counterReset) {\n          doCounters(splitProperty(counterReset, /^\\s+/), resetCounter, 0);\n      }\n      var counterIncrement = getPropertyValue(style, \"counter-increment\");\n      if (counterIncrement) {\n          doCounters(splitProperty(counterIncrement, /^\\s+/), incCounter, 1);\n      }\n  }\n\n  function parseColor(str, css) {\n      var color = parseColor$2(str, true);\n      if (color) {\n          color = color.toRGB();\n          if (css) {\n              color = color.toCssRgba();\n          } else if (color.a === 0) {\n              color = null;\n          }\n      }\n      return color;\n  }\n\n  function whenImagesAreActuallyLoaded(elements, callback) {\n      var pending = 0;\n      var done = false;\n      elements.forEach(function(el){\n          var images = el.querySelectorAll(\"img\");\n          for (var i = 0; i < images.length; ++i) {\n              var img = images[i];\n              if (!img.complete) {\n                  pending++;\n                  img.onload = img.onerror = next;\n              }\n          }\n      });\n\n      if (!pending) {\n          next();\n      }\n\n      function next() {\n          if (!done && --pending <= 0) {\n              callback();\n              done = true;\n          }\n      }\n  }\n\n  function cacheImages(elements, callback) {\n      var urls = [];\n      function add(url) {\n          if (!IMAGE_CACHE[url]) {\n              IMAGE_CACHE[url] = true;\n              urls.push(url);\n          }\n      }\n\n      elements.forEach(function dive(element){\n          if (/^img$/i.test(element.tagName)) {\n              add(element.src);\n          }\n          parseBackgroundImage(\n              getPropertyValue(\n                  getComputedStyle$1(element), \"background-image\"\n              )\n          ).forEach(function(bg){\n              if (bg.type == \"url\") {\n                  add(bg.url);\n              }\n          });\n\n          if (element.children) {\n              slice(element.children).forEach(dive);\n          }\n      });\n\n      var count = urls.length;\n      function next() {\n          if (--count <= 0) {\n              // Even though we cached them, they simply won't be available immediately in the newly\n              // created DOM.  Previously we'd allow a 10ms timeout, but that's arbitrary and clearly\n              // not working in all cases (https://github.com/telerik/kendo/issues/5399), so this\n              // function will wait for their .complete attribute.\n              whenImagesAreActuallyLoaded(elements, callback);\n          }\n      }\n      if (count === 0) {\n          next();\n      }\n      urls.forEach(function(url){\n          var img = IMAGE_CACHE[url] = new window.Image();\n          if (!(/^data:/i.test(url))) {\n              img.crossOrigin = \"Anonymous\";\n          }\n          img.src = url;\n          if (img.complete) {\n              next();\n          } else {\n              img.onload = next;\n              img.onerror = function() {\n                  IMAGE_CACHE[url] = null;\n                  next();\n              };\n          }\n      });\n  }\n\n  function alphaNumeral(n) {\n      var result = \"\";\n      do {\n          var r = n % 26;\n          result = String.fromCharCode(97 + r) + result;\n          n = Math.floor(n / 26);\n      } while (n > 0);\n      return result;\n  }\n\n  function pushNodeInfo(element, style, group) {\n      nodeInfo = Object.create(nodeInfo);\n      nodeInfo[element.tagName.toLowerCase()] = {\n          element: element,\n          style: style\n      };\n      var decoration = getPropertyValue(style, \"text-decoration\");\n      if (decoration && decoration != \"none\") {\n          var color = getPropertyValue(style, \"text-decoration-color\");\n          decoration.split(/\\s+/g).forEach(function(name){\n              if (!nodeInfo[name]) {\n                  nodeInfo[name] = color;\n                  if (name == \"underline\") {\n                      var offset = getPropertyValue(style, \"text-underline-offset\");\n                      if (offset != \"auto\") {\n                          nodeInfo[\"underline-offset\"] = parseFloat(offset);\n                      }\n                  }\n              }\n          });\n      }\n\n      if (createsStackingContext(style)) {\n          nodeInfo._stackingContext = {\n              element: element,\n              group: group\n          };\n      }\n  }\n\n  function popNodeInfo() {\n      nodeInfo = Object.getPrototypeOf(nodeInfo);\n  }\n\n  function updateClipbox(path) {\n      if (nodeInfo._clipbox != null) {\n          var box = path.bbox(nodeInfo._matrix);\n          if (nodeInfo._clipbox) {\n              nodeInfo._clipbox = Rect$1.intersect(nodeInfo._clipbox, box);\n          } else {\n              nodeInfo._clipbox = box;\n          }\n      }\n  }\n\n  function emptyClipbox() {\n      var cb = nodeInfo._clipbox;\n      if (cb == null) {\n          return true;\n      }\n      if (cb) {\n          return cb.width() === 0 || cb.height() === 0;\n      }\n  }\n\n  function createsStackingContext(style) {\n      function prop(name) { return getPropertyValue(style, name); }\n      if (prop(\"transform\") != \"none\" ||\n          prop(\"position\") != \"static\" ||\n          prop(\"z-index\") != \"auto\" ||\n          prop(\"opacity\") < 1) {\n          return true;\n      }\n  }\n\n  function getComputedStyle$1(element, pseudoElt) {\n      return window.getComputedStyle(element, pseudoElt || null);\n  }\n\n  function getPropertyValue(style, prop, defa) {\n      var val = style.getPropertyValue(prop);\n      if (val == null || val === \"\") {\n          if (browser.webkit) {\n              val = style.getPropertyValue(\"-webkit-\" + prop );\n          } else if (browser.mozilla) {\n              val = style.getPropertyValue(\"-moz-\" + prop );\n          } else if (browser.opera) {\n              val = style.getPropertyValue(\"-o-\" + prop);\n          } else if (microsoft) {\n              val = style.getPropertyValue(\"-ms-\" + prop);\n          }\n      }\n      if (arguments.length > 2 && (val == null || val === \"\")) {\n          return defa;\n      } else {\n          return val;\n      }\n  }\n\n  function pleaseSetPropertyValue(style, prop, value, important) {\n      style.setProperty(prop, value, important);\n      if (browser.webkit) {\n          style.setProperty(\"-webkit-\" + prop, value, important);\n      } else if (browser.mozilla) {\n          style.setProperty(\"-moz-\" + prop, value, important);\n      } else if (browser.opera) {\n          style.setProperty(\"-o-\" + prop, value, important);\n      } else if (microsoft) {\n          style.setProperty(\"-ms-\" + prop, value, important);\n          prop = \"ms\" + prop.replace(/(^|-)([a-z])/g, function(s, p1, p2){\n              return p1 + p2.toUpperCase();\n          });\n          style[prop] = value;\n      }\n  }\n\n  function getBorder(style, side) {\n      side = \"border-\" + side;\n      return {\n          width: parseFloat(getPropertyValue(style, side + \"-width\")),\n          style: getPropertyValue(style, side + \"-style\"),\n          color: parseColor(getPropertyValue(style, side + \"-color\"), true)\n      };\n  }\n\n  function saveStyle(element, func) {\n      var prev = element.style.cssText;\n      var result = func();\n      setStyle(element, prev);\n      return result;\n  }\n\n  function getBorderRadius(style, side) {\n      var r = getPropertyValue(style, \"border-\" + side + \"-radius\").split(/\\s+/g).map(parseFloat);\n      if (r.length == 1) {\n          r.push(r[0]);\n      }\n      return sanitizeRadius({ x: r[0], y: r[1] });\n  }\n\n  function getContentBox(element) {\n      var box = element.getBoundingClientRect();\n      box = innerBox(box, \"border-*-width\", element);\n      box = innerBox(box, \"padding-*\", element);\n      return box;\n  }\n\n  function innerBox(box, prop, element) {\n      var style, wt, wr, wb, wl;\n      if (typeof prop == \"string\") {\n          style = getComputedStyle$1(element);\n          wt = parseFloat(getPropertyValue(style, prop.replace(\"*\", \"top\")));\n          wr = parseFloat(getPropertyValue(style, prop.replace(\"*\", \"right\")));\n          wb = parseFloat(getPropertyValue(style, prop.replace(\"*\", \"bottom\")));\n          wl = parseFloat(getPropertyValue(style, prop.replace(\"*\", \"left\")));\n      }\n      else if (typeof prop == \"number\") {\n          wt = wr = wb = wl = prop;\n      }\n      return {\n          top    : box.top + wt,\n          right  : box.right - wr,\n          bottom : box.bottom - wb,\n          left   : box.left + wl,\n          width  : box.right - box.left - wr - wl,\n          height : box.bottom - box.top - wb - wt\n      };\n  }\n\n  function getTransform(style) {\n      var transform = getPropertyValue(style, \"transform\");\n      if (transform == \"none\") {\n          return null;\n      }\n      var matrix = /^\\s*matrix\\(\\s*(.*?)\\s*\\)\\s*$/.exec(transform);\n      if (matrix) {\n          var origin = getPropertyValue(style, \"transform-origin\");\n          matrix = matrix[1].split(/\\s*,\\s*/g).map(parseFloat);\n          origin = origin.split(/\\s+/g).map(parseFloat);\n          return {\n              matrix: matrix,\n              origin: origin\n          };\n      }\n  }\n\n  function radiansToDegrees(radians) {\n      return ((180 * radians) / Math.PI) % 360;\n  }\n\n  function parseAngle(angle) {\n      var num = parseFloat(angle);\n      if (/grad$/.test(angle)) {\n          return Math.PI * num / 200;\n      }\n      else if (/rad$/.test(angle)) {\n          return num;\n      }\n      else if (/turn$/.test(angle)) {\n          return Math.PI * num * 2;\n      }\n      else if (/deg$/.test(angle)) {\n          return Math.PI * num / 180;\n      }\n  }\n\n  function setTransform(shape, m) {\n      m = new Matrix(m[0], m[1], m[2], m[3], m[4], m[5]);\n      shape.transform(m);\n      return m;\n  }\n\n  function setClipping(shape, clipPath) {\n      shape.clip(clipPath);\n  }\n\n  function addArcToPath(path, x, y, options) {\n      var points = new Arc$1([ x, y ], options).curvePoints(), i = 1;\n      while (i < points.length) {\n          path.curveTo(points[i++], points[i++], points[i++]);\n      }\n  }\n\n  function sanitizeRadius(r) {\n      if (r.x <= 0 || r.y <= 0) {\n          r.x = r.y = 0;\n      }\n      return r;\n  }\n\n  function adjustBorderRadiusForBox(box, rTL, rTR, rBR, rBL) {\n      // adjust border radiuses such that the sum of adjacent\n      // radiuses is not bigger than the length of the side.\n      // seems the correct algorithm is variant (3) from here:\n      // http://www.w3.org/Style/CSS/Tracker/issues/29?changelog\n      var tl_x = Math.max(0, rTL.x), tl_y = Math.max(0, rTL.y);\n      var tr_x = Math.max(0, rTR.x), tr_y = Math.max(0, rTR.y);\n      var br_x = Math.max(0, rBR.x), br_y = Math.max(0, rBR.y);\n      var bl_x = Math.max(0, rBL.x), bl_y = Math.max(0, rBL.y);\n\n      var f = Math.min(\n          box.width / (tl_x + tr_x),\n          box.height / (tr_y + br_y),\n          box.width / (br_x + bl_x),\n          box.height / (bl_y + tl_y)\n      );\n\n      if (f < 1) {\n          tl_x *= f; tl_y *= f;\n          tr_x *= f; tr_y *= f;\n          br_x *= f; br_y *= f;\n          bl_x *= f; bl_y *= f;\n      }\n\n      return {\n          tl: { x: tl_x, y: tl_y },\n          tr: { x: tr_x, y: tr_y },\n          br: { x: br_x, y: br_y },\n          bl: { x: bl_x, y: bl_y }\n      };\n  }\n\n  function elementRoundBox(element, box, type) {\n      var style = getComputedStyle$1(element);\n\n      var rTL = getBorderRadius(style, \"top-left\");\n      var rTR = getBorderRadius(style, \"top-right\");\n      var rBL = getBorderRadius(style, \"bottom-left\");\n      var rBR = getBorderRadius(style, \"bottom-right\");\n\n      if (type == \"padding\" || type == \"content\") {\n          var bt = getBorder(style, \"top\");\n          var br = getBorder(style, \"right\");\n          var bb = getBorder(style, \"bottom\");\n          var bl = getBorder(style, \"left\");\n          rTL.x -= bl.width; rTL.y -= bt.width;\n          rTR.x -= br.width; rTR.y -= bt.width;\n          rBR.x -= br.width; rBR.y -= bb.width;\n          rBL.x -= bl.width; rBL.y -= bb.width;\n          if (type == \"content\") {\n              var pt = parseFloat(getPropertyValue(style, \"padding-top\"));\n              var pr = parseFloat(getPropertyValue(style, \"padding-right\"));\n              var pb = parseFloat(getPropertyValue(style, \"padding-bottom\"));\n              var pl = parseFloat(getPropertyValue(style, \"padding-left\"));\n              rTL.x -= pl; rTL.y -= pt;\n              rTR.x -= pr; rTR.y -= pt;\n              rBR.x -= pr; rBR.y -= pb;\n              rBL.x -= pl; rBL.y -= pb;\n          }\n      }\n\n      if (typeof type == \"number\") {\n          rTL.x -= type; rTL.y -= type;\n          rTR.x -= type; rTR.y -= type;\n          rBR.x -= type; rBR.y -= type;\n          rBL.x -= type; rBL.y -= type;\n      }\n\n      return roundBox(box, rTL, rTR, rBR, rBL);\n  }\n\n  // Create a drawing.Path for a rounded rectangle.  Receives the\n  // bounding box and the border-radiuses in CSS order (top-left,\n  // top-right, bottom-right, bottom-left).  The radiuses must be\n  // objects containing x (horiz. radius) and y (vertical radius).\n  function roundBox(box, rTL0, rTR0, rBR0, rBL0) {\n      var tmp = adjustBorderRadiusForBox(box, rTL0, rTR0, rBR0, rBL0);\n      var rTL = tmp.tl;\n      var rTR = tmp.tr;\n      var rBR = tmp.br;\n      var rBL = tmp.bl;\n      var path = new Path({ fill: null, stroke: null });\n      path.moveTo(box.left, box.top + rTL.y);\n      if (rTL.x) {\n          addArcToPath(path, box.left + rTL.x, box.top + rTL.y, {\n              startAngle: -180,\n              endAngle: -90,\n              radiusX: rTL.x,\n              radiusY: rTL.y\n          });\n      }\n      path.lineTo(box.right - rTR.x, box.top);\n      if (rTR.x) {\n          addArcToPath(path, box.right - rTR.x, box.top + rTR.y, {\n              startAngle: -90,\n              endAngle: 0,\n              radiusX: rTR.x,\n              radiusY: rTR.y\n          });\n      }\n      path.lineTo(box.right, box.bottom - rBR.y);\n      if (rBR.x) {\n          addArcToPath(path, box.right - rBR.x, box.bottom - rBR.y, {\n              startAngle: 0,\n              endAngle: 90,\n              radiusX: rBR.x,\n              radiusY: rBR.y\n          });\n      }\n      path.lineTo(box.left + rBL.x, box.bottom);\n      if (rBL.x) {\n          addArcToPath(path, box.left + rBL.x, box.bottom - rBL.y, {\n              startAngle: 90,\n              endAngle: 180,\n              radiusX: rBL.x,\n              radiusY: rBL.y\n          });\n      }\n      return path.close();\n  }\n\n  function formatCounter(val, style) {\n      var str = String(parseFloat(val));\n      switch (style) {\n        case \"decimal-leading-zero\":\n          if (str.length < 2) {\n              str = \"0\" + str;\n          }\n          return str;\n        case \"lower-roman\":\n          return arabicToRoman(val).toLowerCase();\n        case \"upper-roman\":\n          return arabicToRoman(val).toUpperCase();\n        case \"lower-latin\":\n        case \"lower-alpha\":\n          return alphaNumeral(val - 1);\n        case \"upper-latin\":\n        case \"upper-alpha\":\n          return alphaNumeral(val - 1).toUpperCase();\n        default:\n          return str;\n      }\n  }\n\n  function evalPseudoElementContent(element, content) {\n      function displayCounter(name, style, separator) {\n          if (!separator) {\n              return formatCounter(getCounter(name) || 0, style);\n          }\n          separator = separator.replace(/^\\s*([\"'])(.*)\\1\\s*$/, \"$2\");\n          return getAllCounters(name).map(function(val){\n              return formatCounter(val, style);\n          }).join(separator);\n      }\n      var a = splitProperty(content, /^\\s+/);\n      var result = [], m;\n      a.forEach(function(el){\n          var tmp;\n          if ((m = /^\\s*([\"'])(.*)\\1\\s*$/.exec(el))) {\n              result.push(m[2].replace(/\\\\([0-9a-f]{4})/gi, function(s, p){\n                  return String.fromCharCode(parseInt(p, 16));\n              }));\n          }\n          else if ((m = /^\\s*counter\\((.*?)\\)\\s*$/.exec(el))) {\n              tmp = splitProperty(m[1]);\n              result.push(displayCounter(tmp[0], tmp[1]));\n          }\n          else if ((m = /^\\s*counters\\((.*?)\\)\\s*$/.exec(el))) {\n              tmp = splitProperty(m[1]);\n              result.push(displayCounter(tmp[0], tmp[2], tmp[1]));\n          }\n          else if ((m = /^\\s*attr\\((.*?)\\)\\s*$/.exec(el))) {\n              result.push(element.getAttribute(m[1]) || \"\");\n          }\n          else {\n              result.push(el);\n          }\n      });\n      return result.join(\"\");\n  }\n\n  function getCssText(style) {\n      if (style.cssText) {\n          return style.cssText;\n      }\n      // Status: NEW.  Report year: 2002.  Current year: 2014.\n      // Nice played, Mozillians.\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=137687\n      var result = [];\n      for (var i = 0; i < style.length; ++i) {\n          result.push(style[i] + \": \" + getPropertyValue(style, style[i]));\n      }\n      return result.join(\";\\n\");\n  }\n\n  function _renderWithPseudoElements(element, group) {\n      if (element.tagName == KENDO_PSEUDO_ELEMENT) {\n          _renderElement(element, group);\n          return;\n      }\n      var fake = [];\n      function pseudo(kind, place) {\n          var style = getComputedStyle$1(element, kind), content = style.content;\n          updateCounters(style);\n          if (content && content != \"normal\" && content != \"none\" && style.width != \"0px\") {\n              var psel = element.ownerDocument.createElement(KENDO_PSEUDO_ELEMENT);\n              setStyle(psel, getCssText(style));\n              psel.textContent = evalPseudoElementContent(element, content);\n              element.insertBefore(psel, place);\n              fake.push(psel);\n          }\n      }\n      pseudo(\":before\", element.firstChild);\n      pseudo(\":after\", null);\n      if (fake.length > 0) {\n          var saveClass = element.className;\n          element.className += \" kendo-pdf-hide-pseudo-elements\";\n          _renderElement(element, group);\n          element.className = saveClass;\n          fake.forEach(function(el){ element.removeChild(el); });\n      } else {\n          _renderElement(element, group);\n      }\n  }\n\n  function _renderElement(element, group) {\n      var style = getComputedStyle$1(element);\n\n      var top = getBorder(style, \"top\");\n      var right = getBorder(style, \"right\");\n      var bottom = getBorder(style, \"bottom\");\n      var left = getBorder(style, \"left\");\n\n      var rTL0 = getBorderRadius(style, \"top-left\");\n      var rTR0 = getBorderRadius(style, \"top-right\");\n      var rBL0 = getBorderRadius(style, \"bottom-left\");\n      var rBR0 = getBorderRadius(style, \"bottom-right\");\n\n      var dir = getPropertyValue(style, \"direction\");\n\n      var backgroundColor = getPropertyValue(style, \"background-color\");\n      backgroundColor = parseColor(backgroundColor);\n\n      var backgroundImage = parseBackgroundImage( getPropertyValue(style, \"background-image\") );\n      var backgroundRepeat = splitProperty( getPropertyValue(style, \"background-repeat\") );\n      var backgroundPosition = splitProperty( getPropertyValue(style, \"background-position\") );\n      var backgroundOrigin = splitProperty( getPropertyValue(style, \"background-origin\") );\n      var backgroundSize = splitProperty( getPropertyValue(style, \"background-size\") );\n\n      // IE shrinks the text with text-overflow: ellipsis,\n      // apparently because the returned bounding box for the range\n      // is limited to the visible area minus space for the dots,\n      // instead of being the full width of the text.\n      //\n      // https://github.com/telerik/kendo/issues/5232\n      // https://github.com/telerik/kendo-ui-core/issues/1868\n      //\n      // We have to test it here rather than in renderText because\n      // text-overflow: ellipsis could be set on a parent element (not\n      // necessarily the one containing the text); in this case,\n      // getComputedStyle(elementWithTheText) will return \"clip\", not\n      // \"ellipsis\" (which is probably a bug, but oh well...)\n      var textOverflow, saveTextOverflow;\n      if (microsoft) {\n          textOverflow = style.textOverflow;             // computed style\n          if (textOverflow == \"ellipsis\") {\n              saveTextOverflow = element.style.textOverflow; // own style.\n              element.style.textOverflow = \"clip\";\n          }\n      }\n\n      if (browser.msie && browser.version < 10) {\n          // IE9 hacks.  getPropertyValue won't return the correct\n          // value.  Sucks that we have to do it here, I'd prefer to\n          // move it in getPropertyValue, but we don't have the\n          // element.\n          backgroundPosition = splitProperty(element.currentStyle.backgroundPosition);\n      }\n\n      var innerbox = innerBox(element.getBoundingClientRect(), \"border-*-width\", element);\n\n      // CSS \"clip\" property - if present, replace the group with a\n      // new one which is clipped.  This must happen before drawing\n      // the borders and background.\n      (function(){\n          var clip = getPropertyValue(style, \"clip\");\n          var m = /^\\s*rect\\((.*)\\)\\s*$/.exec(clip);\n          if (m) {\n              var a = m[1].split(/[ ,]+/g);\n              var top = a[0] == \"auto\" ? innerbox.top : parseFloat(a[0]) + innerbox.top;\n              var right = a[1] == \"auto\" ? innerbox.right : parseFloat(a[1]) + innerbox.left;\n              var bottom = a[2] == \"auto\" ? innerbox.bottom : parseFloat(a[2]) + innerbox.top;\n              var left = a[3] == \"auto\" ? innerbox.left : parseFloat(a[3]) + innerbox.left;\n              var tmp = new Group();\n              var clipPath = new Path()\n                  .moveTo(left, top)\n                  .lineTo(right, top)\n                  .lineTo(right, bottom)\n                  .lineTo(left, bottom)\n                  .close();\n              setClipping(tmp, clipPath);\n              group.append(tmp);\n              group = tmp;\n              updateClipbox(clipPath);\n          }\n      })();\n\n      var boxes, i, cells;\n      var display = getPropertyValue(style, \"display\");\n\n      if (display == \"table-row\") {\n          // because of rowspan/colspan, we shouldn't draw background of table row elements on the\n          // box given by its getBoundingClientRect, because if we do we risk overwritting a\n          // previously rendered cell.  https://github.com/telerik/kendo/issues/4881\n          boxes = [];\n          for (i = 0, cells = element.children; i < cells.length; ++i) {\n              boxes.push(cells[i].getBoundingClientRect());\n          }\n      } else {\n          boxes = element.getClientRects();\n          if (boxes.length == 1) {\n              // Workaround the missing borders in Chrome!  getClientRects() boxes contains values\n              // rounded to integer.  getBoundingClientRect() appears to work fine.  We still need\n              // getClientRects() to support cases where there are more boxes (continued inline\n              // elements that might have border/background).\n              boxes = [ element.getBoundingClientRect() ];\n          }\n      }\n\n      // This function workarounds another Chrome bug, where boxes returned for a table with\n      // border-collapse: collapse will overlap the table border.  Our rendering is not perfect in\n      // such case anyway, but with this is better than without it.\n      boxes = adjustBoxes(boxes);\n\n      for (i = 0; i < boxes.length; ++i) {\n          drawOneBox(boxes[i], i === 0, i == boxes.length - 1);\n      }\n\n      // Render links as separate groups.  We can't use boxes returned by element's getClientRects\n      // because if display type is \"inline\" (default for <a>), boxes will not include the height of\n      // images inside.  https://github.com/telerik/kendo-ui-core/issues/3359\n      if (element.tagName == \"A\" && element.href && !/^#?$/.test(element.getAttribute(\"href\"))) {\n          if (!nodeInfo._avoidLinks || !matches(element, nodeInfo._avoidLinks)) {\n              var r = document.createRange();\n              r.selectNodeContents(element);\n              slice(r.getClientRects()).forEach(function(box){\n                  var g = new Group();\n                  g._pdfLink = {\n                      url    : element.href,\n                      top    : box.top,\n                      right  : box.right,\n                      bottom : box.bottom,\n                      left   : box.left\n                  };\n                  group.append(g);\n              });\n          }\n      }\n\n      if (boxes.length > 0 && display == \"list-item\" && !element.getAttribute(\"kendo-no-bullet\")) {\n          drawBullet(boxes[0]);\n      }\n\n      // overflow: hidden/auto - if present, replace the group with\n      // a new one clipped by the inner box.\n      (function(){\n          function clipit() {\n              var clipPath = elementRoundBox(element, innerbox, \"padding\");\n              var tmp = new Group();\n              setClipping(tmp, clipPath);\n              group.append(tmp);\n              group = tmp;\n              updateClipbox(clipPath);\n          }\n          if (isFormField(element)) {\n              clipit();\n          } else if (/^(hidden|auto|scroll)/.test(getPropertyValue(style, \"overflow\"))) {\n              clipit();\n          } else if (/^(hidden|auto|scroll)/.test(getPropertyValue(style, \"overflow-x\"))) {\n              clipit();\n          } else if (/^(hidden|auto|scroll)/.test(getPropertyValue(style, \"overflow-y\"))) {\n              clipit();\n          }\n      })();\n\n      if (!maybeRenderWidget(element, group) && !maybeRenderBullet(element, group)) {\n          renderContents(element, group);\n      }\n\n      if (microsoft && textOverflow == \"ellipsis\") {\n          element.style.textOverflow = saveTextOverflow;\n      }\n\n      return group; // only utility functions after this line.\n\n      function adjustBoxes(boxes) {\n          if (/^td$/i.test(element.tagName)) {\n              var table = nodeInfo.table;\n              if (table && getPropertyValue(table.style, \"border-collapse\") == \"collapse\") {\n                  var tableBorderLeft = getBorder(table.style, \"left\").width;\n                  var tableBorderTop = getBorder(table.style, \"top\").width;\n                  // check if we need to adjust\n                  if (tableBorderLeft === 0 && tableBorderTop === 0) {\n                      return boxes; // nope\n                  }\n                  var tableBox = table.element.getBoundingClientRect();\n                  var firstCell = table.element.rows[0].cells[0];\n                  var firstCellBox = firstCell.getBoundingClientRect();\n                  if (firstCellBox.top == tableBox.top || firstCellBox.left == tableBox.left) {\n                      return slice(boxes).map(function(box){\n                          return {\n                              left   : box.left + tableBorderLeft,\n                              top    : box.top + tableBorderTop,\n                              right  : box.right + tableBorderLeft,\n                              bottom : box.bottom + tableBorderTop,\n                              height : box.height,\n                              width  : box.width\n                          };\n                      });\n                  }\n              }\n          }\n          return boxes;\n      }\n\n      // this function will be called to draw each border.  it\n      // draws starting at origin and the resulted path must be\n      // translated/rotated to be placed in the proper position.\n      //\n      // arguments are named as if it draws the top border:\n      //\n      //    - `len` the length of the edge\n      //    - `Wtop` the width of the edge (i.e. border-top-width)\n      //    - `Wleft` the width of the left edge (border-left-width)\n      //    - `Wright` the width of the right edge\n      //    - `rl` and `rl` -- the border radius on the left and right\n      //      (objects containing x and y, for horiz/vertical radius)\n      //    - `transform` -- transformation to apply\n      //\n      function drawEdge(color, len, Wtop, Wleft, Wright, rl, rr, transform) {\n          if (Wtop <= 0) {\n              return;\n          }\n\n          var path, edge = new Group();\n          setTransform(edge, transform);\n          group.append(edge);\n\n          sanitizeRadius(rl);\n          sanitizeRadius(rr);\n\n          // draw main border.  this is the area without the rounded corners\n          path = new Path({\n              fill: { color: color },\n              stroke: null\n          });\n          edge.append(path);\n          path.moveTo(rl.x ? Math.max(rl.x, Wleft) : 0, 0)\n              .lineTo(len - (rr.x ? Math.max(rr.x, Wright) : 0), 0)\n              .lineTo(len - Math.max(rr.x, Wright), Wtop)\n              .lineTo(Math.max(rl.x, Wleft), Wtop)\n              .close();\n\n          if (rl.x) {\n              drawRoundCorner(Wleft, rl, [ -1, 0, 0, 1, rl.x, 0 ]);\n          }\n\n          if (rr.x) {\n              drawRoundCorner(Wright, rr, [ 1, 0, 0, 1, len - rr.x, 0 ]);\n          }\n\n          // draws one round corner, starting at origin (needs to be\n          // translated/rotated to be placed properly).\n          function drawRoundCorner(Wright, r, transform) {\n              var angle = Math.PI/2 * Wright / (Wright + Wtop);\n\n              // not sanitizing this one, because negative values\n              // are useful to fill the box correctly.\n              var ri = {\n                  x: r.x - Wright,\n                  y: r.y - Wtop\n              };\n\n              var path = new Path({\n                  fill: { color: color },\n                  stroke: null\n              }).moveTo(0, 0);\n\n              setTransform(path, transform);\n\n              addArcToPath(path, 0, r.y, {\n                  startAngle: -90,\n                  endAngle: -radiansToDegrees(angle),\n                  radiusX: r.x,\n                  radiusY: r.y\n              });\n\n              if (ri.x > 0 && ri.y > 0) {\n                  path.lineTo(ri.x * Math.cos(angle), r.y - ri.y * Math.sin(angle));\n                  addArcToPath(path, 0, r.y, {\n                      startAngle: -radiansToDegrees(angle),\n                      endAngle: -90,\n                      radiusX: ri.x,\n                      radiusY: ri.y,\n                      anticlockwise: true\n                  });\n              }\n              else if (ri.x > 0) {\n                  path.lineTo(ri.x, Wtop)\n                      .lineTo(0, Wtop);\n              }\n              else {\n                  path.lineTo(ri.x, Wtop)\n                      .lineTo(ri.x, 0);\n              }\n\n              edge.append(path.close());\n          }\n      }\n\n      function drawBackground(box) {\n          var background = new Group();\n          setClipping(background, roundBox(box, rTL0, rTR0, rBR0, rBL0));\n          group.append(background);\n\n          if (backgroundColor) {\n              var path = new Path({\n                  fill: { color: backgroundColor.toCssRgba() },\n                  stroke: null\n              });\n              path.moveTo(box.left, box.top)\n                  .lineTo(box.right, box.top)\n                  .lineTo(box.right, box.bottom)\n                  .lineTo(box.left, box.bottom)\n                  .close();\n              background.append(path);\n          }\n\n          for (var i = backgroundImage.length; --i >= 0;) {\n              drawOneBackground(\n                  background, box,\n                  backgroundImage[i],\n                  backgroundRepeat[i % backgroundRepeat.length],\n                  backgroundPosition[i % backgroundPosition.length],\n                  backgroundOrigin[i % backgroundOrigin.length],\n                  backgroundSize[i % backgroundSize.length]\n              );\n          }\n      }\n\n      function drawOneBackground(group, box, background, backgroundRepeat, backgroundPosition, backgroundOrigin, backgroundSize) {\n          if (!background || (background == \"none\")) {\n              return;\n          }\n\n          if (background.type == \"url\") {\n              var img = IMAGE_CACHE[background.url];\n              if (img && img.width > 0 && img.height > 0) {\n                  drawBackgroundImage(group, box, img.width, img.height, function(group, rect){\n                      group.append(new Image$1(background.url, rect));\n                  });\n              }\n          } else if (background.type == \"linear\") {\n              drawBackgroundImage(group, box, box.width, box.height, gradientRenderer(background));\n          } else {\n              return;\n          }\n\n          function drawBackgroundImage(group, box, img_width, img_height, renderBG) {\n              var aspect_ratio = img_width / img_height, f;\n\n              // for background-origin: border-box the box is already appropriate\n              var orgBox = box;\n              if (backgroundOrigin == \"content-box\") {\n                  orgBox = innerBox(orgBox, \"border-*-width\", element);\n                  orgBox = innerBox(orgBox, \"padding-*\", element);\n              } else if (backgroundOrigin == \"padding-box\") {\n                  orgBox = innerBox(orgBox, \"border-*-width\", element);\n              }\n\n              if (!/^\\s*auto(\\s+auto)?\\s*$/.test(backgroundSize)) {\n                  if (backgroundSize == \"contain\") {\n                      f = Math.min(orgBox.width / img_width,\n                                   orgBox.height / img_height);\n                      img_width *= f;\n                      img_height *= f;\n                  }\n                  else if (backgroundSize == \"cover\") {\n                      f = Math.max(orgBox.width / img_width,\n                                   orgBox.height / img_height);\n                      img_width *= f;\n                      img_height *= f;\n                  }\n                  else {\n                      var size = backgroundSize.split(/\\s+/g);\n                      // compute width\n                      if (/%$/.test(size[0])) {\n                          img_width = orgBox.width * parseFloat(size[0]) / 100;\n                      } else {\n                          img_width = parseFloat(size[0]);\n                      }\n                      // compute height\n                      if (size.length == 1 || size[1] == \"auto\") {\n                          img_height = img_width / aspect_ratio;\n                      } else if (/%$/.test(size[1])) {\n                          img_height = orgBox.height * parseFloat(size[1]) / 100;\n                      } else {\n                          img_height = parseFloat(size[1]);\n                      }\n                  }\n              }\n\n              var pos = String(backgroundPosition);\n\n              // IE sometimes reports single-word positions\n              // https://github.com/telerik/kendo-ui-core/issues/2786\n              //\n              // it seems to switch to percentages when the horizontal\n              // position is not \"center\", therefore we don't handle\n              // multi-word cases here.  All other browsers return\n              // percentages or pixels instead of keywords.  At least\n              // for now...\n              switch (pos) {\n                case \"bottom\" : pos = \"50% 100%\"; break;\n                case \"top\"    : pos = \"50% 0\"; break;\n                case \"left\"   : pos = \"0 50%\"; break;\n                case \"right\"  : pos = \"100% 50%\"; break;\n                case \"center\" : pos = \"50% 50%\"; break;\n              }\n\n              pos = pos.split(/\\s+/);\n              if (pos.length == 1) {\n                  pos[1] = \"50%\";\n              }\n\n              if (/%$/.test(pos[0])) {\n                  pos[0] = parseFloat(pos[0]) / 100 * (orgBox.width - img_width);\n              } else {\n                  pos[0] = parseFloat(pos[0]);\n              }\n              if (/%$/.test(pos[1])) {\n                  pos[1] = parseFloat(pos[1]) / 100 * (orgBox.height - img_height);\n              } else {\n                  pos[1] = parseFloat(pos[1]);\n              }\n\n              var rect = new Rect$1([ orgBox.left + pos[0], orgBox.top + pos[1] ], [ img_width, img_height ]);\n\n              // XXX: background-repeat could be implemented more\n              //      efficiently as a fill pattern (at least for PDF\n              //      output, probably SVG too).\n\n              function rewX() {\n                  while (rect.origin.x > box.left) {\n                      rect.origin.x -= img_width;\n                  }\n              }\n\n              function rewY() {\n                  while (rect.origin.y > box.top) {\n                      rect.origin.y -= img_height;\n                  }\n              }\n\n              function repeatX() {\n                  while (rect.origin.x < box.right) {\n                      renderBG(group, rect.clone());\n                      rect.origin.x += img_width;\n                  }\n              }\n\n              if (backgroundRepeat == \"no-repeat\") {\n                  renderBG(group, rect);\n              }\n              else if (backgroundRepeat == \"repeat-x\") {\n                  rewX();\n                  repeatX();\n              }\n              else if (backgroundRepeat == \"repeat-y\") {\n                  rewY();\n                  while (rect.origin.y < box.bottom) {\n                      renderBG(group, rect.clone());\n                      rect.origin.y += img_height;\n                  }\n              }\n              else if (backgroundRepeat == \"repeat\") {\n                  rewX();\n                  rewY();\n                  var origin = rect.origin.clone();\n                  while (rect.origin.y < box.bottom) {\n                      rect.origin.x = origin.x;\n                      repeatX();\n                      rect.origin.y += img_height;\n                  }\n              }\n          }\n      }\n\n      function drawBullet() {\n          var listStyleType = getPropertyValue(style, \"list-style-type\");\n          if (listStyleType == \"none\") {\n              return;\n          }\n          var listStylePosition = getPropertyValue(style, \"list-style-position\");\n\n          function _drawBullet(f) {\n              saveStyle(element, function(){\n                  element.style.position = \"relative\";\n                  var bullet = element.ownerDocument.createElement(KENDO_PSEUDO_ELEMENT);\n                  bullet.style.position = \"absolute\";\n                  bullet.style.boxSizing = \"border-box\";\n                  if (listStylePosition == \"outside\") {\n                      bullet.style.width = \"6em\";\n                      bullet.style.left = \"-6.8em\";\n                      bullet.style.textAlign = \"right\";\n                  } else {\n                      bullet.style.left = \"0px\";\n                  }\n                  f(bullet);\n                  element.insertBefore(bullet, element.firstChild);\n                  renderElement(bullet, group);\n                  element.removeChild(bullet);\n              });\n          }\n\n          function elementIndex(f) {\n              var a = element.parentNode.children;\n              var k = element.getAttribute(\"kendo-split-index\");\n              if (k != null) {\n                  return f(k|0, a.length);\n              }\n              for (var i = 0; i < a.length; ++i) {\n                  if (a[i] === element) {\n                      return f(i, a.length);\n                  }\n              }\n          }\n\n          switch (listStyleType) {\n            case \"circle\":\n            case \"disc\":\n            case \"square\":\n              _drawBullet(function(bullet){\n                  bullet.innerHTML = '&nbsp;';\n                  bullet.setAttribute(KENDO_BULLET_TYPE, listStyleType);\n              });\n              break;\n\n            case \"decimal\":\n            case \"decimal-leading-zero\":\n              _drawBullet(function(bullet){\n                  elementIndex(function(idx){\n                      ++idx;\n                      if (listStyleType == \"decimal-leading-zero\" && idx < 10) {\n                          idx = \"0\" + idx;\n                      }\n                      bullet.innerHTML = idx + \".\";\n                  });\n              });\n              break;\n\n            case \"lower-roman\":\n            case \"upper-roman\":\n              _drawBullet(function(bullet){\n                  elementIndex(function(idx){\n                      idx = arabicToRoman(idx + 1);\n                      if (listStyleType == \"upper-roman\") {\n                          idx = idx.toUpperCase();\n                      }\n                      bullet.innerHTML = idx + \".\";\n                  });\n              });\n              break;\n\n            case \"lower-latin\":\n            case \"lower-alpha\":\n            case \"upper-latin\":\n            case \"upper-alpha\":\n              _drawBullet(function(bullet){\n                  elementIndex(function(idx){\n                      idx = alphaNumeral(idx);\n                      if (/^upper/i.test(listStyleType)) {\n                          idx = idx.toUpperCase();\n                      }\n                      bullet.innerHTML = idx + \".\";\n                  });\n              });\n              break;\n          }\n      }\n\n      // draws a single border box\n      function drawOneBox(box, isFirst, isLast) {\n          if (box.width === 0 || box.height === 0) {\n              return;\n          }\n\n          drawBackground(box);\n\n          var shouldDrawLeft = (left.width > 0 && ((isFirst && dir == \"ltr\") || (isLast && dir == \"rtl\")));\n          var shouldDrawRight = (right.width > 0 && ((isLast && dir == \"ltr\") || (isFirst && dir == \"rtl\")));\n\n          // The most general case is that the 4 borders have different widths and border\n          // radiuses.  The way that is handled is by drawing 3 Paths for each border: the\n          // straight line, and two round corners which represent half of the entire rounded\n          // corner.  To simplify code those shapes are drawed at origin (by the drawEdge\n          // function), then translated/rotated into the right position.\n          //\n          // However, this leads to poor results due to rounding in the simpler cases where\n          // borders are straight lines.  Therefore we handle a few such cases separately with\n          // straight lines. C^wC^wC^w -- nope, scratch that.  poor rendering was because of a bug\n          // in Chrome (getClientRects() returns rounded integer values rather than exact floats.\n          // web dev is still a ghetto.)\n\n          // first, just in case there is no border...\n          if (top.width === 0 && left.width === 0 && right.width === 0 && bottom.width === 0) {\n              return;\n          }\n\n          // START paint borders\n          // if all borders have equal colors...\n          if (top.color == right.color && top.color == bottom.color && top.color == left.color) {\n\n              // if same widths too, we can draw the whole border by stroking a single path.\n              if (top.width == right.width && top.width == bottom.width && top.width == left.width)\n              {\n                  if (shouldDrawLeft && shouldDrawRight) {\n                      // reduce box by half the border width, so we can draw it by stroking.\n                      box = innerBox(box, top.width/2);\n\n                      // adjust the border radiuses, again by top.width/2, and make the path element.\n                      var path = elementRoundBox(element, box, top.width/2);\n                      path.options.stroke = {\n                          color: top.color,\n                          width: top.width\n                      };\n                      group.append(path);\n                      return;\n                  }\n              }\n          }\n\n          // if border radiuses are zero and widths are at most one pixel, we can again use simple\n          // paths.\n          if (rTL0.x === 0 && rTR0.x === 0 && rBR0.x === 0 && rBL0.x === 0) {\n              // alright, 1.9px will do as well.  the difference in color blending should not be\n              // noticeable.\n              if (top.width < 2 && left.width < 2 && right.width < 2 && bottom.width < 2) {\n                  // top border\n                  if (top.width > 0) {\n                      group.append(\n                          new Path({\n                              stroke: { width: top.width, color: top.color }\n                          })\n                              .moveTo(box.left, box.top + top.width/2)\n                              .lineTo(box.right, box.top + top.width/2)\n                      );\n                  }\n\n                  // bottom border\n                  if (bottom.width > 0) {\n                      group.append(\n                          new Path({\n                              stroke: { width: bottom.width, color: bottom.color }\n                          })\n                              .moveTo(box.left, box.bottom - bottom.width/2)\n                              .lineTo(box.right, box.bottom - bottom.width/2)\n                      );\n                  }\n\n                  // left border\n                  if (shouldDrawLeft) {\n                      group.append(\n                          new Path({\n                              stroke: { width: left.width, color: left.color }\n                          })\n                              .moveTo(box.left + left.width/2, box.top)\n                              .lineTo(box.left + left.width/2, box.bottom)\n                      );\n                  }\n\n                  // right border\n                  if (shouldDrawRight) {\n                      group.append(\n                          new Path({\n                              stroke: { width: right.width, color: right.color }\n                          })\n                              .moveTo(box.right - right.width/2, box.top)\n                              .lineTo(box.right - right.width/2, box.bottom)\n                      );\n                  }\n\n                  return;\n              }\n          }\n          // END paint borders\n\n          var tmp = adjustBorderRadiusForBox(box, rTL0, rTR0, rBR0, rBL0);\n          var rTL = tmp.tl;\n          var rTR = tmp.tr;\n          var rBR = tmp.br;\n          var rBL = tmp.bl;\n\n          // top border\n          drawEdge(top.color,\n                   box.width, top.width, left.width, right.width,\n                   rTL, rTR,\n                   [ 1, 0, 0, 1, box.left, box.top ]);\n\n          // bottom border\n          drawEdge(bottom.color,\n                   box.width, bottom.width, right.width, left.width,\n                   rBR, rBL,\n                   [ -1, 0, 0, -1, box.right, box.bottom ]);\n\n          // for left/right borders we need to invert the border-radiuses\n          function inv(p) {\n              return { x: p.y, y: p.x };\n          }\n\n          // left border\n          drawEdge(left.color,\n                   box.height, left.width, bottom.width, top.width,\n                   inv(rBL), inv(rTL),\n                   [ 0, -1, 1, 0, box.left, box.bottom ]);\n\n          // right border\n          drawEdge(right.color,\n                   box.height, right.width, top.width, bottom.width,\n                   inv(rTR), inv(rBR),\n                   [ 0, 1, -1, 0, box.right, box.top ]);\n      }\n  }\n\n  function gradientRenderer(gradient) {\n      return function(group, rect) {\n          var width = rect.width(), height = rect.height();\n\n          switch (gradient.type) {\n            case \"linear\":\n\n              // figure out the angle.\n              var angle = gradient.angle != null ? gradient.angle : Math.PI;\n              switch (gradient.to) {\n                case \"top\":\n                  angle = 0;\n                  break;\n                case \"left\":\n                  angle = -Math.PI / 2;\n                  break;\n                case \"bottom\":\n                  angle = Math.PI;\n                  break;\n                case \"right\":\n                  angle = Math.PI / 2;\n                  break;\n                case \"top left\": case \"left top\":\n                  angle = -Math.atan2(height, width);\n                  break;\n                case \"top right\": case \"right top\":\n                  angle = Math.atan2(height, width);\n                  break;\n                case \"bottom left\": case \"left bottom\":\n                  angle = Math.PI + Math.atan2(height, width);\n                  break;\n                case \"bottom right\": case \"right bottom\":\n                  angle = Math.PI - Math.atan2(height, width);\n                  break;\n              }\n\n              if (gradient.reverse) {\n                  angle -= Math.PI;\n              }\n\n              // limit the angle between 0..2PI\n              angle %= 2 * Math.PI;\n              if (angle < 0) {\n                  angle += 2 * Math.PI;\n              }\n\n              // compute gradient's start/end points.  here len is the length of the gradient line\n              // and x,y is the end point relative to the center of the rectangle in conventional\n              // (math) axis direction.\n\n              // this is the original (unscaled) length of the gradient line.  needed to deal with\n              // absolutely positioned color stops.  formula from the CSS spec:\n              // http://dev.w3.org/csswg/css-images-3/#linear-gradient-syntax\n              var pxlen = Math.abs(width * Math.sin(angle)) + Math.abs(height * Math.cos(angle));\n\n              // The math below is pretty simple, but it took a while to figure out.  We compute x\n              // and y, the *end* of the gradient line.  However, we want to transform them into\n              // element-based coordinates (SVG's gradientUnits=\"objectBoundingBox\").  That means,\n              // x=0 is the left edge, x=1 is the right edge, y=0 is the top edge and y=1 is the\n              // bottom edge.\n              //\n              // A naive approach would use the original angle for these calculations.  Say we'd\n              // like to draw a gradient angled at 45deg in a 100x400 box.  When we use\n              // objectBoundingBox, the renderer will draw it in a 1x1 *square* box, and then\n              // scale that to the desired dimensions.  The 45deg angle will look more like 70deg\n              // after scaling.  SVG (http://www.w3.org/TR/SVG/pservers.html#LinearGradients) says\n              // the following:\n              //\n              //     When gradientUnits=\"objectBoundingBox\" and 'gradientTransform' is the\n              //     identity matrix, the normal of the linear gradient is perpendicular to the\n              //     gradient vector in object bounding box space (i.e., the abstract coordinate\n              //     system where (0,0) is at the top/left of the object bounding box and (1,1) is\n              //     at the bottom/right of the object bounding box). When the object's bounding\n              //     box is not square, the gradient normal which is initially perpendicular to\n              //     the gradient vector within object bounding box space may render\n              //     non-perpendicular relative to the gradient vector in user space. If the\n              //     gradient vector is parallel to one of the axes of the bounding box, the\n              //     gradient normal will remain perpendicular. This transformation is due to\n              //     application of the non-uniform scaling transformation from bounding box space\n              //     to user space.\n              //\n              // which is an extremely long and confusing way to tell what I just said above.\n              //\n              // For this reason we need to apply the reverse scaling to the original angle, so\n              // that when it'll finally be rendered it'll actually be at the desired slope.  Now\n              // I'll let you figure out the math yourself.\n\n              var scaledAngle = Math.atan(width * Math.tan(angle) / height);\n              var sin = Math.sin(scaledAngle), cos = Math.cos(scaledAngle);\n              var len = Math.abs(sin) + Math.abs(cos);\n              var x = len/2 * sin;\n              var y = len/2 * cos;\n\n              // Because of the arctangent, our scaledAngle ends up between -PI/2..PI/2, possibly\n              // losing the intended direction of the gradient.  The following fixes it.\n              if (angle > Math.PI/2 && angle <= 3*Math.PI/2) {\n                  x = -x;\n                  y = -y;\n              }\n\n              // compute the color stops.\n              var implicit = [], right = 0;\n              var stops = gradient.stops.map(function(s, i){\n                  var offset = s.percent;\n                  if (offset) {\n                      offset = parseFloat(offset) / 100;\n                  } else if (s.length) {\n                      offset = parseFloat(s.length) / pxlen;\n                  } else if (i === 0) {\n                      offset = 0;\n                  } else if (i == gradient.stops.length - 1) {\n                      offset = 1;\n                  }\n                  var stop = {\n                      color: s.color.toCssRgba(),\n                      offset: offset\n                  };\n                  if (offset != null) {\n                      right = offset;\n                      // fix implicit offsets\n                      implicit.forEach(function(s, i){\n                          var stop = s.stop;\n                          stop.offset = s.left + (right - s.left) * (i + 1) / (implicit.length + 1);\n                      });\n                      implicit = [];\n                  } else {\n                      implicit.push({ left: right, stop: stop });\n                  }\n                  return stop;\n              });\n\n              var start = [ 0.5 - x, 0.5 + y ];\n              var end = [ 0.5 + x, 0.5 - y ];\n\n              // finally, draw it.\n              group.append(\n                  Path.fromRect(rect)\n                      .stroke(null)\n                      .fill(new LinearGradient({\n                          start     : start,\n                          end       : end,\n                          stops     : stops,\n                          userSpace : false\n                      }))\n              );\n              break;\n            case \"radial\":\n              // XXX:\n              if (window.console && window.console.log) {\n                  window.console.log(\"Radial gradients are not yet supported in HTML renderer\");\n              }\n              break;\n          }\n      };\n  }\n\n  function maybeRenderWidget(element, group) {\n      var visual;\n      if (element._kendoExportVisual) {\n          var rect = element.getBoundingClientRect();\n          var size = {\n              width: rect.width,\n              height: rect.height\n          };\n          visual = element._kendoExportVisual(size);\n      } else if (window.kendo && window.kendo.jQuery && element.getAttribute(window.kendo.attr(\"role\"))) {\n          var widget = window.kendo.widgetInstance(window.kendo.jQuery(element));\n          if (widget && (widget.exportDOMVisual || widget.exportVisual)) {\n              if (widget.exportDOMVisual) {\n                  visual = widget.exportDOMVisual();\n              } else {\n                  visual = widget.exportVisual();\n              }\n          }\n      }\n\n      if (!visual) {\n          return false;\n      }\n\n      var wrap = new Group();\n      wrap.children.push(visual);\n\n      var bbox = element.getBoundingClientRect();\n      wrap.transform(transform().translate(bbox.left, bbox.top));\n\n      group.append(wrap);\n\n      return true;\n  }\n\n  function maybeRenderBullet(element, group) {\n      var bulletType = element.getAttribute(KENDO_BULLET_TYPE);\n\n      if (!bulletType) {\n          return false;\n      }\n\n      var box = element.getBoundingClientRect();\n      var color = getComputedStyle$1(element).color;\n\n      if (bulletType === 'square') {\n          var rectSize = box.height / 5;\n          group.append(new Rect(new Rect$1([\n              box.right - rectSize,\n              box.top + box.height / 2.1\n          ], [rectSize, rectSize])).fill(color).stroke(color));\n      } else {\n          var radius = box.height / 7;\n          var center = [\n              box.right - radius,\n              box.top + (box.height + radius) / 2\n          ];\n          var circle = new Circle(new Circle$1(center, radius));\n          if (bulletType === 'circle') {\n              circle.stroke(color, 0.5);\n          } else {\n              circle.fill(color).stroke(null);\n          }\n          group.append(circle);\n      }\n\n      return true;\n  }\n\n  function renderImage(element, url, group) {\n      var box = getContentBox(element);\n      var rect = new Rect$1([ box.left, box.top ], [ box.width, box.height ]);\n      var image = new Image$1(url, rect);\n      setClipping(image, elementRoundBox(element, box, \"content\"));\n      group.append(image);\n  }\n\n  function zIndexSort(a, b) {\n      var sa = getComputedStyle$1(a);\n      var sb = getComputedStyle$1(b);\n      var za = parseFloat(getPropertyValue(sa, \"z-index\"));\n      var zb = parseFloat(getPropertyValue(sb, \"z-index\"));\n      var pa = getPropertyValue(sa, \"position\");\n      var pb = getPropertyValue(sb, \"position\");\n      if (isNaN(za) && isNaN(zb)) {\n          if ((/static|absolute/.test(pa)) && (/static|absolute/.test(pb))) {\n              return 0;\n          }\n          if (pa == \"static\") {\n              return -1;\n          }\n          if (pb == \"static\") {\n              return 1;\n          }\n          return 0;\n      }\n      if (isNaN(za)) {\n          return zb === 0 ? 0 : zb > 0 ? -1 : 1;\n      }\n      if (isNaN(zb)) {\n          return za === 0 ? 0 : za > 0 ? 1 : -1;\n      }\n      return parseFloat(za) - parseFloat(zb);\n  }\n\n  function isFormField(element) {\n      return /^(?:textarea|select|input)$/i.test(element.tagName);\n  }\n\n  function getSelectedOption(element) {\n      if (element.selectedOptions && element.selectedOptions.length > 0) {\n          return element.selectedOptions[0];\n      }\n      return element.options[element.selectedIndex];\n  }\n\n  function renderCheckbox(element, group) {\n      var style = getComputedStyle$1(element);\n      var color = getPropertyValue(style, \"color\");\n      var box = element.getBoundingClientRect();\n      if (element.type == \"checkbox\") {\n          group.append(\n              Path.fromRect(\n                  new Rect$1([ box.left+1, box.top+1 ],\n                               [ box.width-2, box.height-2 ])\n              ).stroke(color, 1)\n          );\n          if (element.checked) {\n              // fill a rectangle inside?  looks kinda ugly.\n              // group.append(\n              //     Path.fromRect(\n              //         new geo.Rect([ box.left+4, box.top+4 ],\n              //                      [ box.width-8, box.height-8])\n              //     ).fill(color).stroke(null)\n              // );\n\n              // let's draw a checkmark instead.  artistic, eh?\n              group.append(\n                  new Path()\n                      .stroke(color, 1.2)\n                      .moveTo(box.left + 0.22 * box.width,\n                              box.top + 0.55 * box.height)\n                      .lineTo(box.left + 0.45 * box.width,\n                              box.top + 0.75 * box.height)\n                      .lineTo(box.left + 0.78 * box.width,\n                              box.top + 0.22 * box.width)\n              );\n          }\n      } else {\n          group.append(\n              new Circle(\n                  new Circle$1([\n                      (box.left + box.right) / 2,\n                      (box.top + box.bottom) / 2\n                  ], Math.min(box.width-2, box.height-2) / 2)\n              ).stroke(color, 1)\n          );\n          if (element.checked) {\n              group.append(\n                  new Circle(\n                      new Circle$1([\n                          (box.left + box.right) / 2,\n                          (box.top + box.bottom) / 2\n                      ], Math.min(box.width-8, box.height-8) / 2)\n                  ).fill(color).stroke(null)\n              );\n          }\n      }\n  }\n\n  function renderFormField(element, group) {\n      var tag = element.tagName.toLowerCase();\n      if (tag == \"input\" && (element.type == \"checkbox\" || element.type == \"radio\")) {\n          return renderCheckbox(element, group);\n      }\n      var p = element.parentNode;\n      var doc = element.ownerDocument;\n      var el = doc.createElement(KENDO_PSEUDO_ELEMENT);\n      var option;\n      setStyle(el, getCssText(getComputedStyle$1(element)));\n      if (tag == \"input\") {\n          el.style.whiteSpace = \"pre\";\n      }\n      if (tag == \"select\" || tag == \"textarea\") {\n          el.style.overflow = \"auto\";\n      }\n      if (tag == \"select\") {\n          if (element.multiple) {\n              for (var i = 0; i < element.options.length; ++i) {\n                  option = doc.createElement(KENDO_PSEUDO_ELEMENT);\n                  setStyle(option, getCssText(getComputedStyle$1(element.options[i])));\n                  option.style.display = \"block\"; // IE9 messes up without this\n                  option.textContent = element.options[i].textContent;\n                  el.appendChild(option);\n              }\n          } else {\n              option = getSelectedOption(element);\n              if (option) {\n                  el.textContent = option.textContent;\n              }\n          }\n      } else {\n          el.textContent = element.value;\n      }\n      p.insertBefore(el, element);\n      el.scrollLeft = element.scrollLeft;\n      el.scrollTop = element.scrollTop;\n\n      // must temporarily hide the original element, otherwise it\n      // may affect layout of the fake element we want to render.\n      element.style.display = \"none\";\n\n      renderContents(el, group);\n      element.style.display = \"\";\n      p.removeChild(el);\n  }\n\n  function serializeSVG(element) {\n      var serializer = new window.XMLSerializer();\n      var xml = serializer.serializeToString(element);\n\n      if (browser.mozilla && !(element.getAttribute(\"width\") && element.getAttribute(\"height\"))) {\n          var doc = new window.DOMParser().parseFromString(xml, \"image/svg+xml\");\n          var svg = doc.documentElement;\n          var box = getContentBox(element);\n          svg.setAttribute(\"width\", box.width);\n          svg.setAttribute(\"height\", box.height);\n          xml = serializer.serializeToString(svg);\n      }\n\n      return xml;\n  }\n\n  function renderContents(element, group) {\n      if (nodeInfo._stackingContext.element === element) {\n          // the group that was set in pushNodeInfo might have\n          // changed due to clipping/transforms, update it here.\n          nodeInfo._stackingContext.group = group;\n      }\n      switch (element.tagName.toLowerCase()) {\n        case \"img\":\n          renderImage(element, element.src, group);\n          break;\n\n        case \"svg\":\n          var xml = serializeSVG(element);\n          var dataURL = \"data:image/svg+xml;base64,\" + (encodeBase64(xml));\n          renderImage(element, dataURL, group);\n          break;\n\n        case \"canvas\":\n          try {\n              renderImage(element, element.toDataURL(\"image/png\"), group);\n          } catch (ex) {\n              // tainted; can't draw it, ignore.\n          }\n          break;\n\n        case \"textarea\":\n        case \"input\":\n        case \"select\":\n          renderFormField(element, group);\n          break;\n\n        default:\n          var children = [], floats = [], positioned = [];\n          for (var i = element.firstChild; i; i = i.nextSibling) {\n              switch (i.nodeType) {\n                case 3:         // Text\n                  if (/\\S/.test(i.data)) {\n                      renderText(element, i, group);\n                  }\n                  break;\n                case 1:         // Element\n                  var style = getComputedStyle$1(i);\n                  var floating = getPropertyValue(style, \"float\");\n                  var position = getPropertyValue(style, \"position\");\n                  if (position != \"static\") {\n                      positioned.push(i);\n                  }\n                  else if (floating != \"none\") {\n                      floats.push(i);\n                  } else {\n                      children.push(i);\n                  }\n                  break;\n              }\n          }\n\n          mergeSort(children, zIndexSort).forEach(function(el){ renderElement(el, group); });\n          mergeSort(floats, zIndexSort).forEach(function(el){ renderElement(el, group); });\n          mergeSort(positioned, zIndexSort).forEach(function(el){ renderElement(el, group); });\n      }\n  }\n\n  function renderText(element, node, group) {\n      if (emptyClipbox()) {\n          return;\n      }\n      var style = getComputedStyle$1(element);\n\n      if (parseFloat(getPropertyValue(style, \"text-indent\")) < -500) {\n          // assume it should not be displayed.  the slider's\n          // draggable handle displays a Drag text for some reason,\n          // having text-indent: -3333px.\n          return;\n      }\n\n      var text = node.data;\n      var start = 0;\n      var end = text.search(/\\S\\s*$/) + 1;\n\n      if (!end) {\n          return; // whitespace-only node\n      }\n\n      var fontSize = getPropertyValue(style, \"font-size\");\n      var lineHeight = getPropertyValue(style, \"line-height\");\n\n      // simply getPropertyValue(\"font\") doesn't work in Firefox :-\\\n      var font = [\n          getPropertyValue(style, \"font-style\"),\n          getPropertyValue(style, \"font-variant\"),\n          getPropertyValue(style, \"font-weight\"),\n          fontSize, // no need for line height here; it breaks layout in FF\n          getPropertyValue(style, \"font-family\")\n      ].join(\" \");\n\n      fontSize = parseFloat(fontSize);\n      lineHeight = parseFloat(lineHeight);\n\n      if (fontSize === 0 || isNaN(fontSize)) {\n          return;\n      }\n\n      var color = getPropertyValue(style, \"color\");\n      var range = element.ownerDocument.createRange();\n      var align = getPropertyValue(style, \"text-align\");\n      var isJustified = align == \"justify\";\n      var columnCount = getPropertyValue(style, \"column-count\", 1);\n      var whiteSpace = getPropertyValue(style, \"white-space\");\n      var textTransform = getPropertyValue(style, \"text-transform\");\n\n      // A line of 500px, with a font of 12px, contains an average of 80 characters, but since we\n      // err, we'd like to guess a bigger number rather than a smaller one.  Multiplying by 5\n      // seems to be a good option.\n      var estimateLineLength = element.getBoundingClientRect().width / fontSize * 5;\n      if (estimateLineLength === 0) {\n          estimateLineLength = 500;\n      }\n\n      // we'll maintain this so we can workaround bugs in Chrome's Range.getClientRects\n      // https://github.com/telerik/kendo/issues/5740\n      var prevLineBottom = null;\n\n      var underline = nodeInfo[\"underline\"];\n      var lineThrough = nodeInfo[\"line-through\"];\n      var overline = nodeInfo[\"overline\"];\n      var underlineOffset = nodeInfo[\"underline-offset\"];\n\n      if (underline) {\n          forEachRect(decorateUnder);\n      }\n\n      // doChunk returns true when all text has been rendered\n      while (!doChunk()) {}\n\n      if (lineThrough || overline) {\n          forEachRect(decorateOver);\n      }\n\n      return;                 // only function declarations after this line\n\n      function forEachRect(callback) {\n          range.selectNode(node);\n          var clientRects = slice(range.getClientRects());\n\n          forEachRect = function (cb) { return clientRects.forEach(cb); };\n          forEachRect(callback);\n      }\n\n      function actuallyGetRangeBoundingRect(range) {\n          // XXX: to be revised when this Chrome bug is fixed:\n          // https://bugs.chromium.org/p/chromium/issues/detail?id=612459\n          if (microsoft || browser.chrome || browser.safari) {\n              // Workaround browser bugs: IE and Chrome would sometimes\n              // return 0 or 1-width rectangles before or after the main\n              // one.  https://github.com/telerik/kendo/issues/4674\n\n              // Actually Chrome 50 got worse, since the rectangles can now have the width of a\n              // full character, making it hard to tell whether it's a bogus rectangle or valid\n              // selection location.  The workaround is to ignore rectangles that fall on the\n              // previous line.  https://github.com/telerik/kendo/issues/5740\n              var rectangles = range.getClientRects(), box = {\n                  top    :  Infinity,\n                  right  : -Infinity,\n                  bottom : -Infinity,\n                  left   :  Infinity\n              }, done = false;\n              for (var i = 0; i < rectangles.length; ++i) {\n                  var b = rectangles[i];\n                  if (b.width <= 1 || b.bottom === prevLineBottom) {\n                      continue;   // bogus rectangle\n                  }\n                  box.left   = Math.min(b.left   , box.left);\n                  box.top    = Math.min(b.top    , box.top);\n                  box.right  = Math.max(b.right  , box.right);\n                  box.bottom = Math.max(b.bottom , box.bottom);\n                  done = true;\n              }\n              if (!done) {\n                  return range.getBoundingClientRect();\n              }\n              box.width = box.right - box.left;\n              box.height = box.bottom - box.top;\n              return box;\n          }\n          return range.getBoundingClientRect();\n      }\n\n      // Render a chunk of text, typically one line (but for justified text we render each word as\n      // a separate Text object, because spacing is variable).  Returns true when it finished the\n      // current node.  After each chunk it updates `start` to just after the last rendered\n      // character.\n      function doChunk() {\n          var origStart = start;\n          var box, pos = text.substr(start).search(/\\S/);\n          start += pos;\n          if (pos < 0 || start >= end) {\n              return true;\n          }\n\n          // Select a single character to determine the height of a line of text.  The box.bottom\n          // will be essential for us to figure out where the next line begins.\n          range.setStart(node, start);\n          range.setEnd(node, start + 1);\n          box = actuallyGetRangeBoundingRect(range);\n\n          // for justified text we must split at each space, because space has variable width.\n          var found = false;\n          if (isJustified || columnCount > 1) {\n              pos = text.substr(start).search(/\\s/);\n              if (pos >= 0) {\n                  // we can only split there if it's on the same line, otherwise we'll fall back\n                  // to the default mechanism (see findEOL below).\n                  range.setEnd(node, start + pos);\n                  var r = actuallyGetRangeBoundingRect(range);\n                  if (r.bottom == box.bottom) {\n                      box = r;\n                      found = true;\n                      start += pos;\n                  }\n              }\n          }\n\n          if (!found) {\n              // This code does three things: (1) it selects one line of text in `range`, (2) it\n              // leaves the bounding rect of that line in `box` and (3) it returns the position\n              // just after the EOL.  We know where the line starts (`start`) but we don't know\n              // where it ends.  To figure this out, we select a piece of text and look at the\n              // bottom of the bounding box.  If it changes, we have more than one line selected\n              // and should retry with a smaller selection.\n              //\n              // To speed things up, we first try to select all text in the node (`start` ->\n              // `end`).  If there's more than one line there, then select only half of it.  And\n              // so on.  When we find a value for `end` that fits in one line, we try increasing\n              // it (also in halves) until we get to the next line.  The algorithm stops when the\n              // right side of the bounding box does not change.\n              //\n              // One more thing to note is that everything happens in a single Text DOM node.\n              // There's no other tags inside it, therefore the left/top coordinates of the\n              // bounding box will not change.\n              pos = (function findEOL(min, eol, max){\n                  range.setEnd(node, eol);\n                  var r = actuallyGetRangeBoundingRect(range);\n                  if (r.bottom != box.bottom && min < eol) {\n                      return findEOL(min, (min + eol) >> 1, eol);\n                  } else if (r.right != box.right) {\n                      box = r;\n                      if (eol < max) {\n                          return findEOL(eol, (eol + max) >> 1, max);\n                      } else {\n                          return eol;\n                      }\n                  } else {\n                      return eol;\n                  }\n              })(start, Math.min(end, start + estimateLineLength), end);\n\n              if (pos == start) {\n                  // if EOL is at the start, then no more text fits on this line.  Skip the\n                  // remainder of this node entirely to avoid a stack overflow.\n                  return true;\n              }\n              start = pos;\n\n              pos = range.toString().search(/\\s+$/);\n              if (pos === 0) {\n                  return false; // whitespace only; we should not get here.\n              }\n              if (pos > 0) {\n                  // eliminate trailing whitespace\n                  range.setEnd(node, range.startOffset + pos);\n                  box = actuallyGetRangeBoundingRect(range);\n              }\n          }\n\n          // another workaround for IE: if we rely on getBoundingClientRect() we'll overlap with the bullet for LI\n          // elements.  Calling getClientRects() and using the *first* rect appears to give us the correct location.\n          // Note: not to be used in Chrome as it randomly returns a zero-width rectangle from the previous line.\n          if (microsoft) {\n              box = range.getClientRects()[0];\n          }\n\n          var str = range.toString();\n          if (!/^(?:pre|pre-wrap)$/i.test(whiteSpace)) {\n              // node with non-significant space -- collapse whitespace.\n              str = str.replace(/\\s+/g, \" \");\n          }\n          else if (/\\t/.test(str)) {\n              // with significant whitespace we need to do something about literal TAB characters.\n              // There's no TAB glyph in a font so they would be rendered in PDF as an empty box,\n              // and the whole text will stretch to fill the original width.  The core PDF lib\n              // does not have sufficient context to deal with it.\n\n              // calculate the starting column here, since we initially discarded any whitespace.\n              var cc = 0;\n              for (pos = origStart; pos < range.startOffset; ++pos) {\n                  var code = text.charCodeAt(pos);\n                  if (code == 9) {\n                      // when we meet a TAB we must round up to the next tab stop.\n                      // in all browsers TABs seem to be 8 characters.\n                      cc += 8 - cc % 8;\n                  } else if (code == 10 || code == 13) {\n                      // just in case we meet a newline we must restart.\n                      cc = 0;\n                  } else {\n                      // ordinary character --> advance one column\n                      cc++;\n                  }\n              }\n\n              // based on starting column, replace any TAB characters in the string we actually\n              // have to display with spaces so that they align to columns multiple of 8.\n              while ((pos = str.search(\"\\t\")) >= 0) {\n                  var indent = \"        \".substr(0, 8 - (cc + pos) % 8);\n                  str = str.substr(0, pos) + indent + str.substr(pos + 1);\n              }\n          }\n\n          if (!found) {\n              prevLineBottom = box.bottom;\n          }\n          drawText(str, box);\n      }\n\n      function drawText(str, box) {\n          // In IE the box height will be approximately lineHeight, while in\n          // other browsers it'll (correctly) be the height of the bounding\n          // box for the current text/font.  Which is to say, IE sucks again.\n          // The only good solution I can think of is to measure the text\n          // ourselves and center the bounding box.\n          if (microsoft && !isNaN(lineHeight)) {\n              var height = getFontHeight(font);\n              var top = (box.top + box.bottom - height) / 2;\n              box = {\n                  top    : top,\n                  right  : box.right,\n                  bottom : top + height,\n                  left   : box.left,\n                  height : height,\n                  width  : box.right - box.left\n              };\n          }\n\n          // var path = new Path({ stroke: { color: \"red\" }});\n          // path.moveTo(box.left, box.top)\n          //     .lineTo(box.right, box.top)\n          //     .lineTo(box.right, box.bottom)\n          //     .lineTo(box.left, box.bottom)\n          //     .close();\n          // group.append(path);\n\n          switch (textTransform) {\n            case \"uppercase\":\n              str = str.toUpperCase();\n              break;\n            case \"lowercase\":\n              str = str.toLowerCase();\n              break;\n            case \"capitalize\":\n              str = str.replace(/(?:^|\\s)\\S/g, function (l) { return l.toUpperCase(); });\n              break;\n          }\n\n          var text = new TextRect(\n              str, new Rect$1([ box.left, box.top ],\n                                [ box.width, box.height ]),\n              {\n                  font: font,\n                  fill: { color: color }\n              }\n          );\n          group.append(text);\n      }\n\n      function drawTextLine(lineWidth, textBox, color, ypos) {\n          if (color) {\n              var path = new Path({ stroke: {\n                  width: lineWidth,\n                  color: color\n              }});\n\n              ypos -= lineWidth;\n              path.moveTo(textBox.left, ypos)\n                  .lineTo(textBox.right, ypos);\n              group.append(path);\n          }\n      }\n\n      function decorateOver(box) {\n          var width = fontSize / 12;\n          drawTextLine(width, box, lineThrough, box.bottom - box.height / 2.7);\n          drawTextLine(width, box, overline, box.top);\n      }\n\n      function decorateUnder(box) {\n          var width = fontSize / 12;\n          var underlinePos = box.bottom;\n          if (underlineOffset != null) {\n              underlinePos += underlineOffset;\n          } else {\n              underlinePos += width; // for \"auto\" it seems better to add line width\n          }\n          drawTextLine(width, box, underline, underlinePos);\n      }\n  }\n\n  function groupInStackingContext(element, group, zIndex) {\n      var main;\n      if (zIndex != \"auto\") {\n          // use the current stacking context\n          main = nodeInfo._stackingContext.group;\n          zIndex = parseFloat(zIndex);\n      } else {\n          // normal flow — use given container.  we still have to\n          // figure out where should we insert this element with the\n          // assumption that its z-index is zero, as the group might\n          // already contain elements with higher z-index.\n          main = group;\n          zIndex = 0;\n      }\n      var a = main.children;\n      for (var i = 0; i < a.length; ++i) {\n          if (a[i]._dom_zIndex != null && a[i]._dom_zIndex > zIndex) {\n              break;\n          }\n      }\n\n      var tmp = new Group();\n      main.insert(i, tmp);\n      tmp._dom_zIndex = zIndex;\n\n      if (main !== group) {\n          // console.log(\"Placing\", element, \"in\", nodeInfo._stackingContext.element, \"at position\", i, \" / \", a.length);\n          // console.log(a.slice(i+1));\n\n          // if (nodeInfo._matrix) {\n          //     tmp.transform(nodeInfo._matrix);\n          // }\n          if (nodeInfo._clipbox) {\n              var m = nodeInfo._matrix.invert();\n              var r = nodeInfo._clipbox.transformCopy(m);\n              setClipping(tmp, Path.fromRect(r));\n              // console.log(r);\n              // tmp.append(Path.fromRect(r));\n              // tmp.append(new Text(element.className || element.id, r.topLeft()));\n          }\n      }\n\n      return tmp;\n  }\n\n  function renderElement(element, container) {\n      var style = getComputedStyle$1(element);\n\n      updateCounters(style);\n\n      if (/^(style|script|link|meta|iframe|col|colgroup)$/i.test(element.tagName)) {\n          return;\n      }\n\n      if (nodeInfo._clipbox == null) {\n          return;\n      }\n\n      var opacity = parseFloat(getPropertyValue(style, \"opacity\"));\n      var visibility = getPropertyValue(style, \"visibility\");\n      var display = getPropertyValue(style, \"display\");\n\n      if (opacity === 0 || visibility == \"hidden\" || display == \"none\") {\n          return;\n      }\n\n      var tr = getTransform(style);\n      var group;\n\n      var zIndex = getPropertyValue(style, \"z-index\");\n      if ((tr || opacity < 1) && zIndex == \"auto\") {\n          zIndex = 0;\n      }\n      group = groupInStackingContext(element, container, zIndex);\n\n      // XXX: remove at some point\n      // group._pdfElement = element;\n      // group.options._pdfDebug = \"\";\n      // if (element.id) {\n      //     group.options._pdfDebug = \"#\" + element.id;\n      // }\n      // if (element.className) {\n      //     group.options._pdfDebug += \".\" + element.className.split(\" \").join(\".\");\n      // }\n\n      if (opacity < 1) {\n          group.opacity(opacity * group.opacity());\n      }\n\n      pushNodeInfo(element, style, group);\n\n      if (!tr) {\n          _renderWithPseudoElements(element, group);\n      }\n      else {\n          saveStyle(element, function(){\n              // must clear transform, so getBoundingClientRect returns correct values.\n              pleaseSetPropertyValue(element.style, \"transform\", \"none\", \"important\");\n\n              // must also clear transitions, so correct values are returned *immediately*\n              pleaseSetPropertyValue(element.style, \"transition\", \"none\", \"important\");\n\n              // the presence of any transform makes it behave like it had position: relative,\n              // because why not.\n              // http://meyerweb.com/eric/thoughts/2011/09/12/un-fixing-fixed-elements-with-css-transforms/\n              if (getPropertyValue(style, \"position\") == \"static\") {\n                  // but only if it's not already positioned. :-/\n                  pleaseSetPropertyValue(element.style, \"position\", \"relative\", \"important\");\n              }\n\n              // must translate to origin before applying the CSS\n              // transformation, then translate back.\n              var bbox = element.getBoundingClientRect();\n              var x = bbox.left + tr.origin[0];\n              var y = bbox.top + tr.origin[1];\n              var m = [ 1, 0, 0, 1, -x, -y ];\n              m = mmul(m, tr.matrix);\n              m = mmul(m, [ 1, 0, 0, 1, x, y ]);\n              m = setTransform(group, m);\n\n              nodeInfo._matrix = nodeInfo._matrix.multiplyCopy(m);\n\n              _renderWithPseudoElements(element, group);\n          });\n      }\n\n      popNodeInfo();\n\n      //drawDebugBox(element.getBoundingClientRect(), container);\n  }\n\n  // function drawDebugBox(box, group, color) {\n  //     var path = Path.fromRect(new geo.Rect([ box.left, box.top ], [ box.width, box.height ]));\n  //     if (color) {\n  //         path.stroke(color);\n  //     }\n  //     group.append(path);\n  // }\n\n  // function dumpTextNode(node) {\n  //     var txt = node.data.replace(/^\\s+/, \"\");\n  //     if (txt.length < 100) {\n  //         console.log(node.data.length + \": |\" + txt);\n  //     } else {\n  //         console.log(node.data.length + \": |\" + txt.substr(0, 50) + \"|...|\" + txt.substr(-50));\n  //     }\n  // }\n\n  function mmul(a, b) {\n      var a1 = a[0], b1 = a[1], c1 = a[2], d1 = a[3], e1 = a[4], f1 = a[5];\n      var a2 = b[0], b2 = b[1], c2 = b[2], d2 = b[3], e2 = b[4], f2 = b[5];\n      return [\n          a1*a2 + b1*c2,          a1*b2 + b1*d2,\n          c1*a2 + d1*c2,          c1*b2 + d1*d2,\n          e1*a2 + f1*c2 + e2,     e1*b2 + f1*d2 + f2\n      ];\n  }\n\n  exports.A = Arc$1;\n  exports.B = Rect;\n  exports.C = Color;\n  exports.D = drawText;\n  exports.E = LRUCache;\n  exports.F = TextMetrics;\n  exports.G = Group;\n  exports.H = objectKey;\n  exports.I = Image$1;\n  exports.J = hashKey;\n  exports.K = normalizeText;\n  exports.L = LinearGradient;\n  exports.M = Matrix;\n  exports.N = encodeBase64;\n  exports.O = pdf;\n  exports.P = Point;\n  exports.Q = drawing;\n  exports.R = Rect$1;\n  exports.S = Segment;\n  exports.T = Text;\n  exports.U = geometry;\n  exports.V = exportPDF;\n  exports.W = drawDOM;\n  exports.X = getFontFaces;\n  exports.Y = limitValue;\n  exports.Z = namedColors;\n  exports.__meta__ = __meta__;\n  exports.a = Class;\n  exports.b = Path;\n  exports.c = Animation;\n  exports.d = defined;\n  exports.e = dotsPattern;\n  exports.f = crosshatchPattern;\n  exports.g = diagonalStripesPattern;\n  exports.h = gridPattern;\n  exports.i = Circle;\n  exports.j = Circle$1;\n  exports.k = MultiPath;\n  exports.l = logToConsole;\n  exports.m = RadialGradient;\n  exports.n = measureText;\n  exports.o = AnimationFactory;\n  exports.p = Layout;\n  exports.q = parseColor$2;\n  exports.r = round;\n  exports.s = support$1;\n  exports.t = transform;\n  exports.u = util;\n  exports.v = verticalStripesPattern;\n  exports.w = Surface;\n  exports.x = throttle;\n  exports.y = Arc;\n  exports.z = Size;\n\n}));\n"]}