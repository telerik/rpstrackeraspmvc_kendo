{"version":3,"file":"kendo.scheduler.min.js","names":["global","factory","exports","module","require","define","amd","globalThis","self","kendo","_globals","Scheduler","this","$","undefined$1","window","date","MS_PER_DAY","getDate","getMilliseconds","recurrence","encode","htmlEncode","keys","ui","Widget","DataBoundWidget","STRING","Popup","Calendar","DataSource","data","isPlainObject","extend","toString","Object","prototype","isArray","Array","NS","CLICK","MOUSEDOWN","TOUCHSTART","support","pointers","TOUCHMOVE","TOUCHEND","MOUSEMOVE","mousemove","CHANGE","PROGRESS","ERROR","CANCEL","REMOVE","RESET","SAVE","EDIT","DISABLED","FOCUSEDSTATE","valueStartEndBoundRegex","MIN_SCREEN","TODAY","Date","EXCEPTION_SEPARATOR","OLD_EXCEPTION_SEPARATOR_REGEXP","RECURRENCE_EXCEPTION","EDITRECURRING","COMMANDBUTTONTMPL","className","attr","text","icon","fillMode","themeColor","html","renderButton","VIEWS_DROPDOWN_TEMPLATE","template","label","views","type","map","view","title","join","DEFAULT_TOOLS","pdf","name","attributes","class","pdfMobile","showText","today","previous","groupClass","next","current","search","refresh","create","calendar","previousMobile","nextMobile","currentMobile","togglable","group","defaultDesktopTools","defaultMobileToolsFirst","defaultMobileToolsSecond","timezoneButtonText","model","message","startTimezone","endTimezone","appendTimezoneAttr","attrs","options","timezone","appendValidDateValidator","validationRules","fields","field","validation","validDateRule","validDateValidator","appendDateCompareValidator","dateCompareRule","dateCompare","convertData","method","removeUid","event","idx","length","startOffset","endOffset","start","getTimezoneOffset","end","convert","uid","getTime","getOccurrenceByUid","SchedulerDataReader","Class","init","schema","reader","originalFunction","wrapDataAccess","bind","serialize","call","ObservableArray","wrapDataSerialization","errors","parse","total","groups","aggregates","applyZone","fromZone","toZone","remove","input","filter","picker","widgetInstance","parseDate","val","format","value","SchedulerEvent","Model","that","fn","_defaultId","defaults","idField","_time","fieldTime","toUtcTime","_date","clone","updateUid","constructor","toJSON","duration","offset","MS_PER_MINUTE","expand","zone","update","eventInfo","set","_startTime","_endTime","isMultiDay","isAllDay","isException","isNew","recurrenceId","isOccurrence","isRecurring","recurrenceRule","isRecurrenceHead","id","toOccurrence","recurrenceException","obj","shouldSerialize","key","milliseconds","setTime","defaultValue","required","validDate","container","closest","startInput","find","endInput","startPicker","endPicker","editable","untilDateCompare","until","description","SchedulerDataSource","modelBase","apply","logic","filters","operator","Query","events","concat","expandAll","toArray","cancelChanges","_removeExceptionDate","insert","index","_createNewModel","accept","_pushCreated","_addExceptionDate","pushCreate","items","_removeExceptions","slice","item","shift","head","get","replaceRegExp","RegExp","toExceptionString","replace","test","newException","dataSource","Error","defaultCommands","canceledit","destroy","imageClass","iconClass","descriptionEditor","createValidationAttributes","appendTo","wrap","ruleName","rule","modelField","specialRules","datatype","inArray","isFunction","filterResourceEditorData","editor","parentValue","parentValueField","valueField","valueArray","editorValue","isMs","JSON","stringify","forEach","currentValue","indexOf","splice","trigger","bindParentValueChangeHandler","currentEditor","resource","parent","parentElement","ns","parentWidget","getKendoDropDownList","ev","sender","dataParentValueField","dataValueField","on","target","filterMobileResourceEditorData","parentSelectedValue","itemParentValue","getter","removeAttribute","setAttribute","moveEventRange","distance","editors","mobile","dateRange","dateTimeValidate","dateValidate","hide","timezonePopUp","messages","noTimezone","click","kendoMobileTimezoneEditor","optionLabel","kendoMobileRecurrenceEditor","pane","multipleResources","dataTextField","setTimeout","resources","desktop","timezoneEditorButton","visible","toggle","kendoTimezoneEditor","kendoRecurrenceEditor","kendoMultiSelect","valuePrimitive","itemTemplate","disabled","dataColorField","tagTemplate","select","e","dataItem","preventDefault","dataBound","list","i","element","eq","addClass","kendoDropDownList","Editor","Observable","createButton","toggleDateValidationHandler","_toggleDateValidation","isDateTimeInput","shouldValidate","bindAttribute","each","is","allDayEvent","checkHierarchical","windows_zones","push","_initTimezoneEditor","repeat","recurrenceEditor","resourceIndex","parentResource","some","multiple","_buildDesktopEditTemplate","editableFields","renderCheckBox","separateTimezones","editableField","fieldName","fieldTitle","_createEndTimezoneButton","_buildMobileEditTemplate","midPart","_buildEditTemplate","isMobile","settings","Template","templateSettings","unescape","_revertTimezones","_startTimezone","_endTimezone","MobileEditor","arguments","Pane","viewEngine","viewOptions","renderOnInit","wrapInSections","detachOnHide","detachOnDestroy","css","height","animations","left","right","close","unbind","timezoneView","content","kSwitch","endTimezoneRow","last","cancel","timezoneTitle","save","append","contentElement","show","stopPropagation","hasClass","editView","_editPane","navigate","checked","enable","showDialog","actions","buttons","button","action","primary","document","body","kendoDialog","modal","preventScroll","closable","editEvent","updateText","removeText","cancelText","titleText","editorTitle","resetSeries","resetSeriesBtn","deleteBtn","kendoEditable","clearContainer","validateOnBlur","_views","roleSelector","not","purge","PopupEditor","$html","deleteText","applyStylesFromKendoAttributes","kendoWindow","resizable","draggable","userTriggered","position","open","center","cycleForm","popup","_timezonePopup","buttonIndex","wrapper","currentTarget","getKendoWindow","activator","wnd","checkbox","saveButton","cancelButton","timezonePopup","startTimezoneChange","prop","timezoneEditorTitle","focus","_initModel","_wrapper","selectable","_tabindex","_toolbar","_dataSource","_resources","_resizeHandler","resize","_resizable","_movable","_bindResize","_navigation","_selectable","_touchHandlers","_ariaId","guid","_createEditor","mediaQueryList","mediaQuery","onChange","_onMediaChange","toolbar","children","removeClass","_showWatermarkOverlay","_selectedView","toolbarEl","getKendoToolBar","matches","_model","dateForTitle","shortDateForTitle","_unbindResize","off","dataItems","_data","eventsUids","dict","eventsUidsLength","eventsCount","sortedData","_isMobile","mobileOS","_isTouch","originalEvent","pointerType","_isInverseColor","eventElement","_groupsByResource","groupIndex","groupsArray","parentFieldValue","parentField","prevIndex","dataIndex","fieldValue","currentGroupIndex","selectedGroups","selection","_selection","selectedEvents","slots","_selectedSlots","_selectedEvents","_resourceBySlot","_old","clearSelection","groupsByResource","groupedResources","_selectEvents","_select","ranges","rangeStart","_startDate","rangeEnd","addDays","_endDate","timeSlotCollectionCount","toLocalDate","isDaySlot","eventsLength","isGrouped","ctrlKey","_ctrlKey","currentGroup","daySlotCollectionCount","collIdx","getTimeSlotCollection","dayCollIdx","getDaySlotCollection","getAttribute","_createSelection","startX","startY","endX","endY","timeStamp","touchMoveHandler","_touchMove","stop","_touchPosX","_tapPosition","_touchPosY","_userTouched","_scrolling","now","_preventFocus","delta","amplitude","_amplitude","_dragging","Math","abs","_mouseDownSelection","kineticScrollNeeded","animate","scrollTop","_mouseDown","_initialFocus","_shiftKey","_keydown","shiftKey","mouseMoveHandler","_mouseMove","which","isRight","_activeElement","focusElement","_selectFirstSlot","firstSlot","firstAllDay","first","firstContent","_firstEvent","firstEvent","contentEvent","firstEventInAllDay","firstEventInContent","occurrenceByUid","_focusToolbar","oldSelection","oldEventsLength","removeAttr","currentUid","uids","coordinate","changedTouches","verticalScroll","scrollHeight","clientHeight","horizontalScroll","scrollWidth","clientWidth","round","scrollLeft","applyVerticalScroll","applyhorizontalScroll","clearTimeout","_moveTimer","slot","selectionByElement","startDate","endDate","backward","_viewByIndex","_keydownToolbar","keyCode","altKey","DOWN","_showCalendar","_selectedViewName","activeElement","_keydownView","cell","isModifier","arrowKeys","LEFT","RIGHT","UP","isRtl","ENTER","DELETE","BACKSPACE","moveToEvent","HOME","END","_scrollTo","removeEvent","_keydownShortcut","currentDate","toggleFullDay","addEvent","timezoneOffset","_keydownYearView","TAB","F10","_adjustSelectedDate","_keydownAgendaView","move","_keydownChangeView","viewByIndex","viewIndex","_keydownChangeDate","direction","nextDate","previousDate","toolbarIsFocused","ESC","_updateSelection","_updateEventForSelection","_timeSlotInterval","indexOfEvent","autoBind","snap","allDaySlot","min","max","workWeekStart","workWeekEnd","workDays","showWorkHours","startTime","endTime","currentTimeMarker","updateInterval","useLocalTimezone","ongoingEvents","cssClass","enabled","footer","deleteWindowTitle","selectView","ariaSlotLabel","ariaEventLabel","at","to","allDay","prefix","day","week","workWeek","agenda","month","timeline","timelineWeek","timelineWorkWeek","timelineMonth","year","recurrenceMessages","resetSeriesWindowTitle","deleteWindowOccurrence","deleteWindowSeries","editWindowTitle","editWindowOccurrence","editWindowSeries","confirmation","width","orientation","_refreshHandler","_progressHandler","_errorHandler","_resourceRefreshHandler","resourceDS","_resourceProgressHandler","_resourceErrorHandler","_editor","_moveDraggable","_resizeDraggable","add","setDataSource","fetch","siblings","startSlot","endSlot","startResources","clonedEvent","originSlot","originStartTime","clonedEvents","cachedEvents","movable","android","Draggable","ignore","holdToDrag","autoScroll","isTouch","_eventOptionsForMove","inverseColor","evtClone","evtCloneElement","_slotByPosition","x","startLocation","y","range","location","slotIndex","targetSlotElement","top","_updateMoveHint","_removeMoveHint","endResources","_isMultiDrag","evt","updatedEventOptions","eventOptions","_updateEvent","sync","cancelHold","handle","directions","dragstart","_updateEventForResize","drag","dir","currentSlot","originalStart","originalEnd","_updateResizeHint","dragend","dragHandle","_removeResizeHint","setHours","setMinutes","dragcancel","updateEvent","callback","_preventRefresh","_convertDates","getHours","getMinutes","getSeconds","recurrenceHead","getByUid","_showRecurringDialog","eventUid","exception","editRecurring","occurrenceText","seriesText","_modelForContainer","_confirmation","isResetSeries","_isEditorOpened","deleteRecurringConfirmation","deleteSeriesConfirmation","resetSeriesConfirmation","cancelEvent","_editEvent","saveEvent","dirty","_editRecurringDialog","_createPopupEditor","editOccurrence","editSeries","editRecurringMode","_createButton","command","commandName","edit","_set","_attemptRefresh","_deleteRecurringDialog","_removeEvent","occurrence","occurrencesInRange","deleteOccurrence","deleteSeries","createException","deleteOccurrenceConfirmation","createExceptionConfirmation","currentModel","seriesCallback","occurrenceCallback","exeptionCallback","deleteRecurring","_unbindView","_bindView","_viewRemoveHandler","_viewAddHandler","_viewEditHandler","_viewNavigateHandler","isWorkDay","switchWorkDay","_workDayMode","_selectView","_viewActivateHandler","constrainSelection","_renderView","_initialSize","matchMedia","_viewsCount","viewElementToSelect","viewsDropdown","viewsButtonGroup","rebind","viewName","_initializeView","mouseAndTouchPresent","mobileDateForTitle","mobileYearForTitle","force","size","getSize","currentSize","_size","selectedDate","isInDateRange","setFullYear","getFullYear","getMonth","isSettings","overrideOptions","trimOptions","defaultView","selected","hasType","defaultViews","time","resourceFetchArray","_preventRebind","when","then","_requestStart","_error","_progress","progress","resourcePromises","_resourceDataSource","groupName","promises","dataSourceInstance","_bindResourceEvents","isResourceGrouped","_refreshResource","observable","formattedDate","formattedShortDate","_processHandlers","_pdfClickHandler","saveAsPDF","_createClickHandler","_calendarClickHandler","_currentClickHandler","_todayClickHandler","_previousClickHandler","_nextClickHandler","_refreshClickHandler","_viewClickHandler","values","t","_processDefaults","viewsDdl","viewsMobile","viewsButtons","refAttribute","toLowerCase","_viewsButtons","_processToolbarArray","tools","toolbarOptions","commands","grep","unshift","_processViewTools","result","viewsIndex","_processToolbarItems","desktopItems","mobileItems","navigation","main","_processTools","secondToolbar","kendoToolBar","defaultTools","parentMessages","placeholder","throttle","targetElm","anchor","activate","_toggleResize","change","setOptions","depth","copyAnchorStyles","preventRefresh","visibleEndDate","refreshLayout","render","slotByPosition","slotByElement","el","centerX","centerY","resourcesBySlot","plugin","PDFMixin","SCHEDULER_EXPORT","_drawPDF","styles","style","cssText","scheduler","promise","Deferred","table","_drawPDFShadow","avoidLinks","done","args","page","pageNumber","totalPages","notify","resolve","fail","err","reject","always","TimezoneEditor","zones","zones_titles","_zonesQuery","_zoneTitleId","_zoneTitlePicker","_zonePicker","_zoneTitle","_zone","_value","zoneTitle","DropDownList","cascadeFrom","other_zone","ZONETITLEOPTIONTEMPLATE","ZONEOPTIONTEMPLATE","territory","MobileTimezoneEditor","_bindZones","_filter","_options","_zonePickerLabel","zoneSelect","after","zonePicker","zone_value","jQuery","kendo$1","__meta__","category","depends","features","default","defineProperty"],"sources":["kendo.scheduler.js"],"mappings":"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","ignoreList":[],"sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('kendo.dropdownlist.js'), require('kendo.editable.js'), require('kendo.multiselect.js'), require('kendo.window.js'), require('kendo.datetimepicker.js'), require('kendo.scheduler.recurrence.js'), require('kendo.scheduler.view.js'), require('kendo.scheduler.dayview.js'), require('kendo.scheduler.agendaview.js'), require('kendo.scheduler.monthview.js'), require('kendo.scheduler.timelineview.js'), require('kendo.scheduler.yearview.js'), require('kendo.dialog.js'), require('kendo.pane.js'), require('kendo.pdf.js'), require('kendo.switch.js'), require('kendo.toolbar.js'), require('kendo.html.button.js'), require('kendo.icons.js')) :\n    typeof define === 'function' && define.amd ? define(['exports', 'kendo.dropdownlist', 'kendo.editable', 'kendo.multiselect', 'kendo.window', 'kendo.datetimepicker', 'kendo.scheduler.recurrence', 'kendo.scheduler.view', 'kendo.scheduler.dayview', 'kendo.scheduler.agendaview', 'kendo.scheduler.monthview', 'kendo.scheduler.timelineview', 'kendo.scheduler.yearview', 'kendo.dialog', 'kendo.pane', 'kendo.pdf', 'kendo.switch', 'kendo.toolbar', 'kendo.html.button', 'kendo.icons'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory((global.kendo = global.kendo || {}, global.kendo._globals = global.kendo._globals || {}, global.kendo._globals.Scheduler = {})));\n})(this, (function (exports) {\n    const __meta__ = {\n        id: \"scheduler\",\n        name: \"Scheduler\",\n        category: \"web\",\n        description: \"The Scheduler is an event calendar.\",\n        depends: [ \"dropdownlist\", \"editable\", \"multiselect\", \"window\", \"datepicker\", \"datetimepicker\", \"toolbar\", \"scheduler.recurrence\", \"scheduler.view\", \"html.button\", \"icons\" ],\n        features: [ {\n            id: \"scheduler-dayview\",\n            name: \"Scheduler Day View\",\n            description: \"Scheduler Day View\",\n            depends: [ \"scheduler.dayview\" ]\n        }, {\n            id: \"scheduler-agendaview\",\n            name: \"Scheduler Agenda View\",\n            description: \"Scheduler Agenda View\",\n            depends: [ \"scheduler.agendaview\" ]\n        }, {\n            id: \"scheduler-monthview\",\n            name: \"Scheduler Month View\",\n            description: \"Scheduler Month View\",\n            depends: [ \"scheduler.monthview\" ]\n        }, {\n            id: \"scheduler-timelineview\",\n            name: \"Scheduler Timeline View\",\n            description: \"Scheduler Timeline View\",\n            depends: [ \"scheduler.timelineview\" ]\n        }, {\n            id: \"scheduler-yearview\",\n            name: \"Scheduler Year View\",\n            description: \"Scheduler Year View\",\n            depends: [ \"scheduler.yearview\" ]\n        }, {\n            id: \"scheduler-mobile\",\n            name: \"Scheduler adaptive rendering\",\n            description: \"Support for adaptive rendering\",\n            depends: [ \"dialog\", \"pane\", \"switch\" ]\n        }, {\n            id: \"scheduler-pdf-export\",\n            name: \"PDF export\",\n            description: \"Export the scheduler events as PDF\",\n            depends: [ \"pdf\", \"drawing\" ]\n        }, {\n            id: \"scheduler-timezones\",\n            name: \"Timezones\",\n            description: \"Allow selecting timezones different than Etc/UTC\",\n            depends: [ \"timezones\" ]\n        }]\n    };\n\n\n    (function($, undefined$1) {\n        var kendo = window.kendo,\n            date = kendo.date,\n            MS_PER_DAY = date.MS_PER_DAY,\n            getDate = date.getDate,\n            getMilliseconds = kendo.date.getMilliseconds,\n            recurrence = kendo.recurrence,\n            encode = kendo.htmlEncode,\n            keys = kendo.keys,\n            ui = kendo.ui,\n            Widget = ui.Widget,\n            DataBoundWidget = ui.DataBoundWidget,\n            STRING = \"string\",\n            Popup = ui.Popup,\n            Calendar = ui.Calendar,\n            DataSource = kendo.data.DataSource,\n            isPlainObject = $.isPlainObject,\n            extend = $.extend,\n            toString = Object.prototype.toString,\n            isArray = Array.isArray,\n            NS = \".kendoScheduler\",\n            CLICK = \"click\",\n            MOUSEDOWN = \"mousedown\",\n            TOUCHSTART = kendo.support.pointers ? \"pointerdown\" : \"touchstart\",\n            TOUCHMOVE = kendo.support.pointers ? \"pointermove\" : \"touchmove\",\n            TOUCHEND = kendo.support.pointers ? \"pointerup\" : \"touchend\",\n            MOUSEMOVE = kendo.support.mousemove,\n            CHANGE = \"change\",\n            PROGRESS = \"progress\",\n            ERROR = \"error\",\n            CANCEL = \"cancel\",\n            REMOVE = \"remove\",\n            RESET = \"resetSeries\",\n            SAVE = \"save\",\n            ADD = \"add\",\n            EDIT = \"edit\",\n            DISABLED = \"disabled\",\n            OPTION = \"option\",\n            FOCUSEDSTATE = \"k-focus\",\n            INVERSECOLORCLASS = \"k-event-inverse\",\n            valueStartEndBoundRegex = /(?:value:start|value:end)(?:,|$)/,\n            MIN_SCREEN = \"(min-width: 1024px)\",\n            TODAY = getDate(new Date()),\n            EXCEPTION_SEPARATOR = \",\",\n            OLD_EXCEPTION_SEPARATOR_REGEXP = /\\;/g,\n            RECURRENCE_EXCEPTION = \"recurrenceException\",\n            DELETECONFIRM = \"Are you sure you want to delete this event?\",\n            DELETERECURRING = \"Do you want to delete only this event occurrence or the whole series?\",\n            EDITRECURRING = \"Do you want to edit only this event occurrence or the whole series?\",\n            DELETERECURRINGCONFIRM = \"Are you sure you want to delete this event occurrence?\",\n            RESETSERIESCONFIRM = \"Are you sure you want to reset the whole series?\",\n            DELETESERIESCONFIRM = \"Are you sure you want to delete the whole series?\",\n            ONGOING_CLASS = \"k-event-ongoing\",\n            COMMANDBUTTONTMPL = ({ className, attr, text, icon, fillMode, themeColor }) =>\n                kendo.html.renderButton(`<button type=\"button\" class=\"${className}\" ${attr}>${text}</button>`, {\n                    icon: icon,\n                    fillMode: fillMode,\n                    themeColor: themeColor\n                }),\n            VIEWS_DROPDOWN_TEMPLATE = kendo.template(({ label, views, type }) =>\n                `<select aria-label=\"${label}\" class=\"k-picker k-dropdown-list k-dropdown ${type}\">` +\n                    Object.keys(views).map((view) => `<option value=\"${view}\">${views[view].title}</option>`).join('') +\n                '</select>'\n            ),\n\n            DEFAULT_TOOLS = {\n                pdf: {\n                    name: \"pdf\",\n                    type: \"button\",\n                    icon: \"file-pdf\",\n                    attributes: {\n                        class: \"k-pdf\"\n                    }\n                },\n                pdfMobile: {\n                    name: \"pdf\",\n                    type: \"button\",\n                    icon: \"file-pdf\",\n                    showText: \"overflow\",\n                    attributes: {\n                        class: \"k-pdf\"\n                    }\n                },\n                today: {\n                    name: \"today\",\n                    type: \"button\",\n                    attributes: {\n                        \"ref-nav-today\": \"\",\n                    }\n                },\n                previous: {\n                    name: \"previous\",\n                    type: \"button\",\n                    icon: \"caret-alt-left\",\n                    showText: \"overflow\",\n                    attributes: {\n                        \"ref-nav-prev\": \"\",\n                    },\n                    groupClass: \"k-scheduler-navigation\"\n                },\n                next: {\n                    name: \"next\",\n                    type: \"button\",\n                    icon: \"caret-alt-right\",\n                    showText: \"overflow\",\n                    attributes: {\n                        \"ref-nav-next\": \"\",\n                    },\n                    groupClass: \"k-scheduler-navigation\"\n                },\n                current: {\n                    name: \"current\",\n                    type: \"button\",\n                    icon: \"calendar\",\n                    fillMode: \"flat\",\n                    text: 'placeholder',\n                    attributes: {\n                        \"aria-live\": \"polite\",\n                        class: \"k-nav-current\"\n                    }\n                },\n                search: {\n                    template: '<span class=\"k-scheduler-search k-textbox k-input k-input-md k-rounded-md k-input-solid\">' +\n                            '<input tabindex=\"-1\" autocomplete=\"off\" class=\"k-input-inner k-scheduler-search-input k-input-inner\" />' +\n                            `<span class=\"k-input-suffix\">${kendo.ui.icon(\"search\")}</span>` +\n                        '</span>'\n                },\n                refresh: {\n                    name: \"refresh\",\n                    type: \"button\",\n                    icon: \"arrow-rotate-cw\",\n                    showText: \"overflow\",\n                    attributes: {\n                        class: \"k-scheduler-refresh\"\n                    }\n                },\n                create: {\n                    name: \"create\",\n                    type: \"button\",\n                    icon: \"plus\",\n                    attributes: {\n                        class: \"k-create-event\"\n                    }\n                },\n                calendar: {\n                    name: \"calendar\",\n                    type: \"button\",\n                    icon: \"calendar\",\n                    attributes: {\n                        class: \"k-nav-calendar\"\n                    }\n                },\n                previousMobile: {\n                    name: \"previous\",\n                    type: \"button\",\n                    icon: \"chevron-left\",\n                    showText: \"overflow\",\n                    attributes: {\n                        \"ref-nav-prev\": \"\",\n                    },\n                    groupClass: \"k-scheduler-navigation\"\n                },\n                nextMobile: {\n                    name: \"next\",\n                    type: \"button\",\n                    icon: \"chevron-right\",\n                    showText: \"overflow\",\n                    attributes: {\n                        \"ref-nav-next\": \"\",\n                    },\n                    groupClass: \"k-scheduler-navigation\"\n                },\n                currentMobile: {\n                    template: '<span class=\"k-scheduler-navigation\">' +\n                            '<span class=\"k-nav-current\">' +\n                                '<span class=\"k-m-date-format\"></span>' +\n                                '<span class=\"k-y-date-format\"></span>' +\n                            '</span>' +\n                        '</span>'\n                },\n                view: {\n                    name: \"view\",\n                    type: \"button\",\n                    togglable: true,\n                    group: \"views\"\n                }\n            },\n\n            defaultDesktopTools = [\n                [\"today\", \"previous\", \"next\"],\n                \"current\",\n                { type: \"spacer\" }\n            ],\n\n            defaultMobileToolsFirst = [\n                [\"calendar\"],\n                { type: \"spacer\" }\n            ],\n\n            defaultMobileToolsSecond = [\n                \"previousMobile\",\n                { type: \"spacer\" },\n                \"currentMobile\",\n                { type: \"spacer\" },\n                \"nextMobile\"\n            ],\n\n            MOBILEDATERANGEEDITOR = function(container, options) {\n                var attr = { name: options.field, title: options.title };\n                var isAllDay = options.model.isAllDay;\n                var dateTimeValidate = kendo.attr(\"validate\") + \"='\" + (!isAllDay) + \"'\";\n                var dateValidate = kendo.attr(\"validate\") + \"='\" + (!!isAllDay) + \"'\";\n\n                appendTimezoneAttr(attr, options);\n                appendValidDateValidator(attr, options);\n                appendDateCompareValidator(attr, options);\n\n                $('<input type=\"datetime-local\" required ' + kendo.attr(\"type\") + '=\"datetime-local\" ' + kendo.attr(\"bind\") + '=\"value:' + options.field + ', invisible:isAllDay\" ' + dateTimeValidate + '/>')\n                    .attr(attr)\n                    .appendTo(container);\n\n                $('<input type=\"date\" required ' + kendo.attr(\"type\") + '=\"date\" ' + kendo.attr(\"bind\") + '=\"value:' + options.field + ',visible:isAllDay\" ' +\n                    dateValidate + '/>')\n                    .attr(attr).appendTo(container);\n\n                $('<span ' + kendo.attr(\"for\") + '=\"' + options.field + '\" class=\"k-invalid-msg\"/>').hide().appendTo(container);\n            },\n            DATERANGEEDITOR = function(container, options) {\n                var attr = { name: options.field, title: options.title },\n                    isAllDay = options.model.isAllDay,\n                    dateTimeValidate = kendo.attr(\"validate\") + \"='\" + (!isAllDay) + \"' \",\n                    dateValidate = kendo.attr(\"validate\") + \"='\" + (!!isAllDay) + \"' \";\n\n                appendTimezoneAttr(attr, options);\n                appendValidDateValidator(attr, options);\n                appendDateCompareValidator(attr, options);\n\n                $('<input type=\"text\" required ' + kendo.attr(\"type\") + '=\"date\"' + ' ' + kendo.attr(\"role\") + '=\"datetimepicker\" ' + kendo.attr(\"bind\") + '=\"value:' + options.field + ',invisible:isAllDay\" ' +\n                    dateTimeValidate + '/>')\n                .attr(attr).appendTo(container);\n\n                $('<input type=\"text\" required ' + kendo.attr(\"type\") + '=\"date\"' + ' ' + kendo.attr(\"role\") + '=\"datepicker\" ' + kendo.attr(\"bind\") + '=\"value:' + options.field + ',visible:isAllDay\" ' +\n                    dateValidate + '/>')\n                .attr(attr).appendTo(container);\n\n                $('<span ' + kendo.attr(\"bind\") + '=\"text: ' + options.field + 'Timezone\"></span>').appendTo(container);\n\n                if (options.field === \"end\") {\n                    $('<span ' + kendo.attr(\"bind\") + '=\"text: startTimezone, invisible: endTimezone\"></span>').appendTo(container);\n                }\n\n                $('<span ' + kendo.attr(\"for\") + '=\"' + options.field + '\" class=\"k-invalid-msg\"/>').hide().appendTo(container);\n            },\n            RECURRENCEEDITOR = function(container, options) {\n                $('<div ' + kendo.attr(\"bind\") + '=\"value:' + options.field + '\" />')\n                    .attr({\n                        name: options.field\n                    })\n                    .appendTo(container)\n                    .kendoRecurrenceEditor({\n                        start: options.model.start,\n                        timezone: options.timezone,\n                        messages: options.messages\n                    });\n            },\n            MOBILERECURRENCEEDITOR = function(container, options) {\n                $('<div ' + kendo.attr(\"bind\") + '=\"value:' + options.field + '\" />')\n                    .attr({\n                        name: options.field\n                    })\n                    .appendTo(container)\n                    .kendoMobileRecurrenceEditor({\n                        start: options.model.start,\n                        timezone: options.timezone,\n                        messages: options.messages,\n                        pane: options.pane,\n                        value: options.model[options.field]\n                    });\n            },\n            MOBILEISALLDAYEDITOR = function(container, options) {\n                $('<input type=\"checkbox\" data-role=\"switch\"' + kendo.attr(\"bind\") + '=\"value:' + options.field + '\" />').appendTo(container);\n            },\n            ISALLDAYEDITOR = function(container, options) {\n                $('<input type=\"checkbox\" data-role=\"checkbox\"' + kendo.attr(\"bind\") + '=\"value:' + options.field + '\" data-label=\"' + options.title + '\" />')\n                    .attr({\n                        id: options.field,\n                        name: options.field,\n                        title: options.title ? options.title : options.field\n                    })\n                    .appendTo(container);\n            },\n            MOBILETIMEZONEPOPUP = function(container, options) {\n                var text = timezoneButtonText(options.model, options.messages.noTimezone);\n                $('<span class=\"k-timezone-label\"></span>').text(text).appendTo(container);\n                $(kendo.ui.icon(\"arrow-chevron-right\")).appendTo(container);\n                container.closest(\"li.k-item label\").on(CLICK, options.click);\n            },\n            TIMEZONEPOPUP = function(container, options) {\n                $('<a href=\"#\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\" data-bind=\"invisible:isAllDay\"><span class=\"k-button-text\">' + options.messages.timezoneEditorButton + '</span></a>').on(CLICK, options.click).appendTo(container);\n            },\n            MOBILETIMEZONEEDITOR = function(container, options) {\n                $('<div class=\"k-mobiletimezoneeditor\" ' + kendo.attr(\"bind\") + '=\"value:' + options.field + '\" />')\n                    .attr({\n                        name: options.field\n                    })\n                    .appendTo(container)\n                    .kendoMobileTimezoneEditor({\n                        optionLabel: options.noTimezone\n                    });\n            },\n            TIMEZONEEDITOR = function(container, options) {\n                var visible = options.visible || options.visible === undefined$1;\n                $('<div ' + kendo.attr(\"bind\") + '=\"value:' + options.field + '\" />')\n                    .attr({ name: options.field })\n                    .toggle(visible)\n                    .appendTo(container)\n                    .kendoTimezoneEditor({\n                        optionLabel: options.noTimezone,\n                        title: options.title\n                    });\n            };\n\n        function timezoneButtonText(model, message) {\n            message = message || \"\";\n\n            if (model.startTimezone) {\n                message = model.startTimezone;\n\n                if (model.endTimezone) {\n                    message += \" | \" + model.endTimezone;\n                }\n            }\n\n            return message;\n        }\n\n        function appendTimezoneAttr(attrs, options) {\n            var timezone = options.timezone;\n\n            if (timezone) {\n                attrs[kendo.attr(\"timezone\")] = timezone;\n            }\n        }\n\n        function appendValidDateValidator(attrs, options) {\n            var validationRules = options.model.fields[options.field].validation;\n\n            if (validationRules) {\n                var validDateRule = validationRules.validDateValidator;\n                if (validDateRule && isPlainObject(validDateRule) && validDateRule.message) {\n                    attrs[kendo.attr(\"validDate-msg\")] = validDateRule.message;\n                }\n            }\n        }\n\n        function appendDateCompareValidator(attrs, options) {\n            var validationRules = options.model.fields[options.field].validation;\n\n            if (validationRules) {\n                var dateCompareRule = validationRules.dateCompare;\n                if (dateCompareRule && isPlainObject(dateCompareRule) && dateCompareRule.message) {\n                    attrs[kendo.attr(\"dateCompare-msg\")] = dateCompareRule.message;\n                }\n            }\n        }\n\n        function wrapDataAccess(originalFunction, timezone) {\n            return function(data) {\n                data = originalFunction(data);\n\n                convertData(data, \"apply\", timezone);\n\n                return data || [];\n            };\n        }\n\n        function wrapDataSerialization(originalFunction, timezone) {\n            return function(data) {\n\n                if (data) {\n                    if (toString.call(data) !== \"[object Array]\" && !(data instanceof kendo.data.ObservableArray)) {\n                        data = [data];\n                    }\n                }\n\n                convertData(data, \"remove\", timezone, true);\n\n                data = originalFunction(data);\n\n                return data || [];\n            };\n        }\n\n        function convertData(data, method, timezone, removeUid) {\n            var event,\n                idx,\n                length,\n                startOffset,\n                endOffset;\n\n            data = data || [];\n\n            for (idx = 0, length = data.length; idx < length; idx++) {\n                event = data[idx];\n                startOffset = event.start ? event.start.getTimezoneOffset() : null;\n                endOffset = event.start ? event.end.getTimezoneOffset() : null;\n\n                if (removeUid) {\n                    if (event.startTimezone || event.endTimezone) {\n                        if (timezone) {\n                            event.start = kendo.timezone.convert(event.start, event.startTimezone || event.endTimezone, timezone);\n                            event.end = kendo.timezone.convert(event.end, event.endTimezone || event.startTimezone, timezone);\n\n                            event.start = kendo.timezone[method](event.start, timezone);\n                            event.end = kendo.timezone[method](event.end, timezone);\n                        } else {\n                            event.start = kendo.timezone[method](event.start, event.startTimezone || event.endTimezone);\n                            event.end = kendo.timezone[method](event.end, event.endTimezone || event.startTimezone);\n                        }\n\n                    } else if (timezone) {\n                        event.start = kendo.timezone[method](event.start, timezone);\n                        event.end = kendo.timezone[method](event.end, timezone);\n                    }\n                } else {\n                    if (event.startTimezone || event.endTimezone) {\n                        event.start = kendo.timezone[method](event.start, event.startTimezone || event.endTimezone);\n                        event.end = kendo.timezone[method](event.end, event.endTimezone || event.startTimezone);\n\n                        if (timezone) {\n                            event.start = kendo.timezone.convert(event.start, event.startTimezone || event.endTimezone, timezone);\n                            event.end = kendo.timezone.convert(event.end, event.endTimezone || event.startTimezone, timezone);\n                        }\n\n                    } else if (timezone) {\n                        event.start = kendo.timezone[method](event.start, timezone);\n                        event.end = kendo.timezone[method](event.end, timezone);\n                    }\n                }\n\n                if (removeUid) {\n                    delete event.uid;\n                }\n\n                if (method === \"remove\" && event.start && startOffset && startOffset !== event.start.getTimezoneOffset()) {\n                    event.start = new Date(event.start.getTime() + (startOffset - event.start.getTimezoneOffset()) * 60000);\n                }\n                if (method === \"remove\" && event.end && endOffset && endOffset !== event.end.getTimezoneOffset()) {\n                    event.end = new Date(event.end.getTime() + (endOffset - event.end.getTimezoneOffset()) * 60000);\n                }\n            }\n            return data;\n        }\n\n        function getOccurrenceByUid(data, uid) {\n            var length = data.length,\n                idx = 0,\n                event;\n\n            for (; idx < length; idx++) {\n                event = data[idx];\n\n                if (event.uid === uid) {\n                    return event;\n                }\n            }\n        }\n\n        var SchedulerDataReader = kendo.Class.extend({\n            init: function(schema, reader) {\n                var timezone = schema.timezone;\n\n                this.reader = reader;\n\n                if (reader.model) {\n                    this.model = reader.model;\n                }\n\n                this.timezone = timezone;\n                this.data = wrapDataAccess(this.data.bind(this), timezone);\n                this.serialize = wrapDataSerialization(this.serialize.bind(this), timezone);\n            },\n            errors: function(data) {\n                return this.reader.errors(data);\n            },\n            parse: function(data) {\n                return this.reader.parse(data);\n            },\n            data: function(data) {\n                return this.reader.data(data);\n            },\n            total: function(data) {\n                return this.reader.total(data);\n            },\n            groups: function(data) {\n                return this.reader.groups(data);\n            },\n            aggregates: function(data) {\n                return this.reader.aggregates(data);\n            },\n            serialize: function(data) {\n                return this.reader.serialize(data);\n            }\n        });\n\n        function applyZone(date, fromZone, toZone) {\n            if (toZone) {\n                date = kendo.timezone.convert(date, fromZone, toZone);\n            } else {\n                date = kendo.timezone.remove(date, fromZone);\n            }\n\n            return date;\n        }\n\n        function validDateValidator(input) {\n            if ((input.filter(\"[name=start]\").length && input.filter(\"[title=Start]\").length) ||\n                (input.filter(\"[name=end]\").length && input.filter(\"[title=End]\").length) ||\n                input.filter(\".k-recur-until\").length) {\n                var date;\n                var picker = kendo.widgetInstance(input, kendo.ui);\n\n                if (picker) {\n                    date = kendo.parseDate(input.val(), picker.options.format);\n                    return !!date && picker.value();\n                } else {\n                    date = kendo.parseDate(input.val());\n                    return !!date;\n                }\n            }\n\n            return true;\n        }\n\n        function dateCompareValidator(input) {\n            if (input.filter(\"[name=end]\").length) {\n                var container = input.closest(\".k-scheduler-edit-form\");\n                var startInput = container.find(\"[name=start]:visible\");\n                var endInput = container.find(\"[name=end]:visible\");\n\n                if (endInput[0] && startInput[0]) {\n                    var start, end;\n                    var startPicker = kendo.widgetInstance(startInput, kendo.ui);\n                    var endPicker = kendo.widgetInstance(endInput, kendo.ui);\n\n                    var editable = container.data(\"kendoEditable\");\n                    var model = editable ? editable.options.model : null;\n\n                    if (startPicker && endPicker) {\n                        start = startPicker.value();\n                        end = endPicker.value();\n                    } else {\n                        start = kendo.parseDate(startInput.val());\n                        end = kendo.parseDate(endInput.val());\n                    }\n\n                    if (start && end) {\n                        if (model) {\n                            var timezone = startInput.attr(kendo.attr(\"timezone\"));\n                            var startTimezone = model.startTimezone;\n                            var endTimezone = model.endTimezone;\n\n                            startTimezone = startTimezone || endTimezone;\n                            endTimezone = endTimezone || startTimezone;\n\n                            if (startTimezone) {\n                                start = applyZone(start, startTimezone, timezone);\n                                end = applyZone(end, endTimezone, timezone);\n                            }\n                        }\n\n                        return start <= end;\n                    }\n                }\n            }\n\n            return true;\n        }\n\n        function untilDateCompareValidator(input) {\n            var untilPicker, until,\n                container, startInput, start, startPicker;\n\n            if (input.filter(\".k-recur-until\").length) {\n                untilPicker = kendo.widgetInstance(input, kendo.ui);\n                until = untilPicker.value();\n                container = input.closest(\".k-scheduler-edit-form\");\n                startInput = container.find(\"[name=start]:visible\");\n\n                if (startInput[0]) {\n                    startPicker = kendo.widgetInstance(startInput, kendo.ui);\n\n                    if (startPicker) {\n                        start = startPicker.value();\n                    } else {\n                        start = kendo.parseDate(startInput.val());\n                    }\n\n                    if (start && until) {\n                        return start <= until;\n                    }\n                }\n            }\n\n            return true;\n        }\n\n        var SchedulerEvent = kendo.data.Model.define({\n            init: function(value) {\n                var that = this;\n\n                kendo.data.Model.fn.init.call(that, value);\n\n                that._defaultId = that.defaults[that.idField];\n            },\n\n            _time: function(field) {\n                var date = this[field];\n                var fieldTime = \"_\" + field + \"Time\";\n\n                if (this[fieldTime]) {\n                    return this[fieldTime] - kendo.date.toUtcTime(kendo.date.getDate(date));\n                }\n\n                return getMilliseconds(date);\n            },\n\n            _date: function(field) {\n                var fieldTime = \"_\" + field + \"Time\";\n\n                if (this[fieldTime]) {\n                    return this[fieldTime] - this._time(field);\n                }\n\n                return kendo.date.getDate(this[field]);\n            },\n\n            clone: function(options, updateUid) {\n                var uid = this.uid,\n                    event = new this.constructor($.extend({}, this.toJSON(), options));\n\n                if (!updateUid) {\n                    event.uid = uid;\n                }\n\n                return event;\n            },\n\n            duration: function() {\n                var end = this.end;\n                var start = this.start;\n                var offset = (end.getTimezoneOffset() - start.getTimezoneOffset()) * kendo.date.MS_PER_MINUTE;\n\n                return end - start - offset;\n            },\n\n            expand: function(start, end, zone) {\n                return recurrence ? recurrence.expand(this, start, end, zone) : [this];\n            },\n\n            update: function(eventInfo) {\n                for (var field in eventInfo) {\n                    this.set(field, eventInfo[field]);\n                }\n\n                if (this._startTime) {\n                    this.set(\"_startTime\", kendo.date.toUtcTime(this.start));\n                }\n\n                if (this._endTime) {\n                    this.set(\"_endTime\", kendo.date.toUtcTime(this.end));\n                }\n            },\n\n            isMultiDay: function() {\n                return this.isAllDay || this.duration() >= kendo.date.MS_PER_DAY;\n            },\n\n            isException: function() {\n                return !this.isNew() && this.recurrenceId;\n            },\n\n            isOccurrence: function() {\n                return this.isNew() && this.recurrenceId;\n            },\n\n            isRecurring: function() {\n                return !!(this.recurrenceRule || this.recurrenceId);\n            },\n\n            isRecurrenceHead: function() {\n                return !!(this.id && this.recurrenceRule);\n            },\n\n            toOccurrence: function(options) {\n                options = $.extend(options, {\n                    recurrenceException: null,\n                    recurrenceRule: null,\n                    recurrenceId: this.id || this.recurrenceId\n                });\n\n                options[this.idField] = this.defaults[this.idField];\n\n                return this.clone(options, true);\n            },\n\n            toJSON: function() {\n                var obj = kendo.data.Model.fn.toJSON.call(this);\n                obj.uid = this.uid;\n\n                delete obj._startTime;\n                delete obj._endTime;\n\n                return obj;\n            },\n\n            shouldSerialize: function(field) {\n                return kendo.data.Model.fn.shouldSerialize.call(this, field) && field !== \"_defaultId\";\n            },\n\n            set: function(key, value) {\n                var isAllDay = this.isAllDay || false;\n\n                kendo.data.Model.fn.set.call(this, key, value);\n\n                if (key == \"isAllDay\" && value != isAllDay) {\n                    var start = kendo.date.getDate(this.start);\n                    var end = new Date(this.end);\n                    var milliseconds = kendo.date.getMilliseconds(end);\n\n                    if (milliseconds === 0 && value) {\n                        milliseconds = MS_PER_DAY;\n                    }\n\n                    this.set(\"start\", start);\n\n                    if (value === true) {\n                        kendo.date.setTime(end, -milliseconds);\n\n                        if (end < start) {\n                            end = start;\n                        }\n                    } else {\n                        kendo.date.setTime(end, MS_PER_DAY - milliseconds);\n                    }\n\n                    this.set(\"end\", end);\n                }\n            },\n            id: \"id\",\n            fields: {\n                id: { type: \"number\" },\n                title: { defaultValue: \"\", type: \"string\" },\n                start: { type: \"date\", validation: { required: true, validDate: { value: validDateValidator } } },\n                startTimezone: { type: \"string\" },\n                end: {\n                    type: \"date\",\n                    validation: {\n                        required: true,\n                        validDate: { value: validDateValidator },\n                        dateCompare: { value: dateCompareValidator }\n                    }\n                },\n                endTimezone: { type: \"string\" },\n                recurrenceRule: {\n                    defaultValue: \"\",\n                    type: \"string\",\n                    validation: {\n                        validDate: { value: validDateValidator },\n                        untilDateCompare: { value: untilDateCompareValidator }\n                    }\n                },\n                recurrenceException: { defaultValue: \"\", type: \"string\" },\n                isAllDay: { type: \"boolean\", defaultValue: false },\n                description: { type: \"string\" }\n            }\n        });\n\n        var SchedulerDataSource = DataSource.extend({\n            init: function(options) {\n\n                DataSource.fn.init.call(this, extend(true, {}, {\n                    schema: {\n                        modelBase: SchedulerEvent,\n                        model: SchedulerEvent\n                    }\n                }, options));\n\n                this.reader = new SchedulerDataReader(this.options.schema, this.reader);\n            },\n\n            expand: function(start, end) {\n                var data = this.view(),\n                    filter = {},\n                    endOffset;\n\n                if (start && end) {\n                    endOffset = end.getTimezoneOffset();\n                    end = new Date(end.getTime() + MS_PER_DAY - 1);\n\n                    if (end.getTimezoneOffset() !== endOffset) {\n                        end = kendo.timezone.apply(end, endOffset);\n                    }\n\n                    filter = {\n                        logic: \"or\",\n                        filters: [\n                            {\n                                logic: \"and\",\n                                filters: [\n                                    { field: \"start\", operator: \"gte\", value: start },\n                                    { field: \"end\", operator: \"gte\", value: start },\n                                    { field: \"start\", operator: \"lte\", value: end }\n                                ]\n                            },\n                            {\n                                logic: \"and\",\n                                filters: [\n                                    { field: \"start\", operator: \"lte\", value: new Date(start.getTime() + MS_PER_DAY - 1) },\n                                    { field: \"end\", operator: \"gte\", value: start }\n                                ]\n                            }\n                        ]\n                    };\n\n                    data = new kendo.data.Query(expandAll(data, start, end, this.reader.timezone)).filter(filter).toArray();\n                }\n\n                return data;\n            },\n\n            cancelChanges: function(model) {\n                if (model && model.isOccurrence()) {\n                    this._removeExceptionDate(model);\n                }\n\n                DataSource.fn.cancelChanges.call(this, model);\n            },\n\n            insert: function(index, model) {\n                if (!model) {\n                    return;\n                }\n\n                if (!(model instanceof SchedulerEvent)) {\n                    var eventInfo = model;\n\n                    model = this._createNewModel();\n                    model.accept(eventInfo);\n                }\n\n                if ((!this._pushCreated && model.isRecurrenceHead()) || model.recurrenceId) {\n                    model = model.recurrenceId ? model : model.toOccurrence();\n                    this._addExceptionDate(model);\n                }\n\n                return DataSource.fn.insert.call(this, index, model);\n            },\n\n            pushCreate: function(items) {\n                this._pushCreated = true;\n                DataSource.fn.pushCreate.call(this, items);\n                this._pushCreated = false;\n            },\n\n            remove: function(model) {\n                if (model.isRecurrenceHead()) {\n                    this._removeExceptions(model);\n                } else if (model.isRecurring()) {\n                    this._addExceptionDate(model);\n                }\n\n                return DataSource.fn.remove.call(this, model);\n            },\n\n            _removeExceptions: function(model) {\n                var data = this.data().slice(0),\n                    item = data.shift(),\n                    id = model.id;\n\n                while (item) {\n                    if (item.recurrenceId === id) {\n                        DataSource.fn.remove.call(this, item);\n                    }\n\n                    item = data.shift();\n                }\n\n                model.set(RECURRENCE_EXCEPTION, \"\");\n            },\n\n            _removeExceptionDate: function(model) {\n                if (model.recurrenceId) {\n                    var head = this.get(model.recurrenceId);\n\n                    if (head) {\n                        var start = model.defaults.start;\n                        var replaceRegExp = new RegExp(\"(\\\\\" + EXCEPTION_SEPARATOR + \"?)\" + recurrence.toExceptionString(start, this.reader.timezone));\n                        var recurrenceException = (head.recurrenceException || \"\").replace(OLD_EXCEPTION_SEPARATOR_REGEXP, EXCEPTION_SEPARATOR).replace(/\\,$/, \"\");\n\n                        if (replaceRegExp.test(recurrenceException)) {\n                            head.set(RECURRENCE_EXCEPTION, recurrenceException.replace(replaceRegExp, \"\"));\n                        } else {\n                            start = model.start;\n                            replaceRegExp = new RegExp(\"(\\\\\" + EXCEPTION_SEPARATOR + \"?)\" + recurrence.toExceptionString(start, this.reader.timezone));\n                            head.set(RECURRENCE_EXCEPTION, recurrenceException.replace(replaceRegExp, \"\"));\n                        }\n                    }\n                }\n            },\n\n            _addExceptionDate: function(model) {\n                var start = model.start;\n                var zone = this.reader.timezone;\n                var head = this.get(model.recurrenceId);\n                var recurrenceException = (head.recurrenceException || \"\").replace(OLD_EXCEPTION_SEPARATOR_REGEXP, EXCEPTION_SEPARATOR).replace(/\\,$/, \"\");\n\n                if (!recurrence.isException(recurrenceException, start, zone)) {\n                    var newException = recurrence.toExceptionString(start, zone);\n                    model.defaults.start = start;\n                    head.set(RECURRENCE_EXCEPTION, recurrenceException + (recurrenceException && newException ? EXCEPTION_SEPARATOR : \"\") + newException);\n                }\n            }\n        });\n\n        function expandAll(events, start, end, zone) {\n            var length = events.length,\n                data = [],\n                idx = 0;\n\n            for (; idx < length; idx++) {\n                data = data.concat(events[idx].expand(start, end, zone));\n            }\n\n            return data;\n        }\n\n        SchedulerDataSource.create = function(options) {\n            if (isArray(options) || options instanceof kendo.data.ObservableArray) {\n                options = { data: options };\n            }\n\n            var dataSource = options || {},\n                data = dataSource.data;\n\n            dataSource.data = data;\n\n            if (!(dataSource instanceof SchedulerDataSource) && dataSource instanceof kendo.data.DataSource) {\n                throw new Error(\"Incorrect DataSource type. Only SchedulerDataSource instances are supported\");\n            }\n\n            return dataSource instanceof SchedulerDataSource ? dataSource : new SchedulerDataSource(dataSource);\n        };\n\n        extend(true, kendo.data, {\n           SchedulerDataSource: SchedulerDataSource,\n           SchedulerDataReader: SchedulerDataReader,\n           SchedulerEvent: SchedulerEvent\n        });\n\n        var defaultCommands = {\n            update: {\n                text: \"Save\",\n                className: \"k-button-solid-primary k-scheduler-update\"\n            },\n            canceledit: {\n                text: \"Cancel\",\n                className: \"k-scheduler-cancel\"\n            },\n            destroy: {\n                text: \"Delete\",\n                icon: \"trash\",\n                imageClass: \"k-i-trash\",\n                className: \"k-button-solid-primary k-scheduler-delete\",\n                iconClass: \"k-icon\"\n            }\n        };\n\n        function trimOptions(options, overrideOptions) {\n            delete options.name;\n            delete options.prefix;\n\n            delete options.remove;\n            delete options.edit;\n            delete options.add;\n            delete options.navigate;\n\n            for (var key in overrideOptions) {\n                options[key] = overrideOptions[key];\n            }\n\n            return options;\n        }\n\n        /*\n        function fieldType(field) {\n            field = field != null ? field : \"\";\n            return field.type || kendo.type(field) || \"string\";\n        }\n        */\n\n        function descriptionEditor(options) {\n            var attr = createValidationAttributes(options.model, options.field);\n\n            return function(container, model) {\n                $('<textarea name=\"description\" class=\"k-input-inner\" title=\"' + model.title + '\"/>').attr(attr)\n                    .appendTo(container)\n                    .wrap('<span class=\"k-input k-textarea k-input-solid k-input-md k-rounded-md\"></span>');\n            };\n        }\n\n        function createValidationAttributes(model, field) {\n            var modelField = (model.fields || model)[field];\n            var specialRules = [\"url\", \"email\", \"number\", \"date\", \"boolean\"];\n            var validation = modelField ? modelField.validation : {};\n            // var type = fieldType(modelField);\n            var datatype = kendo.attr(\"type\");\n            var inArray = $.inArray;\n            var ruleName;\n            var rule;\n\n            var attr = {};\n\n            for (ruleName in validation) {\n                rule = validation[ruleName];\n\n                if (inArray(ruleName, specialRules) >= 0) {\n                    attr[datatype] = ruleName;\n                } else if (!kendo.isFunction(rule)) {\n                    attr[ruleName] = isPlainObject(rule) ? (rule.value || ruleName) : rule;\n                }\n\n                attr[kendo.attr(ruleName + \"-msg\")] = rule.message;\n            }\n\n            return attr;\n        }\n\n        function filterResourceEditorData(editor, parentValue, parentValueField, valueField) {\n            var editorValue = editor.value(),\n                isMs = Array.isArray(editorValue),\n                valueArray;\n\n            if (isMs) {\n                valueArray = JSON.parse(JSON.stringify(editorValue));\n            } else {\n                valueArray = [editorValue.toString()];\n            }\n\n            editor.dataSource.data().forEach(function(item) {\n                if (item[parentValueField] === null || item[parentValueField] === undefined$1 || item[parentValueField] == parentValue) {\n                    item.set(DISABLED, false);\n                } else {\n                    var currentValue = item.get(valueField);\n\n                    item.set(DISABLED, true);\n\n                    if (valueArray.indexOf(currentValue) >= 0 || valueArray.indexOf(currentValue.toString()) >= 0) {\n                        if (isMs) {\n                            valueArray.splice(valueArray.indexOf(currentValue), 1);\n                        } else {\n                            editor.value(null);\n                            editor.trigger(CHANGE);\n                        }\n                    }\n                }\n            });\n\n            if (isMs && valueArray.length < editorValue.length) {\n                editor.value(valueArray);\n                editor.trigger(CHANGE);\n            }\n        }\n\n        function bindParentValueChangeHandler(container, currentEditor, resource, parent) {\n            var parentElement = container.closest(\".k-edit-form-container\").find(\"[data-\" + kendo.ns + \"bind='value:\" + parent + \"']\");\n            var parentWidget = parentElement.getKendoDropDownList();\n\n            if (parentWidget) {\n                parentWidget.bind(CHANGE, function(ev) {\n                    var parentValue = ev.sender.value();\n\n                    filterResourceEditorData(currentEditor, parentValue, resource.dataParentValueField, resource.dataValueField);\n                });\n            } else {\n                parentElement.on(CHANGE, function(ev) {\n                    var parentValue = ev.target.value;\n\n                    filterResourceEditorData(currentEditor, parentValue, resource.dataParentValueField, resource.dataValueField);\n                });\n            }\n        }\n\n        function filterMobileResourceEditorData(resource, currentEditor, parentSelectedValue) {\n            var options = currentEditor.find(OPTION),\n                editorValue = currentEditor.val(),\n                isMs = Array.isArray(editorValue),\n                valueArray;\n\n            if (isMs) {\n                valueArray = JSON.parse(JSON.stringify(editorValue));\n            } else {\n                valueArray = [editorValue];\n            }\n\n            resource.dataSource.view().forEach(function(item, index) {\n                var itemParentValue = kendo.getter(resource.dataParentValueField)(item);\n                var valid = itemParentValue === null || itemParentValue === undefined$1 || itemParentValue == parentSelectedValue;\n\n                if (valid) {\n                    options[index].removeAttribute(DISABLED);\n                } else {\n                    options[index].setAttribute(DISABLED, DISABLED);\n\n                    var currentValue = \"\" + item.get(resource.dataValueField);\n\n                    if (valueArray.indexOf(currentValue) >= 0) {\n                        if (isMs) {\n                            valueArray.splice(valueArray.indexOf(currentValue), 1);\n                        } else {\n                            currentEditor.val(null);\n                            currentEditor.trigger(CHANGE);\n                        }\n                    }\n                }\n            });\n\n            if (isMs && valueArray.length < editorValue.length) {\n                currentEditor.val(valueArray);\n                currentEditor.trigger(CHANGE);\n            }\n        }\n\n        function dropDownResourceEditor(resource, model, parent) {\n            var attr = createValidationAttributes(model, resource.field);\n\n            return function(container) {\n                var currentEditor;\n\n                if (parent) {\n                    setTimeout(function() {\n                        filterResourceEditorData(currentEditor, model[parent], resource.dataParentValueField, resource.dataValueField);\n                        bindParentValueChangeHandler(container, currentEditor, resource, parent);\n                    });\n                }\n\n                currentEditor = $(kendo.format('<select aria-labelledby=\"' + resource.field + '_label\" data-{0}bind=\"value:{1}\" title=\"' + model.title + '\">', kendo.ns, resource.field))\n                    .appendTo(container)\n                    .attr(attr)\n                    .kendoDropDownList({\n                        dataTextField: resource.dataTextField,\n                        dataValueField: resource.dataValueField,\n                        dataSource: resource.dataSource.data(),\n                        valuePrimitive: resource.valuePrimitive,\n                        optionLabel: \"None\",\n                        template: (data) => `<span ${data.disabled ? \"data-disabled\" : \"\"}><span class=\"k-scheduler-mark\" ${kendo.attr(\"style-background-color\")}=\"${data[resource.dataColorField] || \"none\"}\"></span>${data[resource.dataTextField]}</span>`,\n                        select: function(e) {\n                            if (e.dataItem && e.dataItem.disabled) {\n                                e.preventDefault();\n                            }\n                        },\n                        dataBound: function(e) {\n                            let options = e.sender.list.find('li');\n\n                            for (let i = 0; i < options.length; i++) {\n                                var element = options.eq(i);\n\n                                if (element.find(\"[data-disabled]\").length > 0) {\n                                    element.addClass(\"k-disabled\");\n                                }\n                            }\n                        }\n                    }).data(\"kendoDropDownList\");\n           };\n        }\n\n        function dropDownResourceEditorMobile(resource, model, parent) {\n            var attr = createValidationAttributes(model, resource.field);\n\n            return function(container) {\n                var options = \"\";\n                var view = resource.dataSource.view();\n\n                for (var idx = 0, length = view.length; idx < length; idx++) {\n                    options += kendo.format('<option value=\"{0}\">{1}</option>',\n                        kendo.getter(resource.dataValueField)(view[idx]),\n                        kendo.getter(resource.dataTextField)(view[idx])\n                    );\n                }\n\n                var currentEditor = $(kendo.format('<select aria-labelledby=\"' + resource.field + '_label\" data-{0}bind=\"value:{1}\">{2}</select>',\n                    kendo.ns,\n                    resource.field,\n                    options\n                ))\n                .appendTo(container)\n                .attr(attr);\n\n                if (parent) {\n                    setTimeout(function() {\n                        var parentElement = container.closest(\".k-stretched-view\").find(\"[data-\" + kendo.ns + \"bind='value:\" + parent + \"']\");\n                        var parentSelectedValue = model[parent];\n\n                        filterMobileResourceEditorData(resource, currentEditor, parentSelectedValue);\n\n                        parentElement.on(CHANGE, function(ev) {\n                            var parentValue = ev.target.value;\n\n                            filterMobileResourceEditorData(resource, currentEditor, parentValue);\n                        });\n                    });\n                }\n           };\n        }\n\n        function multiSelectResourceEditor(resource, model, parent) {\n            var attr = createValidationAttributes(model, resource.field);\n\n            return function(container) {\n                var currentEditor;\n\n                if (parent) {\n                    setTimeout(function() {\n                        filterResourceEditorData(currentEditor, model[parent], resource.dataParentValueField, resource.dataValueField);\n                        bindParentValueChangeHandler(container, currentEditor, resource, parent);\n                    });\n                }\n\n                currentEditor = $(kendo.format('<select aria-labelledby=\"' + resource.field + '_label\" data-{0}bind=\"value:{1}\">', kendo.ns, resource.field))\n                    .appendTo(container)\n                    .attr(attr)\n                    .kendoMultiSelect({\n                        dataTextField: resource.dataTextField,\n                        dataValueField: resource.dataValueField,\n                        dataSource: resource.dataSource.data(),\n                        valuePrimitive: resource.valuePrimitive,\n                        itemTemplate: (data) => `<span ${data.disabled ? \"data-disabled\" : \"\"}><span class=\"k-scheduler-mark\" ${kendo.attr(\"style-background-color\")}=\"${data[resource.dataColorField] || \"none\"}\"></span>${data[resource.dataTextField]}</span>`,\n                        tagTemplate: (data) => `<span class=\"k-scheduler-mark\" ${kendo.attr(\"style-background-color\")}=\"${data[resource.dataColorField] || \"none\"}\"></span>${data[resource.dataTextField]}`,\n                        select: function(e) {\n                            if (e.dataItem && e.dataItem.disabled) {\n                                e.preventDefault();\n                            }\n                        },\n                        dataBound: function(e) {\n                            let options = e.sender.list.find('li');\n\n                            for (let i = 0; i < options.length; i++) {\n                                let element = options.eq(i);\n\n                                if (element.find(\"[data-disabled]\").length > 0) {\n                                    element.addClass(\"k-disabled\");\n                                }\n                            }\n                        }\n                    }).data(\"kendoMultiSelect\");\n           };\n        }\n\n        function multiSelectResourceEditorMobile(resource, model, parent) {\n            var attr = createValidationAttributes(model, resource.field);\n\n            return function(container) {\n                var options = \"\";\n                var view = resource.dataSource.view();\n\n                for (var idx = 0, length = view.length; idx < length; idx++) {\n                    options += kendo.format('<option value=\"{0}\">{1}</option>',\n                        kendo.getter(resource.dataValueField)(view[idx]),\n                        kendo.getter(resource.dataTextField)(view[idx])\n                    );\n                }\n\n                var currentEditor = $(kendo.format('<select aria-labelledby=\"' + resource.field + '_label\" data-{0}bind=\"value:{1}\" multiple=\"multiple\">{2}</select>',\n                    kendo.ns,\n                    resource.field,\n                    options\n                ))\n                .appendTo(container)\n                .attr(attr);\n\n                if (parent) {\n                    setTimeout(function() {\n                        var parentElement = container.closest(\".k-stretched-view\").find(\"[data-\" + kendo.ns + \"bind='value:\" + parent + \"']\");\n                        var parentSelectedValue = model[parent];\n\n                        filterMobileResourceEditorData(resource, currentEditor, parentSelectedValue);\n\n                        parentElement.on(CHANGE, function(ev) {\n                            var parentValue = ev.target.value;\n\n                            filterMobileResourceEditorData(resource, currentEditor, parentValue);\n                        });\n                    });\n                }\n           };\n        }\n\n        function moveEventRange(event, distance) {\n            var duration = event.end.getTime() - event.start.getTime();\n\n            var start = new Date(event.start.getTime());\n\n            kendo.date.setTime(start, distance);\n\n            var end = new Date(start.getTime());\n\n            kendo.date.setTime(end, duration, true);\n\n            return {\n                start: start,\n                end: end\n            };\n        }\n\n        var editors = {\n            mobile: {\n                dateRange: MOBILEDATERANGEEDITOR,\n                timezonePopUp: MOBILETIMEZONEPOPUP,\n                timezone: MOBILETIMEZONEEDITOR,\n                recurrence: MOBILERECURRENCEEDITOR,\n                description: descriptionEditor,\n                multipleResources: multiSelectResourceEditorMobile,\n                resources: dropDownResourceEditorMobile,\n                isAllDay: MOBILEISALLDAYEDITOR\n            },\n            desktop: {\n                dateRange: DATERANGEEDITOR,\n                timezonePopUp: TIMEZONEPOPUP,\n                timezone: TIMEZONEEDITOR,\n                recurrence: RECURRENCEEDITOR,\n                description: descriptionEditor,\n                multipleResources: multiSelectResourceEditor,\n                resources: dropDownResourceEditor,\n                isAllDay: ISALLDAYEDITOR\n            }\n        };\n\n        var Editor = kendo.Observable.extend({\n            init: function(element, options) {\n\n                kendo.Observable.fn.init.call(this);\n\n                this.element = element;\n                this.options = extend(true, {}, this.options, options);\n                this.createButton = this.options.createButton;\n\n                this.toggleDateValidationHandler = this._toggleDateValidation.bind(this);\n            },\n\n            _toggleDateValidation: function(e) {\n                if (e.field == \"isAllDay\") {\n                    var container = this.container,\n                        isAllDay = this.editable.options.model.isAllDay,\n                        bindAttribute = kendo.attr(\"bind\"),\n                        element, isDateTimeInput, shouldValidate;\n                    container.find(\"[\" + bindAttribute + \"*=end],[\" + bindAttribute + \"*=start]\").each(function() {\n                        element = $(this);\n                        if (valueStartEndBoundRegex.test(element.attr(bindAttribute))) {\n                            isDateTimeInput = element.is(\"[\" + kendo.attr(\"role\") + \"=datetimepicker],[type*=datetime]\");\n                            shouldValidate = isAllDay !== isDateTimeInput;\n                            element.attr(kendo.attr(\"validate\"), shouldValidate.toString());\n                        }\n                    });\n                }\n            },\n\n            fields: function(editors, model) {\n                var that = this;\n                var messages = that.options.messages;\n                var timezone = that.options.timezone;\n\n                var click = function(e) {\n                    e.preventDefault();\n                    that._initTimezoneEditor(model, this);\n                };\n\n                var fields = [\n                    { field: \"title\", title: messages.editor.title /*, format: field.format, editor: field.editor, values: field.values*/ },\n                    { field: \"start\", title: messages.editor.start, editor: editors.dateRange, timezone: timezone },\n                    { field: \"end\", title: messages.editor.end, editor: editors.dateRange, timezone: timezone },\n                    { field: \"isAllDay\", title: messages.editor.allDayEvent, editor: editors.isAllDay }\n                ];\n\n                var checkHierarchical = function(item) {\n                    return !!item[resource.dataParentValueField];\n                };\n\n                if (kendo.timezone.windows_zones) {\n                    fields.push({ field: \"timezone\", title: messages.editor.timezone, editor: editors.timezonePopUp, click: click, messages: messages.editor, model: model });\n                    fields.push({ field: \"startTimezone\", title: messages.editor.startTimezone, editor: editors.timezone, noTimezone: messages.editor.noTimezone });\n                    fields.push({ field: \"endTimezone\", title: messages.editor.endTimezone, editor: editors.timezone, noTimezone: messages.editor.noTimezone });\n                }\n\n                if (!model.recurrenceId) {\n                    fields.push({ field: \"recurrenceRule\", title: messages.editor.repeat, editor: editors.recurrence, timezone: timezone, messages: messages.recurrenceEditor, pane: this.pane });\n                }\n\n                if (\"description\" in model) {\n                    fields.push({ field: \"description\", title: messages.editor.description, editor: editors.description({ model: model, field: \"description\" }) });\n                }\n\n                for (var resourceIndex = 0; resourceIndex < this.options.resources.length; resourceIndex++) {\n                    var resource = this.options.resources[resourceIndex];\n                    var resourceView = resource.dataSource.view();\n                    var hasParent = resourceView.some(checkHierarchical);\n                    var parentResource, parent;\n\n                    if (hasParent) {\n                        parentResource = this.options.resources[resourceIndex - 1];\n\n                        if (parentResource) {\n                            parent = parentResource.field;\n                        }\n                    }\n\n                    fields.push({\n                        field: resource.field,\n                        title: resource.title,\n                        editor: resource.multiple ? editors.multipleResources(resource, model, parent) : editors.resources(resource, model, parent)\n                    });\n                }\n\n                return fields;\n            },\n\n            end: function() {\n                return this.editable.end();\n            },\n\n            _buildDesktopEditTemplate: function(model, fields, editableFields) {\n                var messages = this.options.messages;\n\n                const startTimezone = `<div class=\"k-popup-edit-form k-scheduler-edit-form k-scheduler-timezones\" ${kendo.attr(\"style-display\")}=\"none\">` +\n                                        '<div class=\"k-form\">' +\n                                        '<div class=\"k-form-field\"><div class=\"k-form-field-wrap\">' + kendo.html.renderCheckBox($('<input class=\"k-timezone-toggle\"/>'), { label: messages.editor.separateTimezones }) + '</div></div>';\n\n                const editableField = (fieldName) => {\n                    const isEditable = !model.editable || model.editable(fieldName);\n\n                    if (isEditable) {\n                        return `<div ${kendo.attr(\"container-for\")}=\"${fieldName}\" class=\"k-form-field-wrap\"></div>`;\n                    } else {\n                        return `<div class=\"k-form-field-wrap\">${(fieldName && kendo.getter(fieldName)(model)) || ''}</div>`;\n                    }\n                };\n\n                const generateFields = (field) => {\n                    const fieldName = field.field;\n                    const fieldTitle = field.title;\n                    const modelField = model.fields[fieldName];\n                    const isEditable = !model.editable || model.editable(fieldName);\n\n                    if (isEditable) {\n                        editableFields.push(field);\n                    }\n\n                    return (fieldName === 'startTimezone' ? startTimezone : '') +\n                        (modelField && modelField.type === \"boolean\" ?\n                            `<div class=\"k-form-field\">${editableField(fieldName)}</div>` :\n                            `<div class=\"k-form-field\"><label class=\"k-label k-form-label\" for=\"${fieldName}\" id=\"${fieldName}_label\">${fieldTitle || fieldName || \"\"}</label>${editableField(fieldName)}</div>`) +\n                        (fieldName === 'endTimezone' ? this._createEndTimezoneButton() : '');\n                };\n\n                return `<div class=\"k-form\">` +\n                    fields.map(generateFields).join('') +\n                `</div>`;\n            },\n\n            _buildMobileEditTemplate: function(model, fields, editableFields) {\n                var messages = this.options.messages;\n\n                const startTimezone = `<div class=\"k-popup-edit-form k-scheduler-edit-form k-scheduler-timezones\" ${kendo.attr(\"style-display\")}=\"none\">` +\n                                        '<ul class=\"k-listgroup k-listgroup-flush\">' +\n                                            '<li class=\"k-item k-listgroup-item\">' +\n                                                '<label class=\"k-label k-listgroup-form-row\">' +\n                                                    '<span class=\"k-item-title k-listgroup-form-row\">' + encode(messages.editor.separateTimezones) + '</span>' +\n                                                    '<span class=\"k-listgroup-form-field-wrapper\">' +\n                                                        '<input class=\"k-timezone-toggle\" data-role=\"switch\" type=\"checkbox\" />' +\n                                                    '</span>' +\n                                                '</label>' +\n                                            '</li>';\n\n                const editableField = (field) => {\n                    const fieldName = field.field;\n                    const fieldTitle = field.title;\n                    const isEditable = !model.editable || model.editable(fieldName);\n                    let midPart;\n\n                    if (isEditable) {\n                        midPart = `${fieldName === 'timezone' ?\n                                    `<label class=\"k-label k-listgroup-form-row\" data-bind=\"css: { k-disabled: isAllDay }\">` :\n                                    `<label class=\"k-label k-listgroup-form-row\">`}` +\n                            `<span class=\"k-item-title k-listgroup-form-field-label\">${fieldTitle || fieldName || \"\"}</span>` +\n                            `<div class=\"k-listgroup-form-field-wrapper\" ${kendo.attr(\"container-for\")}=\"${fieldName}\"></div>`;\n                    } else {\n                        midPart = `<li class=\"k-item k-listgroup-item\">` +\n                            `<label class=\"k-label k-no-click k-listgroup-form-row\">` +\n                            `<span class=\"k-item-title k-listgroup-form-field-label\">${fieldTitle || fieldName || \"\"}</span>` +\n                            `<span class=\"k-no-editor k-listgroup-form-field-wrapper\">${(fieldName && kendo.getter(fieldName)(model)) || ''}</span>`;\n                    }\n\n\n                    return `<li class=\"k-item k-listgroup-item\">` +\n                       midPart +\n                    `</label></li>`;\n\n                };\n\n                const generateFields = (field) => {\n                    const fieldName = field.field;\n                    const isEditable = !model.editable || model.editable(fieldName);\n\n                    if (isEditable) {\n                        editableFields.push(field);\n                    }\n\n                    return (fieldName === \"timezone\" || fieldName === \"recurrenceRule\" ? '</ul><ul class=\"k-listgroup k-listgroup-flush\">' : '') +\n                        (fieldName === 'startTimezone' ? startTimezone : '') +\n                        editableField(field) +\n                        (fieldName === 'recurrenceRule' ? '</ul><ul class=\"k-listgroup k-listgroup-flush\">' : '') +\n                        (fieldName === 'endTimezone' ? '</ul></div>' : '');\n                };\n\n                const result = `<ul class=\"k-listgroup k-listgroup-flush\">` +\n                    fields.map(generateFields).join('') +\n                `</ul>`;\n\n                return result;\n            },\n\n            _buildEditTemplate: function(model, fields, editableFields, isMobile) {\n                var settings = extend({}, kendo.Template, this.options.templateSettings);\n                var template = this.options.editable.template;\n                var html = \"\";\n\n                if (template) {\n                    if (typeof template === STRING) {\n                        template = kendo.unescape(template);\n                    }\n                    html += (kendo.template(template, settings))(model);\n                } else if (isMobile) {\n                    html += '<div data-role=\"content\">' + this._buildMobileEditTemplate(model, fields, editableFields) + '</div>';\n                } else {\n                    html += this._buildDesktopEditTemplate(model, fields, editableFields);\n                }\n\n                return html;\n            },\n\n            _createEndTimezoneButton: function() {\n                return '</ul></div>';\n            },\n\n            _revertTimezones: function(model) {\n                model.set(\"startTimezone\", this._startTimezone);\n                model.set(\"endTimezone\", this._endTimezone);\n\n                delete this._startTimezone;\n                delete this._endTimezone;\n            }\n        });\n\n        var MobileEditor = Editor.extend({\n            init: function() {\n                Editor.fn.init.apply(this, arguments);\n\n                this.pane = kendo.Pane.wrap(this.element, {\n                    viewEngine: {\n                        viewOptions: {\n                            renderOnInit: true,\n                            wrap: false,\n                            wrapInSections: true,\n                            detachOnHide: false,\n                            detachOnDestroy: false\n                        }\n                    }\n                });\n                this.pane.element.parent().css(\"height\", this.options.height);\n                this.view = this.pane.view();\n            },\n\n            options: {\n                animations: {\n                    left: \"slide\",\n                    right: \"slide:right\"\n                }\n            },\n\n            destroy: function() {\n                this.close();\n                this.unbind();\n                this.pane.destroy();\n            },\n\n            _initTimezoneEditor: function(model) {\n                var that = this;\n                var pane = that.pane;\n                var messages = that.options.messages;\n                var timezoneView = that.timezoneView;\n                var container = timezoneView ? timezoneView.content.find(\".k-scheduler-timezones\") : that.container.find(\".k-scheduler-timezones\");\n                var kSwitch = container.find(\"input.k-timezone-toggle\").data(\"kendoSwitch\");\n                var endTimezoneRow = container.find(\"li.k-item:not(.k-zonepicker)\").last();\n                var startTimezoneChange = function(e) {\n                    if (e.field === \"startTimezone\") {\n                        var value = model.startTimezone;\n\n                        kSwitch.enable(value);\n\n                        if (!value) {\n                            endTimezoneRow.hide();\n                            model.set(\"endTimezone\", \"\");\n                            kSwitch.value(false);\n                        }\n                    }\n                };\n\n                that._startTimezone = model.startTimezone || \"\";\n                that._endTimezone = model.endTimezone || \"\";\n\n                if (!timezoneView) {\n                    var html = '<div data-role=\"view\" class=\"k-popup-edit-form k-scheduler-edit-form\">' +\n                    '<div data-role=\"header\" class=\"k-appbar k-appbar-primary\">' +\n                        kendo.html.renderButton(`<button class=\"k-header-cancel k-scheduler-cancel\" title=\"${messages.cancel}\" aria-label=\"${messages.cancel}\"></button>`, {\n                            fillMode: \"flat\",\n                            icon: \"chevron-left\"\n                        }) +\n                        '<span class=\"k-spacer\"></span>' +\n                        `<span>${encode(messages.editor.timezoneTitle)}</span>` +\n                        '<span class=\"k-spacer\"></span>' +\n                        encode(messages.editor.timezoneTitle) +\n                        kendo.html.renderButton(`<button class=\"k-header-done k-scheduler-update\" title=\"${messages.save}\" aria-label=\"${messages.save}\"></button>`, {\n                            fillMode: \"flat\",\n                            icon: \"check\"\n                        }) +\n                    '</div><div data-role=\"content\"></div>';\n\n                    this.timezoneView = timezoneView = pane.append(html);\n\n                    timezoneView.contentElement.append(container.show());\n\n                    timezoneView.element.on(CLICK + NS, \".k-scheduler-cancel, .k-scheduler-update\", function(e) {\n                        e.preventDefault();\n                        e.stopPropagation();\n\n                        if ($(this).hasClass(\"k-scheduler-cancel\")) {\n                            that._revertTimezones(model);\n                        }\n\n                        var editView = that._editPane;\n\n                        var text = timezoneButtonText(model, messages.editor.noTimezone);\n\n                        editView.content.find(\".k-timezone-label\").text(text);\n\n                        pane.navigate(editView, that.options.animations.right);\n                    });\n\n                    kSwitch.bind(CHANGE, function(ev) {\n                        endTimezoneRow.toggle(ev.checked);\n                        model.set(\"endTimezone\", \"\");\n                    });\n                    model.bind(CHANGE, startTimezoneChange);\n                }\n\n                kSwitch.value(!!model.endTimezone);\n                kSwitch.enable(!!model.startTimezone);\n\n                if (model.endTimezone) {\n                    endTimezoneRow.show();\n                } else {\n                    endTimezoneRow.hide();\n                }\n\n                pane.navigate(timezoneView, that.options.animations.left);\n            },\n\n            showDialog: function(options) {\n                var actions = options.buttons.map(function(button) {\n                    return {\n                        text: button.text,\n                        action: button.click\n                    };\n                });\n\n                actions.push({\n                    text: this.options.messages.cancel,\n                    primary: true\n                });\n\n                $(\"<div />\").appendTo(document.body)\n                    .kendoDialog({\n                        close: function() {\n                            this.destroy();\n                        },\n                        modal: {\n                            preventScroll: true\n                        },\n                        closable: false,\n                        title: false,\n                        content: options.text,\n                        actions: actions\n                    });\n            },\n\n            editEvent: function(model) {\n                var pane = this.pane;\n                var html = \"\";\n\n                var messages = this.options.messages;\n                var updateText = messages.save;\n                var removeText = messages.destroy;\n                var cancelText = messages.cancel;\n                var titleText = messages.editor.editorTitle;\n                var resetSeries = messages.resetSeries;\n\n                html += '<div data-role=\"view\" class=\"k-popup-edit-form k-scheduler-edit-form\"' + kendo.attr(\"uid\") + '=\"' + model.uid + '\">' +\n                    '<div data-role=\"header\" class=\"k-appbar k-appbar-primary\">' +\n                        kendo.html.renderButton(`<button class=\"k-header-cancel k-scheduler-cancel\" title=\"${cancelText}\" aria-label=\"${cancelText}\"></button>`, {\n                            fillMode: \"flat\",\n                            icon: \"chevron-left\"\n                        }) +\n                        '<span class=\"k-spacer\"></span>' +\n                        `<span>${encode(titleText)}</span>` +\n                        '<span class=\"k-spacer\"></span>' +\n                        kendo.html.renderButton(`<button class=\"k-header-done k-scheduler-update\" title=\"${updateText}\" aria-label=\"${updateText}\"></button>`, {\n                            fillMode: \"flat\",\n                            icon: \"check\"\n                        }) +\n                    '</div>';\n\n                var fields = this.fields(editors.mobile, model);\n\n                var that = this;\n\n                var editableFields = [];\n\n                html += this._buildEditTemplate(model, fields, editableFields, true);\n\n                html += \"</div>\";\n\n                var view = pane.append(html);\n\n                if (!model.isNew() && this.options.editable && this.options.editable.destroy !== false && model.isRecurrenceHead() && model.recurrenceException) {\n                    var resetSeriesBtn = '<ul class=\"k-edit-buttons k-listgroup k-listgroup-flush\"><li class=\"k-item k-listgroup-item\"><span class=\"k-scheduler-resetSeries k-link k-label\" aria-label=\"' + resetSeries + '\">' + resetSeries + '</span></li></ul>';\n                    view.contentElement.append(resetSeriesBtn);\n                }\n\n                if (!model.isNew() && this.options.editable && this.options.editable.destroy !== false) {\n                    var deleteBtn = '<ul class=\"k-edit-buttons k-listgroup k-listgroup-flush\"><li class=\"k-item k-listgroup-item\"><span class=\"k-scheduler-delete k-link k-label\" aria-label=\"' + removeText + '\">' + removeText + '</span></li></ul>';\n                    view.contentElement.append(deleteBtn);\n                }\n\n                this._editPane = view;\n\n                var container = this.container = view.element;\n\n                this.editable = container.kendoEditable({\n                    fields: editableFields,\n                    model: model,\n                    clearContainer: false,\n                    target: that.options.target,\n                    validateOnBlur: true\n                }).data(\"kendoEditable\");\n\n                if (!this.trigger(\"edit\", { container: container, model: model })) {\n\n                    container.on(CLICK + NS, \"a.k-scheduler-edit, .k-scheduler-cancel, .k-scheduler-update, span.k-scheduler-delete, span.k-scheduler-resetSeries\", function(e) {\n                        e.preventDefault();\n                        e.stopPropagation();\n\n                        var button = $(this);\n\n                        if (!button.hasClass(\"k-scheduler-edit\")) {\n\n                            var name = \"cancel\";\n\n                            if (button.hasClass(\"k-scheduler-update\")) {\n                                name = \"save\";\n                            } else if (button.hasClass(\"k-scheduler-delete\")) {\n                                name = \"remove\";\n                            } else if (button.hasClass(\"k-scheduler-resetSeries\")) {\n                                name = RESET;\n                            }\n\n                            that.trigger(name, { container: container, model: model });\n                        } else {\n                            pane.navigate(this._editPane, that.options.animations.right);\n                        }\n                    });\n\n                    pane.navigate(view, that.options.animations.left);\n\n                    model.bind(CHANGE, that.toggleDateValidationHandler);\n                } else {\n                    this.trigger(\"cancel\", { container: container, model: model });\n                }\n\n                return this.editable;\n            },\n\n            _views: function() {\n                return this.pane.element\n                        .find(kendo.roleSelector(\"view\"))\n                        .not(this.view.element);\n            },\n\n            close: function() {\n                if (this.container) {\n                    this.pane.navigate(\"\", this.options.animations.right);\n\n                    var views = this._views();\n                    var view;\n\n                    for (var idx = 0, length = views.length; idx < length; idx++) {\n                        view = views.eq(idx).data(\"kendoView\");\n                        if (view) {\n                           view.purge();\n                        }\n                    }\n\n                    views.remove();\n\n                    this.container = null;\n                    if (this.editable) {\n                        this.editable.options.model.unbind(CHANGE, this.toggleDateValidationHandler);\n                        this.editable.destroy();\n                        this.editable = null;\n                    }\n                    this.timezoneView = null;\n                }\n            }\n        });\n\n        var PopupEditor = Editor.extend({\n            destroy: function() {\n                this.close();\n                this.unbind();\n            },\n\n            editEvent: function(model) {\n                var that = this;\n                var editable = that.options.editable;\n                var html = '<div ' + kendo.attr(\"uid\") + '=\"' + model.uid + '\" class=\"k-popup-edit-form k-scheduler-edit-form\"><div class=\"k-edit-form-container\">';\n                var $html;\n                var messages = that.options.messages;\n                var updateText = messages.save;\n                var updateIcon = \"save\";\n                var cancelText = messages.cancel;\n                var cancelIcon = \"cancel-outline\";\n                var deleteText = messages.destroy;\n                var deleteIcon = \"trash\";\n                var resetSeries = messages.resetSeries;\n                var fields = this.fields(editors.desktop, model);\n                var editableFields = [];\n                var fieldName;\n\n                html += this._buildEditTemplate(model, fields, editableFields, false);\n\n                var attr;\n                var options = isPlainObject(editable) ? editable.window : {};\n\n                html += '<div class=\"k-edit-buttons\">';\n\n                html += this.createButton({ name: \"update\", text: updateText, attr: attr, icon: updateIcon }) + this.createButton({ name: \"canceledit\", text: cancelText, attr: attr, icon: cancelIcon });\n\n                if (!model.isNew() && editable.destroy !== false && model.isRecurrenceHead() && model.recurrenceException) {\n                    html += this.createButton({ name: \"resetSeries\", text: resetSeries, attr: attr });\n                }\n\n                if ((!model.isNew() || model.isRecurring()) && editable.destroy !== false) {\n                    html += '<span class=\"k-spacer\"></span>' + this.createButton({ name: \"delete\", text: deleteText, attr: attr, icon: deleteIcon, fillMode: \"flat\", themeColor: \"primary\" });\n                }\n\n                html += '</div></div></div>';\n\n                $html = $(html);\n                kendo.applyStylesFromKendoAttributes($html, [\"display\"]);\n\n                var container = this.container = $html\n                    .appendTo(that.element).eq(0)\n                    .kendoWindow(extend({\n                        modal: true,\n                        resizable: false,\n                        draggable: true,\n                        title: messages.editor.editorTitle,\n                        visible: false,\n                        close: function(e) {\n                            if (e.userTriggered) {\n                                if (that.trigger(CANCEL, { container: container, model: model })) {\n                                    e.preventDefault();\n                                }\n                            }\n                        }\n                    }, options));\n\n                that.editable = container.kendoEditable({\n                    fields: editableFields,\n                    model: model,\n                    clearContainer: false,\n                    validateOnBlur: true,\n                    target: that.options.target\n                }).data(\"kendoEditable\");\n\n                for (var field in editableFields) {\n                    if (editableFields[field].field !== \"recurrenceRule\") {\n                        fieldName = editableFields[field].field;\n                        container.find(\"[name='\" + fieldName + \"']\").attr(\"aria-labelledby\", fieldName + \"_label\");\n                    }\n\n                    if (editableFields[field].field === \"isAllDay\") {\n                        container.find(\"label[for='\" + fieldName + \"']\").attr(\"id\", fieldName + \"_label\");\n                    }\n                }\n\n                if (!that.trigger(EDIT, { container: container, model: model })) {\n\n                    if (editable.window && editable.window.position) {\n                        container.data(\"kendoWindow\").open();\n                    } else {\n                        container.data(\"kendoWindow\").center().open();\n                    }\n\n                    container.on(CLICK + NS, \"button.k-scheduler-cancel\", function(e) {\n                        e.preventDefault();\n                        e.stopPropagation();\n\n                        that.trigger(CANCEL, { container: container, model: model });\n                    });\n\n                    container.on(CLICK + NS, \"button.k-scheduler-update\", function(e) {\n                        e.preventDefault();\n                        e.stopPropagation();\n\n                        that.trigger(\"save\", { container: container, model: model });\n                    });\n\n                    container.on(CLICK + NS, \"button.k-scheduler-delete\", function(e) {\n                        e.preventDefault();\n                        e.stopPropagation();\n\n                        that.trigger(REMOVE, { container: container, model: model });\n                    });\n\n                    container.on(CLICK + NS, \"button.k-scheduler-resetSeries\", function(e) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        that.trigger(RESET, { container: container, model: model });\n                    });\n\n                    kendo.cycleForm(container);\n\n                    model.bind(CHANGE, that.toggleDateValidationHandler);\n                } else {\n                    that.trigger(CANCEL, { container: container, model: model });\n                }\n\n                return that.editable;\n            },\n\n            close: function() {\n                var that = this;\n\n                var destroy = function() {\n                    if (that.editable) {\n                        that.editable.options.model.unbind(CHANGE, that.toggleDateValidationHandler);\n                        that.editable.destroy();\n                        that.editable = null;\n                        that.container = null;\n                    }\n                    if (that.popup) {\n                        that.popup.destroy();\n                        that.popup = null;\n                    }\n                };\n\n                if (that.editable) {\n                    if (that._timezonePopup && that._timezonePopup.data(\"kendoWindow\")) {\n                        that._timezonePopup.data(\"kendoWindow\").destroy();\n                        that._timezonePopup = null;\n                    }\n\n                    if (that.container.is(\":visible\")) {\n                        that.container.data(\"kendoWindow\").bind(\"deactivate\", destroy).close();\n                    } else {\n                        destroy();\n                    }\n                } else {\n                    destroy();\n                }\n            },\n\n            _createEndTimezoneButton: function() {\n                var messages = this.options.messages;\n                var html = \"\";\n\n                html += '<div class=\"k-edit-buttons\">';\n                html += this.createButton({ name: \"savetimezone\", icon: \"save\", themeColor: \"primary\", text: messages.save }) + this.createButton({ name: \"canceltimezone\", icon: \"cancel-outline\", text: messages.cancel });\n                html += '</div></div></div>';\n\n                return html;\n            },\n\n            showDialog: function(options) {\n                var html = kendo.format(\"<div class='k-popup-edit-form'><div class='k-edit-form-container'><p class='k-popup-message'>{0}</p>\", options.text);\n\n                html += '<div class=\"k-edit-buttons\">';\n\n                for (var buttonIndex = 0; buttonIndex < options.buttons.length; buttonIndex++) {\n                    html += this.createButton(options.buttons[buttonIndex]);\n                }\n\n                html += '</div></div></div>';\n\n                var wrapper = this.element;\n\n                if (this.popup) {\n                    this.popup.destroy();\n                }\n\n                var popup = this.popup = $(html).appendTo(wrapper)\n                                   .eq(0)\n                                   .on(CLICK, \".k-button\", function(e) {\n                                        e.preventDefault();\n\n                                        popup.close();\n\n                                        var buttonIndex = $(e.currentTarget).index();\n\n                                        options.buttons[buttonIndex].click();\n                                   })\n                                   .kendoWindow({\n                                       modal: true,\n                                       resizable: false,\n                                       draggable: false,\n                                       title: options.title,\n                                       visible: false,\n                                       close: function() {\n                                           this.destroy();\n                                           wrapper.trigger(\"focus\");\n                                       }\n                                   })\n                                   .getKendoWindow();\n\n                popup.center().open();\n            },\n\n            _initTimezoneEditor: function(model, activator) {\n                var that = this;\n                var container = that.container.find(\".k-scheduler-timezones\");\n                var checkbox = container.find(\"input.k-timezone-toggle\");\n                var endTimezoneRow = container.find(\".k-form-field\").last();\n                var saveButton = container.find(\".k-scheduler-savetimezone\");\n                var cancelButton = container.find(\".k-scheduler-canceltimezone\");\n                var timezonePopup = that._timezonePopup;\n                var startTimezoneChange = function(e) {\n                    if (e.field === \"startTimezone\") {\n                        var value = model.startTimezone;\n\n                        checkbox.prop(DISABLED, !value);\n\n                        if (!value) {\n                            endTimezoneRow.hide();\n                            model.set(\"endTimezone\", \"\");\n                            checkbox.prop(\"checked\", false);\n                        }\n                    }\n                };\n                var wnd;\n\n                that._startTimezone = model.startTimezone;\n                that._endTimezone = model.endTimezone;\n\n                if (!timezonePopup) {\n                    that._timezonePopup = timezonePopup = container.kendoWindow({\n                        modal: true,\n                        resizable: false,\n                        draggable: true,\n                        title: that.options.messages.editor.timezoneEditorTitle,\n                        visible: false,\n                        close: function(e) {\n                            model.unbind(CHANGE, startTimezoneChange);\n\n                            if (e.userTriggered) {\n                                that._revertTimezones(model);\n                            }\n\n                            if (activator) {\n                                activator.focus();\n                            }\n                        }\n                    });\n\n                    checkbox.on(CLICK, function() {\n                        endTimezoneRow.toggle(checkbox.prop(\"checked\"));\n                        model.set(\"endTimezone\", \"\");\n                    });\n\n                    saveButton.on(CLICK, function(e) {\n                        e.preventDefault();\n                        wnd.close();\n                    });\n\n                    cancelButton.on(CLICK, function(e) {\n                        e.preventDefault();\n                        that._revertTimezones(model);\n                        wnd.close();\n                    });\n\n                    model.bind(CHANGE, startTimezoneChange);\n                }\n\n                checkbox.prop(\"checked\", model.endTimezone).prop(DISABLED, !model.startTimezone);\n\n                if (model.endTimezone) {\n                    endTimezoneRow.show();\n                } else {\n                    endTimezoneRow.hide();\n                }\n\n                wnd = timezonePopup.data(\"kendoWindow\");\n                wnd.center().open();\n            }\n        });\n\n        var Scheduler = DataBoundWidget.extend({\n            init: function(element, options) {\n                var that = this;\n\n                Widget.fn.init.call(that, element, options);\n\n                if (!that.options.views || !that.options.views.length) {\n                    that.options.views = [\"day\", \"week\"];\n                }\n\n                that.resources = [];\n\n                that._initModel();\n\n                that._wrapper();\n\n                if (that.options.selectable) {\n                    that._tabindex();\n                }\n\n                that._views();\n\n                that._toolbar();\n\n                that._dataSource();\n\n                that._resources();\n\n                that._resizeHandler = function() {\n                    that.resize();\n                };\n\n                that.wrapper.on(MOUSEDOWN + NS + \" selectstart\" + NS, function(e) {\n                    var target = $(e.target);\n\n                    if (!target.is(\":kendoFocusable\") && target.closest(\".k-button\").length === 0) {\n                        e.preventDefault();\n                    }\n                });\n\n                if (that.options.editable && that.options.editable.resize !== false) {\n                    that._resizable();\n                }\n\n                that._movable();\n\n                that._bindResize();\n\n                if (that.options.messages && that.options.messages.recurrence) {\n                    recurrence.options = that.options.messages.recurrence;\n                }\n\n                that._navigation();\n                that._selectable();\n                that._touchHandlers();\n\n                that._ariaId = kendo.guid();\n\n                that._createEditor();\n\n                that.mediaQueryList = kendo.mediaQuery(MIN_SCREEN);\n                that.mediaQueryList.onChange(that._onMediaChange.bind(that));\n\n                that.toolbar.find('.k-scheduler-views').children().removeClass('k-button-rectangle');\n\n                if (that._showWatermarkOverlay) {\n                    that._showWatermarkOverlay(that.element[0]);\n                }\n            },\n\n            _onMediaChange: function(e) {\n                var that = this;\n                var view = that._selectedView;\n                var toolbarEl = that.toolbar;\n                var toolbar = toolbarEl.getKendoToolBar();\n\n                if (e.matches) {\n                    toolbar.hide(toolbarEl.find(\".k-views-dropdown\"));\n                    toolbar.show(toolbarEl.find(\".k-views-dropdown\").parent().next(\".k-button-group\"));\n                } else {\n                    toolbar.show(toolbarEl.find(\".k-views-dropdown\"));\n                    toolbar.hide(toolbarEl.find(\".k-views-dropdown\").parent().next(\".k-button-group\"));\n                }\n\n                that._model.set(\"formattedDate\", e.matches ? view.dateForTitle() : view.shortDateForTitle());\n            },\n\n            _bindResize: function() {\n                $(window).on(\"resize\" + NS, this._resizeHandler);\n            },\n\n            _unbindResize: function() {\n                $(window).off(\"resize\" + NS, this._resizeHandler);\n            },\n\n            dataItems: function() {\n                var that = this;\n                var items = that.items();\n                var events = that._data;\n                var eventsUids = $.map(items, function(item) {\n                    return $(item).attr(\"data-uid\");\n                });\n                var i;\n                var key;\n\n                var dict = {};\n                var eventsUidsLength = eventsUids.length;\n                for (i = 0; i < eventsUidsLength; i++) {\n                    dict[eventsUids[i]] = null;\n                }\n\n                var eventsCount = events.length;\n                for (i = 0; i < eventsCount; i++) {\n                    var event = events[i];\n                    if (dict[event.uid] !== undefined$1) {\n                        dict[event.uid] = event;\n                    }\n                }\n\n                var sortedData = [];\n                for (key in dict) {\n                    sortedData.push(dict[key]);\n                }\n\n                return sortedData;\n            },\n\n            _isMobile: function() {\n                var options = this.options;\n                return (options.mobile === true && kendo.support.mobileOS) || options.mobile === \"phone\" || options.mobile === \"tablet\";\n            },\n\n            _isTouch: function(event) {\n                return /touch/.test(event.type) || (event.originalEvent && /touch/.test(event.originalEvent.pointerType));\n            },\n\n            _isInverseColor: function(eventElement) {\n                return eventElement.hasClass(INVERSECOLORCLASS);\n            },\n\n            _groupsByResource: function(resources, groupIndex, groupsArray, parentFieldValue, parentField) {\n                if (!groupsArray) {\n                    groupsArray = [];\n                }\n\n                var resource = resources[0];\n                if (resource) {\n                    var group;\n                    var data = resource.dataSource.view();\n                    var prevIndex = 0;\n\n                    for (var dataIndex = 0; dataIndex < data.length; dataIndex++) {\n                        var fieldValue = kendo.getter(resource.dataValueField)(data[dataIndex]);\n                        var currentGroupIndex = groupIndex + prevIndex + dataIndex;\n\n                        group = this._groupsByResource(resources.slice(1), currentGroupIndex, groupsArray, fieldValue, resource.field);\n                        group[resource.field] = fieldValue;\n                        prevIndex = group.groupIndex;\n\n                        if (parentField && parentFieldValue) {\n                            group[parentField] = parentFieldValue;\n                        }\n\n                        if (resources.length === 1) {\n                            group.groupIndex = groupIndex + dataIndex;\n                            groupsArray.push(group);\n                        }\n                    }\n                    return group;\n                } else {\n                    return {};\n                }\n            },\n\n            data: function() {\n                return this._data;\n            },\n\n            select: function(options) {\n                var that = this;\n                var view = that.view();\n                var selection = that._selection;\n                var groups = view.groups;\n                var selectedGroups;\n\n                if (options === undefined$1) {\n                    var selectedEvents;\n                    var slots = view._selectedSlots;\n\n                    if (!selection) {\n                        return [];\n                    }\n\n                    if (selection && selection.events) {\n                        selectedEvents = that._selectedEvents();\n                    }\n\n                    return {\n                        start: selection.start,\n                        end: selection.end,\n                        events: selectedEvents,\n                        slots: slots,\n                        resources: view._resourceBySlot(selection)\n                    };\n                }\n\n                if (!options) {\n                    that._selection = null;\n                    that._old = null;\n                    view.clearSelection();\n\n                    return;\n                }\n\n                if (Array.isArray(options)) {\n                    options = {\n                        events: options.splice(0)\n                    };\n                }\n\n                if (options.resources) {\n                    var fieldName;\n                    var filters = [];\n                    var groupsByResource = [];\n\n                    if (view.groupedResources) {\n                        that._groupsByResource(view.groupedResources, 0, groupsByResource);\n                    }\n\n                    for (fieldName in options.resources) {\n                        filters.push({ field: fieldName, operator: \"eq\", value: options.resources[fieldName] });\n                    }\n\n                    selectedGroups = new kendo.data.Query(groupsByResource)\n                        .filter(filters)\n                        .toArray();\n                }\n\n                if (options.events && options.events.length) {\n                    that._selectEvents(options.events, selectedGroups);\n                    that._select();\n\n                    return;\n                }\n\n                if (groups && (options.start && options.end)) {\n                    var rangeStart = getDate(view._startDate);\n                    var rangeEnd = kendo.date.addDays(getDate(view._endDate),1);\n                    var group;\n                    var ranges;\n\n                    if (options.start < rangeEnd && rangeStart <= options.end) {\n                        if (selectedGroups && selectedGroups.length) {\n                            group = groups[selectedGroups[0].groupIndex];\n                        } else {\n                            group = groups[0];\n                        }\n\n                        if (!group.timeSlotCollectionCount()) {\n                            options.isAllDay = true;\n                        }\n\n                        ranges = group.ranges(options.start, options.end, options.isAllDay, false);\n\n                        if (ranges.length) {\n                            that._selection = {\n                                start: kendo.timezone.toLocalDate(ranges[0].start.start),\n                                end: kendo.timezone.toLocalDate(ranges[ranges.length - 1].end.end),\n                                groupIndex: ranges[0].start.groupIndex,\n                                index: ranges[0].start.index,\n                                isAllDay: ranges[0].start.isDaySlot,\n                                events: []\n                            };\n\n                            that._select();\n                        }\n                    }\n                }\n            },\n\n            _selectEvents: function(eventsUids, selectedGroups) {\n                var that = this;\n                var idx;\n                var view = that.view();\n                var groups = view.groups;\n                var eventsLength = eventsUids.length;\n                var isGrouped = selectedGroups && selectedGroups.length;\n                var ctrlKey = that._ctrlKey;\n\n                that._ctrlKey = true;\n\n                for (idx = 0; idx < eventsLength; idx++) {\n                    if (groups && isGrouped) {\n                        var currentGroup = groups[selectedGroups[0].groupIndex];\n                        var events = [];\n                        var timeSlotCollectionCount = currentGroup.timeSlotCollectionCount();\n                        var daySlotCollectionCount = currentGroup.daySlotCollectionCount();\n\n                        for (var collIdx = 0; collIdx < timeSlotCollectionCount; collIdx++) {\n                            events = events.concat(currentGroup.getTimeSlotCollection(collIdx).events());\n                        }\n\n                        for (var dayCollIdx = 0; dayCollIdx < daySlotCollectionCount; dayCollIdx++) {\n                            events = events.concat(currentGroup.getDaySlotCollection(dayCollIdx).events());\n                        }\n\n                        events = new kendo.data.Query(events)\n                            .filter({ field: event => event.element[0].getAttribute('data-uid'), operator: \"eq\", value: eventsUids[idx] })\n                            .toArray();\n\n                        if (events[0]) {\n                            that._createSelection(events[0].element);\n                        }\n                    } else {\n                        var element = view.element.find(kendo.format(\".k-event[data-uid={0}], .k-task[data-uid={0}]\", eventsUids[idx]));\n\n                        if (element.length) {\n                            that._createSelection(element[0]);\n                        }\n                    }\n                }\n\n                that._ctrlKey = ctrlKey;\n            },\n\n            _touchHandlers: function() {\n                var that = this;\n                var startX;\n                var startY;\n                var endX;\n                var endY;\n                var timeStamp;\n                var wrapper = that.wrapper;\n                var touchMoveHandler = that._touchMove.bind(that);\n\n                wrapper.on(TOUCHSTART + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event\", function(e) {\n                    var content = that.wrapper.find(\".k-scheduler-content\");\n\n                    if (!that._isTouch(e)) {\n                        return;\n                    }\n\n                    content.stop(true, false);\n\n                    that._touchPosX = startX = that._tapPosition(e, 'X');\n                    that._touchPosY = startY = that._tapPosition(e, 'Y');\n                    that._userTouched = true;\n                    that.view()._scrolling = false;\n                    timeStamp = Date.now();\n\n                    wrapper.on(TOUCHMOVE + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event\", touchMoveHandler);\n                });\n\n                wrapper.on(\"contextmenu\" + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event\", function(e) {\n                    that._preventFocus = true;\n                });\n\n                wrapper.on(TOUCHEND + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event\", function(e) {\n                    if (!that._isTouch(e)) {\n                        return;\n                    }\n\n                    var delta = Date.now() - timeStamp;\n                    var content = that.wrapper.find(\".k-scheduler-content\");\n                    var amplitude = -that._amplitude * (3000 / delta);\n\n                    endX = that._tapPosition(e, 'X');\n                    endY = that._tapPosition(e, 'Y');\n\n                    if (that._dragging) {\n                        return;\n                    }\n\n                    if (that.options.selectable && (Math.abs(endX - startX) <= 10 || Math.abs(endY - startY) <= 10)) {\n                        that._mouseDownSelection(e);\n                    }\n\n                    if (!kendo.support.kineticScrollNeeded && delta < 200 && Math.abs(endX - startX) > 10) {\n                        content.animate({\n                            scrollTop: content[0].scrollTop + amplitude\n                        });\n                    }\n\n                    wrapper.off(TOUCHMOVE + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td\", touchMoveHandler);\n                });\n            },\n\n            _navigation: function() {\n                var that = this,\n                    wrapper = that.wrapper;\n\n                wrapper.on(\"focus\" + NS, function() {\n                    var selection = that._selection;\n\n                    setTimeout(function() {\n                        if (!that._preventFocus) {\n                            if ((!selection ||\n                                    (selection.events.length > 0 && wrapper.find(\"[data-uid='\" + selection.events[0] + \"']\").length === 0)) &&\n                                !that._userTouched &&\n                                !that._mouseDown) {\n                                    that._initialFocus();\n                            } else {\n                                that._mouseDown = false;\n                            }\n\n                            that._select();\n                        } else {\n                            that._preventFocus = false;\n                        }\n                    }, 300);\n                });\n\n                wrapper.on(\"focusout\" + NS, function() {\n                    that._ctrlKey = that._shiftKey = false;\n                });\n\n                wrapper.on(\"keydown\" + NS, that._keydown.bind(that));\n\n                wrapper.on(\"keyup\" + NS, function(e) {\n                    that._ctrlKey = e.ctrlKey;\n                    that._shiftKey = e.shiftKey;\n                });\n            },\n\n            _selectable: function() {\n                var that = this;\n                var wrapper = that.wrapper;\n\n                if (!that.options.selectable) {\n                    return;\n                }\n\n                wrapper.on(MOUSEDOWN + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event, .k-scheduler-body td .k-link\", function(e) {\n                    if (that._isTouch(e)) {\n                        return;\n                    }\n                    that._mouseDownSelection(e);\n                });\n\n                var mouseMoveHandler = that._mouseMove.bind(that);\n\n                wrapper.on(MOUSEDOWN + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td\", function(e) {\n                    var which = e.which;\n                    var button = e.button;\n                    var isRight = which && which === 3 || button && button == 2;\n\n                    if (that._isTouch(e)) {\n                        return;\n                    }\n\n                    if (!isRight) {\n                        wrapper.on(MOUSEMOVE + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td\", mouseMoveHandler);\n                    }\n                });\n\n                wrapper.on(\"mouseup\" + NS + \" mousecancel\" + NS, function() {\n                    wrapper.off(MOUSEMOVE + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td\", mouseMoveHandler);\n                });\n            },\n\n            _mouseDownSelection: function(e) {\n                var which = e.which;\n                var button = e.button;\n                var isRight = which && which === 3 || button && button == 2;\n\n                if (!isRight) {\n                    if (e.ctrlKey) {\n                        this._ctrlKey = e.ctrlKey;\n                    }\n\n                    if (e.shiftKey) {\n                        this._shiftKey = e.shiftKey;\n                    }\n\n                    this._mouseDown = true;\n                    this._createSelection(e.currentTarget);\n\n                    if ($(e.currentTarget).hasClass(\"k-event\")) {\n                        this._selection.eventElement = e.currentTarget;\n                    }\n                }\n\n                if (this.view().name !== \"year\" && kendo._activeElement() !== this.wrapper.get(0)) {\n                    kendo.focusElement(this.wrapper);\n                } else {\n                    this._select();\n                }\n\n                if (this.toolbar) {\n                    this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                }\n            },\n\n            _selectFirstSlot: function() {\n                var firstAllDay = this.wrapper.find(\".k-scheduler-header-all-day\").find(\"td\").first(),\n                    firstContent = this.wrapper.find(\".k-scheduler-content\").find(\"td\").first(),\n                    firstSlot;\n\n                if (firstAllDay.length > 0) {\n                    firstSlot = firstAllDay;\n                } else if (firstContent.length > 0) {\n                    firstSlot = firstContent;\n                } else {\n                    firstSlot = this.wrapper.find(\".k-scheduler-body\").find(\".k-link\").first();\n                }\n\n                this._createSelection(firstSlot);\n            },\n\n            _firstEvent: function() {\n                var firstEventInAllDay = this.wrapper.find(\".k-scheduler-header-wrap .k-event, .k-task\").first(),\n                    firstEventInContent = this.wrapper.find(\".k-scheduler-content .k-event\").first(),\n                    firstEvent, allDayEvent, contentEvent;\n\n                if (firstEventInAllDay.length > 0) {\n                    if (firstEventInContent.length > 0) {\n                        allDayEvent = this.occurrenceByUid(firstEventInAllDay.data(\"uid\"));\n                        contentEvent = this.occurrenceByUid(firstEventInContent.data(\"uid\"));\n\n                        firstEvent = allDayEvent.start <= contentEvent.start ? firstEventInAllDay : firstEventInContent;\n                    } else {\n                        firstEvent = firstEventInAllDay;\n                    }\n                } else if (firstEventInContent) {\n                    firstEvent = firstEventInContent;\n                }\n\n                return firstEvent;\n            },\n\n            _initialFocus: function() {\n                var firstEvent = this._firstEvent();\n\n                if (this.options.selectable) {\n                    if (firstEvent && firstEvent.length > 0) {\n                        this._createSelection(firstEvent);\n                        this._selection.eventElement = firstEvent[0];\n                    } else {\n                        this._selectFirstSlot();\n                    }\n                } else if (this.toolbar && this.toolbar.find(\".\" + FOCUSEDSTATE).length === 0) {\n                    this._focusToolbar();\n                } else if (this.toolbar) {\n                    this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                }\n            },\n\n            _select: function() {\n                var that = this;\n                var view = that.view();\n                var wrapper = that.wrapper;\n                var current = view.current();\n                var selection = that._selection;\n                var oldSelection = that._old ? that._old.selection : null;\n                var oldEventsLength = that._old ? that._old.eventsLength : null;\n                if (!selection) {\n                    return;\n                }\n\n                if (current) {\n                    current.removeAttribute(\"id\");\n                    wrapper.removeAttr(\"aria-activedescendant\");\n                }\n\n                view.select(selection);\n                that._selection.eventElement = null;\n\n                current = view.current();\n                if (current) {\n                    current.setAttribute(\"id\", that._ariaId);\n                    wrapper.attr(\"aria-activedescendant\", that._ariaId);\n\n                    if (oldSelection !== current || (selection.events && (oldEventsLength !== selection.events.length ))) {\n                        var currentUid = $(current).data(\"uid\");\n\n                        if (that._old && currentUid &&\n                            currentUid === $(that._old.selection).data(\"uid\") &&\n                            (selection.events && that._old.eventsLength === selection.events.length)) {\n                            return;\n                        }\n\n                        var events = that._selectedEvents();\n                        var slots = view._selectedSlots;\n\n                        that._old = {\n                            selection: current,\n                            eventsLength: events.length\n                        };\n\n                        that.trigger(CHANGE, {\n                            start: selection.start,\n                            end: selection.end,\n                            events: events,\n                            slots: slots,\n                            resources: view._resourceBySlot(selection)\n                        });\n                    }\n                }\n            },\n\n            _selectedEvents: function() {\n                var uids = this._selection.events;\n                var length = uids.length;\n                var idx = 0;\n                var event;\n\n                var events = [];\n\n                for (; idx < length; idx++) {\n                    event = this.occurrenceByUid(uids[idx]);\n                    if (event) {\n                        events.push(event);\n                    }\n                }\n\n                return events;\n            },\n\n            _tapPosition: function(event, coordinate) {\n                return /touch/.test(event.type) ? (event.originalEvent || event).changedTouches[0]['page' + coordinate] : event['page' + coordinate];\n            },\n\n            _touchMove: function(e) {\n                var that = this;\n                var content = that.wrapper.find(\".k-scheduler-content\");\n                var verticalScroll = content[0].scrollHeight > content[0].clientHeight;\n                var horizontalScroll = content[0].scrollWidth > content[0].clientWidth;\n                var endY = that._tapPosition(e, 'Y');\n                var endX = that._tapPosition(e, 'X');\n                var scrollTop = content[0].scrollTop - Math.round(endY - that._touchPosY);\n                var scrollLeft = content[0].scrollLeft - Math.round(endX - that._touchPosX);\n                var applyVerticalScroll = verticalScroll && Math.abs(endY - that._touchPosY) > 10;\n                var applyhorizontalScroll = horizontalScroll && Math.abs(endY - that._touchPosY) > 10;\n\n\n                if (that._dragging || kendo.support.kineticScrollNeeded || !that._isTouch(e)) {\n                    return;\n                }\n\n                if (applyVerticalScroll || applyhorizontalScroll) {\n                    that._amplitude = Math.round(endY - that._touchPosY);\n                    that._touchPosY = endY;\n                    that._touchPosX = endX;\n                    content.animate({\n                        scrollTop: scrollTop,\n                        scrollLeft: scrollLeft\n                    }, 0);\n                    that.view()._scrolling = true;\n                }\n            },\n\n            _mouseMove: function(e) {\n                var that = this;\n                clearTimeout(that._moveTimer);\n\n                if (that._isTouch(e)) {\n                    return;\n                }\n\n                that._moveTimer = setTimeout(function() {\n                    var view = that.view();\n                    var selection = that._selection;\n\n                    if (selection) {\n                        var slot = view.selectionByElement($(e.currentTarget));\n\n                        if (slot && selection.groupIndex === slot.groupIndex) {\n                            var startDate = slot.startDate();\n                            var endDate = slot.endDate();\n\n                            if (startDate >= selection.end) {\n                                selection.backward = false;\n                            } else if (endDate <= selection.start) {\n                                selection.backward = true;\n                            }\n\n                            if (selection.backward) {\n                                selection.start = startDate;\n                            } else {\n                                selection.end = endDate;\n                            }\n\n                            that._select();\n                        }\n                    }\n                }, 5);\n            },\n\n            _viewByIndex: function(index) {\n                var view, views = this.views;\n\n                for (view in views) {\n                    if (!index) {\n                        return view;\n                    }\n\n                    index--;\n                }\n            },\n\n            _keydownToolbar: function(e) {\n                var key = e.keyCode;\n\n                if (e.altKey && key === keys.DOWN && this.toolbar.find(\".k-nav-current\").hasClass(FOCUSEDSTATE)) {\n                    this._showCalendar();\n                    e.preventDefault();\n                    return;\n                } else if (key === keys.DOWN) {\n                    if (this._selectedViewName === \"year\") {\n                        this.view().calendar.focus();\n                    } else if (document.activeElement !== this.element[0]) {\n                        this.element.focus();\n                    }\n\n                    e.preventDefault();\n\n                    return;\n                }\n            },\n\n            _keydownView: function(e) {\n                var key = e.keyCode,\n                    isModifier = key === 16 || key === 18 || key === 17 || key === 91 || key === 92,\n                    selection = this._selection,\n                    view = this.view(),\n                    editable = view.options.editable,\n                    arrowKeys = [ keys.LEFT, keys.RIGHT, keys.UP, keys.DOWN ],\n                    isRtl = kendo.support.isRtl(this.element),\n                    previous, content, cell;\n\n                if (isModifier) {\n                    return;\n                }\n\n                // slots selection via keyboard is no longer available\n                // see here: https://github.com/telerik/kendo-themes/blob/develop/docs/accessibility/Scheduler.md\n                if (!selection) {\n                    return;\n                }\n\n                if (key === keys.ENTER) {\n                    if (selection.events.length && editable) {\n                        if (editable.update !== false) {\n                            this.editEvent(selection.events[0]);\n                        }\n                    }\n                } else if ((key === keys.DELETE || key === keys.BACKSPACE) && editable !== false && editable.destroy !== false) {\n                    this.removeEvent(selection.events[0]);\n                } else if (arrowKeys.indexOf(key) > -1) {\n                    previous = key === keys.UP || (key === keys.LEFT && !isRtl) || (key === keys.RIGHT && isRtl);\n\n                    if (view.moveToEvent(selection, previous)) {\n                        this._select();\n\n                        // Focus the Scheduler element only if it not the currently focused element\n                        if (document.activeElement !== this.element[0]) {\n                            this.element.trigger(\"focus\");\n                        }\n\n                        e.preventDefault();\n                    }\n                } else if (key === keys.HOME || key === keys.END) {\n                    e.preventDefault();\n                    content = this.view().content.eq(0);\n\n                    if (key === keys.HOME) {\n                        cell = content.find(\".k-scheduler-table td\").first();\n                    } else {\n                        cell = content.find(\".k-scheduler-table td\").last();\n                    }\n\n                    this.view()._scrollTo(cell[0], content[0]);\n                }\n            },\n\n            _keydownShortcut: function(key) {\n                var currentDate = new Date(),\n                    timezone = this.options.timezone,\n                    editable = this.view().options.editable;\n\n                if (key === 66 && !!this.view().toggleFullDay) {\n                    this.view().toggleFullDay();\n                } else if (key === 67 && editable && editable.create !== false) {\n                    this.addEvent(extend({}, {\n                        start: this.date(),\n                        end: this.date()\n                    }));\n                } else if (key === 84) {\n                    if (timezone) {\n                        var timezoneOffset = kendo.timezone.offset(currentDate, timezone);\n                        date = kendo.timezone.convert(currentDate, currentDate.getTimezoneOffset(), timezoneOffset);\n                    } else {\n                        date = currentDate;\n                    }\n\n                    if (!this.trigger(\"navigate\", { view: this._selectedViewName, action: \"today\", date: date })) {\n                        this.date(date);\n                    }\n                }\n            },\n\n            _keydownYearView: function(e) {\n                var view = this.view(),\n                    selection = this._selection,\n                    key = e.keyCode;\n\n                if (key === keys.TAB) {\n                    return;\n                }\n\n                if (key === keys.F10) {\n                    this._focusToolbar();\n                    e.preventDefault();\n                } else {\n                    this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                    view.calendar.focus();\n                }\n\n                if (selection) {\n                    this._adjustSelectedDate();\n                }\n\n                e.preventDefault();\n            },\n\n            _keydownAgendaView: function(e) {\n                var key = e.keyCode,\n                    view = this.view(),\n                    selection = this._selection,\n                    content, cell;\n\n                if (view.move(selection, key)) {\n                    e.preventDefault();\n                    this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                    this._select();\n                } else if (key === keys.HOME || key === keys.END) {\n                    e.preventDefault();\n                    content = this.view().content.eq(0);\n\n                    if (key === keys.HOME) {\n                        cell = content.find(\".k-scheduler-table td\").first();\n                    } else {\n                        cell = content.find(\".k-scheduler-table td\").last();\n                    }\n\n                    this.view()._scrollTo(cell[0], content[0]);\n                }\n            },\n\n            _keydownChangeView: function(key) {\n                var viewIndex = key - 49,\n                    viewByIndex;\n\n                if (viewIndex === -1) {\n                    viewIndex = 9;\n                }\n\n                viewByIndex = this._viewByIndex(viewIndex);\n\n                if (viewByIndex && !this.trigger(\"navigate\", { view: viewByIndex, action: \"changeView\", date: this.date() })) {\n                    this.view(viewByIndex);\n                }\n            },\n\n            _keydownChangeDate: function(key) {\n                var isRtl = kendo.support.isRtl(this.element),\n                    direction = (isRtl && key === keys.LEFT) || (!isRtl && key === keys.RIGHT) ? \"next\" : \"previous\";\n\n                if (direction === \"next\") {\n                    date = this.view().nextDate();\n                } else {\n                    date = this.view().previousDate();\n                }\n\n                if (!this.trigger(\"navigate\", { view: this._selectedViewName, action: direction, date: date })) {\n                    this.date(date);\n                    this._initialFocus();\n                    this._select();\n                }\n            },\n\n            _keydown: function(e) {\n                var key = e.keyCode,\n                    shortcutKeys = [66, 67, 84],\n                    toolbarIsFocused = $(e.target).closest(\".k-toolbar\").length > 0,\n                    altKey = e.altKey;\n\n                this._ctrlKey = e.ctrlKey;\n                this._shiftKey = e.shiftKey;\n\n                if (key === keys.ESC && this.popup && this.popup.visible()) {\n                    this.popup.close();\n                    e.preventDefault();\n                    return;\n                }\n\n                if ((key === keys.LEFT || key === keys.RIGHT) && this._shiftKey) {\n                    this._keydownChangeDate(key);\n                    return;\n                }\n\n                if (altKey && key >= 48 && key <= 57) {\n                    this._keydownChangeView(key);\n                    return;\n                }\n\n                if (shortcutKeys.indexOf(key) > -1) {\n                    if (!$(e.target).hasClass(\"k-scheduler-search-input\")) {\n                        this._keydownShortcut(key);\n                    }\n\n                    return;\n                }\n\n                if (toolbarIsFocused) {\n                    this._keydownToolbar(e);\n                } else {\n                    if (this._selectedViewName === \"year\") {\n                        this._keydownYearView(e);\n                        return;\n                    }\n\n                    if (key === keys.F10) {\n                        this._focusToolbar();\n                        e.preventDefault();\n                        return;\n                    }\n\n                    if (this._selectedViewName === \"agenda\") {\n                        this._keydownAgendaView(e);\n                        return;\n                    }\n\n                    this._keydownView(e);\n                }\n            },\n\n            _focusToolbar: function() {\n                this.toolbar.find(\"[tabindex=0]\").first()\n                    .trigger(\"focus\")\n                    .addClass(FOCUSEDSTATE);\n            },\n\n            _createSelection: function(item) {\n                var selection = this._selection,\n                    uid, slot;\n\n                item = $(item);\n\n                if (item.is(\".k-event\")) {\n                    uid = item.attr(kendo.attr(\"uid\"));\n\n                    if (selection && selection.events.indexOf(uid) !== -1 && !this._ctrlKey) {\n                        return;\n                    }\n                }\n\n                if (!selection || (!this._ctrlKey && !this._shiftKey)) {\n                    selection = this._selection = {\n                        events: [],\n                        groupIndex: 0\n                    };\n                }\n\n                slot = this.view().selectionByElement(item);\n\n                if (slot) {\n                    selection.groupIndex = slot.groupIndex || 0;\n                }\n\n                if (uid) {\n                    slot = getOccurrenceByUid(this._data, uid);\n                }\n\n                if (slot && slot.uid) {\n                    uid = [slot.uid];\n                }\n\n                this._updateSelection(slot, uid);\n                this._adjustSelectedDate();\n            },\n\n            _updateSelection: function(dataItem, events, groupIndex) {\n                var selection = this._selection;\n\n                if (dataItem && selection) {\n                    var view = this.view();\n\n                    if (dataItem.uid) {\n                        dataItem = view._updateEventForSelection(dataItem);\n                    }\n\n                    if (this._shiftKey && selection.start && selection.end) {\n                        var backward = dataItem.end < selection.end;\n\n                        selection.end = dataItem.endDate ? dataItem.endDate() : dataItem.end;\n\n                        if (backward && view._timeSlotInterval) {\n                            kendo.date.setTime(selection.end, -view._timeSlotInterval());\n                        }\n                    } else {\n                        selection.start = dataItem.startDate ? dataItem.startDate() : dataItem.start;\n                        selection.end = dataItem.endDate ? dataItem.endDate() : dataItem.end;\n                    }\n\n                    if (\"isDaySlot\" in dataItem) {\n                        selection.isAllDay = dataItem.isDaySlot;\n                    } else {\n                        selection.isAllDay = dataItem.isAllDay;\n                    }\n\n                    if (groupIndex !== null && groupIndex !== undefined$1) {\n                        selection.groupIndex = groupIndex;\n                    }\n\n                    selection.index = dataItem.index;\n                    if (this._ctrlKey) {\n                        var indexOfEvent = (events && events.length) ? selection.events.indexOf(events[0]) : -1;\n\n                        if (indexOfEvent > -1) {\n                            selection.events.splice(indexOfEvent, 1);\n                        } else {\n                            selection.events = selection.events.concat(events || []);\n                        }\n                    } else {\n                            selection.events = events || [];\n                    }\n                }\n            },\n\n            options: {\n                name: \"Scheduler\",\n                date: TODAY,\n                editable: true,\n                autoBind: true,\n                snap: true,\n                mobile: false,\n                timezone: \"\",\n                allDaySlot: true,\n                min: new Date(1900, 0, 1),\n                max: new Date(2099, 11, 31),\n                toolbar: null,\n                workWeekStart: 1,\n                workWeekEnd: 5,\n                workDays: null,\n                showWorkHours: false,\n                startTime: TODAY,\n                endTime: TODAY,\n                currentTimeMarker: {\n                    updateInterval: 10000,\n                    useLocalTimezone: true\n                },\n                ongoingEvents: {\n                    cssClass: ONGOING_CLASS,\n                    enabled: false,\n                    updateInterval: 60000,\n                    useLocalTimezone: true\n                },\n                footer: {},\n                messages: {\n                    today: \"Today\",\n                    pdf: \"Export to PDF\",\n                    save: \"Save\",\n                    cancel: \"Cancel\",\n                    destroy: \"Delete\",\n                    resetSeries: \"Reset Series\",\n                    deleteWindowTitle: \"Delete event\",\n                    next: \"Next\",\n                    previous: \"Previous\",\n                    refresh: \"Refresh\",\n                    selectView: \"Select view\",\n                    ariaSlotLabel: \"Selected from {0:t} to {1:t}\",\n                    ariaEventLabel: {\n                        on: \"on\",\n                        at: \"at\",\n                        to: \"to\",\n                        allDay: \"(all day)\",\n                        prefix: \"\"\n                    },\n                    search: \"Search...\",\n                    views: {\n                        day: \"Day\",\n                        week: \"Week\",\n                        workWeek: \"Work Week\",\n                        agenda: \"Agenda\",\n                        month: \"Month\",\n                        timeline: \"Timeline\",\n                        timelineWeek: \"Timeline Week\",\n                        timelineWorkWeek: \"Timeline Work Week\",\n                        timelineMonth: \"Timeline Month\",\n                        year: \"Year\"\n                    },\n                    recurrenceMessages: {\n                        deleteWindowTitle: \"Delete Recurring Item\",\n                        resetSeriesWindowTitle: \"Reset Series\",\n                        deleteWindowOccurrence: \"Delete current occurrence\",\n                        deleteWindowSeries: \"Delete the series\",\n                        editWindowTitle: \"Edit Recurring Item\",\n                        editWindowOccurrence: \"Edit current occurrence\",\n                        editWindowSeries: \"Edit the series\"\n                    },\n                    editable: {\n                        confirmation: DELETECONFIRM\n                    },\n                    editor: {\n                        title: \"Title\",\n                        start: \"Start\",\n                        end: \"End\",\n                        allDayEvent: \"All day event\",\n                        description: \"Description\",\n                        repeat: \"Repeat\",\n                        timezone: \"Timezone\",\n                        startTimezone: \"Start timezone\",\n                        endTimezone: \"End timezone\",\n                        separateTimezones: \"Use separate start and end time zones\",\n                        timezoneEditorTitle: \"Timezones\",\n                        timezoneEditorButton: \"Time zone\",\n                        timezoneTitle: \"Time zones\",\n                        noTimezone: \"No timezone\",\n                        editorTitle: \"Event\"\n                    }\n                },\n                height: null,\n                width: null,\n                resources: [],\n                group: {\n                    resources: [],\n                    orientation: \"horizontal\"\n                },\n                views: [],\n                selectable: false\n            },\n\n            events: [\n                REMOVE,\n                EDIT,\n                CANCEL,\n                SAVE,\n                \"add\",\n                \"dataBinding\",\n                \"dataBound\",\n                \"moveStart\",\n                \"move\",\n                \"moveEnd\",\n                \"resizeStart\",\n                \"resize\",\n                \"resizeEnd\",\n                \"navigate\",\n                CHANGE\n            ],\n\n            destroy: function() {\n                var that = this,\n                    element;\n\n                Widget.fn.destroy.call(that);\n\n                if (that.dataSource) {\n                    that.dataSource.unbind(CHANGE, that._refreshHandler);\n                    that.dataSource.unbind(PROGRESS, that._progressHandler);\n                    that.dataSource.unbind(ERROR, that._errorHandler);\n                }\n\n                if (that._resourceRefreshHandler) {\n                    for (var idx = 0; idx < that.resources.length; idx++) {\n                        var resourceDS = that.resources[idx].dataSource;\n                        resourceDS.unbind(CHANGE, that._resourceRefreshHandler);\n                        resourceDS.unbind(PROGRESS, that._resourceProgressHandler);\n                        resourceDS.unbind(ERROR, that._resourceErrorHandler);\n                    }\n                }\n\n                if (that.calendar) {\n                    that.calendar.destroy();\n                    that.popup.destroy();\n                }\n\n                if (that.view()) {\n                    that.view().destroy();\n                }\n\n                if (that._editor) {\n                    that._editor.destroy();\n                }\n\n                if (this._moveDraggable) {\n                    this._moveDraggable.destroy();\n                }\n\n                if (this._resizeDraggable) {\n                    this._resizeDraggable.destroy();\n                }\n\n                if (that.mediaQueryList) {\n                    that.mediaQueryList.destroy();\n                }\n\n                element = that.element\n                    .add(that.wrapper)\n                    .add(that.toolbar)\n                    .add(that.popup);\n\n                element.off(NS);\n\n                clearTimeout(that._moveTimer);\n\n                that._model = null;\n                that.toolbar = null;\n                that.element = null;\n\n                $(window).off(\"resize\" + NS, that._resizeHandler);\n\n                kendo.destroy(that.wrapper);\n            },\n\n            setDataSource: function(dataSource) {\n                this.options.dataSource = dataSource;\n\n                this._dataSource();\n\n                if (this.options.autoBind && dataSource.fetch) {\n                    dataSource.fetch();\n                } else if (isArray(dataSource)) {\n                    this.view(this._selectedView);\n                }\n            },\n\n            items: function() {\n                var content = this.wrapper.find(\".k-scheduler-content\");\n                var view = this.view();\n\n                if (view && view.options.name === \"agenda\") {\n                    return content.find(\".k-task\");\n                } else {\n                    return content.find(\".k-event\")\n                                  .add(this.wrapper.find(\".k-scheduler-header-wrap\")\n                                           .find(\".k-scheduler-header-all-day\").siblings());\n                }\n            },\n\n            _movable: function() {\n                var startSlot;\n                var endSlot;\n                var startResources;\n                var startTime;\n                var endTime;\n                var event;\n                var clonedEvent;\n                var that = this;\n                var originSlot;\n                var originStartTime;\n                var originalEvent;\n                var distance = 0;\n                var clonedEvents = [];\n                var cachedEvents = [];\n\n                var isMobile = that._isMobile();\n                var movable = that.options.editable && that.options.editable.move !== false;\n                var resizable = that.options.editable && that.options.editable.resize !== false;\n\n                if (movable || (resizable && isMobile)) {\n                    that._dragging = false;\n                    if (isMobile && kendo.support.mobileOS.android) {\n                        distance = 5;\n                    }\n\n                    that._moveDraggable = new kendo.ui.Draggable(that.element, {\n                        distance: distance,\n                        filter: \".k-event\",\n                        ignore: \".k-resize-handle\",\n                        holdToDrag: isMobile,\n                        autoScroll: true\n                    });\n\n                    if (movable) {\n                        that._moveDraggable.bind(\"dragstart\", function(e) {\n                            var view = that.view();\n                            var eventElement = e.currentTarget;\n                            var isTouch = that._isTouch(e);\n                            that._dragging = true;\n\n                            if (!view.options.editable || view.options.editable.move === false) {\n                                that._dragging = false;\n                                e.preventDefault();\n                                return;\n                            }\n\n                            if (isTouch && !eventElement.hasClass(\"k-event-active\")) {\n                                that._dragging = false;\n                                that.element.find(\".k-event-active\").removeClass(\"k-event-active\");\n                                e.preventDefault();\n                                return;\n                            }\n\n                            event = that.occurrenceByUid(eventElement.attr(kendo.attr(\"uid\")));\n\n                            clonedEvent = event.clone();\n                            originalEvent = event.clone();\n\n                            clonedEvent.update(view._eventOptionsForMove(clonedEvent));\n\n                            clonedEvent.inverseColor = that._isInverseColor(eventElement);\n\n                            clonedEvents = [];\n                            if (that._selection) {\n                                var events = that._selection.events;\n\n                                for (var i = 0; i < events.length; i++) {\n                                    var evtClone = that.occurrenceByUid(events[i]).clone();\n                                    var evtCloneElement = this.element.find('div.k-event[data-uid=\"' + evtClone.uid + '\"]').eq(0);\n\n                                    evtClone.update(view._eventOptionsForMove(evtClone));\n\n                                    if (evtCloneElement.length) {\n                                        evtClone.inverseColor = that._isInverseColor(evtCloneElement);\n                                    }\n\n                                    clonedEvents.push(evtClone);\n                                }\n                            } else {\n                                clonedEvents.push(clonedEvent);\n                            }\n\n                            startSlot = view._slotByPosition(e.x.startLocation, e.y.startLocation);\n                            startResources = view._resourceBySlot(startSlot);\n\n                            originStartTime = startTime = startSlot.startOffset(e.x.startLocation, e.y.startLocation, that.options.snap);\n\n                            endSlot = startSlot;\n\n                            originSlot = startSlot;\n\n                            if (!startSlot || that.trigger(\"moveStart\", { event: event })) {\n                                e.preventDefault();\n                            }\n                        })\n                        .bind(\"drag\", function(e) {\n                            var view = that.view();\n                            var slot = view._slotByPosition(e.x.location, e.y.location);\n                            var distance;\n                            var range;\n                            var i;\n\n                            if (!slot) {\n                                return;\n                            }\n\n                            endTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n\n                            if (slot.isDaySlot !== startSlot.isDaySlot) {\n\n                                if (slot.isDaySlot !== originSlot.isDaySlot) {\n                                    var slotIndex = $(startSlot.element).index();\n\n                                    var targetSlotElement = $(slot.element).parent().children().eq(slotIndex);\n\n                                    startSlot = view._slotByPosition(targetSlotElement.offset().left, targetSlotElement.offset().top);\n\n                                    startTime = startSlot.startOffset(e.x.location, e.y.location, true);\n\n                                    cachedEvents = clonedEvents.map(function(event) { return event.clone(); });\n\n                                    for (i = 0; i < clonedEvents.length; i++) {\n                                        if (clonedEvents[i].isAllDay != slot.isDaySlot) {\n                                            clonedEvents[i].isAllDay = slot.isDaySlot;\n\n                                            clonedEvents[i].end = kendo.date.getDate(clonedEvents[i].start);\n                                            clonedEvents[i].start = kendo.date.getDate(clonedEvents[i].start);\n\n                                            if (!slot.isDaySlot) {\n                                                kendo.date.setTime(clonedEvents[i].start, kendo.date.getMilliseconds(view.startTime()));\n                                                kendo.date.setTime(clonedEvents[i].end, kendo.date.getMilliseconds(view.startTime()) + view._timeSlotInterval());\n                                            }\n                                        }\n                                    }\n                                } else {\n                                    startSlot = $.extend(true, { }, originSlot);\n                                    startTime = originStartTime;\n\n                                    clonedEvents = cachedEvents;\n                                }\n                            }\n\n                            distance = endTime - startTime;\n\n                            for (i = 0; i < clonedEvents.length; i++) {\n                                view._updateMoveHint(clonedEvents[i], slot.groupIndex, distance);\n                            }\n\n                            range = moveEventRange(clonedEvent, distance);\n\n                            if (!that.trigger(\"move\", {\n                                event: event,\n                                slot: { element: slot.element, start: slot.startDate(), end: slot.endDate(), isDaySlot: slot.isDaySlot },\n                                resources: view._resourceBySlot(slot),\n                                start: range.start,\n                                end: range.end\n                            })) {\n                                endSlot = slot;\n                            } else {\n                                for (i = 0; i < clonedEvents.length; i++) {\n                                    view._updateMoveHint(clonedEvents[i], slot.groupIndex, distance);\n                                }\n                            }\n                        })\n                        .bind(\"dragend\", function(e) {\n                            that.view()._removeMoveHint();\n                            var distance = endTime - startTime;\n                            var range = moveEventRange(clonedEvent, distance);\n                            var start = range.start;\n                            var end = range.end;\n                            that._dragging = false;\n\n                            var endResources = that.view()._resourceBySlot(endSlot);\n\n                            var prevented = that.trigger(\"moveEnd\", {\n                                event: event,\n                                slot: { element: endSlot.element, start: endSlot.startDate(), end: endSlot.endDate() },\n                                start: start,\n                                end: end,\n                                resources: endResources\n                            });\n\n                            if (!prevented && (event.start.getTime() !== start.getTime() ||\n                                event.end.getTime() !== end.getTime() ||\n                                originSlot.isDaySlot !== endSlot.isDaySlot ||\n                                kendo.stringify(endResources) !== kendo.stringify(startResources))) {\n\n                                that._isMultiDrag = clonedEvents.length > 1;\n\n                                for (var i = 0; i < clonedEvents.length; i++) {\n                                    var evt = clonedEvents[i];\n\n                                    range = moveEventRange(evt, distance);\n\n                                    var updatedEventOptions = that.view()._eventOptionsForMove(evt);\n                                    var eventOptions = $.extend(\n                                        {\n                                            isAllDay: evt.isAllDay,\n                                            start: range.start,\n                                            end: range.end\n                                        },\n                                        updatedEventOptions,\n                                        endResources\n                                    );\n\n                                    that._updateEvent(null, evt, eventOptions);\n                                }\n\n                                if (that._isMultiDrag) {\n                                    that.dataSource.sync();\n                                    that._isMultiDrag = false;\n                                }\n                            }\n\n                            e.currentTarget.removeClass(\"k-event-active\");\n                            this.cancelHold();\n                            clonedEvents = [];\n                            cachedEvents = [];\n                        })\n                        .bind(\"dragcancel\", function() {\n                            that.view()._removeMoveHint();\n                            this.cancelHold();\n                            clonedEvents = [];\n                            cachedEvents = [];\n                        });\n                    }\n\n                    that._moveDraggable.bind(\"hold\", function(e) {\n                        if (that._isTouch(e)) {\n                            that.element.find(\".k-event-active\").removeClass(\"k-event-active\");\n                            if (that.options.selectable) {\n                                that._createSelection(e.currentTarget);\n                            }\n                            e.currentTarget.addClass(\"k-event-active\");\n                        }\n                    });\n                }\n            },\n\n            _resizable: function() {\n                var startTime;\n                var endTime;\n                var event;\n                var clonedEvent;\n                var slot;\n                var that = this;\n                var distance = 0;\n\n                function direction(handle) {\n                    var directions = {\n                        \"k-resize-e\": \"east\",\n                        \"k-resize-w\": \"west\",\n                        \"k-resize-n\": \"north\",\n                        \"k-resize-s\": \"south\"\n                    };\n\n                    for (var key in directions) {\n                        if (handle.hasClass(key)) {\n                            return directions[key];\n                        }\n                    }\n                }\n\n                if (that._isMobile() && kendo.support.mobileOS.android) {\n                    distance = 5;\n                }\n\n                that._resizeDraggable = new kendo.ui.Draggable(that.element, {\n                    distance: distance,\n                    filter: \".k-resize-handle\",\n                    autoScroll: true,\n                    dragstart: function(e) {\n                        var dragHandle = $(e.currentTarget);\n\n                        var eventElement = dragHandle.closest(\".k-event\");\n\n                        var uid = eventElement.attr(kendo.attr(\"uid\"));\n\n                        var view = that.view();\n\n                        that._dragging = true;\n                        event = that.occurrenceByUid(uid);\n\n                        clonedEvent = event.clone();\n\n                        view._updateEventForResize(clonedEvent);\n\n                        slot = view._slotByPosition(e.x.startLocation, e.y.startLocation);\n\n                        if (that.trigger(\"resizeStart\", { event: event })) {\n                            e.preventDefault();\n                        }\n\n                        startTime = kendo.date.toUtcTime(clonedEvent.start);\n\n                        endTime = kendo.date.toUtcTime(clonedEvent.end);\n                    },\n                    drag: function(e) {\n                        if (!slot) {\n                            return;\n                        }\n\n                        var dragHandle = $(e.currentTarget);\n\n                        var dir = direction(dragHandle);\n\n                        var view = that.view();\n\n                        var currentSlot = view._slotByPosition(e.x.location, e.y.location);\n\n                        if (!currentSlot || slot.groupIndex != currentSlot.groupIndex) {\n                            return;\n                        }\n\n                        slot = currentSlot;\n\n                        var originalStart = startTime;\n\n                        var originalEnd = endTime;\n\n                        if (dir == \"south\") {\n                            if (!slot.isDaySlot && slot.end - kendo.date.toUtcTime(clonedEvent.start) >= view._timeSlotInterval()) {\n                                if (clonedEvent.isAllDay) {\n                                    endTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                                } else {\n                                    endTime = slot.endOffset(e.x.location, e.y.location, that.options.snap);\n                                }\n                            }\n                        } else if (dir == \"north\") {\n                            if (!slot.isDaySlot && kendo.date.toUtcTime(clonedEvent.end) - slot.start >= view._timeSlotInterval()) {\n                                startTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                            }\n                        } else if (dir == \"east\") {\n                            if (slot.isDaySlot && kendo.date.toUtcTime(kendo.date.getDate(slot.endDate())) >= kendo.date.toUtcTime(kendo.date.getDate(clonedEvent.start))) {\n                                if (clonedEvent.isAllDay) {\n                                    endTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                                } else {\n                                    endTime = slot.endOffset(e.x.location, e.y.location, that.options.snap);\n                                }\n                            } else if (!slot.isDaySlot && slot.end - kendo.date.toUtcTime(clonedEvent.start) >= view._timeSlotInterval()) {\n                                endTime = slot.endOffset(e.x.location, e.y.location, that.options.snap);\n                            }\n                        } else if (dir == \"west\") {\n                            if (slot.isDaySlot && kendo.date.toUtcTime(kendo.date.getDate(clonedEvent.end)) >= kendo.date.toUtcTime(kendo.date.getDate(slot.startDate()))) {\n                                startTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                            } else if (!slot.isDaySlot && kendo.date.toUtcTime(clonedEvent.end) - slot.start >= view._timeSlotInterval()) {\n                                startTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                            }\n                        }\n\n                        if (!that.trigger(\"resize\", {\n                            event: event,\n                            slot: { element: slot.element, start: slot.startDate(), end: slot.endDate() },\n                            start: kendo.timezone.toLocalDate(startTime),\n                            end: kendo.timezone.toLocalDate(endTime),\n                            resources: view._resourceBySlot(slot)\n                        })) {\n                            view._updateResizeHint(clonedEvent, slot.groupIndex, startTime, endTime);\n                        } else {\n                            startTime = originalStart;\n                            endTime = originalEnd;\n                        }\n                    },\n                    dragend: function(e) {\n                        var dragHandle = $(e.currentTarget);\n                        var start = new Date(clonedEvent.start.getTime());\n                        var end = new Date(clonedEvent.end.getTime());\n                        var dir = direction(dragHandle);\n\n                        that._dragging = false;\n                        that.view()._removeResizeHint();\n\n                        if (dir == \"south\") {\n                            end = kendo.timezone.toLocalDate(endTime);\n                        } else if (dir == \"north\") {\n                            start = kendo.timezone.toLocalDate(startTime);\n                        } else if (dir == \"east\") {\n                            if (slot.isDaySlot) {\n                                end = kendo.date.getDate(kendo.timezone.toLocalDate(endTime));\n                            } else {\n                                end = kendo.timezone.toLocalDate(endTime);\n                            }\n                        } else if (dir == \"west\") {\n                            if (slot.isDaySlot) {\n                                start = new Date(kendo.timezone.toLocalDate(startTime));\n                                start.setHours(0);\n                                start.setMinutes(0);\n                            } else {\n                                start = kendo.timezone.toLocalDate(startTime);\n                            }\n                        }\n\n                        var prevented = that.trigger(\"resizeEnd\", {\n                            event: event,\n                            slot: { element: slot.element, start: slot.startDate(), end: slot.endDate() },\n                            start: start,\n                            end: end,\n                            resources: that.view()._resourceBySlot(slot)\n                        });\n\n                        if (!prevented && end.getTime() >= start.getTime()) {\n                            if (clonedEvent.start.getTime() != start.getTime() || clonedEvent.end.getTime() != end.getTime()) {\n                                that.view()._updateEventForResize(event);\n                                that._updateEvent(dir, event, { start: start, end: end });\n                            }\n                        }\n\n                        slot = null;\n                        event = null;\n                    },\n                    dragcancel: function() {\n                        that._dragging = false;\n                        that.view()._removeResizeHint();\n\n                        slot = null;\n                        event = null;\n                    }\n                });\n            },\n\n            _updateEvent: function(dir, event, eventInfo) {\n                var that = this;\n\n                var updateEvent = function(event, callback) {\n                    var start;\n\n                    try {\n                        that._preventRefresh = true;\n                        event.update(eventInfo);\n                        that._convertDates(event);\n                        start = event.start;\n\n                        if (dir && event.duration() % MS_PER_DAY === 0 && start.getHours() === 0 && start.getMinutes() === 0 && start.getSeconds() === 0 && start.getMilliseconds() === 0) {\n                            event.set(\"isAllDay\", true);\n                        }\n                    } finally {\n                        that._preventRefresh = false;\n                    }\n\n                    if (!that.trigger(SAVE, { event: event })) {\n                        if (callback) {\n                            callback();\n                        }\n\n                        if (!that._isMultiDrag) {\n                            that.dataSource.sync();\n                        }\n                    }\n                };\n\n                var recurrenceHead = function(event) {\n                    if (event.recurrenceRule) {\n                        return that.dataSource.getByUid(event.uid);\n                    } else {\n                        return that.dataSource.get(event.recurrenceId);\n                    }\n                };\n\n                var updateSeries = function() {\n                    var head = recurrenceHead(event);\n\n                    if (dir == \"south\" || dir == \"north\") {\n                        if (eventInfo.start) {\n                            var start = kendo.date.getDate(head.start);\n                            kendo.date.setTime(start, getMilliseconds(eventInfo.start));\n                            eventInfo.start = start;\n                        }\n                        if (eventInfo.end) {\n                            var end = kendo.date.getDate(head.end);\n                            kendo.date.setTime(end, getMilliseconds(eventInfo.end));\n                            eventInfo.end = end;\n                        }\n                    }\n\n                    that.dataSource._removeExceptions(head);\n\n                    updateEvent(head);\n                };\n\n                var updateOccurrence = function() {\n                    var head = recurrenceHead(event);\n                    var eventUid;\n\n                    var callback = function() {\n                        that._convertDates(head);\n\n                        if (that._selection) {\n                            that._selection.events.push(eventUid);\n                        }\n                    };\n\n                    var exception = head.toOccurrence({ start: event.start, end: event.end });\n\n                    eventUid = exception.uid;\n\n                    updateEvent(that.dataSource.add(exception), callback);\n                };\n\n                if (event.recurrenceRule || event.isOccurrence()) {\n                    var recurrenceMessages = that.options.messages.recurrenceMessages;\n\n                    that._showRecurringDialog(event, updateOccurrence, updateSeries,{\n                        title: recurrenceMessages.editWindowTitle,\n                        text: recurrenceMessages.editRecurring ? recurrenceMessages.editRecurring : EDITRECURRING,\n                        occurrenceText: recurrenceMessages.editWindowOccurrence,\n                        seriesText: recurrenceMessages.editWindowSeries\n                    });\n                } else {\n                    updateEvent(that.dataSource.getByUid(event.uid));\n                }\n            },\n\n            _modelForContainer: function(container) {\n                container = $(container).closest(\"[\" + kendo.attr(\"uid\") + \"]\");\n\n                return this.dataSource.getByUid(container.attr(kendo.attr(\"uid\")));\n            },\n\n            showDialog: function(options) {\n                this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                this._editor.showDialog(options);\n            },\n\n            focus: function() {\n                this.wrapper.trigger(\"focus\");\n            },\n\n            _confirmation: function(callback, model, isResetSeries) {\n                var editable = this.options.editable;\n\n                if (editable === true || editable.confirmation !== false) {\n                    var messages = this.options.messages;\n                    var title = messages.deleteWindowTitle;\n                    var text = typeof editable.confirmation === STRING ? editable.confirmation : messages.editable.confirmation;\n\n                    if (this._isEditorOpened() && model.isRecurring()) {\n                        var recurrenceMessages = this.options.messages.recurrenceMessages;\n                        title = recurrenceMessages.deleteWindowTitle;\n\n                        if (model.isException() || model.isNew()) {\n                            text = recurrenceMessages.deleteRecurringConfirmation ? recurrenceMessages.deleteRecurringConfirmation : DELETERECURRINGCONFIRM;\n                        } else {\n                            text = recurrenceMessages.deleteSeriesConfirmation ? recurrenceMessages.deleteSeriesConfirmation : DELETESERIESCONFIRM;\n                        }\n\n                        if (isResetSeries) {\n                            title = recurrenceMessages.resetSeriesWindowTitle;\n                            text = recurrenceMessages.resetSeriesConfirmation ? recurrenceMessages.resetSeriesConfirmation : RESETSERIESCONFIRM;\n                        }\n                    }\n\n                    var buttons = [\n                        { name: \"destroy\", text: isResetSeries ? messages.resetSeries : messages.destroy, click: function() { callback(); } }\n                    ];\n\n                    if (!(this._isMobile() && kendo.Pane)) {\n                        buttons.push({ name: \"canceledit\", text: messages.cancel, click: function() { callback(true); } });\n                    }\n\n                    this._unbindResize();\n\n                    this.showDialog({\n                        model: model,\n                        text: text,\n                        title: title,\n                        buttons: buttons\n                    });\n\n                    this._bindResize();\n                } else {\n                    callback();\n                }\n            },\n\n            addEvent: function(eventInfo) {\n                var editable = this._editor.editable;\n                var dataSource = this.dataSource;\n                var event;\n\n                eventInfo = eventInfo || {};\n\n                var prevented = this.trigger(\"add\", { event: eventInfo });\n\n                if (!prevented && ((editable && editable.end()) || !editable)) {\n                    this.cancelEvent();\n\n                    if (eventInfo && eventInfo.toJSON) {\n                        eventInfo = eventInfo.toJSON();\n                    }\n\n                    event = dataSource.add(eventInfo);\n\n                    if (event) {\n                        this.cancelEvent();\n                        this._editEvent(event);\n                    }\n                }\n           },\n\n           saveEvent: function() {\n                var that = this;\n                var editor = that._editor;\n                var dataSource = that.dataSource;\n\n                if (!editor) {\n                    return;\n                }\n\n                var editable = editor.editable;\n                var container = editor.container;\n                var model = that._modelForContainer(container);\n                var events, i, event;\n\n                if (container && editable && editable.end() &&\n                    !that.trigger(SAVE, { container: container, event: model } )) {\n\n                    if (!model.isOccurrence() && !!model.recurrenceException && !model.recurrenceRule) {\n                        events = dataSource.data();\n\n                        for (i = events.length - 1; i >= 0; i -= 1) {\n                            event = events[i];\n                            if (event && event.recurrenceId === model.id) {\n                                dataSource.remove(event);\n                            }\n                        }\n\n                        model.set(\"recurrenceException\", \"\");\n                    }\n\n                    if (!model.dirty && !model.isOccurrence()) {\n                        that._convertDates(model, \"remove\");\n                    }\n\n                    dataSource.sync();\n                }\n            },\n\n            cancelEvent: function() {\n                var editor = this._editor;\n                var container = editor.container;\n                var model;\n\n                if (container) {\n                    model = this._modelForContainer(container);\n\n                    if (model && model.isOccurrence()) {\n                        this._convertDates(model, \"remove\");\n                        this._convertDates(this.dataSource.get(model.recurrenceId), \"remove\");\n                    }\n\n                    this.dataSource.cancelChanges(model);\n\n                    //TODO: handle the cancel in UI\n\n                    editor.close();\n                }\n            },\n\n            editEvent: function(uid) {\n                var model = typeof uid == \"string\" ? this.occurrenceByUid(uid) : uid;\n\n                if (!model) {\n                    return;\n                }\n\n                this.cancelEvent();\n\n                if (model.isRecurring()) {\n                    this._editRecurringDialog(model);\n                } else {\n                    this._editEvent(model);\n                }\n            },\n\n            _editEvent: function(model) {\n                this._preventRefresh = true;\n                this._unbindResize();\n\n                this._createPopupEditor(model);\n                this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n\n                this._bindResize();\n            },\n\n            _editRecurringDialog: function(model) {\n                var that = this;\n\n                var editOccurrence = function() {\n                    if (model.isException()) {\n                        that._editEvent(model);\n                    } else {\n                        that.addEvent(model);\n                    }\n                };\n\n                var editSeries = function() {\n                    if (model.recurrenceId) {\n                        model = that.dataSource.get(model.recurrenceId);\n                    }\n\n                    that._editEvent(model);\n                };\n\n                var recurrenceMessages = that.options.messages.recurrenceMessages;\n                that._showRecurringDialog(model, editOccurrence, editSeries, {\n                    title: recurrenceMessages.editWindowTitle,\n                    text: recurrenceMessages.editRecurring ? recurrenceMessages.editRecurring : EDITRECURRING,\n                    occurrenceText: recurrenceMessages.editWindowOccurrence,\n                    seriesText: recurrenceMessages.editWindowSeries\n                });\n             },\n\n             _showRecurringDialog: function(model, editOccurrence, editSeries, messages) {\n                 var editable = this.options.editable;\n                 var editRecurringMode = isPlainObject(editable) ? editable.editRecurringMode : \"dialog\";\n\n                 if (editRecurringMode === \"occurrence\" || this._isMultiDrag) {\n                     editOccurrence();\n                 } else if (editRecurringMode === \"series\") {\n                     editSeries();\n                 } else {\n                     this._unbindResize();\n\n                     this.showDialog({\n                         model: model,\n                         title: messages.title,\n                         text: messages.text,\n                         buttons: [\n                             { text: messages.occurrenceText, click: editOccurrence },\n                             { text: messages.seriesText, click: editSeries }\n                         ]\n                     });\n\n                     this._bindResize();\n                 }\n            },\n\n            _createButton: function(command) {\n                var template = command.template || COMMANDBUTTONTMPL,\n                    commandName = typeof command === STRING ? command : command.name || command.text,\n                    options = { className: \"k-scheduler-\" + (commandName || \"\").replace(/\\s/g, \"\"), text: commandName, attr: \"\" };\n\n                if (!commandName && !(isPlainObject(command) && command.template)) {\n                    throw new Error(\"Custom commands should have name specified\");\n                }\n\n                if (isPlainObject(command)) {\n                    if (command.className) {\n                        command.className += \" \" + options.className;\n                    }\n\n                    if (commandName === \"edit\" && isPlainObject(command.text)) {\n                        command = extend(true, {}, command);\n                        command.text = command.text.edit;\n                    }\n\n                    options = extend(true, options, defaultCommands[commandName], command);\n                } else {\n                    options = extend(true, options, defaultCommands[commandName]);\n                }\n\n                if (!options.className) {\n                    options.className = \"k-button-solid-base\";\n                } else if (options.className.indexOf(\"k-button-solid-primary\") === -1) {\n                    options.className += \" k-button-solid-base\";\n                }\n\n                return kendo.template(template)(options);\n            },\n\n            _convertDates: function(model, method) {\n                var timezone = this.dataSource.reader.timezone;\n                var startTimezone = model.startTimezone;\n                var endTimezone = model.endTimezone;\n                var start = model.start;\n                var end = model.start;\n\n                method = method || \"apply\";\n                startTimezone = startTimezone || endTimezone;\n                endTimezone = endTimezone || startTimezone;\n\n                if (startTimezone) {\n                    if (timezone) {\n                        if (method === \"apply\") {\n                            start = kendo.timezone.convert(model.start, timezone, startTimezone);\n                            end = kendo.timezone.convert(model.end, timezone, endTimezone);\n                        } else {\n                            start = kendo.timezone.convert(model.start, startTimezone, timezone);\n                            end = kendo.timezone.convert(model.end, endTimezone, timezone);\n                        }\n                    } else {\n                        start = kendo.timezone[method](model.start, startTimezone);\n                        end = kendo.timezone[method](model.end, endTimezone);\n                    }\n\n                    model._set(\"start\", start);\n                    model._set(\"end\", end);\n                }\n            },\n\n            _createEditor: function() {\n                var that = this;\n\n                var editor;\n\n                if (this._isMobile() && kendo.Pane) {\n                    editor = that._editor = new MobileEditor(this.wrapper, extend({}, this.options, {\n                        target: this,\n                        timezone: that.dataSource.reader.timezone,\n                        resources: that.resources,\n                        createButton: this._createButton.bind(this)\n                    }));\n                } else {\n                    editor = that._editor = new PopupEditor(this.wrapper, extend({}, this.options, {\n                        target: this,\n                        createButton: this._createButton.bind(this),\n                        timezone: that.dataSource.reader.timezone,\n                        resources: that.resources\n                    }));\n                }\n\n                editor.bind(\"cancel\", function(e) {\n                    if (that.trigger(\"cancel\", { container: e.container, event: e.model })) {\n                        e.preventDefault();\n                        return;\n                    }\n                    that._preventRefresh = false;\n                    that.cancelEvent();\n\n                    if (that._attemptRefresh) {\n                        that.refresh();\n                    }\n\n                    that.focus();\n                });\n\n                editor.bind(\"edit\", function(e) {\n                    if (that.trigger(EDIT, { container: e.container, event: e.model })) {\n                        e.preventDefault();\n                    }\n                });\n\n                editor.bind(\"save\", function() {\n                    that._preventRefresh = false;\n                    that.saveEvent();\n                });\n\n                editor.bind(\"remove\", function(e) {\n                    that._preventRefresh = false;\n                    that.removeEvent(e.model);\n                });\n\n                editor.bind(\"resetSeries\", function(e) {\n                    that._confirmation(function(cancel) {\n                        that._preventRefresh = false;\n                        if (!cancel) {\n                            that.dataSource._removeExceptions(e.model);\n                            that.saveEvent();\n                        }\n                    }, e.model, true);\n                });\n            },\n\n            _createPopupEditor: function(model) {\n                var editor = this._editor;\n\n                if (!model.isNew() || model.isOccurrence()) {\n                    if (model.isOccurrence()) {\n                        this._convertDates(model.recurrenceId ? this.dataSource.get(model.recurrenceId) : model);\n                    }\n                    this._convertDates(model);\n                }\n\n                this.editable = editor.editEvent(model);\n            },\n\n            removeEvent: function(uid) {\n                var that = this,\n                    model = typeof uid == \"string\" ? that.occurrenceByUid(uid) : uid;\n\n                if (!model) {\n                    return;\n                }\n\n                if (model.isRecurring()) {\n                    that._deleteRecurringDialog(model);\n                } else {\n                    that._confirmation(function(cancel) {\n                        if (!cancel) {\n                            that._removeEvent(model);\n                        }\n                    }, model);\n                }\n            },\n\n            occurrenceByUid: function(uid) {\n                var occurrence = this.dataSource.getByUid(uid);\n                if (!occurrence) {\n                    occurrence = getOccurrenceByUid(this._data, uid);\n                }\n\n                return occurrence;\n            },\n\n            occurrencesInRange: function(start, end) {\n                return new kendo.data.Query(this._data).filter({\n                    logic: \"or\",\n                    filters: [\n                        {\n                            logic: \"and\",\n                            filters: [\n                                { field: \"start\", operator: \"gte\", value: start },\n                                { field: \"end\", operator: \"gte\", value: start },\n                                { field: \"start\", operator: \"lt\", value: end }\n                            ]\n                        },\n                        {\n                            logic: \"and\",\n                            filters: [\n                                { field: \"start\", operator: \"lte\", value: start },\n                                { field: \"end\", operator: \"gt\", value: start }\n                            ]\n                        }\n                    ]\n                }).toArray();\n            },\n\n            _removeEvent: function(model) {\n                if (!this.trigger(REMOVE, { event: model })) {\n                    if (this.dataSource.remove(model)) {\n                        this.dataSource.sync();\n                    }\n                }\n            },\n\n            _deleteRecurringDialog: function(model) {\n                var that = this;\n                var currentModel = model;\n                var editable = that.options.editable;\n                var deleteOccurrence;\n                var deleteSeries;\n                var createException;\n                var deleteOccurrenceConfirmation;\n                var deleteSeriesConfirmation;\n                var createExceptionConfirmation;\n                var editRecurringMode = isPlainObject(editable) ? editable.editRecurringMode : \"dialog\";\n\n                deleteOccurrence = function() {\n                    var occurrence = currentModel.recurrenceId ? currentModel : currentModel.toOccurrence();\n                    var head = that.dataSource.get(occurrence.recurrenceId);\n\n                    that._convertDates(head);\n                    that._removeEvent(occurrence);\n                };\n\n                deleteSeries = function() {\n                    if (currentModel.recurrenceId) {\n                        currentModel = that.dataSource.get(currentModel.recurrenceId);\n                    }\n\n                    that._removeEvent(currentModel);\n                };\n\n                createException = function() {\n                    that.dataSource.remove(currentModel);\n                    that.dataSource.sync();\n                };\n\n                if (editRecurringMode != \"dialog\" || that._isEditorOpened()) {\n                    deleteOccurrenceConfirmation = function() {\n                        that._confirmation(function(cancel) {\n                            if (!cancel) {\n                                deleteOccurrence();\n                            }\n                        }, currentModel);\n                    };\n\n                    deleteSeriesConfirmation = function() {\n                        that._confirmation(function(cancel) {\n                            if (!cancel) {\n                                deleteSeries();\n                            }\n                        }, currentModel);\n                    };\n\n                    createExceptionConfirmation = function() {\n                        that._confirmation(function(cancel) {\n                            if (!cancel) {\n                                createException();\n                            }\n                        }, currentModel);\n                    };\n                }\n\n                var seriesCallback = deleteSeriesConfirmation || deleteSeries;\n                var occurrenceCallback = deleteOccurrenceConfirmation || deleteOccurrence;\n                var exeptionCallback = createExceptionConfirmation || createException;\n\n                if (that._isEditorOpened()) {\n                    if (model.isException()) {\n                        occurrenceCallback();\n                    } else if (model.isNew()) {\n                        exeptionCallback();\n                    } else {\n                        seriesCallback();\n                    }\n                } else {\n                    var recurrenceMessages = that.options.messages.recurrenceMessages;\n                    that._showRecurringDialog(model, occurrenceCallback, seriesCallback, {\n                        title: recurrenceMessages.deleteWindowTitle,\n                        text: recurrenceMessages.deleteRecurring ? recurrenceMessages.deleteRecurring : DELETERECURRING,\n                        occurrenceText: recurrenceMessages.deleteWindowOccurrence,\n                        seriesText: recurrenceMessages.deleteWindowSeries\n                    });\n                }\n            },\n\n            _isEditorOpened: function() {\n                return !!this._editor.container;\n            },\n\n            _unbindView: function(view) {\n                var that = this;\n\n                view.destroy();\n            },\n\n            _bindView: function(view) {\n                var that = this;\n\n                if (that.options.editable) {\n                    if (that._viewRemoveHandler) {\n                        view.unbind(REMOVE, that._viewRemoveHandler);\n                    }\n\n                    that._viewRemoveHandler = function(e) {\n                        that.removeEvent(e.uid);\n                    };\n\n                    view.bind(REMOVE, that._viewRemoveHandler);\n\n                    if (that._viewAddHandler) {\n                        view.unbind(ADD, that._viewAddHandler);\n                    }\n\n                    that._viewAddHandler = function(e) {\n                        that.addEvent(e.eventInfo);\n                    };\n\n                    view.bind(ADD, this._viewAddHandler);\n\n                    if (that._viewEditHandler) {\n                        view.unbind(EDIT, that._viewEditHandler);\n                    }\n\n                    that._viewEditHandler = function(e) {\n                        that.editEvent(e.uid);\n                    };\n\n                    view.bind(EDIT, this._viewEditHandler);\n                }\n\n                if (that._viewNavigateHandler) {\n                    view.unbind(\"navigate\", that._viewNavigateHandler);\n                }\n\n                that._viewNavigateHandler = function(e) {\n                    if (e.action) {\n                        if (!that.trigger(\"navigate\", { view: e.view, isWorkDay: e.isWorkDay, action: e.action, date: e.date })) {\n                            that.date(e.date);\n                        }\n                    } else if (e.view) {\n                        var switchWorkDay = \"isWorkDay\" in e;\n                        var action = switchWorkDay ? \"changeWorkDay\" : \"changeView\";\n\n                        if (!that.trigger(\"navigate\", { view: e.view, isWorkDay: e.isWorkDay, action: action, date: e.date })) {\n                            if (switchWorkDay) {\n                                that._workDayMode = e.isWorkDay;\n                            }\n\n                            that._selectView(e.view);\n                            that.date(e.date);\n                        }\n                    }\n                };\n\n                view.bind(\"navigate\", that._viewNavigateHandler);\n\n                if (that._viewActivateHandler) {\n                    view.unbind(\"activate\", that._viewActivateHandler);\n                }\n\n                that._viewActivateHandler = function() {\n                    var view = this;\n                    if (that._selection) {\n                        view.constrainSelection(that._selection);\n\n                        if ($(document.activeElement).closest(\".k-scheduler-toolbar\").length === 0) {\n                            if (document.activeElement !== that.wrapper[0]) {\n                                that.element.trigger(\"focus\");\n                            } else {\n                                that._select();\n                            }\n                        }\n\n                        that._adjustSelectedDate();\n                    }\n                };\n\n                view.bind(\"activate\", that._viewActivateHandler);\n            },\n\n            _selectView: function(name) {\n                var that = this;\n\n                if (name && that.views[name]) {\n                    if (that._selectedView) {\n                        that._unbindView(that._selectedView);\n                    }\n\n                    that._selectedView = that._renderView(name);\n                    that._selectedViewName = name;\n\n                    if (this._initialSize) {\n                        this._initialSize = false;\n                        this._onMediaChange(window.matchMedia(MIN_SCREEN));\n                    }\n\n                    if (that._viewsCount > 1 && !that._isMobile()) {\n                        var viewElementToSelect = that.toolbar.find(\"[\" + kendo.attr(\"name\") + \"=\" + name + \"]\");\n                        var viewsDropdown = that.toolbar.find(\".k-views-dropdown\");\n                        var viewsGroupEl = viewElementToSelect.closest(\".k-button-group\");\n                        var viewsButtonGroup = viewsGroupEl.data(\"kendoButtonGroup\");\n\n                        viewsDropdown.val(name);\n\n                        if (viewsButtonGroup) {\n                            viewsButtonGroup.select(viewElementToSelect);\n                        }\n                    } else if (that._viewsCount > 1) {\n                        var viewSelect = that.toolbar.find(\".k-scheduler-mobile-views\");\n\n                        viewSelect.find(\"[value=\" + name.replace(/\\./g, \"\\\\.\") + \"]\")\n                            .prop(\"selected\", \"selected\");\n                    }\n                }\n            },\n\n            view: function(name) {\n                var that = this;\n\n                if (name) {\n                    if (name === \"year\") {\n                        that.wrapper.removeAttr(\"tabindex\");\n                    } else {\n                        that.wrapper.attr(\"tabindex\", 0);\n                    }\n\n                    that._selectView(name);\n                    that.rebind();\n\n                    return;\n                }\n\n                return that._selectedView;\n            },\n\n            viewName: function() {\n                return this.view().name;\n            },\n\n            _renderView: function(name) {\n                var view = this._initializeView(name);\n\n                this._bindView(view);\n\n                if (kendo.support.mouseAndTouchPresent || kendo.support.pointers) {\n                    view.content.css(\"-ms-touch-action\", \"pinch-zoom\");\n                    view.content.css(\"touch-action\", \"pinch-zoom\");\n                }\n\n                this._model.set(\"formattedDate\", view.dateForTitle());\n                this._model.set(\"formattedShortDate\", view.shortDateForTitle());\n                this._model.set(\"formattedMobileDate\", view.mobileDateForTitle ? view.mobileDateForTitle() : view.shortDateForTitle());\n                this._model.set(\"formattedYear\", view.mobileYearForTitle ? view.mobileYearForTitle() : kendo.format(\"{0:yyyy}\", view.startDate()));\n\n                return view;\n            },\n\n            resize: function(force) {\n                var size = this.getSize();\n                var currentSize = this._size;\n                var view = this.view();\n\n                if (!view || !view.groups) {\n                    return;\n                }\n\n                if (force || !currentSize || size.width !== currentSize.width || size.height !== currentSize.height) {\n                    this.refresh({ action: \"resize\" });\n                    this._size = size;\n                }\n            },\n\n            _adjustSelectedDate: function() {\n                var date = this._model.selectedDate,\n                    selection = this._selection,\n                    start = selection.start;\n\n                if (start && !kendo.date.isInDateRange(date, getDate(start), getDate(selection.end))) {\n                    date.setFullYear(start.getFullYear(), start.getMonth(), start.getDate());\n                }\n            },\n\n            _initializeView: function(name) {\n                var view = this.views[name];\n\n                if (view) {\n                    var isSettings = isPlainObject(view),\n                        overrideOptions = {},\n                        type = view.type;\n\n                    if (typeof type === STRING) {\n                        type = kendo.getter(view.type)(window);\n                    }\n\n                    if (isSettings && view.workDays && view.workDays.length) {\n                        overrideOptions.workDays = view.workDays;\n                    }\n\n                    if (type) {\n                        view = new type(this.wrapper, trimOptions(extend(true, {}, this.options, isSettings ? view : {}, {\n                            resources: this.resources,\n                            date: this.date(),\n                            startTime: kendo.parseDate(view.startTime) || kendo.parseDate(this.options.startTime),\n                            endTime: kendo.parseDate(view.endTime) || kendo.parseDate(this.options.endTime),\n                            showWorkHours: this._workDayMode\n                        }),overrideOptions));\n\n                    } else {\n                        throw new Error(\"There is no such view\");\n                    }\n                }\n\n                return view;\n            },\n\n            _views: function() {\n                var views = this.options.views;\n                var view;\n                var defaultView;\n                var selected;\n                var isSettings;\n                var name;\n                var type;\n                var idx;\n                var length;\n\n                this.views = {};\n                this._viewsCount = 0;\n\n                for (idx = 0, length = views.length; idx < length; idx++) {\n                    var hasType = false;\n\n                    view = views[idx];\n\n                    isSettings = isPlainObject(view);\n\n                    if (isSettings) {\n                        type = name = view.type ? view.type : view;\n                        if (typeof type !== STRING) {\n                            name = view.name || view.title;\n                            hasType = true;\n                        }\n                    } else {\n                        type = name = view;\n                        view = {};\n                    }\n\n                    defaultView = defaultViews[name];\n\n                    if (defaultView && !hasType) {\n                        view.type = defaultView.type;\n                        defaultView.title = this.options.messages.views[name];\n                        if (defaultView.type === \"day\") {\n                            defaultView.messages = { allDay: this.options.messages.allDay };\n                        } else if (defaultView.type === \"agenda\") {\n                            defaultView.messages = {\n                                event: this.options.messages.event,\n                                date: this.options.messages.date,\n                                time: this.options.messages.time\n                            };\n                        }\n                    }\n\n                    view = extend({ title: name }, defaultView, isSettings ? view : {});\n\n                    if (name) {\n                        this.views[name] = view;\n                        this._viewsCount++;\n\n                        if (!selected || view.selected) {\n                            selected = name;\n                        }\n                    }\n                }\n\n                if (selected) {\n                    this._selectedViewName = selected; // toolbar is not rendered yet\n                }\n            },\n\n            rebind: function() {\n                var that = this,\n                    resources = that.resources,\n                    resourceFetchArray = [];\n\n                if (that._preventRebind) {\n                    that._preventRebind = false;\n                    return;\n                }\n\n                if (that.options.autoBind === false && resources && resources.length > 0) {\n                    resources.forEach(function(resource) {\n                        if (resource.dataSource.data().length === 0) {\n                            that._preventRebind = true;\n                            resourceFetchArray.push(resource.dataSource.fetch());\n                        }\n                    });\n\n                    $.when.apply(null, resourceFetchArray).then(function() {\n                        that.dataSource.fetch();\n                        that._preventRebind = false;\n                    });\n                } else {\n                    that.dataSource.fetch();\n                }\n            },\n\n            _dataSource: function() {\n                var that = this,\n                    options = that.options,\n                    dataSource = options.dataSource;\n\n                dataSource = isArray(dataSource) ? { data: dataSource } : dataSource;\n\n                if (options.timezone && !(dataSource instanceof SchedulerDataSource)) {\n                    dataSource = extend(true, dataSource, { schema: { timezone: options.timezone } });\n                } else if (dataSource instanceof SchedulerDataSource) {\n                    options.timezone = dataSource.options.schema ? dataSource.options.schema.timezone : \"\";\n                }\n\n                if (that.dataSource && that._refreshHandler) {\n                    that.dataSource\n                        .unbind(CHANGE, that._refreshHandler)\n                        .unbind(PROGRESS, that._progressHandler)\n                        .unbind(ERROR, that._errorHandler);\n                } else {\n                    that._refreshHandler = that.refresh.bind(that);\n                    that._progressHandler = that._requestStart.bind(that);\n                    that._errorHandler = that._error.bind(that);\n                }\n\n                that.dataSource = kendo.data.SchedulerDataSource.create(dataSource)\n                    .bind(CHANGE, that._refreshHandler)\n                    .bind(PROGRESS, that._progressHandler)\n                    .bind(ERROR, that._errorHandler);\n\n                that.options.dataSource = that.dataSource;\n            },\n\n\n            _error: function() {\n                this._progress(false);\n            },\n\n            _requestStart: function() {\n                this._progress(true);\n            },\n\n            _progress: function(toggle) {\n                var element = this.element.find(\".k-scheduler-content\");\n                kendo.ui.progress(element, toggle);\n            },\n\n            _resources: function() {\n                var that = this;\n                var resources = that.options.resources;\n                var resourcePromises = [];\n\n                for (var idx = 0; idx < resources.length; idx++) {\n                    var resource = resources[idx];\n                    var field = resource.field;\n                    var name = resource.name || field;\n                    var dataSource = resource.dataSource;\n\n                    if (!field || !dataSource) {\n                        throw new Error('The \"field\" and \"dataSource\" options of the scheduler resource are mandatory.');\n                    }\n\n                    that.resources.push({\n                        field: field,\n                        name: name,\n                        title: resource.title || field,\n                        dataTextField: resource.dataTextField || \"text\",\n                        dataValueField: resource.dataValueField || \"value\",\n                        dataColorField: resource.dataColorField || \"color\",\n                        dataParentValueField: resource.dataParentValueField || \"parentValue\",\n                        valuePrimitive: resource.valuePrimitive != null ? resource.valuePrimitive : true,\n                        multiple: resource.multiple || false,\n                        dataSource: that._resourceDataSource(dataSource, name, resourcePromises)\n                    });\n                }\n\n                if (!that.options.autoBind) {\n                    that._selectView(that._selectedViewName);\n                } else {\n                    $.when.apply(null, resourcePromises)\n                          .then(function() {\n                                that.view(that._selectedViewName);\n                            });\n                }\n            },\n\n            _resourceDataSource: function(resourceDS, groupName, promises) {\n                var that = this;\n                var dataSource = isArray(resourceDS) ? { data: resourceDS } : resourceDS;\n                var dataSourceInstance = kendo.data.DataSource.create(dataSource);\n\n                if (that.options.autoBind) {\n                    promises.push(dataSourceInstance.fetch(function() {\n                        // 'this' is the DataSource instance not the Scheduler\n                        that._bindResourceEvents(this, groupName);\n                    }));\n                } else {\n                    that._bindResourceEvents(dataSourceInstance, groupName);\n                }\n\n                return dataSourceInstance;\n            },\n\n            _bindResourceEvents: function(resourceDS, groupName) {\n                var that = this;\n                var isGrouped = that.options.group && that.options.group.resources.length;\n                var isResourceGrouped = isGrouped && that.options.group.resources.indexOf(groupName) > -1;\n\n                if (!that._resourceRefreshHandler && isResourceGrouped) {\n                    that._resourceRefreshHandler = that._refreshResource.bind(that);\n                    that._resourceErrorHandler = that._error.bind(that);\n                }\n\n                if (isResourceGrouped) {\n                    resourceDS.bind(CHANGE, that._resourceRefreshHandler)\n                        .bind(ERROR, that._resourceErrorHandler);\n                }\n            },\n\n            _refreshResource: function() {\n                var that = this;\n                var preventRefresh = (that._editor && that._editor.editable) || that._preventRefresh;\n\n                if (!preventRefresh) {\n                    that.view(that._selectedViewName);\n                }\n            },\n\n            _initModel: function() {\n                var that = this;\n                that._model = kendo.observable({\n                   selectedDate: new Date(this.options.date),\n                   formattedDate: \"\",\n                   formattedShortDate: \"\"\n               });\n\n               that._model.bind(CHANGE, function(e) {\n                    if (e.field === \"selectedDate\") {\n                        that.view(that._selectedViewName);\n                    }\n               });\n            },\n\n            _wrapper: function() {\n                var that = this;\n                var options = that.options;\n                var height = options.height;\n                var width = options.width;\n\n                that.wrapper = that.element.addClass(\"k-scheduler\");\n\n                if (that._isMobile()) {\n                   that.wrapper.addClass(\"k-scheduler-mobile\");\n                }\n\n                if (height) {\n                    that.wrapper.height(height);\n                }\n\n                if (width) {\n                    that.wrapper.width(width);\n                }\n            },\n\n            date: function(value) {\n                if (value != null && getDate(value) >= getDate(this.options.min) && getDate(value) <= getDate(this.options.max)) {\n                    this._model.set(\"selectedDate\", value);\n                }\n                return getDate(this._model.get(\"selectedDate\"));\n            },\n\n            _processHandlers: function(defaults) {\n                var that = this;\n\n                that._pdfClickHandler = (e) => {\n                    e.preventDefault();\n                    that.saveAsPDF();\n                };\n\n                that._createClickHandler = (e) => {\n                    e.preventDefault();\n                    that.addEvent();\n                };\n\n                that._calendarClickHandler = that._currentClickHandler = (e) => {\n                    e.preventDefault();\n                    that._showCalendar(e.target);\n                };\n\n                that._todayClickHandler = (e) => {\n                    e.preventDefault();\n\n                    var timezone = that.options.timezone,\n                        currentDate = new Date(),\n                        date;\n\n                    if (timezone) {\n                        var timezoneOffset = kendo.timezone.offset(currentDate, timezone);\n                        date = kendo.timezone.convert(currentDate, currentDate.getTimezoneOffset(), timezoneOffset);\n                    } else {\n                        date = currentDate;\n                    }\n\n                    if (!that.trigger(\"navigate\", { view: that._selectedViewName, action: \"today\", date: date })) {\n                        that.date(date);\n                    }\n                };\n\n                that._previousClickHandler = (e) => {\n                    e.preventDefault();\n\n                    var date = that.view().previousDate();\n\n                    if (!that.trigger(\"navigate\", { view: that._selectedViewName, action: \"previous\", date: date })) {\n                        that.date(date);\n                    }\n                };\n\n                that._nextClickHandler = (e) => {\n                    e.preventDefault();\n\n                    var date = that.view().nextDate();\n\n                    if (!that.trigger(\"navigate\", { view: that._selectedViewName, action: \"next\", date: date })) {\n                        that.date(date);\n                    }\n                };\n\n                that._refreshClickHandler = (e) => {\n                    e.preventDefault();\n\n                    var name = that.view().name;\n\n                    if (!that.trigger(\"navigate\", { view: name, action: \"changeView\", date: that.date() })) {\n                        that.view(name);\n                    }\n                };\n\n                that._viewClickHandler = (e) => {\n                    var name = e.target.attr(kendo.attr(\"name\"));\n\n                    if (!that.trigger(\"navigate\", { view: name, action: \"changeView\", date: that.date() })) {\n                        that.view(name);\n                    }\n                };\n\n                Object.values(defaults).map(t => {\n                    if (t.name) {\n                        t.click = that[\"_\" + t.name + \"ClickHandler\"];\n                    }\n                });\n            },\n\n            _processDefaults: function() {\n                var views = this.views,\n                    defaults = $.extend(true, {}, DEFAULT_TOOLS),\n                    viewsButtons = [],\n                    isRtl = kendo.support.isRtl(this.wrapper),\n                    viewsDdl, viewsMobile;\n\n                Object.keys(views).map(name => {\n                    var current = $.extend(true, {}, defaults.view);\n\n                    current.text = views[name].title;\n                    const refAttribute = `ref-view-${name.toLowerCase()}`;\n                    current.attributes = {\n                        [refAttribute]: '',\n                        \"data-name\": name\n                    };\n\n                    current.groupClass = \"k-scheduler-views\";\n                    defaults[name] = current;\n\n                    viewsButtons.push(name);\n                });\n\n                if (viewsButtons.length > 1) {\n                    viewsDdl = VIEWS_DROPDOWN_TEMPLATE({ views: this.views, label: this.options.messages.selectView, type: \"k-views-dropdown\" });\n                    viewsMobile = VIEWS_DROPDOWN_TEMPLATE({ views: this.views, label: this.options.messages.selectView, type: \"k-scheduler-mobile-views\" });\n                }\n\n                defaults.viewsDdl = {\n                    template: viewsDdl\n                };\n\n                defaults.viewsMobile = {\n                    template: viewsMobile\n                };\n\n                this._viewsButtons = viewsButtons;\n\n                if (isRtl) {\n                    defaults.previous.icon = \"caret-alt-right\";\n                    defaults.next.icon = \"caret-alt-left\";\n                }\n\n                return defaults;\n            },\n\n            _processToolbarArray: function() {\n                var options = this.options,\n                    toolbarOptions = options.toolbar,\n                    commands = [],\n                    isMobile = this._isMobile(),\n                    tools, pdf, search;\n\n                if (toolbarOptions) {\n                    commands = Array.isArray(toolbarOptions) ? toolbarOptions : [toolbarOptions];\n                }\n\n                pdf = $.grep(commands, function(item) {\n                    return item == \"pdf\" || item.name == \"pdf\";\n                }).length > 0;\n\n                search = $.grep(commands, function(item) {\n                    return item == \"search\" || item.name == \"search\";\n                }).length > 0;\n\n                if (isMobile) {\n                    tools = [...defaultMobileToolsFirst];\n\n                    if (options.editable) {\n                        tools[0].push(\"create\");\n                    }\n                } else {\n                    tools = [...defaultDesktopTools];\n                }\n\n                if (search) {\n                    tools.push(\"search\");\n                }\n\n                if (pdf) {\n                    if (isMobile) {\n                        tools[0].unshift(\"pdfMobile\");\n                    } else {\n                        tools.unshift(\"pdf\");\n                    }\n                }\n\n                if (this._viewsCount === 1) {\n                    tools.push(\"refresh\");\n                } else if (this._viewsCount > 1) {\n                    if (isMobile) {\n                        tools.push(\"viewsMobile\");\n                    } else {\n                        tools.push(\"viewsDdl\");\n                        tools.push(this._viewsButtons);\n                    }\n                }\n\n                return tools;\n            },\n\n            _processViewTools: function(items) {\n                var result = items,\n                    viewsIndex = -1;\n\n                items.some((item, index) => {\n                    if (item === \"views\" || item.name === \"views\") {\n                        viewsIndex = index;\n                        return true;\n                    }\n\n                    return false;\n                });\n\n                if (viewsIndex > -1) {\n                    result.splice(viewsIndex, 1, \"viewsDdl\", this._viewsButtons);\n                }\n\n                return result;\n            },\n\n            _processToolbarItems: function() {\n                var desktopItems = this.options.toolbar.items.desktop || this.options.toolbar.items,\n                    mobileItems = this.options.toolbar.items.mobile || this.options.toolbar.items,\n                    isMobile = this._isMobile();\n\n                if (!isMobile) {\n                    if (desktopItems.main) {\n                        if (desktopItems.navigation) {\n                            desktopItems = desktopItems.main.concat(desktopItems.navigation);\n                        } else {\n                            desktopItems = desktopItems.main;\n                        }\n                    }\n\n                    return { tools: this._processViewTools(desktopItems) };\n                } else {\n                    if (Array.isArray(mobileItems)) {\n                        return {\n                            tools: this._processViewTools(mobileItems),\n                            navigation: []\n                        };\n                    } else {\n                        return {\n                            tools: this._processViewTools(mobileItems.main),\n                            navigation: this._processViewTools(mobileItems.navigation)\n                        };\n                    }\n                }\n            },\n\n            _processTools: function() {\n                var options = this.options,\n                    toolbarOptions = options.toolbar;\n\n                if (toolbarOptions && toolbarOptions.items) {\n                    return this._processToolbarItems();\n                } else {\n                    return { tools: this._processToolbarArray() };\n                }\n            },\n\n            _toolbar: function() {\n                var that = this;\n                var options = that.options;\n                var defaults = that._processDefaults();\n                var { tools, navigation } = that._processTools();\n                var toolbar = $(\"<div class='k-scheduler-toolbar'>\");\n                var secondToolbar;\n\n                that._processHandlers(defaults);\n                that.wrapper.append(toolbar);\n                that.toolbar = toolbar;\n\n                toolbar.kendoToolBar({\n                    resizable: false,\n                    tools: tools,\n                    defaultTools: defaults,\n                    parentMessages: options.messages\n                });\n\n                if (that._isMobile() && (!navigation || navigation.length !== 0)) {\n                    secondToolbar = $(\"<div class='k-scheduler-toolbar'>\");\n                    that.wrapper.append(secondToolbar);\n                    that.toolbar = that.toolbar.add(secondToolbar);\n\n                    secondToolbar.kendoToolBar({\n                        resizable: false,\n                        tools: navigation || [...defaultMobileToolsSecond],\n                        defaultTools: defaults,\n                        parentMessages: options.messages\n                    });\n                }\n\n                that.toolbar.find(\".k-nav-current .k-button-text\").attr('data-' + kendo.ns + 'bind', \"text: formattedDate\");\n                that.toolbar.find(\".k-m-date-format\").attr('data-' + kendo.ns + 'bind', \"text: formattedMobileDate\");\n                that.toolbar.find(\".k-y-date-format\").attr('data-' + kendo.ns + 'bind', \"text: formattedYear\");\n\n                kendo.bind(that.toolbar, that._model);\n\n                that.toolbar.find(\".k-scheduler-search-input\").attr({\n                    placeholder: options.messages.search,\n                    title: options.messages.search\n                });\n\n                toolbar.on(\"input\" + NS, \".k-scheduler-search-input\", kendo.throttle(function(e) {\n                    that.dataSource.filter({\n                        logic: \"or\",\n                        filters: [\n                            { field: \"title\", operator: \"contains\", value: e.target.value },\n                            { field: \"description\", operator: \"contains\", value: e.target.value }\n                        ]\n                    });\n                }, 250));\n\n                toolbar.on(CHANGE + NS, \".k-views-dropdown, .k-scheduler-mobile-views\", function() {\n                    var name = this.value;\n\n                    if (!that.trigger(\"navigate\", { view: name, action: \"changeView\", date: that.date() })) {\n                        that.view(name);\n                    }\n                });\n\n                that._initialSize = true;\n            },\n\n            _showCalendar: function(targetElm) {\n                var that = this,\n                    target = targetElm || that.toolbar.find(\".k-nav-current\"),\n                    html = $('<div class=\"k-calendar-container\"><div class=\"k-scheduler-calendar\"></div></div>');\n\n                if (!that.popup) {\n                    that.popup = new Popup(html, {\n                        anchor: target,\n                        activate: function() {\n                            if (that.popup && that.calendar) {\n                                that.popup._toggleResize(false);\n                                that.calendar.element.find(\"table\").trigger(\"focus\");\n                                that.popup._toggleResize(true);\n                            }\n                        },\n                        open: function() {\n                            if (!that.calendar) {\n                                that.calendar = new Calendar(this.element.find(\".k-scheduler-calendar\"),\n                                {\n                                    change: function() {\n                                        var date = this.value();\n                                        if (!that.trigger(\"navigate\", { view: that._selectedViewName, action: \"changeDate\", date: date })) {\n                                            that.date(date);\n                                            that.popup.close();\n                                        }\n\n                                        if (!that._isMobile()) {\n                                            that._selectedView.element.trigger(\"focus\");\n                                            that.toolbar.find(\".k-nav-current\").trigger(\"focus\").addClass(FOCUSEDSTATE);\n                                        }\n                                    },\n                                    min: that.options.min,\n                                    max: that.options.max\n                                });\n                            }\n                            that.calendar.element.on(\"keydown\" + NS, function(e) {\n                                if (e.keyCode === keys.ESC || e.keyCode === keys.TAB) {\n                                    that.popup.close();\n                                    that._selectedView.element.trigger(\"focus\");\n                                    that.toolbar.find(\".k-nav-current\").trigger(\"focus\").addClass(FOCUSEDSTATE);\n                                }\n                            });\n\n                            that.calendar.setOptions({\n                                start: that._selectedViewName === \"year\" ? \"decade\" : \"month\",\n                                depth: that._selectedViewName === \"year\" ? \"decade\" : \"month\"\n                            });\n\n                            that.calendar.value(that.date());\n                        },\n                        copyAnchorStyles: false\n                    });\n                }\n\n                that.popup.open();\n            },\n\n            refresh: function(e) {\n                var that = this;\n                var view = this.view();\n                var preventRefresh = (e && e.action === \"itemchange\" && (this._editor.editable || this._preventRefresh)) ||\n                                     (this.dataSource.options.type === \"signalr\" && this._preventRefresh);\n\n                this._progress(false);\n\n                e = e || {};\n\n                if (!view) {\n                    return;\n                }\n\n                if (preventRefresh) { // skip rebinding if editing is in progress\n                    this._attemptRefresh = true && this.dataSource.options.type === \"signalr\";\n                    return;\n                }\n\n                if (this.trigger(\"dataBinding\", { action: e.action || \"rebind\", index: e.index, items: e.items })) {\n                    return;\n                }\n\n                if (!(e && e.action === \"resize\") && this._editor) {\n                    this._editor.close();\n                }\n\n                this._data = this.dataSource.expand(view.startDate(), view.visibleEndDate());\n\n                view.refreshLayout();\n\n                view.render(this._data);\n\n                this.trigger(\"dataBound\");\n                this._attemptRefresh = false;\n            },\n\n            slotByPosition: function(x, y) {\n                var view = this.view();\n\n                if (!view._slotByPosition) {\n                    return null;\n                }\n\n                var slot = view._slotByPosition(x, y);\n\n                if (!slot) {\n                    return null;\n                }\n\n                return {\n                    startDate: slot.startDate(),\n                    endDate: slot.endDate(),\n                    groupIndex: slot.groupIndex,\n                    element: slot.element,\n                    isDaySlot: slot.isDaySlot\n                };\n            },\n\n            slotByElement: function(element) {\n                var el = $(element),\n                    offset = el.offset(),\n                    width = el.width(),\n                    height = el.height(),\n                    centerX = offset.left + width / 2,\n                    centerY = offset.top + height / 2,\n                    offset = $(element).offset();\n\n                return this.slotByPosition(centerX, centerY);\n            },\n\n            resourcesBySlot: function(slot) {\n                return this.view()._resourceBySlot(slot);\n            }\n        });\n\n        var defaultViews = {\n            day: {\n                type: \"kendo.ui.DayView\"\n            },\n            week: {\n                type: \"kendo.ui.WeekView\"\n            },\n            workWeek: {\n                type: \"kendo.ui.WorkWeekView\"\n            },\n            agenda: {\n                type: \"kendo.ui.AgendaView\"\n            },\n            month: {\n                type: \"kendo.ui.MonthView\"\n            },\n            timeline: {\n                type: \"kendo.ui.TimelineView\"\n            },\n            timelineWeek: {\n                type: \"kendo.ui.TimelineWeekView\"\n            },\n            timelineWorkWeek: {\n                type: \"kendo.ui.TimelineWorkWeekView\"\n            },\n            timelineMonth: {\n                type: \"kendo.ui.TimelineMonthView\"\n            },\n            year: {\n                type: \"kendo.ui.YearView\"\n            }\n        };\n\n        ui.plugin(Scheduler);\n\n        if (kendo.PDFMixin) {\n            kendo.PDFMixin.extend(Scheduler.prototype);\n\n            var SCHEDULER_EXPORT = \"k-scheduler-pdf-export\";\n            Scheduler.fn._drawPDF = function(progress) {\n                var wrapper = this.wrapper;\n                var styles = wrapper[0].style.cssText;\n\n                wrapper.css({\n                    width: wrapper.width(),\n                    height: wrapper.height()\n                });\n\n                wrapper.addClass(SCHEDULER_EXPORT);\n\n                var scheduler = this;\n                var promise = new $.Deferred();\n                var table = wrapper.find(\".k-scheduler-content\").find(\"table\").css(\"table-layout\", \"auto\");\n\n                setTimeout(function() {\n                    table.css(\"table-layout\", \"fixed\");\n                    scheduler.resize(true);\n\n                    scheduler._drawPDFShadow({}, {\n                        avoidLinks: scheduler.options.pdf.avoidLinks\n                    })\n                    .done(function(group) {\n                        var args = {\n                            page: group,\n                            pageNumber: 1,\n                            progress: 1,\n                            totalPages: 1\n                        };\n\n                        progress.notify(args);\n                        promise.resolve(args.page);\n                    })\n                    .fail(function(err) {\n                        promise.reject(err);\n                    })\n                    .always(function() {\n                        wrapper[0].style.cssText = styles;\n                        wrapper.removeClass(SCHEDULER_EXPORT);\n                        scheduler.resize(true);\n\n                        //Required because slot.offsetLeft is incorrect after first resize\n                        scheduler.resize(true);\n                    });\n                });\n\n                return promise;\n            };\n        }\n\n        var TimezoneEditor = Widget.extend({\n            init: function(element, options) {\n                var that = this,\n                    zones = kendo.timezone.windows_zones;\n\n                if (!zones || !kendo.timezone.zones_titles) {\n                    throw new Error('kendo.timezones.min.js is not included.');\n                }\n\n                Widget.fn.init.call(that, element, options);\n\n                that.wrapper = that.element;\n\n                that._zonesQuery = new kendo.data.Query(zones);\n                that._zoneTitleId = kendo.guid();\n                that._zoneTitlePicker();\n                that._zonePicker();\n\n                that._zoneTitle.bind(\"cascade\", function() {\n                    if (!this.value()) {\n                        that._zone.wrapper.hide();\n                    }\n                });\n\n                that._zone.bind(\"cascade\", function() {\n                    that._value = this.value();\n                    that.trigger(CHANGE);\n                });\n\n                that.value(that.options.value);\n            },\n            options: {\n                name: \"TimezoneEditor\",\n                value: \"\",\n                optionLabel: \"No timezone\"\n            },\n            events: [ CHANGE ],\n\n            _zoneTitlePicker: function() {\n                var that = this,\n                    zoneTitle = $('<input id=\"' + that._zoneTitleId + '\" aria-label=\"' + that.options.title + '\"/>').appendTo(that.wrapper);\n\n                that._zoneTitle = new kendo.ui.DropDownList(zoneTitle, {\n                    dataSource: kendo.timezone.zones_titles,\n                    dataValueField: \"other_zone\",\n                    dataTextField: \"name\",\n                    optionLabel: that.options.optionLabel\n                });\n            },\n\n            _zonePicker: function() {\n                var that = this,\n                    zone = $('<input aria-label=\"' + that.options.title + '\"/>').appendTo(this.wrapper);\n\n                that._zone = new kendo.ui.DropDownList(zone, {\n                    dataValueField: \"zone\",\n                    dataTextField: \"territory\",\n                    dataSource: that._zonesQuery.data,\n                    cascadeFrom: that._zoneTitleId,\n                    dataBound: function() {\n                        that._value = this.value();\n                        this.wrapper.toggle(this.dataSource.view().length > 1);\n                    }\n                });\n\n                that._zone.wrapper.hide();\n            },\n\n            destroy: function() {\n                Widget.fn.destroy.call(this);\n\n                kendo.destroy(this.wrapper);\n            },\n\n            value: function(value) {\n                var that = this,\n                    zone;\n\n                if (value === undefined$1) {\n                    return that._value;\n                }\n\n                zone = that._zonesQuery.filter({ field: \"zone\", operator: \"eq\", value: value }).data[0];\n\n                if (zone) {\n                    that._zoneTitle.value(zone.other_zone);\n                    that._zone.value(zone.zone);\n                } else {\n                    that._zoneTitle.select(0);\n                }\n\n            }\n        });\n\n        ui.plugin(TimezoneEditor);\n\n        var ZONETITLEOPTIONTEMPLATE = kendo.template(({ name, other_zone }) => `<option value=\"${other_zone}\">${name}</option>`);\n        var ZONEOPTIONTEMPLATE = kendo.template(({ zone, territory }) => `<option value=\"${zone}\">${territory}</option>`);\n\n        var MobileTimezoneEditor = Widget.extend({\n            init: function(element, options) {\n                var that = this,\n                    zones = kendo.timezone.windows_zones;\n\n                if (!zones || !kendo.timezone.zones_titles) {\n                    throw new Error('kendo.timezones.min.js is not included.');\n                }\n\n                Widget.fn.init.call(that, element, options);\n\n                that.wrapper = that.element;\n\n                that._zonesQuery = new kendo.data.Query(zones);\n                that._zoneTitlePicker();\n                that._zonePicker();\n\n                that.value(that.options.value);\n            },\n\n            options: {\n                name: \"MobileTimezoneEditor\",\n                optionLabel: \"No timezone\",\n                value: \"\"\n            },\n\n            events: [ CHANGE ],\n\n            _bindZones: function(value) {\n                var data = value ? this._filter(value) : [];\n\n                this._zone.html(this._options(data, ZONEOPTIONTEMPLATE));\n            },\n\n            _filter: function(value) {\n                return this._zonesQuery.filter({ field: \"other_zone\", operator: \"eq\", value: value }).data;\n            },\n\n            _options: function(data, template, optionLabel) {\n                var idx = 0;\n                var html = \"\";\n                var length = data.length;\n\n                if (optionLabel) {\n                    html += template({ other_zone: \"\", name: optionLabel });\n                }\n\n                for (; idx < length; idx++) {\n                    html += template(data[idx]);\n                }\n\n                return html;\n            },\n\n            _zoneTitlePicker: function() {\n                var that = this;\n                var options = that._options(kendo.timezone.zones_titles, ZONETITLEOPTIONTEMPLATE, that.options.optionLabel);\n\n                that._zoneTitle = $('<select>' + options + '</select>')\n                                    .appendTo(that.wrapper)\n                                    .on(\"change\", function() {\n                                        var value = this.value;\n                                        var zone = that._zonePickerLabel;\n                                        var zoneSelect = zone.find(\"select\");\n\n                                        that._bindZones(value);\n\n                                        if (value && zoneSelect.children().length > 1) {\n                                            zone.show();\n                                        } else {\n                                            zone.hide();\n                                        }\n\n                                        that._value = that._zone[0].value;\n\n                                        that.trigger(CHANGE);\n                                    });\n            },\n\n            _zonePicker: function() {\n                var that = this;\n\n                that._zonePickerLabel = $(\"<li class='k-item k-listgroup-item k-zonepicker'>\" +\n                                            \"<label class='k-label k-listgroup-form-row'>\" +\n                                                \"<span class='k-item-title k-listgroup-form-field-label'></span>\" +\n                                                \"<div class='k-listgroup-form-field-wrapper'></div>\" +\n                                            \"</label>\" +\n                                        \"</li>\").hide();\n\n                that._zone = $('<select></select>')\n                                .appendTo(that._zonePickerLabel.find(\"div\"))\n                                .on(\"change\", function() {\n                                    that._value = this.value;\n\n                                    that.trigger(CHANGE);\n                                });\n\n                this.wrapper.closest(\".k-item\").after(that._zonePickerLabel);\n\n                that._bindZones(that._zoneTitle.val());\n                that._value = that._zone[0].value;\n            },\n\n            destroy: function() {\n                Widget.fn.destroy.call(this);\n\n                kendo.destroy(this.wrapper);\n            },\n\n            value: function(value) {\n                var that = this;\n                var zonePicker = that._zone;\n                var other_zone = \"\";\n                var zone_value = \"\";\n                var zone;\n\n                if (value === undefined$1) {\n                    return that._value;\n                }\n\n                zone = that._zonesQuery.filter({ field: \"zone\", operator: \"eq\", value: value }).data[0];\n\n                if (zone) {\n                    zone_value = zone.zone;\n                    other_zone = zone.other_zone;\n                }\n\n                that._zoneTitle.val(other_zone);\n                that._bindZones(other_zone);\n\n                zonePicker.val(zone_value);\n                zone_value = zonePicker[0].value;\n\n                if (zone_value && zonePicker.children.length > 1) {\n                    that._zonePickerLabel.show();\n                } else {\n                    that._zonePickerLabel.hide();\n                }\n\n                that._value = zone_value;\n            }\n        });\n\n        ui.plugin(MobileTimezoneEditor);\n\n    })(window.kendo.jQuery);\n    var kendo$1 = kendo;\n\n    exports.__meta__ = __meta__;\n    exports.default = kendo$1;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n"]}