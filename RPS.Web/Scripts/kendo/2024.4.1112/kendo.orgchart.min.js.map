{"version":3,"file":"kendo.orgchart.min.js","names":["global","factory","exports","module","require","define","amd","globalThis","self","kendo","_globals","Orgchart","this","$","undefined$1","extend","data","Query","DataSource","TreeListDataSource","Model","ObservableArray","OrgChartModel","id","parentId","fields","type","editable","nullable","name","validation","required","title","avatar","init","value","fn","call","_loaded","parentIdField","nameField","titleField","avatarField","get","accept","set","field","initiator","loaded","shouldSerialize","base","options","model","OrgChartDataSource","schema","modelBase","groupedItemsTree","map","_childrenMap","view","currentChildren","_defaultParentId","grouped","group","toArray","_innerGroupedItemsTree","itemChildren","item","fromView","itemId","filter","operator","order","_sort","length","sort","itemsTree","current","children","i","items","push","prospectParents","skippedItem","concat","read","then","_loadExpanded","bind","toggleChildren","expand","defaultPromise","Deferred","resolve","promise","_error","expanded","load","j","innerGrouped","hasChildren","_byParentId","create","Array","isArray","toJSON","Error","window","jQuery","keys","encode","htmlEncode","NS","CLICK","COLLAPSE","EXPAND","MENU","SELECT","DOT","SPACE","HASH","TABINDEX","UID","PX","PLUS","MINUS","ARIA_OWNS","ARIA_SELECTED","ORGCHART_STYLES","ROOT_TEMPLATE","label","GROUP_TEMPLATE","guid","level","NODE_GROUP_CONTAINER","result","BUTTON_TEMPLATE","buttonSign","html","renderButton","icon","CARD_TEMPLATE","color","menuLabel","attr","fillMode","CARD_WRAPPER","uid","cssClass","GROUPED_CARD_WRAPPER","View","Observable","element","_attachEvents","events","destroy","ui","Widget","off","collapse","jqueryGroupElement","jQueryElement","_processItem","hasClass","closest","jqueryItemElement","refresh","_cacheFocused","_clearContent","_generateItemsTree","_calculateLevels","_render","select","$item","_getToSelect","previousSelection","find","removeAttr","removeClass","addClass","trigger","itemsSelector","on","_onKeyDown","_onSelect","_onButtonClick","_onFocus","_onBlur","focusableItem","focusableDataItem","_dataItems","_idTabIndex","_shouldRestoreSelection","_calculateDimensions","itemElement","_selector","first","_buttonHeight","outerHeight","_spacing","_itemWidth","_calculateItemWidth","_itemHeight","_calculateLevel","empty","_dataItem","dataSource","getByUid","_groupIsVertical","_keyCollapse","_keyExpand","_keyNext","_keyPrev","_keyEnter","_keyEscape","_keyEnd","target","last","dataItems","_keyHome","e","key","keyCode","focused","isRtl","support","nextKey","LEFT","RIGHT","prevKey","expandKey","DOWN","collapseKey","UP","HOME","END","indexOf","preventDefault","stopPropagation","ENTER","ESC","that","currentTarget","shouldExpand","el","siblings","_orientation","isElement","totalWidth","_itemsTree","root","template","messages","wrapperContainer","total","_total","widgetPadding","css","append","_renderGroup","width","Number","split","_setHeight","_restoreSelection","_renderNode","cardWrapperTemplate","contentTemplate","content","cardWrapper","borderColors","cardsColors","getSeriesColors","node","attributes","JSON","parse","stringify","applyStylesFromKendoAttributes","toFocusItem","toFocus","_getToFocus","_preventTriggerSelect","buttonHeight","selector","elements","min","MAX_VALUE","max","height","each","top","offset","bottom","SingleView","outerWidth","previousMax","itemsLength","maxColumnsPerLevel","_maxColumnsPerLevel","nestedChildren","shouldReset","container","parentUid","parentItem","dataItem","childItem","ownedGroup","next","parent","prev","vertical","vLine","before","clone","parentColumns","parentLeft","nodeContainer","_renderInner","button","innerGroup","itemWidth","spacing","buttonTemplate","numberOfColumns","hLine","_renderInnerGroup","after","left","groupTemplate","offsetDirection","GroupedView","$group","ds","_groupFocused","getAttribute","groups","currentLength","groupsLength","maxColumns","_maxGroups","currentTotal","maxGroups","groupField","some","toSelect","ownedGroupId","_renderChildren","index","nodesGroup","nodesGroupWidth","currentVertical","_renderNodesContainer","_renderItems","groupHeaderTemplate","nodeGroupContainerTemplate","nodeGroup","nodeGroupContainer","orgChart","DataBoundWidget","ContextMenu","CANCEL","CHANGE","CREATE","DATABINDING","DATABOUND","DELETE","EDIT","ERROR","PROGRESS","SAVE","REQUEST_START","MENU_ITEMS","edit","AVATAR_PREVIEW_TEMPLATE","fileName","EDITOR_BUTTONS_TEMPLATE","cancel","save","themeColor","OrgChart","_events","_wrapper","_view","_dataSource","_contextMenu","autoBind","fetch","notify","form","buttonsTemplate","orientation","destroyContent","destroyTitle","uploadAvatar","none","_menu","_editWindow","_confirmDestroy","wrapper","setDataSource","setOptions","$parent","add","sync","cancelChanges","hasChanges","delete","remove","_edit","getCollapsedNodes","saveChanges","_avatarPreview","formWrapper","_form","pop","prepend","menuElement","menuOptions","_onMenuItemClick","activate","_onMenuOpen","deactivate","_onMenuClose","showOn","animation","MENU_TEMPLATE","dsOptions","unbind","_dataSourceChangeHandler","_errorHandler","_progressHandler","_requestStartHandler","_onDataSourceChange","_onDataSourceError","_progress","_onDataSourceRequestStart","_destroyItem","confirm","Confirm","okText","show","setTimeout","open","done","fail","formElement","windowElement","formOptions","_formOptions","Form","Window","modal","close","center","validate","parentsDs","optionsItems","optionsForm","editor","editorOptions","dataValueField","dataTextField","valuePrimitive","_uploadEditor","formData","action","document","activeElement","newItem","targetItem","_openMenu","toggle","progress","_triggerCollapse","_triggerExpand","_triggerSelect","appendTo","kendoUpload","async","multiple","fileInfo","files","raw","rawFile","reader","FileReader","validationErrors","onloadend","readAsDataURL","allowedExtensions","maxFileSize","plugin","kendo$1","__meta__","category","description","depends","default","Object","defineProperty"],"sources":["kendo.orgchart.js"],"mappings":"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","ignoreList":[],"sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('kendo.data.js'), require('kendo.treelist.js'), require('kendo.core.js'), require('kendo.html.button.js'), require('kendo.menu.js'), require('kendo.dialog.js'), require('kendo.form.js'), require('kendo.upload.js'), require('kendo.window.js')) :\n    typeof define === 'function' && define.amd ? define(['exports', 'kendo.data', 'kendo.treelist', 'kendo.core', 'kendo.html.button', 'kendo.menu', 'kendo.dialog', 'kendo.form', 'kendo.upload', 'kendo.window'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory((global.kendo = global.kendo || {}, global.kendo._globals = global.kendo._globals || {}, global.kendo._globals.Orgchart = {})));\n})(this, (function (exports) {\n    (function($, undefined$1) {\n        var extend = $.extend,\n\n            data = kendo.data,\n            Query = data.Query,\n            DataSource = data.DataSource,\n            TreeListDataSource = data.TreeListDataSource,\n            Model = data.Model,\n            ObservableArray = data.ObservableArray;\n\n        var OrgChartModel = Model.define({\n            id: \"id\",\n            parentId: \"parentId\",\n\n            fields: {\n                id: { type: \"number\", editable: false },\n                parentId: { type: \"number\", nullable: true },\n                name: { type: \"string\", validation: { required: true } },\n                title: { type: \"string\" },\n                avatar: { type: \"string\" }\n            },\n\n            init: function(value) {\n                Model.fn.init.call(this, value);\n\n                this._loaded = false;\n\n                if (!this.parentIdField) {\n                    this.parentIdField = \"parentId\";\n                }\n                if (!this.nameField) {\n                    this.nameField = \"name\";\n                }\n                if (!this.titleField) {\n                    this.titleField = \"title\";\n                }\n                if (!this.avatarField) {\n                    this.avatarField = \"avatar\";\n                }\n\n                this.parentId = this.get(this.parentIdField);\n                this.name = this.get(this.nameField);\n                this.title = this.get(this.titleField);\n                this.avatar = this.get(this.avatarField);\n            },\n\n            accept: function(data) {\n                Model.fn.accept.call(this, data);\n\n                this.parentId = this.get(this.parentIdField);\n                this.name = this.get(this.nameField);\n                this.title = this.get(this.titleField);\n                this.avatar = this.get(this.avatarField);\n            },\n\n            set: function(field, value, initiator) {\n                if (field == \"parentId\" && this.nameField != \"parentId\") {\n                    this[this.parentIdField] = value;\n                }\n                if (field == \"name\" && this.nameField != \"name\") {\n                    this[this.nameField] = value;\n                }\n                if (field == \"title\" && this.titleField != \"title\") {\n                    this[this.titleField] = value;\n                }\n                if (field == \"avatar\" && this.avatarField != \"avatar\") {\n                    this[this.avatarField] = value;\n                }\n\n                Model.fn.set.call(this, field, value, initiator);\n\n                if (field == this.parentIdField) {\n                    this.parentId = this.get(this.parentIdField);\n                }\n                if (field == this.nameField) {\n                    this.name = this.get(this.nameField);\n                }\n                if (field == this.titleField) {\n                    this.title = this.get(this.titleField);\n                }\n                if (field == this.avatarField) {\n                    this.avatar = this.get(this.avatarField);\n                }\n            },\n\n            loaded: function(value) {\n                if (value !== undefined$1) {\n                    this._loaded = value;\n                } else {\n                    return this._loaded;\n                }\n            },\n\n            shouldSerialize: function(field) {\n                return Model.fn.shouldSerialize.call(this, field) && field !== \"_loaded\" && field != \"_error\" && field != \"_edit\" && !(this.parentIdField !== \"parentId\" && field === \"parentId\");\n            }\n        });\n\n        OrgChartModel.parentIdField = \"parentId\";\n        OrgChartModel.nameField = \"name\";\n        OrgChartModel.titleField = \"title\";\n        OrgChartModel.avatarField = \"avatar\";\n\n        OrgChartModel.define = function(base, options) {\n            if (options === undefined$1) {\n                options = base;\n                base = OrgChartModel;\n            }\n\n            var parentId = options.parentId || \"parentId\";\n            var name = options.name || \"name\";\n            var title = options.title || \"title\";\n            var avatar = options.avatar || \"avatar\";\n\n            options.parentIdField = parentId;\n            options.nameField = name;\n            options.titleField = title;\n            options.avatarField = avatar;\n\n            var model = Model.define(base, options);\n\n            if (parentId) {\n                model.parentIdField = parentId;\n            }\n            if (name) {\n                model.nameField = name;\n            }\n            if (title) {\n                model.titleField = title;\n            }\n            if (avatar) {\n                model.avatarField = avatar;\n            }\n\n            return model;\n        };\n\n        var OrgChartDataSource = TreeListDataSource.extend({\n            init: function(options) {\n                TreeListDataSource.fn.init.call(this, extend(true, {}, {\n                    schema: {\n                        modelBase: OrgChartModel,\n                        model: OrgChartModel\n                    }\n                }, options));\n            },\n\n            groupedItemsTree: function(field) {\n                var map = this._childrenMap(this.view()),\n                    defaultParentId = this._defaultParentId(),\n                    currentChildren = map[defaultParentId] || [],\n                    grouped = new Query(currentChildren).group({ field: field }).toArray();\n\n                return this._innerGroupedItemsTree(field, grouped, map);\n            },\n\n            itemChildren: function(item, fromView) {\n                var filter = {\n                    field: \"parentId\",\n                    operator: \"eq\",\n                    value: null\n                };\n\n                var order = (this._sort && this._sort.length) ? this._sort : {};\n                var itemId, data;\n\n                if (fromView) {\n                    data = this.view();\n                } else {\n                    data = this.data();\n                }\n\n                if (!!item) {\n                    itemId = item.get(\"id\");\n\n                    if (itemId === undefined$1 || itemId === null || itemId === \"\") {\n                        return [];\n                    }\n\n                    filter.value = itemId;\n                }\n\n                data = new Query(data).filter(filter).sort(order).toArray();\n\n                return data;\n            },\n\n            itemsTree: function(item, field) {\n                var data = [],\n                    current,\n                    items = this.itemChildren(item, true),\n                    children, i;\n\n                for (i = 0; i < items.length; i++) {\n                    current = items[i];\n\n                    if (current.get(\"expanded\")) {\n                        children = this.itemsTree(current, field);\n\n                        current = extend(true, {}, current);\n                        current.children = children;\n                    }\n\n                    current = extend(true, {}, current);\n                    data.push(current);\n                }\n\n                if (field !== null && field !== undefined$1) {\n                    data = new Query(data).group({ field: field }).toArray();\n                }\n\n                return data;\n            },\n\n            prospectParents: function(skippedItem, item) {\n                var data = [],\n                    current,\n                    items = this.itemChildren(item, false),\n                    children, i;\n\n                for (i = 0; i < items.length; i++) {\n                    current = items[i];\n\n                    if (current.get(\"id\") === skippedItem.get(\"id\")) {\n                        continue;\n                    }\n\n                    data.push(current);\n\n                    if (current.get(\"hasChildren\")) {\n                        children = this.prospectParents(skippedItem, current);\n\n                        data = data.concat(children);\n                    }\n                }\n\n                return data;\n            },\n\n            read: function(data) {\n                return DataSource.fn.read.call(this, data).then(this._loadExpanded.bind(this, data));\n            },\n\n            toggleChildren: function(item, expand) {\n                var defaultPromise = $.Deferred().resolve().promise(),\n                    loaded = item.loaded();\n\n                // reset error state\n                if (item._error) {\n                    item.expanded = false;\n                    item._error = undefined$1;\n                }\n\n                // toggle expanded state\n                if (typeof expand == \"undefined\") {\n                    expand = !item.expanded;\n                }\n\n                item.expanded = expand;\n\n                if (!loaded) {\n                    defaultPromise = this.load(item);\n                }\n\n                return defaultPromise;\n            },\n\n            _innerGroupedItemsTree: function(field, grouped, map) {\n                var group, i, j, itemId, innerGrouped, children, current, hasChildren;\n\n\n                for (i = 0; i < grouped.length; i++) {\n                    group = grouped[i];\n                    children = [];\n                    hasChildren = false;\n\n                    for (j = 0; j < group.items.length; j++) {\n                        current = group.items[j];\n\n                        if (!group.hasChildren && current.hasChildren) {\n                            group.hasChildren = true;\n                        }\n\n                        if (current.expanded) {\n                            group.expanded = true;\n                        }\n\n                        itemId = group.items[j].get(\"id\");\n                        children = children.concat(map[itemId]);\n                    }\n\n                    if (group.expanded) {\n                        innerGrouped = new Query(children).group({ field: field }).toArray();\n                        group.children = this._innerGroupedItemsTree(field, innerGrouped, map);\n                    }\n\n                    if (!group.hasChildren && children.length > 0) {\n                        group.hasChildren = true;\n                    }\n                }\n\n                return grouped;\n            },\n\n            _loadExpanded: function(data) {\n                var items, i, current;\n\n                if (!data) {\n                    return;\n                }\n\n                if (data.id !== null && data.id !== undefined$1) {\n                    items = this._byParentId(data.id);\n                } else {\n                    items = this._byParentId(this._defaultParentId());\n                }\n\n                for (i = 0; i < items.length; i++) {\n                    current = items[i];\n\n                    if (current.expanded && !current.loaded()) {\n                        this.toggleChildren(current, true);\n                    }\n                }\n            }\n        });\n\n        OrgChartDataSource.create = function(options) {\n            if (Array.isArray(options)) {\n                options = { data: options };\n            } else if (options instanceof ObservableArray) {\n                options = { data: options.toJSON() };\n            }\n\n            if (!(options instanceof OrgChartDataSource) && options instanceof DataSource) {\n                throw new Error(\"Incorrect DataSource type. Only OrgChartDataSource instances are supported\");\n            }\n\n            return options instanceof OrgChartDataSource ? options : new OrgChartDataSource(options);\n        };\n\n        extend(true, kendo.data, {\n            OrgChartModel: OrgChartModel,\n            OrgChartDataSource: OrgChartDataSource\n        });\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n        var kendo = window.kendo,\n            keys = kendo.keys,\n            encode = kendo.htmlEncode,\n            extend = $.extend,\n\n            NS = \".kendoOrgChartView\",\n\n            BLUR = \"blur\",\n            CLICK = \"click\",\n            COLLAPSE = \"collapse\",\n            EXPAND = \"expand\",\n            FOCUS = \"focus\",\n            KEYDOWN = \"keydown\",\n            MENU = \"menu\",\n            SELECT = \"select\",\n\n            DOT = \".\",\n            SPACE = \" \",\n            COMMA = \",\",\n            HASH = \"#\",\n            STRING = \"string\",\n            TABINDEX = \"tabindex\",\n            ID = \"id\",\n            UID = \"uid\",\n            PX = \"px\",\n            PLUS = \"plus\",\n            MINUS = \"minus\",\n\n            ARIA_OWNS = \"aria-owns\",\n            ARIA_SELECTED = \"aria-selected\";\n\n        var ORGCHART_STYLES = {\n            wrapper: \"k-orgchart\",\n            container: \"k-orgchart-container\",\n            line: \"k-orgchart-line\",\n            lineVertical: \"k-orgchart-line-v\",\n            lineHorizontal: \"k-orgchart-line-h\",\n            lineVerticalTop: \"k-orgchart-line-v-top\",\n            group: \"k-orgchart-group\",\n            groupVertical: \"k-orgchart-group-v\",\n            groupHorizontal: \"k-orgchart-group-h\",\n            nodesGroup: \"k-orgchart-node-group\",\n            nodesGroupContainer: \"k-orgchart-node-group-container\",\n            nodeContainer: \"k-orgchart-node-container\",\n            node: \"k-orgchart-node\",\n            card: \"k-orgchart-card\",\n            cardMenu: \"k-orgchart-card-menu\",\n            button: \"k-orgchart-button\",\n            focused: \"k-focus\",\n            plusIconSelector: \".k-i-plus,.k-svg-i-plus\",\n            menuItem: \"k-item\",\n            avatarPreview: \"k-orgchart-avatar-preview\",\n            update: \"k-orgchart-update\",\n            cancel: \"k-orgchart-cancel\",\n            vstack: \"k-vstack\",\n            hstack: \"k-hstack\"\n        };\n\n        var ROOT_TEMPLATE = ({ label }) => `<div role=\"tree\" aria-orientation=\"horizontal\" aria-label=\"${encode(label)}\" class=\"k-orgchart-group k-orgchart-level-1 k-pos-absolute k-hstack k-justify-content-center\"></div>`;\n\n        var GROUP_TEMPLATE = ({ guid, level }) => `<div role=\"group\" id=\"${encode(guid)}\" class=\"k-orgchart-level-${encode(level)} k-orgchart-group k-pos-absolute k-justify-content-around\"></div>`;\n\n        var NODE_GROUP_CONTAINER = ({ hasChildren, guid, expanded, level }) => {\n            var result = '<div role=\"treeitem\" ';\n\n            if (hasChildren && guid) {\n                result += `aria-owns=${encode(guid)} `;\n\n                if (!!expanded) {\n                    result += 'aria-expanded=\"true\" ';\n                } else {\n                    result += 'aria-expanded=\"false\" ';\n                }\n            }\n\n            result += `aria-keyshortcuts=\"Enter\" aria-level=\"${encode(level)}\" aria-selected=\"false\" class=\"k-orgchart-node-group-container\">`;\n\n            return result;\n        };\n\n        var NODE_CONTAINER = '<div class=\"k-orgchart-node-container k-justify-content-around\"></div>';\n\n        var NODE_CONTAINER_GROUPED = '<div role=\"group\" class=\"k-orgchart-node-container k-justify-content-around k-hstack\"></div>';\n\n        var ITEM_TEMPLATE = '<div class=\"k-orgchart-node k-vstack k-align-items-center\"></div>';\n\n        var BUTTON_TEMPLATE = ({ label, buttonSign }) => kendo.html.renderButton(`<button aria-label=\"${encode(label)}\" tabindex=\"-1\" class=\"k-orgchart-button\"></button>`, {\n            icon: encode(buttonSign)\n        });\n\n        var CARD_TEMPLATE = ({ color, avatar, name, title, editable, menuLabel }) => {\n            var result = `<div class=\"k-card-body k-hstack\" ${kendo.attr(\"style-border-color\")}=\"${encode(color)}\">`;\n\n            if (!!avatar) {\n                result += '<div class=\"k-avatar k-avatar-solid-primary k-avatar-solid k-avatar-lg k-rounded-full\">' +\n                    '<span class=\"k-avatar-image\">' +\n                        `<img alt=\"${encode(name)}\" src=\"${encode(avatar)}\">` +\n                    '</span>' +\n                '</div>';\n            }\n\n            result += '<div class=\"k-vstack k-card-title-wrap\">' +\n            `<div class=\"k-card-title k-text-ellipsis\">${encode(name)}</div>`;\n\n            if (title) {\n                result += '<span class=\"k-spacer\"></span>' +\n                `<div class=\"k-card-subtitle k-text-ellipsis\">${encode(title)}</div>`;\n            }\n\n            result += '</div>';\n\n            if (editable) {\n                result += '<span class=\"k-spacer\"></span>' +\n                '<div class=\"k-card-body-actions\">' +\n                    kendo.html.renderButton(`<button class=\"k-orgchart-card-menu\" role=\"button\" aria-label=\"${encode(menuLabel)}\" tabindex=\"-1\"></button>`, {\n                        icon: 'more-vertical',\n                        fillMode: \"flat\"\n                    }) +\n                '</div>';\n            }\n\n            result += '</div>';\n\n            return result;\n        };\n\n        var CARD_WRAPPER = ({ uid, guid, hasChildren, expanded, cssClass, level }) => {\n            var result = `<div role=\"treeitem\" data-uid=\"${encode(uid)}\" `;\n\n            if (hasChildren && guid) {\n                result += `aria-owns=${encode(guid)} `;\n\n                if (!!expanded) {\n                    result += 'aria-expanded=\"true\" ';\n                } else {\n                    result += 'aria-expanded=\"false\" ';\n                }\n            }\n\n            result += 'class=\"k-orgchart-card k-card ';\n\n            if (!!cssClass) {\n                result += `${encode(cssClass)}`;\n            }\n\n            result += `\" aria-keyshortcuts=\"Enter\" aria-level=\"${encode(level)}\" aria-selected=\"false\"></div>`;\n\n            return result;\n        };\n\n        var GROUPED_CARD_WRAPPER = ({ uid, level, cssClass }) => `<div role=\"treeitem\" data-uid=\"${encode(uid)}\" aria-level=\"${encode(level)}\" aria-selected=\"false\" aria-keyshortcuts=\"Enter\" ` +\n        'class=\"k-orgchart-card k-card ' +\n        `${cssClass ? encode(cssClass) : ''}` +\n        '\"></div>';\n\n        var View = kendo.Observable.extend({\n            init: function(element, options) {\n                this.element = element;\n                this.options = options || {};\n\n                kendo.Observable.fn.init.call(this);\n\n                this._attachEvents();\n            },\n\n            events: [\n                COLLAPSE,\n                EXPAND,\n                SELECT,\n                MENU\n            ],\n\n            destroy: function() {\n                kendo.ui.Widget.fn.destroy.call(this);\n                this.element.off(NS);\n            },\n\n            collapse: function() {\n                return false;\n            },\n\n            expand: function() {\n                return false;\n            },\n\n            jqueryGroupElement: function(group) {\n                if (!group) {\n                    return;\n                }\n\n                var jQueryElement = this._processItem(group);\n\n                if (!jQueryElement.hasClass(ORGCHART_STYLES.nodesGroupContainer)) {\n                    jQueryElement = jQueryElement.closest(DOT + ORGCHART_STYLES.nodesGroupContainer);\n                }\n\n                return jQueryElement && jQueryElement.length ? jQueryElement : null;\n            },\n\n            jqueryItemElement: function(item) {\n                if (!item) {\n                    return;\n                }\n\n                var jQueryElement = this._processItem(item);\n\n                if (!jQueryElement.hasClass(ORGCHART_STYLES.card)) {\n                    jQueryElement = jQueryElement.closest(DOT + ORGCHART_STYLES.card);\n                }\n\n                return jQueryElement && jQueryElement.length ? jQueryElement : null;\n            },\n\n            refresh: function() {\n                this._cacheFocused();\n                this._clearContent();\n                this._generateItemsTree();\n                this._calculateLevels();\n                this._render();\n            },\n\n            select: function(item) {\n                var $item = this._getToSelect(item),\n                    previousSelection = this.element.find(\"[tabindex=0]\");\n\n                if (!$item) {\n                    return;\n                }\n\n                previousSelection.removeAttr(TABINDEX)\n                    .removeClass(ORGCHART_STYLES.focused)\n                    .attr(ARIA_SELECTED, false);\n\n                $item.attr(TABINDEX, \"0\")\n                    .addClass(ORGCHART_STYLES.focused)\n                    .trigger(\"focus\")\n                    .attr(ARIA_SELECTED, true);\n            },\n\n            _attachEvents: function() {\n                var itemsSelector = DOT + ORGCHART_STYLES.card + COMMA + DOT + ORGCHART_STYLES.nodesGroupContainer;\n\n                this.element.on(KEYDOWN + NS, itemsSelector, this._onKeyDown.bind(this))\n                    .on(CLICK + NS, itemsSelector, this._onSelect.bind(this))\n                    .on(CLICK + NS, DOT + ORGCHART_STYLES.button, this._onButtonClick.bind(this))\n                    .on(FOCUS + NS, itemsSelector, this._onFocus.bind(this))\n                    .on(BLUR + NS, DOT + ORGCHART_STYLES.focused, this._onBlur.bind(this));\n            },\n\n            _cacheFocused: function() {\n                var focusableItem = this.element.find(\"[tabindex='0']\"),\n                    focusableDataItem = this._dataItems(focusableItem);\n\n                if (!focusableItem.length || !focusableDataItem || !focusableDataItem.length || !!this._idTabIndex) {\n                    return;\n                }\n\n                this._idTabIndex = focusableDataItem[0].get(ID);\n\n                if (focusableItem.hasClass(ORGCHART_STYLES.focused)) {\n                    this._shouldRestoreSelection = true;\n                } else {\n                    this._shouldRestoreSelection = false;\n                }\n            },\n\n            _calculateDimensions: function() {\n                var itemElement = this.element.find(DOT + this._selector).first();\n\n                if (!this._buttonHeight) {\n                    this._buttonHeight = this.element.find(DOT + ORGCHART_STYLES.button).first().outerHeight();\n                }\n\n                if (!this._spacing) {\n                    this._spacing = this.element.find(DOT + ORGCHART_STYLES.lineVertical).first().outerHeight();\n                }\n\n                if (!this._itemWidth) {\n                    this._itemWidth = this._calculateItemWidth();\n                }\n\n                if (!this._itemHeight) {\n                    this._itemHeight = itemElement.outerHeight(true);\n                }\n            },\n\n            _calculateItemWidth: function() {\n                return false;\n            },\n\n            _calculateLevel: function() {\n                return false;\n            },\n\n            _calculateLevels: function() {\n                return false;\n            },\n\n            _clearContent: function() {\n                this.element.empty();\n            },\n\n            _dataItem: function(item) {\n                var $item = this.jqueryItemElement(item);\n\n                if (!$item || !$item.data(UID)) {\n                    return;\n                }\n\n                return this.dataSource.getByUid($item.data(UID));\n            },\n\n            _dataItems: function() {\n                return false;\n            },\n\n            _generateItemsTree: function() {\n                return false;\n            },\n\n            _getToSelect: function() {\n                return false;\n            },\n\n            _groupIsVertical: function() {\n                return false;\n            },\n\n            _keyCollapse: function() {\n                return false;\n            },\n\n            _keyExpand: function() {\n                return false;\n            },\n\n            _keyNext: function() {\n                return false;\n            },\n\n            _keyPrev: function() {\n                return false;\n            },\n\n            _keyEnter: function() {\n                return false;\n            },\n\n            _keyEscape: function() {\n                return false;\n            },\n\n            _keyEnd: function() {\n                var target = this.element.find(DOT + ORGCHART_STYLES.card).last(),\n                    previous = this.element.find(\"[tabindex=0]\");\n\n\n                if (previous[0] === target[0]) {\n                    return;\n                }\n\n                this.trigger(SELECT, {\n                    item: target,\n                    dataItems: [this._dataItem(target)]\n                });\n            },\n\n            _keyHome: function() {\n                var target = this.element.find(DOT + ORGCHART_STYLES.card).first(),\n                    previous = this.element.find(\"[tabindex=0]\");\n\n\n                if (previous[0] === target[0]) {\n                    return;\n                }\n\n                this.trigger(SELECT, {\n                    item: target,\n                    dataItems: [this._dataItem(target)]\n                });\n            },\n\n            _onBlur: function() {\n                this.element.find(DOT + ORGCHART_STYLES.focused).removeClass(ORGCHART_STYLES.focused);\n            },\n\n            _onKeyDown: function(e) {\n                var key = e.keyCode,\n                    focused = this.element.find(\"[tabindex=0]\"),\n                    isRtl = kendo.support.isRtl(this.element),\n                    nextKey = isRtl ? [ keys.LEFT ] : [ keys.RIGHT ],\n                    prevKey = isRtl ? [ keys.RIGHT ] : [ keys.LEFT ],\n                    expandKey = keys.DOWN,\n                    collapseKey = keys.UP,\n                    groupIsVertical;\n\n                if (!focused) {\n                    return;\n                }\n\n                groupIsVertical = this._groupIsVertical(focused);\n\n                if (groupIsVertical) {\n                    nextKey.push(keys.DOWN);\n                    prevKey.push(keys.UP);\n                }\n\n                if (key === keys.HOME) {\n                    this._keyHome();\n                } else if (key === keys.END) {\n                    this._keyEnd();\n                } else if (nextKey.indexOf(key) > -1) {\n                    e.preventDefault();\n                    e.stopPropagation();\n\n                    this._keyNext(focused);\n                } else if (prevKey.indexOf(key) > -1) {\n                    e.preventDefault();\n                    e.stopPropagation();\n\n                    this._keyPrev(focused);\n                } else if (key === expandKey) {\n                    e.preventDefault();\n                    e.stopPropagation();\n\n                    this._keyExpand(focused);\n                } else if (key === collapseKey) {\n                    e.preventDefault();\n                    e.stopPropagation();\n\n                    this._keyCollapse(focused);\n                } else if (key === keys.ENTER) {\n                    this._keyEnter(focused);\n                } else if (key === keys.ESC) {\n                    this._keyEscape(focused);\n                }\n            },\n\n            _onButtonClick: function(e) {\n                var that = this,\n                    target = $(e.currentTarget),\n                    shouldExpand = target.find(ORGCHART_STYLES.plusIconSelector).length > 0 ? true : false,\n                    el = target.siblings(DOT + this._selector),\n                    items = this._dataItems(el),\n                    i;\n\n                if (shouldExpand) {\n                    if (that.trigger(EXPAND, { item: el, dataItems: items })) {\n                        return;\n                    }\n                } else {\n                    if (that.trigger(COLLAPSE, { item: el, dataItems: items })) {\n                        return;\n                    }\n                }\n\n                for (i = 0; i < items.length; i++) {\n                    that.dataSource.toggleChildren(items[i], shouldExpand).then(this.refresh.bind(this));\n                }\n            },\n\n            _onFocus: function() {\n                return false;\n            },\n\n            _onSelect: function() {\n                return false;\n            },\n\n            _orientation: function() {\n                return false;\n            },\n\n            _processItem: function(el) {\n                var jQueryElement;\n\n                if (kendo.type(el) === STRING) {\n                    jQueryElement = this.element.find(el);\n                } else if (kendo.isElement(el)) {\n                    jQueryElement = $(el);\n                } else if (el instanceof jQuery) {\n                    jQueryElement = el;\n                }\n\n                return jQueryElement;\n            },\n\n            _render: function() {\n                var items = this._itemsTree,\n                    root = $(kendo.template(ROOT_TEMPLATE)({ label: this.options.messages.label })),\n                    wrapperContainer = this.element,\n                    total = this._total,\n                    widgetPadding = wrapperContainer.closest(DOT + ORGCHART_STYLES.wrapper).css(\"padding-left\"),\n                    totalWidth;\n\n                wrapperContainer.append(root);\n\n                this._renderGroup(root, items, 1, this._total, 0);\n                totalWidth = total * this._itemWidth + (total - 1) * this._spacing;\n                root.width(totalWidth);\n                wrapperContainer.width(totalWidth + Number(widgetPadding.split(PX)[0]));\n\n                this._setHeight();\n                this._restoreSelection();\n            },\n\n            _renderNode: function(cardWrapperTemplate, contentTemplate, item, level, guid) {\n                var messages = this.options.messages,\n                    borderColors = this.options.cardsColors || kendo.getSeriesColors(),\n                    node = $(ITEM_TEMPLATE),\n                    content, cardWrapper;\n\n                cardWrapper = $(cardWrapperTemplate(extend(true, {}, item, {\n                    menuLabel: messages.menuLabel,\n                    level: level,\n                    guid: guid,\n                    editable: !!this.options.editable,\n                    color: borderColors[level - 1] || borderColors[0]\n                })));\n\n                if (item.attributes) {\n                    cardWrapper.attr(JSON.parse(JSON.stringify(item.attributes)));\n                }\n\n                content = $(contentTemplate(extend(true, {}, item, {\n                    menuLabel: messages.menuLabel,\n                    level: level,\n                    guid: guid,\n                    editable: !!this.options.editable,\n                    color: borderColors[level - 1] || borderColors[0]\n                })));\n\n                cardWrapper.append(content);\n                node.append(cardWrapper);\n\n                kendo.applyStylesFromKendoAttributes(node, [\"border-color\"]);\n\n                return node;\n            },\n\n            _renderGroup: function() {\n                return false;\n            },\n\n            _restoreSelection: function() {\n                var toFocusItem, toFocus;\n\n                if (!this._idTabIndex) {\n                    toFocus = this.element.find(DOT + this._selector).first();\n\n                    toFocus.attr(TABINDEX, \"0\");\n                } else {\n                    toFocusItem = this.dataSource.get(this._idTabIndex);\n                    toFocus = toFocusItem ? this._getToFocus(toFocusItem) : this.element.find(DOT + this._selector).first();\n                    toFocus.attr(TABINDEX, \"0\");\n\n                    this._idTabIndex = null;\n                }\n\n                if (this._shouldRestoreSelection) {\n                    this._shouldRestoreSelection = false;\n                    this._preventTriggerSelect = true;\n                    toFocus.trigger(\"focus\");\n                    toFocus.addClass(ORGCHART_STYLES.focused);\n                }\n            },\n\n            _setHeight: function() {\n                var selector = this._selector,\n                    elements = this.element.find(DOT + ORGCHART_STYLES.button + COMMA + DOT + selector),\n                    min = Number.MAX_VALUE, max = 0,\n                    buttonHeight;\n\n                this._calculateDimensions();\n\n                buttonHeight = this._buttonHeight;\n                this.element.find(DOT + ORGCHART_STYLES.lineVerticalTop).height(this._spacing + buttonHeight / 2);\n\n                elements.each(function(i, el) {\n                    var top = $(el).offset().top,\n                        bottom = top + $(el).outerHeight(true);\n\n                    if (top < min) {\n                        min = top;\n                    }\n\n                    if (bottom > max) {\n                        max = bottom;\n                    }\n                });\n\n                this.element.height(max - min);\n            }\n        });\n\n        var SingleView = View.extend({\n            init: function(element, options) {\n                View.fn.init.call(this, element, options);\n\n                this._selector = ORGCHART_STYLES.card;\n            },\n\n            collapse: function(item) {\n                var $item = this.jqueryItemElement(item);\n\n                if (!$item) {\n                    return;\n                }\n\n                this.dataSource.toggleChildren(this._dataItem($item), false).then(this.refresh.bind(this));\n            },\n\n            expand: function(item) {\n                var $item = this.jqueryItemElement(item);\n\n                if (!$item) {\n                    return;\n                }\n\n                this.dataSource.toggleChildren(this._dataItem($item), true).then(this.refresh.bind(this));\n            },\n\n            _calculateItemWidth: function() {\n                return this.element.find(DOT + this._selector).first().outerWidth(true);\n            },\n\n            _calculateLevel: function(items, level) {\n                var itemsLength = items.length,\n                    maxColumnsPerLevel = this._maxColumnsPerLevel,\n                    nestedChildren = false,\n                    shouldReset = false,\n                    previousMax, i, item;\n\n                if (!maxColumnsPerLevel[level] || maxColumnsPerLevel[level] < itemsLength) {\n                    previousMax = maxColumnsPerLevel[level];\n                    shouldReset = true;\n                    maxColumnsPerLevel[level] = itemsLength;\n                }\n\n                for (i = 0; i < itemsLength; i++) {\n                    item = items[i];\n\n                    if (item.hasChildren) {\n                        nestedChildren = true;\n\n                        if (item.expanded) {\n                            this._calculateLevel(item.children, level + 1);\n                        }\n                    }\n                }\n\n                if (!nestedChildren && shouldReset && level > 0) {\n                    shouldReset = false;\n                    maxColumnsPerLevel[level] = previousMax || 1;\n                }\n            },\n\n            _calculateLevels: function() {\n                var items = this._itemsTree,\n                    maxColumnsPerLevel = this._maxColumnsPerLevel = [],\n                    total = 1,\n                    i;\n\n                this._calculateLevel(items, 0);\n\n                for (i = 0; i < maxColumnsPerLevel.length; i++) {\n                    total = total * maxColumnsPerLevel[i];\n                }\n\n                this._total = total;\n            },\n\n            _dataItems: function(container) {\n                var item = this.dataSource.getByUid(container.data(UID));\n\n                if (item) {\n                    return [item];\n                } else {\n                    return null;\n                }\n            },\n\n            _generateItemsTree: function() {\n                this._itemsTree = this.dataSource.itemsTree();\n            },\n\n            _getToFocus: function(item) {\n                return this.element.find(\"[data-uid='\" + item.get(UID) + \"']\");\n            },\n\n            _getToSelect: function(el) {\n                return this.jqueryItemElement(el);\n            },\n\n            _groupIsVertical: function(focused) {\n                var itemGroup = focused.closest(DOT + ORGCHART_STYLES.group);\n\n                return itemGroup.hasClass(ORGCHART_STYLES.groupVertical);\n            },\n\n            _keyCollapse: function(focused) {\n                var dataItem = this._dataItem(focused),\n                    parentUid, parentItem;\n\n                if (dataItem.expanded) {\n                    if (!this.trigger(COLLAPSE, { item: focused, dataItems: [dataItem] })) {\n                        this.collapse(focused);\n                    }\n                } else if (dataItem.parentId) {\n                    parentUid = this.dataSource.get(dataItem.parentId).get(UID);\n                    parentItem = this.element.find(\"[data-uid='\" + parentUid + \"']\");\n\n                    this.trigger(SELECT, {\n                        item: parentItem,\n                        dataItems: [this._dataItem(parentItem)]\n                    });\n                }\n            },\n\n            _keyEnter: function(focused) {\n                if (focused.find(DOT + ORGCHART_STYLES.cardMenu).length > 0) {\n                    this.trigger(MENU, focused);\n                }\n            },\n\n            _keyExpand: function(focused) {\n                var dataItem = this._dataItem(focused),\n                    ownedGroup = this.element.find(HASH + focused.attr(ARIA_OWNS)),\n                    childItem;\n\n                if (!dataItem.hasChildren) {\n                    return;\n                }\n\n                if (!dataItem.expanded) {\n                    if (!this.trigger(EXPAND, { item: focused, dataItems: [dataItem] })) {\n                        this.expand(focused);\n                    }\n                } else {\n                    childItem = ownedGroup.find(DOT + this._selector).first();\n\n                    this.trigger(SELECT, {\n                        item: childItem,\n                        dataItems: [this._dataItem(childItem)]\n                    });\n                }\n            },\n\n            _keyNext: function(focused) {\n                var dataItem = this._dataItem(focused),\n                    next = focused.parent().next(DOT + ORGCHART_STYLES.node).find(DOT + ORGCHART_STYLES.card),\n                    ownedGroup = this.element.find(HASH + focused.attr(ARIA_OWNS));\n\n                if (!next.length && dataItem.hasChildren && dataItem.expanded) {\n                    next = ownedGroup.find(DOT + ORGCHART_STYLES.card).first();\n                }\n\n                if (next.length === 0 || next.hasClass(ORGCHART_STYLES.focused)) {\n                    return;\n                }\n\n                this.trigger(SELECT, {\n                    item: next,\n                    dataItems: [this._dataItem(next)]\n                });\n            },\n\n            _keyPrev: function(focused) {\n                var dataItem = this._dataItem(focused),\n                    prev = focused.parent().prev(DOT + ORGCHART_STYLES.node).find(DOT + ORGCHART_STYLES.card),\n                    parentUid;\n\n                if (!prev.length && dataItem.parentId) {\n                    parentUid = this.dataSource.get(dataItem.parentId).get(UID);\n                    prev = this.element.find(\"[data-uid='\" + parentUid + \"']\");\n                }\n\n                if (prev.length === 0 || prev.hasClass(ORGCHART_STYLES.focused)) {\n                    return;\n                }\n\n                this.trigger(SELECT, {\n                    item: prev,\n                    dataItems: [this._dataItem(prev)]\n                });\n            },\n\n            _onFocus: function(e) {\n                var currentTarget = $(e.currentTarget),\n                    target = $(e.target);\n\n                if (this._preventTriggerSelect) {\n                    e.stopPropagation();\n                    this._preventTriggerSelect = false;\n                    return;\n                }\n\n                if (target.hasClass(ORGCHART_STYLES.cardMenu)) {\n                    if (target.closest(\"[tabindex='0']\").length > 0) {\n                        e.stopPropagation();\n                        return;\n                    } else {\n                        this._preventTriggerSelect = true;\n                    }\n                }\n\n                if (!currentTarget.hasClass(ORGCHART_STYLES.card)) {\n                    currentTarget = currentTarget.closest(DOT + ORGCHART_STYLES.card);\n                }\n\n                if (!currentTarget.hasClass(ORGCHART_STYLES.focused)) {\n                    this.trigger(SELECT, {\n                        item: currentTarget,\n                        dataItems: [this._dataItem(currentTarget)]\n                    });\n                }\n            },\n\n            _onSelect: function(e) {\n                var target = $(e.currentTarget),\n                    item = target.hasClass(ORGCHART_STYLES.card) ? target : target.closest(DOT + ORGCHART_STYLES.card),\n                    menuButtonTarget = $(e.target).hasClass(ORGCHART_STYLES.cardMenu) ? $(e.target) : $(e.target).closest(DOT + ORGCHART_STYLES.cardMenu);\n\n                if (menuButtonTarget.length > 0) {\n                    return;\n                }\n\n                if (!target.hasClass(ORGCHART_STYLES.focused)) {\n                    this.trigger(SELECT, {\n                        item: item,\n                        dataItems: [this._dataItem(item)]\n                    });\n                }\n            },\n\n            _orientation: function(group, level, vertical) {\n                var vLine = $(\"<div>\").addClass(ORGCHART_STYLES.line + SPACE + ORGCHART_STYLES.lineVertical);\n\n                if (vertical && level > 1) {\n                    group.addClass(ORGCHART_STYLES.groupVertical + SPACE + ORGCHART_STYLES.vstack);\n                    group.find(DOT + ORGCHART_STYLES.nodeContainer).addClass(ORGCHART_STYLES.vstack);\n\n                    if (group.find(DOT + ORGCHART_STYLES.button).length === 0 || group.find(DOT + ORGCHART_STYLES.card).length === 1) {\n                        group.find(DOT + ORGCHART_STYLES.card).before(vLine.clone());\n                        group.find(DOT + ORGCHART_STYLES.node).first().find(DOT + ORGCHART_STYLES.lineVertical).addClass(ORGCHART_STYLES.lineVerticalTop);\n                    } else if (level > 1) {\n                        group.find(DOT + ORGCHART_STYLES.card).first().before(vLine.clone());\n                    }\n                } else {\n                    group.addClass(ORGCHART_STYLES.groupHorizontal + SPACE + ORGCHART_STYLES.hstack);\n                    group.find(DOT + ORGCHART_STYLES.nodeContainer).addClass(ORGCHART_STYLES.hstack);\n\n                    if (level > 1) {\n                        group.find(DOT + ORGCHART_STYLES.card).before(vLine.clone().addClass(ORGCHART_STYLES.lineVerticalTop));\n                    }\n                }\n            },\n\n            _renderGroup: function(group, items, level, parentColumns, parentLeft) {\n                var vertical = true,\n                    nodeContainer;\n\n                    nodeContainer = $(NODE_CONTAINER).css(\"width\", \"100%\");\n                    group.append(nodeContainer);\n                    vertical = this._renderInner(nodeContainer, items, level, parentColumns, parentLeft);\n\n                    this._orientation(group, level, vertical);\n            },\n\n            _renderInner: function(nodeContainer, items, level, parentColumns, parentLeft) {\n                var buttonTemplate = kendo.template(BUTTON_TEMPLATE),\n                    cardWrapperTemplate = kendo.template(CARD_WRAPPER),\n                    numberOfColumns = parentColumns / items.length,\n                    vertical = true,\n                    vLine = $(\"<div>\").addClass(ORGCHART_STYLES.line + SPACE + ORGCHART_STYLES.lineVertical),\n                    hLine = $(\"<div>\").addClass(ORGCHART_STYLES.line + SPACE + ORGCHART_STYLES.lineHorizontal),\n                    messages = this.options.messages,\n                    i, item, guid, node, button, innerGroup, itemWidth, spacing, contentTemplate;\n\n                if (!this.options.template) {\n                    contentTemplate = kendo.template(CARD_TEMPLATE);\n                } else if (typeof this.options.template === \"function\") {\n                    contentTemplate = this.options.template;\n                } else {\n                    contentTemplate = kendo.template(this.options.template);\n                }\n\n                for (i = 0; i < items.length; i++) {\n                    item = items[i];\n                    guid = kendo.guid();\n\n                    node = this._renderNode(cardWrapperTemplate, contentTemplate, item, level, guid);\n\n                    if (item.hasChildren) {\n                        node.append(vLine.clone());\n                        button = $(buttonTemplate({ buttonSign: item.expanded ? MINUS : PLUS, label: item.expanded ? messages.collapse : messages.expand }));\n                        node.append(button);\n                    }\n\n                    nodeContainer.append(node);\n\n                    this._calculateDimensions();\n\n                    itemWidth = this._itemWidth;\n                    spacing = this._spacing;\n\n                    if (item.hasChildren) {\n                        vertical = false;\n\n                        if (item.expanded) {\n                            innerGroup = this._renderInnerGroup(item, numberOfColumns, parentLeft, i, level, guid);\n                        }\n                    }\n\n                    if (!!innerGroup && innerGroup.hasClass(ORGCHART_STYLES.groupHorizontal) && item.expanded && !!item.children && item.children.length > 1) {\n                        button.after(hLine.clone().css({\n                            width: (numberOfColumns - numberOfColumns / item.children.length) * (itemWidth + spacing) + PX,\n                            \"margin-top\": this._buttonHeight / -2 + PX\n                        }));\n                    }\n                }\n\n                if (numberOfColumns > 1 && !vertical) {\n                    nodeContainer.find(DOT + ORGCHART_STYLES.node).width((numberOfColumns - 1) * (spacing + itemWidth));\n                }\n\n                return vertical;\n            },\n\n            _renderInnerGroup: function(item, numberOfColumns, parentLeft, i, level, guid) {\n                var itemWidth = this._itemWidth,\n                    spacing = this._spacing,\n                    width = numberOfColumns * itemWidth + (numberOfColumns - 1) * spacing,\n                    left = (i * numberOfColumns * itemWidth) + parentLeft,\n                    groupTemplate = kendo.template(GROUP_TEMPLATE),\n                    offsetDirection = kendo.support.isRtl(this.element) ? \"right\" : \"left\",\n                    top = level * (this._itemHeight + this._buttonHeight + spacing) + spacing * (level - 1) - this._buttonHeight / 2,\n                    innerGroup;\n\n                if (i > 0) {\n                    left += (i * numberOfColumns * spacing);\n                }\n\n                innerGroup = $(groupTemplate({\n                    guid: guid,\n                    level: level + 1\n                }));\n\n                innerGroup.css({\n                    width: width + PX,\n                    top: top + PX\n                });\n\n                innerGroup.css(offsetDirection, left + PX);\n\n                this.element.append(innerGroup);\n                this._renderGroup(innerGroup, item.children, level + 1, numberOfColumns, left);\n\n                return innerGroup;\n            }\n        });\n\n        var GroupedView = View.extend({\n            init: function(element, options) {\n                View.fn.init.call(this, element, options);\n\n                this._selector = ORGCHART_STYLES.nodesGroupContainer;\n            },\n\n            collapse: function(group) {\n                var $group = this.jqueryGroupElement(group),\n                    dataItems, i;\n\n                if (!$group) {\n                    return;\n                }\n\n                dataItems = this._dataItems($group);\n\n                for (i = 0; i < dataItems.length; i++) {\n                    this.dataSource.toggleChildren(dataItems[i], false).then(this.refresh.bind(this));\n                }\n            },\n\n            expand: function(group) {\n                var $group = this.jqueryGroupElement(group),\n                    dataItems, i;\n\n                if (!$group) {\n                    return;\n                }\n\n                dataItems = this._dataItems($group);\n\n                for (i = 0; i < dataItems.length; i++) {\n                    this.dataSource.toggleChildren(dataItems[i], true).then(this.refresh.bind(this));\n                }\n            },\n\n            _dataItems: function(container) {\n                var ds = this.dataSource,\n                    dataItems = [],\n                    items, item, current;\n\n                if (container.hasClass(ORGCHART_STYLES.card)) {\n                    item = ds.getByUid(container.data(UID));\n\n                    if (item) {\n                        dataItems.push(item);\n                    }\n                } else if (container.hasClass(ORGCHART_STYLES.nodesGroupContainer)) {\n                    this._groupFocused = true;\n\n                    items = container.find(DOT + ORGCHART_STYLES.card);\n\n                    items.each(function(i, item) {\n                        current = ds.getByUid(item.getAttribute(\"data-uid\"));\n\n                        if (current) {\n                            dataItems.push(current);\n                        }\n                    });\n                }\n\n                return dataItems;\n            },\n\n            _calculateItemWidth: function() {\n                var itemElement = this.element.find(DOT + this._selector).first(),\n                    cardWidth = this.element.find(DOT + ORGCHART_STYLES.card).first().outerWidth(true),\n                    padding = Number(itemElement.css(\"padding-left\").split(PX)[0]),\n                    border = Number(itemElement.css(\"border-left\").split(PX)[0]);\n\n                return cardWidth + 2 * padding + 2 * border;\n            },\n\n            _calculateLevel: function(groups, level) {\n                var groupsLength = groups.length,\n                    nestedChildren = false,\n                    maxColumns = 0,\n                    currentLength, i, group;\n\n                this._maxColumnsPerLevel[level] = this._maxColumnsPerLevel[level] || 0;\n                this._maxGroups[level] = this._maxGroups[level] || 0;\n\n                for (i = 0; i < groupsLength; i++) {\n                    group = groups[i];\n                    currentLength = group.items.length;\n\n                    if (currentLength > maxColumns) {\n                        maxColumns = currentLength;\n                    }\n\n                    group = groups[i];\n\n                    if (group.hasChildren) {\n                        nestedChildren = true;\n\n                        if (group.expanded) {\n                            this._calculateLevel(group.children, level + 1);\n                        }\n                    }\n                }\n\n                if (groupsLength > this._maxGroups[level]) {\n                    this._maxGroups[level] = groupsLength;\n                }\n\n                if (!nestedChildren) {\n                    maxColumns = 1;\n                }\n\n                if (maxColumns > this._maxColumnsPerLevel[level]) {\n                    this._maxColumnsPerLevel[level] = maxColumns;\n                }\n            },\n\n            _calculateLevels: function() {\n                var items = this._itemsTree,\n                    maxColumnsPerLevel = this._maxColumnsPerLevel = [],\n                    maxGroups = this._maxGroups = [],\n                    total = 1,\n                    i, currentTotal;\n\n                this._calculateLevel(items, 0);\n\n                for (i = maxColumnsPerLevel.length - 1; i >= 0; i--) {\n                    currentTotal = maxColumnsPerLevel[i] * maxGroups[i];\n\n                    if (total > maxColumnsPerLevel[i]) {\n                        total = total * maxGroups[i];\n                    } else if (total < currentTotal) {\n                        total = currentTotal;\n                    }\n                }\n\n                this._total = total;\n            },\n\n            _generateItemsTree: function() {\n                this._itemsTree = this.dataSource.groupedItemsTree(this.options.groupField);\n            },\n\n            _getToFocus: function(item) {\n                if (!this._groupFocused) {\n                    return this.element.find(\"[data-uid='\" + item.get(UID) + \"']\");\n                } else {\n                    this._groupFocused = false;\n                    return this.element.find(\"[data-uid='\" + item.get(UID) + \"']\").closest(DOT + ORGCHART_STYLES.nodesGroupContainer);\n                }\n            },\n\n            _getToSelect: function(el) {\n                var item = this.jqueryItemElement(el);\n\n                return item || this.jqueryGroupElement(el);\n            },\n\n            _groupIsVertical: function(focused) {\n                var itemGroup = focused.closest(DOT + ORGCHART_STYLES.nodeContainer);\n\n                return itemGroup.hasClass(ORGCHART_STYLES.vstack);\n            },\n\n            _keyCollapse: function(focused) {\n                var dataItems = [],\n                    parentUid, expanded;\n\n                dataItems = this._dataItems(focused);\n\n                expanded = dataItems.some(function(item) {\n                    return item.expanded;\n                });\n\n                if (expanded) {\n                    if (focused.hasClass(ORGCHART_STYLES.card)) {\n                        focused = focused.closest(DOT + ORGCHART_STYLES.nodesGroupContainer);\n                        dataItems = this._dataItems(focused);\n                    }\n\n                    if (!this.trigger(COLLAPSE, { item: focused, dataItems: dataItems })) {\n                        this.collapse(focused);\n                    }\n                } else if (dataItems[0].parentId) {\n                    parentUid = this.dataSource.get(dataItems[0].parentId).get(UID);\n\n                    this.trigger(SELECT, {\n                        item: this.element.find(\"[data-uid='\" + parentUid + \"']\").closest(DOT + this._selector),\n                        dataItems: dataItems\n                    });\n                }\n            },\n\n            _keyEnter: function(focused) {\n                var toSelect,\n                    dataItems = [];\n\n                if (focused.hasClass(ORGCHART_STYLES.card) && focused.find(DOT + ORGCHART_STYLES.cardMenu).length > 0) {\n                    this.trigger(MENU, focused);\n                } else {\n                    toSelect = focused.find(DOT + ORGCHART_STYLES.card).first();\n                    dataItems = this._dataItems(toSelect);\n\n                    this.trigger(SELECT, {\n                        item: toSelect,\n                        dataItems: dataItems\n                    });\n                }\n            },\n\n            _keyEscape: function(focused) {\n                if (!focused.hasClass(ORGCHART_STYLES.card)) {\n                    return;\n                }\n\n                var group = focused.closest(DOT + ORGCHART_STYLES.nodesGroupContainer),\n                    dataItems = this._dataItems(group);\n\n                this.trigger(SELECT, {\n                    item: group,\n                    dataItems: dataItems\n                });\n            },\n\n            _keyExpand: function(focused) {\n                var ownedGroupId = focused.attr(ARIA_OWNS) || focused.closest(DOT + this._selector).attr(ARIA_OWNS),\n                    ownedGroup = this.element.find(HASH + ownedGroupId),\n                    dataItems = this._dataItems(focused),\n                    hasChildren, expanded, item;\n\n                hasChildren = dataItems.some(function(item) {\n                    return item.hasChildren;\n                });\n\n                if (!hasChildren) {\n                    return;\n                }\n\n                expanded = dataItems.some(function(item) {\n                    return item.expanded;\n                });\n\n                if (!expanded) {\n                    if (focused.hasClass(ORGCHART_STYLES.card)) {\n                        focused = focused.closest(DOT + ORGCHART_STYLES.nodesGroupContainer);\n                        dataItems = this._dataItems(focused);\n                    }\n\n                    if (!this.trigger(EXPAND, { item: focused, dataItems: dataItems })) {\n                        this.expand(focused);\n                    }\n                } else {\n                    item = ownedGroup.find(DOT + this._selector).first();\n\n                    this.trigger(SELECT, {\n                        item: item,\n                        dataItems: this._dataItems(item)\n                    });\n                }\n            },\n\n            _keyNext: function(focused) {\n                var ownedGroup = this.element.find(HASH + focused.attr(ARIA_OWNS)),\n                    dataItems = this._dataItems(focused),\n                    hasChildren = dataItems.some(function(item) {\n                        return item.hasChildren;\n                    }),\n                    expanded = dataItems.some(function(item) {\n                        return item.expanded;\n                    }),\n                    next;\n\n                    if (focused.hasClass(ORGCHART_STYLES.card)) {\n                        next = focused.parent().next(DOT + ORGCHART_STYLES.node).find(DOT + ORGCHART_STYLES.card);\n                    } else {\n                        next = focused.parent().next(DOT + ORGCHART_STYLES.nodesGroup).find(DOT + ORGCHART_STYLES.nodesGroupContainer);\n                    }\n\n                if (!next.length && hasChildren && expanded) {\n                    next = ownedGroup.find(DOT + this._selector).first();\n                }\n\n                if (next.length === 0) {\n                    return;\n                }\n\n                this.trigger(SELECT, {\n                    item: next,\n                    dataItems: this._dataItems(next)\n                });\n            },\n\n            _keyPrev: function(focused) {\n                var dataItems = this._dataItems(focused),\n                    parentUid, prev;\n\n                if (focused.hasClass(ORGCHART_STYLES.card)) {\n                    prev = focused.parent().prev(DOT + ORGCHART_STYLES.node).find(DOT + ORGCHART_STYLES.card);\n                } else {\n                    prev = focused.parent().prev(DOT + ORGCHART_STYLES.nodesGroup).find(DOT + ORGCHART_STYLES.nodesGroupContainer);\n                }\n\n                if (!prev.length && dataItems[0].parentId) {\n                    parentUid = this.dataSource.get(dataItems[0].parentId).get(UID);\n                    prev = this.element.find(\"[data-uid='\" + parentUid + \"']\").closest(DOT + this._selector);\n                }\n\n                if (prev.length === 0) {\n                    return;\n                }\n\n                this.trigger(SELECT, {\n                    item: prev,\n                    dataItems: this._dataItems(prev)\n                });\n            },\n\n            _onFocus: function(e) {\n                var target = $(e.target),\n                    items, current;\n\n                if (this._preventTriggerSelect) {\n                    e.stopPropagation();\n                    this._preventTriggerSelect = false;\n                    return;\n                }\n\n                if (target.hasClass(ORGCHART_STYLES.cardMenu)) {\n                    if (target.closest(\"[tabindex='0']\").length > 0) {\n                        e.stopPropagation();\n                        return;\n                    } else {\n                        this._preventTriggerSelect = true;\n                    }\n                }\n\n                if (!target.hasClass(ORGCHART_STYLES.card) && !target.hasClass(ORGCHART_STYLES.nodesGroupContainer)) {\n                    current = target.closest(DOT + ORGCHART_STYLES.card);\n\n                    if (!current.length) {\n                        current = target.closest(DOT + ORGCHART_STYLES.nodesGroupContainer);\n                    }\n\n                    target = current;\n                }\n\n                if (target.length === 0) {\n                    return;\n                }\n\n                items = this._dataItems(target);\n\n                if (!target.hasClass(ORGCHART_STYLES.focused)) {\n                    e.stopPropagation();\n                    this.trigger(SELECT, {\n                        item: target,\n                        dataItems: items\n                    });\n                }\n            },\n\n            _onSelect: function(e) {\n                var target = $(e.target),\n                    previousSelection = this.element.find(\"[tabindex=0]\"),\n                    items, current;\n\n                if (!target.hasClass(ORGCHART_STYLES.card) && !target.hasClass(ORGCHART_STYLES.nodesGroupContainer)) {\n                    current = target.closest(DOT + ORGCHART_STYLES.card);\n\n                    if (!current.length) {\n                        current = target.closest(DOT + ORGCHART_STYLES.nodesGroupContainer);\n                    }\n\n                    target = current;\n                }\n\n                if (target.length === 0 || previousSelection[0] === target[0]) {\n                    return;\n                }\n\n                items = this._dataItems(target);\n\n                this.trigger(SELECT, {\n                    item: target,\n                    dataItems: items\n                });\n            },\n\n            _orientation: function(group, level, vertical) {\n                var vLine = $(\"<div>\").addClass(ORGCHART_STYLES.line + SPACE + ORGCHART_STYLES.lineVertical + SPACE + ORGCHART_STYLES.lineVerticalTop);\n\n                group.addClass(ORGCHART_STYLES.hstack);\n\n                if (level > 1) {\n                    group.find(DOT + ORGCHART_STYLES.nodesGroupContainer).before(vLine.clone());\n                }\n\n                if (vertical && level > 1) {\n                    group.find(DOT + ORGCHART_STYLES.nodeContainer).removeClass(ORGCHART_STYLES.hstack);\n                    group.find(DOT + ORGCHART_STYLES.nodeContainer).addClass(ORGCHART_STYLES.vstack);\n                } else {\n                    group.addClass(ORGCHART_STYLES.groupHorizontal);\n                }\n            },\n\n            _renderChildren: function(item, index, numberOfColumns, level, nodesGroup, parentLeft, guid) {\n                var buttonTemplate = kendo.template(BUTTON_TEMPLATE),\n                    groupTemplate = kendo.template(GROUP_TEMPLATE),\n                    vLine = $(\"<div>\").addClass(ORGCHART_STYLES.line + SPACE + ORGCHART_STYLES.lineVertical),\n                    hLine = $(\"<div>\").addClass(ORGCHART_STYLES.line + SPACE + ORGCHART_STYLES.lineHorizontal),\n                    messages = this.options.messages,\n                    vertical = true,\n                    offsetDirection = kendo.support.isRtl(this.element) ? \"right\" : \"left\",\n                    innerGroup, button, left, top, width, nodesGroupWidth, spacing;\n\n                if (item.hasChildren) {\n                    vertical = false;\n                    nodesGroup.append(vLine.clone());\n                    button = $(buttonTemplate({ buttonSign: item.expanded ? MINUS : PLUS, label: item.expanded ? messages.collapse : messages.expand }));\n\n                    nodesGroup.append(button);\n\n                    this._calculateDimensions();\n\n                    nodesGroupWidth = this._itemWidth;\n                    spacing = this._spacing;\n\n                    if (item.expanded) {\n                        width = nodesGroupWidth * numberOfColumns + (numberOfColumns - 1) * spacing;\n                        left = (index * numberOfColumns * nodesGroupWidth) + parentLeft;\n                        top = level * (this._itemHeight + this._buttonHeight + spacing) + spacing * (level - 1) - this._buttonHeight / 2;\n\n                        if (index > 0) {\n                            left += (index * numberOfColumns * spacing);\n                        }\n\n                        innerGroup = $(groupTemplate({\n                            guid: guid,\n                            level: level + 1\n                        }));\n\n                        innerGroup.css({\n                            width: width + PX,\n                            top: top + PX\n                        });\n\n                        innerGroup.css(offsetDirection, left + PX);\n\n                        this.element.append(innerGroup);\n                        this._renderGroup(innerGroup, item.children, level + 1, numberOfColumns, left);\n                    }\n                }\n\n                if (!!innerGroup && item.expanded && !!item.children && item.children.length > 1) {\n                    button.after(hLine.clone().css({\n                        width: (numberOfColumns - numberOfColumns / item.children.length) * (nodesGroupWidth + spacing) + PX,\n                        \"margin-top\": this._buttonHeight / -2 + PX\n                    }));\n                }\n\n                return vertical;\n            },\n\n            _renderGroup: function(group, items, level, parentColumns, parentLeft) {\n                var vertical = true,\n                    numberOfColumns = parentColumns / items.length,\n                    nodeContainer, nodesGroup, i, guid, currentVertical, item;\n\n                for (i = 0; i < items.length; i++) {\n                    guid = kendo.guid();\n                    item = items[i];\n                    nodeContainer = this._renderNodesContainer(group, extend(true, {}, item, {\n                        guid: guid,\n                        level: level\n                    }));\n                    nodesGroup = nodeContainer.closest(DOT + ORGCHART_STYLES.nodesGroup);\n\n                    this._renderItems(nodeContainer, item.items, level, guid);\n                    currentVertical = this._renderChildren(item, i, numberOfColumns, level, nodesGroup, parentLeft, guid);\n\n                    if (vertical) {\n                        vertical = currentVertical;\n                    }\n                }\n\n                var width = this._itemWidth * numberOfColumns + (numberOfColumns - 1) * this._spacing;\n                group.find(DOT + ORGCHART_STYLES.nodesGroup).width(width);\n\n                this._orientation(group, level, vertical);\n            },\n\n            _renderItems: function(nodeContainer, items, level, guid) {\n                var cardWrapperTemplate = kendo.template(GROUPED_CARD_WRAPPER),\n                    i, item, node, contentTemplate;\n\n                if (!this.options.template) {\n                    contentTemplate = kendo.template(CARD_TEMPLATE);\n                } else if (typeof this.options.template === \"function\") {\n                    contentTemplate = this.options.template;\n                } else {\n                    contentTemplate = kendo.template(this.options.template);\n                }\n\n                for (i = 0; i < items.length; i++) {\n                    item = items[i];\n                    node = this._renderNode(cardWrapperTemplate, contentTemplate, item, level, guid);\n                    nodeContainer.append(node);\n                }\n            },\n\n            _renderNodesContainer: function(group, data) {\n                var nodeGroupContainerTemplate = kendo.template(NODE_GROUP_CONTAINER),\n                    nodeGroup = $('<div class=\"k-orgchart-node-group k-align-items-center k-vstack\">'),\n                    nodeContainer = $(NODE_CONTAINER_GROUPED).css(\"width\", \"100%\"),\n                    nodeGroupContainer = $(nodeGroupContainerTemplate(data)),\n                    groupHeaderTemplate;\n\n                    if (typeof this.options.groupHeaderTemplate === \"function\") {\n                        groupHeaderTemplate = this.options.groupHeaderTemplate;\n                    } else {\n                        groupHeaderTemplate = kendo.template(this.options.groupHeaderTemplate);\n                    }\n\n                nodeGroupContainer.append(groupHeaderTemplate({\n                    value: data.value,\n                    field: data.field\n                }));\n                nodeGroupContainer.append(nodeContainer);\n\n                nodeGroup.append(nodeGroupContainer);\n                group.append(nodeGroup);\n\n                return nodeContainer;\n            }\n        });\n\n        kendo.orgChart = {\n            View: View,\n            SingleView: SingleView,\n            GroupedView: GroupedView\n        };\n    })(window.kendo.jQuery);\n\n    const __meta__ = {\n        id: \"orgchart\",\n        name: \"OrgChart\",\n        category: \"web\",\n        description: \"The OrgChart widget displays hierarchical organizational structure.\",\n        depends: [ \"core\", \"menu\", \"dialog\", \"form\", \"upload\", \"window\", \"data\", \"treelist\", \"html.button\" ]\n    };\n\n    (function($, undefined$1) {\n        var kendo = window.kendo,\n            encode = kendo.htmlEncode,\n            DataBoundWidget = kendo.ui.DataBoundWidget,\n            OrgChartDataSource = kendo.data.OrgChartDataSource,\n            ContextMenu = kendo.ui.ContextMenu,\n\n            extend = $.extend,\n            isArray = Array.isArray,\n\n            NS = \".kendoOrgChart\",\n\n            CANCEL = \"cancel\",\n            CHANGE = \"change\",\n            CLICK = \"click\",\n            COLLAPSE = \"collapse\",\n            CREATE = \"create\",\n            DATABINDING = \"dataBinding\",\n            DATABOUND = \"dataBound\",\n            DELETE = \"delete\",\n            DESTROY = \"destroy\",\n            EDIT = \"edit\",\n            ERROR = \"error\",\n            EXPAND = \"expand\",\n            FOCUS = \"focus\",\n            KENDOKEYDOWN = \"kendoKeydown\",\n            MENU = \"menu\",\n            PROGRESS = \"progress\",\n            SAVE = \"save\",\n            SELECT = \"select\",\n            REQUEST_START = \"requestStart\",\n\n            DOT = \".\",\n            SPACE = \" \",\n            COMMA = \",\",\n            ID = \"id\",\n            UID = \"uid\",\n            ACTION = \"action\";\n\n        var ORGCHART_STYLES = {\n            wrapper: \"k-orgchart\",\n            container: \"k-orgchart-container\",\n            line: \"k-orgchart-line\",\n            lineVertical: \"k-orgchart-line-v\",\n            lineHorizontal: \"k-orgchart-line-h\",\n            lineVerticalTop: \"k-orgchart-line-v-top\",\n            group: \"k-orgchart-group\",\n            groupVertical: \"k-orgchart-group-v\",\n            groupHorizontal: \"k-orgchart-group-h\",\n            nodesGroup: \"k-orgchart-node-group\",\n            nodesGroupContainer: \"k-orgchart-node-group-container\",\n            nodeContainer: \"k-orgchart-node-container\",\n            node: \"k-orgchart-node\",\n            card: \"k-orgchart-card\",\n            cardMenu: \"k-orgchart-card-menu\",\n            button: \"k-orgchart-button\",\n            focused: \"k-focus\",\n            plusIcon: \"plus\",\n            menuItem: \"k-item\",\n            avatarPreview: \"k-orgchart-avatar-preview\",\n            update: \"k-orgchart-update\",\n            cancel: \"k-orgchart-cancel\",\n            vstack: \"k-vstack\",\n            hstack: \"k-hstack\",\n            closeButton: \"x\"\n        };\n\n        var MENU_ITEMS = {\n            edit: ({ edit }) => `<li data-action='edit'>${encode(edit)}</li>`,\n            create: ({ create }) => `<li data-action='create'>${encode(create)}</li>`,\n            destroy: ({ destroy }) => `<li data-action='destroy'>${encode(destroy)}</li>`\n        };\n\n        var MENU_TEMPLATE = (messages, editable) => {\n            var result = \"<ul>\";\n\n            if (editable === true) {\n                result += MENU_ITEMS.edit(messages);\n                result += MENU_ITEMS.create(messages);\n                result += MENU_ITEMS.destroy(messages);\n            } else {\n                if (editable.fields || editable.parent) {\n                    result += MENU_ITEMS.edit(messages);\n                }\n                if (editable.create) {\n                    result += MENU_ITEMS.create(messages);\n                }\n                if (editable.destroy) {\n                    result += MENU_ITEMS.destroy(messages);\n                }\n            }\n\n            return result;\n        };\n\n        var GROUP_HEADER_TEMPLATE = ({ value, field }) => '<div>' +\n            `<div class=\"k-orgchart-node-group-title\">${encode(value)}</div>` +\n            `<div class=\"k-orgchart-node-group-subtitle\">${encode(field)}</div>` +\n        '</div>';\n\n        var AVATAR_PREVIEW_TEMPLATE = ({ avatar, name, destroy, fileName }) => '<div class=\"k-orgchart-avatar-preview k-hstack k-align-items-center k-pb-lg\">' +\n            '<div class=\"k-avatar k-avatar-solid-primary k-avatar-solid k-avatar-lg k-rounded-full\">' +\n                '<span class=\"k-avatar-image\">' +\n                    `<img src=\"${encode(avatar)}\" alt=\"${encode(name)}\">` +\n                '</span>' +\n            '</div>' +\n            `<div class=\"k-px-md\">${encode(fileName)}</div>` +\n            kendo.html.renderButton(`<button aria-label=\"${encode(destroy)}\"></button>`, {\n                icon: 'trash',\n                fillMode: \"flat\"\n            }) +\n        '</div>';\n\n        var EDITOR_BUTTONS_TEMPLATE = ({ cancel, save }) => '<div class=\"k-edit-buttons\">' +\n            kendo.html.renderButton(`<button class=\"k-orgchart-update\">${encode(save)}</button>`, {\n                    icon: \"save\",\n                    themeColor: \"primary\"\n                }) +\n            kendo.html.renderButton(`<button class=\"k-orgchart-cancel\">${encode(cancel)}</button>`, {\n                icon: \"cancel-outline\"\n            }) +\n        '</div>';\n\n        var OrgChart = DataBoundWidget.extend({\n            init: function(element, options, events) {\n                if (isArray(options)) {\n                    options = { dataSource: options };\n                }\n\n                options = options || {};\n\n                DataBoundWidget.fn.init.call(this, element, options);\n\n                if (events) {\n                    this._events = events;\n                }\n\n                this._wrapper();\n                this._view();\n                this._dataSource();\n                this._contextMenu();\n\n                if (this.options.autoBind) {\n                    this.dataSource.fetch();\n                }\n\n                kendo.notify(this);\n            },\n\n            options: {\n                name: \"OrgChart\",\n                autoBind: true,\n                cardsColors: null,\n                dataSource: {},\n                editable: {\n                    create: true,\n                    destroy: true,\n                    fields: true,\n                    form: {\n                        buttonsTemplate: () => \"\",\n                        orientation: \"vertical\"\n                    },\n                    parent: true\n                },\n                groupField: null,\n                groupHeaderTemplate: GROUP_HEADER_TEMPLATE,\n                template: null,\n                messages: {\n                    label: \"Org Chart\",\n                    edit: \"Edit\",\n                    create: \"Create\",\n                    destroy: \"Delete\",\n                    destroyContent: \"Are you sure you want to delete this item and all its children?\",\n                    destroyTitle: \"Delete item\",\n                    cancel: \"Cancel\",\n                    save: \"Save\",\n                    menuLabel: \"Edit menu\",\n                    uploadAvatar: \"Upload new avatar\",\n                    parent: \"Parent\",\n                    name: \"Name\",\n                    title: \"Title\",\n                    none: \"--None--\",\n                    expand: \"expand\",\n                    collapse: \"collapse\"\n                }\n            },\n\n            events: [\n                CANCEL,\n                CHANGE,\n                COLLAPSE,\n                CREATE,\n                DATABINDING,\n                DATABOUND,\n                DELETE,\n                EDIT,\n                EXPAND,\n                KENDOKEYDOWN,\n                SAVE,\n                SELECT\n             ],\n\n            destroy: function() {\n                if (this._menu) {\n                    this._menu.destroy();\n                }\n                if (this._editWindow) {\n                    this._editWindow.destroy();\n                }\n                if (this._confirmDestroy) {\n                    this._confirmDestroy.destroy();\n                }\n\n                this.view.destroy();\n\n                DataBoundWidget.fn.destroy.call(this);\n                this.wrapper.off(NS);\n            },\n\n            setDataSource: function(dataSource) {\n                this.options.dataSource = dataSource;\n                this._dataSource();\n\n                if (this.options.autoBind) {\n                    dataSource.fetch();\n                }\n            },\n\n            setOptions: function(options) {\n                var that = this;\n\n                DataBoundWidget.fn.setOptions.call(that, options);\n            },\n\n            append: function(item, parent) {\n                var that = this,\n                    $parent = that.view.jqueryItemElement(parent),\n                    parentItem = that.dataItem($parent);\n\n                if (!$parent || !parentItem) {\n                    return;\n                }\n\n                if (!parentItem.loaded()) {\n                    that.dataSource.read({ id: parentItem.id })\n                        .then(function() {\n                            that.dataSource.add(extend({}, item, { parentId: parentItem.id }));\n                            that.dataSource.sync();\n                        });\n                } else {\n                    that.dataSource.add(extend({}, item, { parentId: parentItem.id }));\n                    that.dataSource.sync();\n                }\n            },\n\n            cancelChanges: function() {\n                if (this.dataSource.hasChanges()) {\n                    this.dataSource.cancelChanges();\n                }\n            },\n\n            collapse: function(item) {\n                return this.view.collapse(item);\n            },\n\n            dataItem: function(item) {\n                var $item = this.view.jqueryItemElement(item);\n\n                if (!$item || !$item.data(UID)) {\n                    return;\n                }\n\n                return this.dataSource.getByUid($item.data(UID));\n            },\n\n            delete: function(item) {\n                var $item = this.view.jqueryItemElement(item);\n\n                if (!$item) {\n                    return;\n                }\n\n                this.dataSource.remove(this.dataItem($item));\n                this.dataSource.sync();\n            },\n\n            edit: function(item) {\n                var $item = this.view.jqueryItemElement(item),\n                    dataItem = this.dataItem($item);\n\n                if (!$item || !dataItem) {\n                    return;\n                }\n\n                this._edit(dataItem);\n            },\n\n            expand: function(item) {\n                return this.view.expand(item);\n            },\n\n            getCollapsedNodes: function() {\n                return this.wrapper.find(\"[aria-expanded='false']\");\n            },\n\n            items: function() {\n                return this.wrapper.find(DOT + ORGCHART_STYLES.card);\n            },\n\n            parent: function(item) {\n                var $item = this.view.jqueryItemElement(item),\n                    id;\n\n                if (!$item) {\n                    return;\n                }\n\n                id = $item.closest(DOT + ORGCHART_STYLES.group).attr(ID);\n\n                return this.wrapper.find(\"[aria-owns='\" + id + \"']\");\n            },\n\n            saveChanges: function() {\n                this.dataSource.sync();\n            },\n\n            select: function(item) {\n                var $item = this.view._getToSelect(item);\n\n                if (!$item) {\n                    return;\n                } else {\n                    return this.view.select($item);\n                }\n            },\n\n            _avatarPreview: function(item, fileName) {\n                var form = this._form,\n                    avatar = item.avatar,\n                    avatarRemove = function() {\n                        formWrapper.find(DOT + ORGCHART_STYLES.avatarPreview).remove();\n                        item.set(\"avatar\", null);\n                    },\n                    formWrapper, data;\n\n                if (!form) {\n                    return;\n                }\n\n                if (!fileName) {\n                    fileName = avatar.split('\\\\').pop().split('/').pop();\n\n                    if (!fileName || fileName.indexOf('.') == -1) {\n                        fileName = item.name;\n                    }\n                }\n\n                data = {\n                    name: item.name,\n                    avatar: avatar,\n                    fileName: fileName,\n                    destroy: this.options.messages.destroy\n                };\n\n                formWrapper = form.wrapper;\n                formWrapper.find(DOT + ORGCHART_STYLES.avatarPreview).remove();\n\n                formWrapper.find('[type=\"file\"]').closest(DOT + \"k-form-field\").prepend(kendo.template(AVATAR_PREVIEW_TEMPLATE)(data));\n                formWrapper.find(DOT + ORGCHART_STYLES.avatarPreview + SPACE + DOT + \"k-button\").on(CLICK, avatarRemove);\n            },\n\n            _contextMenu: function() {\n                var options = this.options,\n                    editable = options.editable,\n                    messages = options.messages,\n                    menuOptions = {\n                        target: this.wrapper,\n                        filter: DOT + ORGCHART_STYLES.cardMenu,\n                        select: this._onMenuItemClick.bind(this),\n                        activate: this._onMenuOpen.bind(this),\n                        deactivate: this._onMenuClose.bind(this),\n                        showOn: \"click\",\n                        animation: false\n                    },\n                    menuElement;\n\n                if (editable === true ||\n                    (editable !== false &&\n                        (editable.create || editable.destroy || editable.fields || editable.parent))) {\n                            menuElement = MENU_TEMPLATE(messages, editable);\n\n                            this._menu = new ContextMenu(menuElement, menuOptions);\n                        }\n            },\n\n            _dataSource: function() {\n                var ds = this.dataSource,\n                    dsOptions = this.options.dataSource;\n\n                if (ds) {\n                    ds.unbind(CHANGE, this._dataSourceChangeHandler);\n                    ds.unbind(ERROR, this._errorHandler);\n                    ds.unbind(PROGRESS, this._progressHandler);\n                    ds.unbind(REQUEST_START, this._requestStartHandler);\n                }\n\n                this._dataSourceChangeHandler = this._onDataSourceChange.bind(this);\n                this._errorHandler = this._onDataSourceError.bind(this);\n                this._progressHandler = this._progress.bind(this);\n                this._requestStartHandler = this._onDataSourceRequestStart.bind(this);\n\n                ds = this.dataSource = OrgChartDataSource.create(dsOptions);\n\n                ds.bind(CHANGE, this._dataSourceChangeHandler);\n                ds.bind(ERROR, this._errorHandler);\n                ds.bind(PROGRESS, this._progressHandler);\n                ds.bind(REQUEST_START, this._requestStartHandler);\n\n                this.view.dataSource = ds;\n            },\n\n            _destroyItem: function(item) {\n                var that = this,\n                    el = $(\"<div></div>\"),\n                    messages = that.options.messages,\n                    restoreFocus = function() {\n                        that.wrapper\n                            .find(DOT + ORGCHART_STYLES.card + \"[tabindex=0]\" + COMMA + DOT + ORGCHART_STYLES.nodesGroup + \"[tabindex=0]\")\n                            .addClass(ORGCHART_STYLES.focused)\n                            .trigger(\"focus\");\n                    },\n                    confirm = this._confirmDestroy = new kendo.ui.Confirm(el, {\n                        title: messages.destroyTitle,\n                        content: messages.destroyContent,\n                        messages: {\n                          okText: messages.destroy,\n                          cancel: messages.cancel\n                        },\n                        show: function() {\n                            setTimeout(function() {\n                                confirm.element.trigger(\"focus\");\n                            });\n                        }\n                    });\n\n                confirm.open();\n\n                confirm.result.done(function() {\n                    if (!that.trigger(DELETE, { dataItem: item })) {\n                        that.dataSource.remove(item);\n                        that.dataSource.sync();\n                    }\n\n                    that.view._shouldRestoreSelection = true;\n                    that.view._restoreSelection();\n                });\n\n                confirm.result.fail(restoreFocus);\n            },\n\n            _edit: function(dataItem) {\n                var that = this,\n                    formElement = $(\"<div>\"),\n                    windowElement = $(\"<div>\"),\n                    messages = this.options.messages,\n                    formOptions = this._formOptions(dataItem),\n                    save;\n\n                if (!formOptions) {\n                    return;\n                }\n\n                that._form = new kendo.ui.Form(formElement, formOptions);\n\n                if (!!dataItem.avatar) {\n                    that._avatarPreview(dataItem);\n                }\n\n                windowElement.append(formElement);\n\n                that._editWindow = new kendo.ui.Window(windowElement, {\n                    title: messages.edit,\n                    width: \"380 px\",\n                    modal: true,\n                    close: function(e) {\n                        if (!save) {\n                            if (!that.trigger(CANCEL, { dataItem: dataItem })) {\n                                that.cancelChanges();\n                            } else {\n                                e.preventDefault();\n                            }\n                        } else {\n                            save = false;\n                        }\n                    },\n                    deactivate: function() {\n                        that._editWindow.wrapper.off(CLICK);\n                        that._editWindow.destroy();\n                        that._editWindow = null;\n                        that.view._restoreSelection();\n                    }\n                });\n\n                windowElement.after(kendo.template(EDITOR_BUTTONS_TEMPLATE)({\n                    save: messages.save,\n                    cancel: messages.cancel\n                }));\n\n                that._editWindow.center().open();\n\n                that._editWindow.wrapper.on(CLICK, DOT + ORGCHART_STYLES.update, function() {\n                    if (that._form.validate()) {\n                        save = true;\n\n                        if (!that.trigger(SAVE, { dataItem: dataItem })) {\n                            that._editWindow.close();\n                            that.saveChanges();\n                        }\n                    }\n                });\n\n                that._editWindow.wrapper.on(CLICK, DOT + ORGCHART_STYLES.cancel, function() {\n                    that._editWindow.close();\n                });\n            },\n\n            _formOptions: function(item) {\n                var options = this.options,\n                    messages = options.messages,\n                    optionsForm = options.editable.form,\n                    items = [],\n                    parentsDs, optionsItems;\n\n                if (optionsForm) {\n                    optionsItems = optionsForm.items;\n                }\n\n                if ((!optionsItems || optionsItems.length === 0) &&\n                    (options.editable === true || (options.editable && options.editable.parent))) {\n\n                    parentsDs = [{\n                        id: null,\n                        name: messages.none\n                    }].concat(this.dataSource.prospectParents(item));\n\n                    items.push({\n                        field: \"parentId\",\n                        editor: \"DropDownList\",\n                        label: messages.parent,\n                        editorOptions: {\n                            dataSource: parentsDs,\n                            dataValueField: \"id\",\n                            dataTextField: \"name\",\n                            valuePrimitive: true\n                        }\n                    });\n                }\n\n                if ((!optionsItems || optionsItems.length === 0) &&\n                    (options.editable === true || (options.editable && options.editable.fields))) {\n\n                    items = items.concat([{\n                        field: \"name\",\n                        label: messages.name,\n                        validation: { required: true }\n                    }, {\n                        field: \"title\",\n                        label: messages.title\n                    }, {\n                        field: \"avatar\",\n                        label: messages.uploadAvatar,\n                        editor: this._uploadEditor.bind(this, item)\n                    }]);\n                }\n\n                if (optionsForm) {\n                    delete optionsForm.formData;\n                }\n\n                if (items.length > 0 || (optionsItems && optionsItems.length > 0)) {\n                    return extend(true, {}, {\n                        formData: item,\n                        items: items\n                    }, optionsForm);\n                } else {\n                    return false;\n                }\n            },\n\n            _onDataSourceChange: function(e) {\n                if (e.action === \"add\" || e.action === \"itemchange\" && this._editWindow) {\n                    return;\n                }\n\n                if (!e.action || e.action === \"sync\") {\n                    if (this.trigger(DATABINDING, e)) {\n                        this._progress(false);\n                        return;\n                    }\n                }\n\n                this._progress(true);\n                this.view.refresh();\n\n                if (!e.action || e.action === \"sync\") {\n                    this.trigger(DATABOUND);\n                }\n\n                this._progress(false);\n            },\n\n            _onDataSourceError: function() {\n                this._progress(false);\n            },\n\n            _onDataSourceRequestStart: function() {\n                this.view._cacheFocused();\n            },\n\n            _onMenuClose: function() {\n                if ($(document.activeElement).closest(\"[role='alertdialog']\").length === 0) {\n                    this.wrapper.find(\"[tabindex='0']\")\n                        .addClass(ORGCHART_STYLES.focused)\n                        .trigger(\"focus\");\n                }\n            },\n\n            _onMenuItemClick: function(e) {\n                var that = this,\n                    targetItem = $(e.target).closest(DOT + ORGCHART_STYLES.node).find(DOT + ORGCHART_STYLES.card),\n                    dataItem = that.dataItem(targetItem),\n                    action = $(e.item).data(ACTION),\n                    newItem;\n\n                if (!dataItem) {\n                    return;\n                }\n\n                if (action === EDIT) {\n                    if (!that.trigger(EDIT, { dataItem: dataItem })) {\n                        that._edit(dataItem);\n                    }\n                } else if (action === CREATE) {\n                    if (!that.trigger(CREATE, { dataItem: dataItem })) {\n                        if (!dataItem.loaded()) {\n                            that.dataSource.read({ id: dataItem.id })\n                                .then(function() {\n                                    newItem = that.dataSource.add({\n                                        parentId: dataItem.id\n                                    });\n\n                                    that._edit(newItem);\n                                });\n                        } else {\n                            newItem = that.dataSource.add({\n                                parentId: dataItem.id\n                            });\n\n                            that._edit(newItem);\n                        }\n                    }\n                } else if (action === DESTROY) {\n                    that._destroyItem(dataItem);\n                }\n            },\n\n            _onMenuOpen: function() {\n                this.view._cacheFocused();\n                this.wrapper.find(DOT + ORGCHART_STYLES.focused).removeClass(ORGCHART_STYLES.focused);\n                this._menu.element.find(DOT + ORGCHART_STYLES.menuItem).first().trigger(FOCUS);\n            },\n\n            _openMenu: function(focused) {\n                if (this._menu) {\n                    this._menu.open(focused.find(DOT + ORGCHART_STYLES.cardMenu));\n                }\n            },\n\n            _progress: function(toggle) {\n                kendo.ui.progress(this.container, toggle);\n            },\n\n            _triggerCollapse: function(e) {\n                if (this.trigger(COLLAPSE, { item: e.item, dataItems: e.dataItems })) {\n                    e.preventDefault();\n                }\n            },\n\n            _triggerExpand: function(e) {\n                if (this.trigger(EXPAND, { item: e.item, dataItems: e.dataItems })) {\n                    e.preventDefault();\n                }\n            },\n\n            _triggerSelect: function(e) {\n                if (!this.trigger(SELECT, { item: e.item, dataItems: e.dataItems })) {\n                    this.view.select(e.item);\n                    this.trigger(CHANGE, { item: e.item, dataItems: e.dataItems });\n                }\n            },\n\n            _uploadEditor: function(item, container) {\n                var that = this;\n\n                $('<input type=\"file\">')\n                    .appendTo(container)\n                    .kendoUpload({\n                        async: false,\n                        multiple: false,\n                        select: function(e) {\n                            var fileInfo = e.files[0];\n                            var raw = fileInfo.rawFile;\n                            var reader = new FileReader();\n\n                            if (fileInfo.validationErrors && fileInfo.validationErrors.length > 0) {\n                                return;\n                            }\n\n                            if (raw) {\n                                reader.onloadend = function() {\n                                    item.set(\"avatar\", this.result);\n                                    that._avatarPreview(item, raw.name);\n                                };\n\n                              reader.readAsDataURL(raw);\n                            }\n                        },\n                        validation: {\n                            allowedExtensions: [\".gif\", \".jpg\", \".png\"],\n                            maxFileSize: 1048576\n                        }\n                    });\n            },\n\n            _view: function() {\n                if (this.options.groupField !== null && this.options.groupField !== undefined$1) {\n                    this.view = new kendo.orgChart.GroupedView(this.container, this.options);\n                } else {\n                    this.view = new kendo.orgChart.SingleView(this.container, this.options);\n                }\n\n                this.view.bind(SELECT, this._triggerSelect.bind(this));\n                this.view.bind(EXPAND, this._triggerExpand.bind(this));\n                this.view.bind(COLLAPSE, this._triggerCollapse.bind(this));\n                this.view.bind(MENU, this._openMenu.bind(this));\n\n            },\n\n            _wrapper: function() {\n                var container = $(\"<div class='k-orgchart-container'>\");\n\n                this.wrapper = this.element;\n                this.container = container;\n\n                this.wrapper.addClass(ORGCHART_STYLES.wrapper);\n                this.wrapper.append(container);\n            }\n        });\n\n        kendo.ui.plugin(OrgChart);\n\n    })(window.kendo.jQuery);\n    var kendo$1 = kendo;\n\n    exports.__meta__ = __meta__;\n    exports.default = kendo$1;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n"]}