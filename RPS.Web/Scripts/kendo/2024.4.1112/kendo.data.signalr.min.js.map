{"version":3,"file":"kendo.data.signalr.min.js","names":["global","factory","exports","module","require","define","amd","globalThis","self","kendo","_globals","DataSignalr","this","$","window","isFunction","isJQueryPromise","promise","done","fail","isNativePromise","then","catch","transport","data","RemoteTransport","extend","init","options","signalr","Error","hub","on","invoke","fn","call","push","callbacks","client","create","pushCreate","update","pushUpdate","destroy","pushDestroy","_crud","type","server","format","args","parameterMap","isEmptyObject","apply","success","error","read","transports","jQuery","kendo$1","__meta__","id","name","category","depends","hidden","default","Object","defineProperty","value"],"sources":["kendo.data.signalr.js"],"mappings":"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","ignoreList":[],"sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('kendo.data.js')) :\n    typeof define === 'function' && define.amd ? define(['exports', 'kendo.data'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory((global.kendo = global.kendo || {}, global.kendo._globals = global.kendo._globals || {}, global.kendo._globals.DataSignalr = {})));\n})(this, (function (exports) {\n    const __meta__ = {\n        id: \"data.signalr\",\n        name: \"SignalR\",\n        category: \"framework\",\n        depends: [ \"data\" ],\n        hidden: true\n    };\n\n    (function($) {\n        var kendo = window.kendo;\n        var isFunction = kendo.isFunction;\n\n        function isJQueryPromise(promise) {\n            return promise && isFunction(promise.done) && isFunction(promise.fail);\n        }\n\n        function isNativePromise(promise) {\n            return promise && isFunction(promise.then) && isFunction(promise.catch);\n        }\n\n        var transport = kendo.data.RemoteTransport.extend({\n            init: function(options) {\n                var signalr = options && options.signalr ? options.signalr : {};\n\n                var promise = signalr.promise;\n\n                if (!promise) {\n                    throw new Error('The \"promise\" option must be set.');\n                }\n\n                if (!isJQueryPromise(promise) && !isNativePromise(promise)) {\n                    throw new Error('The \"promise\" option must be a Promise.');\n                }\n\n                this.promise = promise;\n\n                var hub = signalr.hub;\n\n                if (!hub) {\n                    throw new Error('The \"hub\" option must be set.');\n                }\n\n                if (typeof hub.on != \"function\" || typeof hub.invoke != \"function\") {\n                    throw new Error('The \"hub\" option is not a valid SignalR hub proxy.');\n                }\n\n                this.hub = hub;\n\n                kendo.data.RemoteTransport.fn.init.call(this, options);\n            },\n\n            push: function(callbacks) {\n                var client = this.options.signalr.client || {};\n\n                if (client.create) {\n                    this.hub.on(client.create, callbacks.pushCreate);\n                }\n\n                if (client.update) {\n                    this.hub.on(client.update, callbacks.pushUpdate);\n                }\n\n                if (client.destroy) {\n                    this.hub.on(client.destroy, callbacks.pushDestroy);\n                }\n            },\n\n            _crud: function(options, type) {\n                var hub = this.hub;\n                var promise = this.promise;\n                var server = this.options.signalr.server;\n\n                if (!server || !server[type]) {\n                    throw new Error(kendo.format('The \"server.{0}\" option must be set.', type));\n                }\n\n                var args = [server[type]];\n\n                var data = this.parameterMap(options.data, type);\n\n                if (!$.isEmptyObject(data)) {\n                    args.push(data);\n                }\n\n                if (isJQueryPromise(promise)) {\n                    promise.done(function() {\n                        hub.invoke.apply(hub, args)\n                                  .done(options.success)\n                                  .fail(options.error);\n                    });\n                } else if (isNativePromise(promise)) {\n                    promise.then(function() {\n                        hub.invoke.apply(hub, args)\n                                  .then(options.success)\n                                  .catch(options.error);\n                    });\n                }\n            },\n\n            read: function(options) {\n                this._crud(options, \"read\");\n            },\n\n            create: function(options) {\n                this._crud(options, \"create\");\n            },\n\n            update: function(options) {\n                this._crud(options, \"update\");\n            },\n\n            destroy: function(options) {\n                this._crud(options, \"destroy\");\n            }\n        });\n\n        $.extend(true, kendo.data, {\n            transports: {\n                signalr: transport\n            }\n        });\n\n    })(window.kendo.jQuery);\n    var kendo$1 = kendo;\n\n    exports.__meta__ = __meta__;\n    exports.default = kendo$1;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n"]}