{"version":3,"file":"kendo.menu.min.js","names":["global","factory","exports","module","require","define","amd","globalThis","self","kendo","_globals","Menu","this","$","undefined$1","window","ui","activeElement","_activeElement","touch","support","mobileOS","isArray","Array","HierarchicalDataSource","data","MOUSEDOWN","CLICK","extend","each","encode","htmlEncode","template","keys","Widget","excludedNodesRegExp","NS","OPEN","MENU","LINK","LINK_SELECTOR","ICON_SELECTOR","LAST","CLOSE","TIMER","FIRST","IMAGE","SELECT","ZINDEX","ACTIVATE","DEACTIVATE","POINTERDOWN","pointers","msPointers","allPointers","CHANGE","ERROR","TOUCHSTART","MOUSEENTER","MOUSELEAVE","MOUSEWHEEL","RESIZE","resize","POPUP_ID_ATTR","POPUP_OPENER_ATTR","DOCUMENT_ELEMENT","document","documentElement","KENDOPOPUP","HOVERSTATE","FOCUSEDSTATE","DISABLEDSTATE","menuSelector","animationContainerSelector","childAnimationContainerSelector","popupSelector","allItemsSelector","itemSelector","availableItemsSelector","exclusionSelector","scrollButtonSelector","touchPointerTypes","DATABOUND","ARIA_EXPANDED","ROLE","bindings","text","url","spriteCssClass","imageUrl","imageAttr","content","rendering","wrapperCssClass","group","item","result","index","separator","enabled","firstLevel","length","cssClass","attr","hasOwnProperty","selected","itemCssAttributes","attributes","imageCssAttributes","imgAttributes","toJSON","contentCssAttributes","contentAttr","defaultClasses","textClass","groupAttributes","expanded","groupCssClass","groupWrapperCssClass","contains","parent","child","e","updateItemClasses","addClass","children","filter","removeClass","empty","append","prop","contents","nodeName","match","nodeType","trim","nodeValue","wrapAll","idx","elm","wrap","updateArrow","updateFirstLast","find","remove","icon","getArrowIconName","isRtl","hasClass","updateHasAriaPopup","parents","parentLi","eq","removeAttr","getParentLiItems","parentsUntil","storeItemSelectEventHandler","element","options","selectHandler","select","isFunction","getItemSelectEventHandler","setItemData","items","i","popupOpenerSelector","id","popupGroupSelector","selector","getChildPopups","currentPopup","overflowWrapper","childPopupOpener","opener","popupId","popup","push","popupParentItem","popupElement","itemPopup","parentsScroll","current","scrollDirection","scroll","parentNode","isNaN","isPointerTouch","originalEvent","pointerType","removeSpacesBetweenItems","ul","DataBoundWidget","init","that","fn","call","wrapper","_accessors","_templates","_dataSource","_updateClasses","_wrapGroups","_animations","nextItemZIndex","_tabindex","_initOverflow","_attachMenuEventsHandlers","openOnClick","clicked","_ariaId","format","guid","notify","events","name","animation","open","duration","close","orientation","direction","closeOnClick","hoverDelay","scrollable","popupCollision","_initData","dataSource","view","_overflowWrapper","_checkActiveProxy","_checkActiveElement","bind","on","_focusHandler","_click","_preventClose","_mouseenter","_mouseleave","_mousedown","_toggleHover","_keydown","_focus","_removeFocusItem","_mouseleavePopup","_mouseenterPopup","_documentClickHandler","_documentClick","_detachMenuEventsHandlers","off","_getNeededSpaceForChildren","horizontal","total","_","_outerWidth","_outerHeight","backwardBtn","forwardBtn","isHorizontal","_openedPopups","_scrollWrapper","backwardBtnIcon","forwardBtnIcon","templates","scrollButton","prependTo","appendTo","_initScrolling","initialWidth","outerWidth","initialCssWidth","style","width","setTimeout","_setOverflowWrapperWidth","_toggleScrollButtons","_popupsWrapper","wrapperCssWidth","css","wrapperWidth","menuWidth","borders","offsetWidth","clientWidth","Math","min","_reinitOverflow","distance","_destroyOverflow","popupWrapper","popupParentLi","unwrap","scrollElement","isNumeric","mouseWheelDistance","backward","forward","backwardDouble","forwardDouble","scrolling","touchEvents","value","scrollValue","scrollLeft","scrollTop","finish","animate","mouseenterHandler","mousedownHandler","ev","test","type","isTouch","stop","currentTarget","trigger","stopPropagation","preventDefault","eventMap","down","add","ctrlKey","shiftKey","altKey","wheelDelta","delta","ceil","floor","detail","round","mousewheelDelta","abs","_closeChildPopups","n","parseFloat","isFinite","neededSpace","elementSpace","toggle","currentScroll","elementIsPopup","is","disableNextButton","scrollWidth","scrollHeight","offsetHeight","toggleClass","setOptions","destroy","enable","_toggleDisabled","disable","attemptGetItem","candidate","referenceItem","inserted","_insert","_childPopupElement","insertBefore","before","insertAfter","after","groups","plain","isPlainObject","ObservableObject","groupData","renderGroup","applyStylesFromKendoAttributes","ObservableArray","map","get","itemElement","renderItem","charAt","first","parentItems","container","_openAfterLoad","dataItem","loaded","_loading","one","_createPopup","div","kendoPopup","activate","_triggerEvent","deactivate","_closing","sender","removeData","opacity","_popupOpen","li","hide","siblings","zIndex","mouseAndTouchPresent","_removeHoverItem","getByUid","ns","hasChildren","load","replace","visiblePopups","closePopup","closest","clearTimeout","_timerTimeout","overflowPopup","_getPopup","menuParent","menu","_groupElementsInitialSpace","maxHeight","Object","height","_popupToBeOpened","inlineHeight","overflow","nextZindex","collision","root","parentHorizontal","directions","split","output","origin","position","reverse","join","parseDirection","effects","openEffects","getEffectDirection","anchor","_configurePopupOverflow","_hovered","_initPopupScrolling","popupOpener","_wrapPopupElement","groupId","Date","getTime","autosize","display","skipMouseEvents","scrollWrapper","childrenScrollSpace","initScrolling","_initPopupScrollButtons","_scrollButtonsMouseEnter","p","_scrollButtonsMouseLeave","isEmptyObject","_closeParentPopups","scrollButtons","_denyOpening","show","relatedTarget","initialInlineHeight","last","_keyTriggered","_setPopupHeight","isFixed","popups","_initialHeight","location","_location","windowHeight","popupOuterHeight","popupOffsetTop","max","top","innerHeight","popupViewportGap","dontClearClose","_isRootItem","toString","_forceClose","target","eventTarget","isEnter","indexOf","_closurePrevented","focusedItem","_focusItem","_findRootParent","hasFocus","oldFocusedItem","_oldFocusItem","elements","from","matchesSelector","end","_itemHasChildren","pointerTouch","isParentClosing","rootMenuItems","subMenuItems","sibling","_mousedownedElement","$window","browser","msie","toElement","clientX","clientY","stopImmediatePropagation","_closePopups","rootPopup","groupParent","innerPopup","_innerPopup","openHandle","childGroup","childGroupVisible","shouldCloseTheRootItem","targetElement","toUpperCase","formNode","link","href","targetHref","sampleHref","isLink","isLocalLink","isTargetLink","_lastClickedElement","handled","_triggerSelect","childPopupId","_parentsUntil","enterKey","click","context","getParents","elem","overflowMenuParents","itemSelectEventData","_getEventData","isSelectItemDefaultPrevented","isDefaultPrevented","isSelectDefaultPrevented","_defaultPrevented","focusItem","active","_moveFocus","belongsToVertical","key","keyCode","ESC","_itemBelongsToVertival","RIGHT","LEFT","DOWN","_itemDown","UP","_itemUp","HOME","END","_itemEsc","ENTER","SPACEBAR","_moveFocusToRoot","TAB","menuIsVertical","nextItem","_scrollToItem","_itemRight","parentItem","nextAll","prevAll","_itemLeft","itemPosition","scrollDir","getSize","currentScrollOffset","itemSize","itemOffset","ulSize","scrollButtonSize","_unbindDataSource","fields","field","create","_bindDataSource","fetch","_refreshHandler","refresh","_errorHandler","_error","unbind","findByUid","uid","node","action","parentElement","itemsToUpdate","updateProxy","_updateItem","removeProxy","_removeItem","_appendItems","forEach","nextElement","next","textField","_fieldAccessor","fieldName","fieldBindings","count","levels","getter","level","fieldAccessor","encoded","contentHtml","contCssAttributes","renderItems","itemWrapper","tag","sprite","arrow","subGroup","contentUrl","renderContent","iconClass","dataContentField","html","len","ContextMenu","_initialInlineHeight","_marker","substring","_popup","_wire","closes","_initialWidth","showOn","alignToAnchor","copyAnchorStyles","_showProxy","userEvents","mousedown","_closeProxy","x","y","visible","kendoStop","_triggerFocusOnActivate","_focusMenu","offset","left","_configurePopupScrolling","downEvent","_mousedownProxy","visibility","_setPopupWidth","windowWidth","popupOuterWidth","popupOffsetLeft","shadow","getShadows","maxWidth","right","arguments","_closeTimeoutProxy","focus","_showHandler","event","pageX","pageY","_eventOrigin","_targetChild","_closeHandler","sameTarget","containment","normalClick","which","_preventProxy","UserEvents","allowSelection","F10","contextMenuElement","_triggerProxy","noop","not","plugin","jQuery","kendo$1","__meta__","category","description","depends","default","defineProperty"],"sources":["kendo.menu.js"],"mappings":"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","ignoreList":[],"sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('kendo.popup.js'), require('kendo.data.js'), require('kendo.icons.js')) :\n    typeof define === 'function' && define.amd ? define(['exports', 'kendo.popup', 'kendo.data', 'kendo.icons'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory((global.kendo = global.kendo || {}, global.kendo._globals = global.kendo._globals || {}, global.kendo._globals.Menu = {})));\n})(this, (function (exports) {\n    const __meta__ = {\n        id: \"menu\",\n        name: \"Menu\",\n        category: \"web\",\n        description: \"The Menu widget displays hierarchical data as a multi-level menu.\",\n        depends: [ \"popup\", \"data\", \"data.odata\" ]\n    };\n\n    (function($, undefined$1) {\n        var kendo = window.kendo,\n            ui = kendo.ui,\n            activeElement = kendo._activeElement,\n            touch = (kendo.support.touch && kendo.support.mobileOS),\n            isArray = Array.isArray,\n            HierarchicalDataSource = kendo.data.HierarchicalDataSource,\n            MOUSEDOWN = \"mousedown\",\n            CLICK = \"click\",\n            DELAY = 30,\n            SCROLLSPEED = 50,\n            extend = $.extend,\n            each = $.each,\n            encode = kendo.htmlEncode,\n            template = kendo.template,\n            keys = kendo.keys,\n            Widget = ui.Widget,\n            excludedNodesRegExp = /^(ul|a|div)$/i,\n            NS = \".kendoMenu\",\n            IMG = \"img\",\n            OPEN = \"open\",\n            MENU = \"k-menu\",\n            LINK = \"k-link k-menu-link\",\n            LINK_SELECTOR = \".k-link\",\n            ICON_SELECTOR = \".k-menu-expand-arrow\",\n            LAST = \"k-last\",\n            CLOSE = \"close\",\n            TIMER = \"timer\",\n            FIRST = \"k-first\",\n            IMAGE = \"k-image\",\n            SELECT = \"select\",\n            ZINDEX = \"zIndex\",\n            ACTIVATE = \"activate\",\n            DEACTIVATE = \"deactivate\",\n            POINTERDOWN = \"touchstart\" + NS + \" MSPointerDown\" + NS + \" pointerdown\" + NS,\n            pointers = kendo.support.pointers,\n            msPointers = kendo.support.msPointers,\n            allPointers = msPointers || pointers,\n            CHANGE = \"change\",\n            ERROR = \"error\",\n            TOUCHSTART = kendo.support.touch ? \"touchstart\" : \"\",\n            MOUSEENTER = pointers ? \"pointerover\" : (msPointers ? \"MSPointerOver\" : \"mouseenter\"),\n            MOUSELEAVE = pointers ? \"pointerout\" : (msPointers ? \"MSPointerOut\" : \"mouseleave\"),\n            MOUSEWHEEL = \"DOMMouseScroll\" + NS + \" mousewheel\" + NS,\n            RESIZE = kendo.support.resize + NS,\n            SCROLLWIDTH = \"scrollWidth\",\n            SCROLLHEIGHT = \"scrollHeight\",\n            OFFSETWIDTH = \"offsetWidth\",\n            OFFSETHEIGHT = \"offsetHeight\",\n            POPUP_ID_ATTR = \"group\",\n            POPUP_OPENER_ATTR = \"groupparent\",\n            DOCUMENT_ELEMENT = $(document.documentElement),\n            KENDOPOPUP = \"kendoPopup\",\n            HOVERSTATE = \"k-hover\",\n            FOCUSEDSTATE = \"k-focus\",\n            DISABLEDSTATE = \"k-disabled\",\n            SELECTEDSTATE = \"k-selected\",\n            menuSelector = \".k-menu\",\n            groupSelector = \".k-menu-group\",\n            animationContainerSelector = \".k-animation-container\",\n            childAnimationContainerSelector = \".k-child-animation-container\",\n            popupSelector = \".k-menu-popup ,\" + animationContainerSelector,\n            allItemsSelector = \":not(.k-list) > .k-item:not([role='treeitem'])\",\n            disabledSelector = \".k-item.k-disabled\",\n            itemSelector = \".k-item\",\n            availableItemsSelector = \".k-item:not(.k-disabled)\",\n            linkSelector = \".k-item:not(.k-disabled) > .k-link\",\n            exclusionSelector = \":not(.k-item.k-separator):visible\",\n            templateSelector = \"div:not(.k-animation-container,.k-list-container)\",\n            scrollButtonSelector = \".k-menu-scroll-button\",\n            touchPointerTypes = { \"2\": 1, \"touch\": 1 },\n            STRING = \"string\",\n            DATABOUND = \"dataBound\",\n            ARIA_EXPANDED = \"aria-expanded\",\n            ROLE = \"role\",\n\n            bindings = {\n                text: \"dataTextField\",\n                url: \"dataUrlField\",\n                spriteCssClass: \"dataSpriteCssClassField\",\n                imageUrl: \"dataImageUrlField\",\n                imageAttr: \"dataImageAttrField\",\n                content: \"dataContentField\"\n            },\n\n            rendering = {\n                wrapperCssClass: function(group, item) {\n                    var result = \"k-item k-menu-item\",\n                        index = item.index;\n\n                    if (item.separator) {\n                        result += \" k-separator\";\n                    }\n\n                    if (item.enabled === false) {\n                        result += \" k-disabled\";\n                    }\n\n                    if (group.firstLevel && index === 0) {\n                        result += \" k-first\";\n                    }\n\n                    if (index == group.length - 1) {\n                        result += \" k-last\";\n                    }\n\n                    if (item.cssClass) {\n                        result += \" \" + item.cssClass;\n                    }\n\n                    if (item.attr && item.attr.hasOwnProperty(\"class\")) {\n                        result += \" \" + item.attr[\"class\"];\n                    }\n\n                    if (item.selected) {\n                        result += \" \" + SELECTEDSTATE;\n                    }\n\n                    return result;\n                },\n\n                itemCssAttributes: function(item) {\n                    var result = \"\";\n                    var attributes = item.attr || {};\n\n                    for (var attr in attributes) {\n                        if (attributes.hasOwnProperty(attr) && attr !== \"class\") {\n                            result += attr + \"=\\\"\" + attributes[attr] + \"\\\" \";\n                        }\n                    }\n\n                    return result;\n                },\n\n                imageCssAttributes: function(imgAttributes) {\n                    var result = \"\";\n                    var attributes = imgAttributes && imgAttributes.toJSON ? imgAttributes.toJSON() : {};\n\n                    if (!attributes['class']) {\n                        attributes['class'] = IMAGE;\n                    } else {\n                        attributes['class'] += \" \" + IMAGE;\n                    }\n\n                    for (var attr in attributes) {\n                        if (attributes.hasOwnProperty(attr)) {\n                            result += attr + \"=\\\"\" + attributes[attr] + \"\\\" \";\n                        }\n                    }\n\n                    return result;\n                },\n\n                contentCssAttributes: function(item) {\n                    var result = \"\";\n                    var attributes = item.contentAttr || {};\n                    var defaultClasses = \"k-content k-menu-group k-menu-group-md\";\n\n                    if (!attributes['class']) {\n                        attributes['class'] = defaultClasses;\n                    } else {\n                        attributes['class'] += \" \" + defaultClasses;\n                    }\n\n                    for (var attr in attributes) {\n                        if (attributes.hasOwnProperty(attr)) {\n                            result += attr + \"=\\\"\" + attributes[attr] + \"\\\" \";\n                        }\n                    }\n\n                    return result;\n                },\n\n                textClass: function() {\n                    return LINK;\n                },\n\n                groupAttributes: function(group) {\n                    return group.expanded !== true ? `${kendo.attr(\"style-display\")}=\"none\"` : \"\";\n                },\n\n                groupCssClass: function() {\n                    return \"k-menu-group k-menu-group-md\";\n                },\n\n                groupWrapperCssClass: function() {\n                    return \"k-menu-popup\";\n                },\n\n                content: function(item) {\n                    return item.content ? item.content : \"&nbsp;\";\n                }\n        };\n\n        function getEffectDirection(direction, root) {\n            direction = direction.split(\" \")[!root + 0] || direction;\n            return direction.replace(\"top\", \"up\").replace(\"bottom\", \"down\");\n        }\n\n        function parseDirection(direction, root, isRtl) {\n            direction = direction.split(\" \")[!root + 0] || direction;\n            var output = { origin: [\"bottom\", (isRtl ? \"right\" : \"left\")], position: [\"top\", (isRtl ? \"right\" : \"left\")] },\n                horizontal = /left|right/.test(direction);\n\n            if (horizontal) {\n                output.origin = [ \"top\", direction ];\n                output.position[1] = kendo.directions[direction].reverse;\n            } else {\n                output.origin[0] = direction;\n                output.position[0] = kendo.directions[direction].reverse;\n            }\n\n            output.origin = output.origin.join(\" \");\n            output.position = output.position.join(\" \");\n\n            return output;\n        }\n\n        function contains(parent, child) {\n            try {\n                return $.contains(parent, child);\n            } catch (e) {\n                return false;\n            }\n        }\n\n        function updateItemClasses(item) {\n            item = $(item);\n            var omitWrap = item.attr(kendo.attr(\"omit-wrap\"));\n\n            if (omitWrap) {\n                return;\n            }\n\n            item.addClass(\"k-item k-menu-item\")\n                .children(IMG)\n                .addClass(IMAGE);\n\n            item\n                .children(\"a\")\n                .addClass(LINK)\n                .children(IMG)\n                .addClass(IMAGE);\n\n            item\n                .filter(\":not([disabled])\");\n\n            item\n                .filter(\".k-separator\")\n                .removeClass(\"k-menu-item\")\n                .addClass(\"k-menu-separator\")\n                .empty()\n                .append(\"&nbsp;\");\n\n            item\n                .filter(\"li[disabled]\")\n                .addClass(DISABLEDSTATE)\n                .prop(\"disabled\", false)\n                .attr(\"aria-disabled\", true);\n\n            if (!item.filter(\"[role]\").length) {\n                item.attr(ROLE, \"menuitem\");\n            }\n\n            if (!item.children(LINK_SELECTOR).length) {\n                item.contents() // exclude groups, real links, templates and empty text nodes\n                    .filter(function() { return (!this.nodeName.match(excludedNodesRegExp) && !(this.nodeType === 3 && !kendo.trim(this.nodeValue))); })\n                    // adding role=none to span elements inside li[role=menuitem]\n                    // to make screen readers announce submenus #telerik/kendo-ui-core/issues/6942\n                    .wrapAll(\"<span class='\" + LINK + \"' role='none'></span>\")\n                    .filter(function(idx, elm) { return elm.nodeType === 3; })\n                    .wrap(\"<span class='k-menu-link-text' role='none'></span>\");\n            }\n\n            updateArrow(item);\n            updateFirstLast(item);\n        }\n\n        function updateArrow(item) {\n            item = $(item);\n            item.find(\"> .k-link > .k-menu-expand-arrow > [class*=k-i-caret]:not(.k-sprite),> .k-link > .k-menu-expand-arrow > [class*=k-svg-i-caret]:not(.k-sprite)\").parent().remove();\n\n            item.filter(\":has(.k-menu-group)\")\n                .children(\".k-link:not(:has([class*=k-i-caret]:not(.k-sprite))),.k-link:not(:has([class*=k-svg-i-caret]:not(.k-sprite)))\")\n                .each(function() {\n                    var item = $(this);\n\n                    item.append(`<span aria-hidden='true' class='k-menu-expand-arrow'>${kendo.ui.icon({ icon: getArrowIconName(item) })}</span>`);\n                });\n        }\n\n        function getArrowIconName(item) {\n            var arrowIconName,\n                parent = item.parent().parent(),\n                isRtl = kendo.support.isRtl(parent);\n\n            if (parent.hasClass(MENU + \"-horizontal\")) {\n                arrowIconName = \"caret-alt-down\";\n            } else {\n                if (isRtl) {\n                    arrowIconName = \"caret-alt-left\";\n                }\n                else {\n                    arrowIconName = \"caret-alt-right\";\n                }\n            }\n            return arrowIconName;\n        }\n\n        function updateFirstLast(item) {\n            item = $(item);\n\n            item.filter(\".k-first:not(:first-child)\").removeClass(FIRST);\n            item.filter(\".k-last:not(:last-child)\").removeClass(LAST);\n            item.filter(\":first-child\").addClass(FIRST);\n            item.filter(\":last-child\").addClass(LAST);\n        }\n\n        function updateHasAriaPopup(parents) {\n            if (parents && parents.length) {\n                for (var index in parents) {\n                    var parentLi = parents.eq(index);\n                    if (parentLi.find(\"ul\").length) {\n                        parentLi.attr(\"aria-haspopup\", true);\n                    } else {\n                        parentLi.removeAttr(\"aria-haspopup\");\n                    }\n                }\n            }\n        }\n\n        function getParentLiItems(group) {\n            if (!group.hasClass(MENU)) {\n                return group.parentsUntil(\".\" + MENU, \"li\");\n            }\n        }\n\n        function storeItemSelectEventHandler(element, options) {\n            var selectHandler = getItemSelectEventHandler(options);\n            if (selectHandler) {\n                setItemData(element, selectHandler);\n            }\n\n            if (options.items) {\n                $(element).children(\"div\").children(\"ul\").children(\"li\").each(function(i) {\n                    storeItemSelectEventHandler(this, options.items[i]);\n                });\n            }\n        }\n\n        function setItemData(element, selectHandler) {\n            $(element).children(\".k-link\").data({\n                selectHandler: selectHandler\n            });\n        }\n\n        function getItemSelectEventHandler(options) {\n            var selectHandler = options.select,\n                isFunction = kendo.isFunction;\n\n            if (selectHandler && isFunction(selectHandler)) {\n                return selectHandler;\n            }\n            return null;\n        }\n\n        function popupOpenerSelector(id) {\n            return id ? \"li[data-groupparent='\" + id + \"']\" : \"li[data-groupparent]\";\n        }\n        function popupGroupSelector(id) {\n            var selector = id ? \"[data-group='\" + id + \"']\" : \"[data-group]\";\n            return \"ul\" + selector + \",div\" + selector;\n        }\n        function getChildPopups(currentPopup, overflowWrapper) {\n            var childPopupOpener = currentPopup.find(popupOpenerSelector());\n            var result = [];\n            childPopupOpener.each(function(i, opener) {\n                opener = $(opener);\n                var popupId = opener.data(POPUP_OPENER_ATTR);\n                var popup = currentPopup;\n                while (popupId) {\n                    popup = overflowWrapper.find(popupGroupSelector(popupId) + \":visible\");\n                    if (popup.length) {\n                        result.push(popup);\n                    }\n                    opener = popup.find(popupOpenerSelector());\n                    popupId = opener.data(POPUP_OPENER_ATTR);\n                }\n            });\n\n            return result;\n        }\n\n        function popupParentItem(popupElement, overflowWrapper) {\n            var popupId = popupElement.data(POPUP_ID_ATTR);\n            return popupId ? overflowWrapper.find(popupOpenerSelector(popupId)) : $([]);\n        }\n\n        function itemPopup(item, overflowWrapper) {\n            var popupId = item.data(POPUP_OPENER_ATTR);\n            return popupId ? overflowWrapper.children(animationContainerSelector).find(popupGroupSelector(popupId)) : $([]);\n        }\n\n        function overflowMenuParents(current, overflowWrapper) {\n            var parents = [];\n            var getParents = function(item) {\n                while (item.parentNode && !overflowWrapper.is(item.parentNode)) {\n                    parents.push(item.parentNode);\n                    item = item.parentNode;\n                }\n            };\n            var elem = current[0] || current;\n            getParents(elem);\n            var last = parents[parents.length - 1];\n            while ($(last).is(animationContainerSelector)) {\n                var popupElement = $(last).find(popupSelector);\n                elem = popupParentItem(popupElement, overflowWrapper)[0];\n                if (!elem) {\n                    break;\n                }\n                parents.push(elem);\n                getParents(elem);\n                last = parents[parents.length - 1];\n            }\n            return parents;\n        }\n\n        function mousewheelDelta(e) {\n            var delta = 0;\n\n            if (e.wheelDelta) {\n                delta = -e.wheelDelta / 120;\n                delta = delta > 0 ? Math.ceil(delta) : Math.floor(delta);\n            }\n\n            if (e.detail) {\n                delta = Math.round(e.detail / 3);\n            }\n\n            return delta;\n        }\n\n        function parentsScroll(current, scrollDirection) {\n            var scroll = 0;\n            var parent = current.parentNode;\n            while (parent && !isNaN(parent[scrollDirection])) {\n                scroll += parent[scrollDirection];\n                parent = parent.parentNode;\n            }\n            return scroll;\n        }\n\n        function isPointerTouch(e) {\n            return allPointers && e.originalEvent && e.originalEvent.pointerType in touchPointerTypes;\n        }\n\n        function isTouch(e) {\n            var ev = e.originalEvent;\n            return touch && /touch/i.test(ev.type || \"\");\n        }\n\n        function removeSpacesBetweenItems(ul) {\n            ul.contents().filter(function() { return this.nodeName != \"LI\"; }).remove();\n        }\n\n        var Menu = kendo.ui.DataBoundWidget.extend({\n            init: function(element, options) {\n                var that = this;\n\n                Widget.fn.init.call(that, element, options);\n\n                element = that.wrapper = that.element;\n                options = that.options;\n                that._accessors();\n                that._templates();\n                that._dataSource();\n\n                that._updateClasses();\n                that._wrapGroups();\n\n                that._animations(options);\n\n                that.nextItemZIndex = 100;\n\n                that._tabindex();\n\n                that._initOverflow(options);\n\n                that._attachMenuEventsHandlers();\n\n                if (options.openOnClick) {\n                    that.clicked = false;\n                }\n\n                element.attr(ROLE, \"menubar\");\n\n                if (element[0].id) {\n                    that._ariaId = kendo.format(\"{0}_mn_active\", element[0].id);\n                } else {\n                    that._ariaId = kendo.format(\"{0}_mn_active\", kendo.guid());\n                }\n\n                kendo.notify(that);\n            },\n\n            events: [\n                OPEN,\n                CLOSE,\n                ACTIVATE,\n                DEACTIVATE,\n                SELECT,\n                DATABOUND\n            ],\n\n            options: {\n                name: \"Menu\",\n                animation: {\n                    open: {\n                        duration: 200\n                    },\n                    close: { // if close animation effects are defined, they will be used instead of open.reverse\n                        duration: 100\n                    }\n                },\n                orientation: \"horizontal\",\n                direction: \"default\",\n                openOnClick: false,\n                closeOnClick: true,\n                hoverDelay: 100,\n                scrollable: false,\n                popupCollision: null\n            },\n\n            _initData: function() {\n                var that = this;\n\n                if (that.dataSource) {\n                    that.element.empty();\n\n                    that.append(that.dataSource.view(), that.element);\n                }\n            },\n\n            _attachMenuEventsHandlers: function() {\n                var that = this;\n                var element = that.element;\n                var options = that.options;\n                var overflowWrapper = that._overflowWrapper();\n\n                that._checkActiveProxy = that._checkActiveElement.bind(that);\n\n                (overflowWrapper || element).on(POINTERDOWN, itemSelector, that._focusHandler.bind(that))\n                       .on(CLICK + NS, disabledSelector, false)\n                       .on(CLICK + NS, itemSelector, that._click.bind(that))\n                       .on(POINTERDOWN + \" \" + MOUSEDOWN + NS, \".k-content\", that._preventClose.bind(that))\n                       .on(MOUSEENTER + NS, availableItemsSelector, that._mouseenter.bind(that))\n                       .on(MOUSELEAVE + NS, availableItemsSelector, that._mouseleave.bind(that))\n                       .on(MOUSEDOWN + NS, availableItemsSelector, that._mousedown.bind(that))\n                       .on(TOUCHSTART + NS + \" \" + MOUSEENTER + NS + \" \" + MOUSELEAVE + NS + \" \" +\n                           MOUSEDOWN + NS + \" \" + CLICK + NS, linkSelector, that._toggleHover.bind(that));\n\n                element.on(\"keydown\" + NS, that._keydown.bind(that))\n                       .on(\"focus\" + NS, that._focus.bind(that))\n                       .on(\"focus\" + NS, \".k-content\", that._focus.bind(that))\n                       .on(\"blur\" + NS, that._removeFocusItem.bind(that))\n                       .on(\"blur\" + NS, \"[tabindex]\", that._checkActiveProxy);\n\n                if (overflowWrapper) {\n                    overflowWrapper\n                        .on(MOUSELEAVE + NS, popupSelector, that._mouseleavePopup.bind(that))\n                        .on(MOUSEENTER + NS, popupSelector, that._mouseenterPopup.bind(that));\n                }\n\n                if (options.openOnClick) {\n                    that._documentClickHandler = that._documentClick.bind(that);\n                    $(document).on(\"click\", that._documentClickHandler);\n                }\n            },\n\n            _detachMenuEventsHandlers: function() {\n                var that = this;\n                var overflowWrapper = that._overflowWrapper();\n\n                if (overflowWrapper) {\n                    overflowWrapper.off(NS);\n                }\n\n                that.element.off(NS);\n\n                if (that._documentClickHandler) {\n                    $(document).off(\"click\", that._documentClickHandler);\n                }\n            },\n\n            _getNeededSpaceForChildren: function(element, horizontal) {\n                const children = element.children();\n                let total = 0;\n\n                if (children.length > 0) {\n                    children.each((_, element) => {\n                        if (horizontal) {\n                            total += kendo._outerWidth(element);\n                        } else {\n                            total += kendo._outerHeight(element);\n                        }\n                    });\n                }\n\n                return total;\n            },\n\n            _initOverflow: function(options) {\n                var that = this;\n                var isHorizontal = options.orientation == \"horizontal\";\n                var backwardBtn, forwardBtn;\n                const isRtl = kendo.support.isRtl(that.wrapper);\n                that._openedPopups = {};\n                if (options.scrollable) {\n                    that._scrollWrapper = that.element.wrap(`<div class=\"k-menu-scroll-wrapper${options.orientation === 'vertical' ? \" k-menu-scroll-wrapper-vertical\" : \"\"}\"></div>`).parent();\n                    if (isHorizontal) {\n                        removeSpacesBetweenItems(that.element);\n                    }\n                    let backwardBtnIcon = isHorizontal ? (isRtl ? 'right' : 'left') : 'up';\n                    let forwardBtnIcon = isHorizontal ? (isRtl ? 'left' : 'right') : 'down';\n\n                    backwardBtn = $(that.templates.scrollButton({ direction: backwardBtnIcon }));\n                    forwardBtn = $(that.templates.scrollButton({ direction: forwardBtnIcon }));\n\n                    backwardBtn.prependTo(that._scrollWrapper);\n                    forwardBtn.appendTo(that._scrollWrapper);\n\n                    that._initScrolling(that.element, backwardBtn, forwardBtn, isHorizontal, isRtl);\n\n                    var initialWidth = that.element.outerWidth();\n                    var initialCssWidth = that.element[0].style.width;\n                    initialCssWidth = initialCssWidth === \"auto\" ? \"\" : initialCssWidth;\n\n                    if (isHorizontal) {\n                        $(window).on(RESIZE, function() {\n                            setTimeout(function() {\n                                that._setOverflowWrapperWidth(initialWidth, initialCssWidth);\n                                that._toggleScrollButtons(that.element, backwardBtn, forwardBtn, isHorizontal);\n                            }, 300);\n                        });\n                    }\n\n                    that._setOverflowWrapperWidth(initialWidth, initialCssWidth);\n                    that._toggleScrollButtons(that.element, backwardBtn, forwardBtn, isHorizontal);\n                }\n            },\n\n            _overflowWrapper: function() {\n                return this._scrollWrapper || this._popupsWrapper;\n            },\n\n            _setOverflowWrapperWidth: function(initialWidth, initialCssWidth) {\n                var that = this;\n                var wrapperCssWidth = that._scrollWrapper.css(\"width\");\n\n                that._scrollWrapper.css({ width: \"\" });\n                var wrapperWidth = that._scrollWrapper.outerWidth();\n                that._scrollWrapper.css({ width: wrapperCssWidth });\n\n                var menuWidth = that.element.outerWidth();\n                var borders = that.element[0].offsetWidth - that.element[0].clientWidth;\n\n                if (menuWidth != wrapperWidth && wrapperWidth > 0) {\n                    var width = initialCssWidth ? Math.min(initialWidth, wrapperWidth) : wrapperWidth;\n                    that.element.width(width - borders);\n                    that._scrollWrapper.width(width);\n                }\n            },\n\n            _reinitOverflow: function(options) {\n                var that = this;\n                var overflowChanged = ((options.scrollable && !that.options.scrollable) || (!options.scrollable && that.options.scrollable)) ||\n                    (options.scrollable && that.options.scrollable && options.scrollable.distance != that.options.scrollable.distance) ||\n                    options.orientation != that.options.orientation;\n\n                if (overflowChanged) {\n                    that._detachMenuEventsHandlers();\n                    that._destroyOverflow();\n                    that._initOverflow(options);\n                    that._attachMenuEventsHandlers();\n                }\n            },\n\n            _destroyOverflow: function() {\n                var that = this;\n                var overflowWrapper = that._overflowWrapper();\n                if (overflowWrapper) {\n                    overflowWrapper.off(NS);\n                    overflowWrapper.find(scrollButtonSelector).off(NS).remove();\n                    overflowWrapper.children(animationContainerSelector).each(function(i, popupWrapper) {\n                        var ul = $(popupWrapper).find(\".k-child-animation-container > .k-menu-popup\");\n                        ul.off(MOUSEWHEEL);\n                        var popupParentLi = popupParentItem(ul, overflowWrapper);\n                        if (popupParentLi.length) {\n                            popupParentLi.append(popupWrapper);\n                        }\n                    });\n\n                    overflowWrapper.find(popupOpenerSelector()).removeAttr(\"data-groupparent\");\n                    overflowWrapper.find(popupGroupSelector()).removeAttr(\"data-group\");\n                    that.element.off(MOUSEWHEEL);\n                    $(window).off(RESIZE);\n                    overflowWrapper.contents().unwrap();\n\n                    that._scrollWrapper = that._popupsWrapper = that._openedPopups = undefined$1;\n                }\n            },\n\n            _initScrolling: function(scrollElement, backwardBtn, forwardBtn, isHorizontal, isRtl) {\n                var that = this;\n                var scrollable = that.options.scrollable;\n                var distance = that.isNumeric(scrollable.distance) ? scrollable.distance : SCROLLSPEED;\n                var mouseWheelDistance = distance / 2;\n                var backward = \"-=\" + distance;\n                var forward = \"+=\" + distance;\n                var backwardDouble = \"-=\" + distance * 2;\n                var forwardDouble = \"+=\" + distance * 2;\n                var scrolling = false;\n                var touchEvents = false;\n                var scroll = function(value) {\n                    var scrollValue = isHorizontal ? { \"scrollLeft\": value } : { \"scrollTop\": value };\n                    scrollElement.finish().animate(scrollValue, \"fast\", \"linear\", function() {\n                        if (scrolling) {\n                            scroll(value);\n                        }\n                    });\n                    that._toggleScrollButtons(scrollElement, backwardBtn, forwardBtn, isHorizontal, isRtl);\n                };\n\n                var mouseenterHandler = function(e) {\n                    if (!scrolling && !touchEvents) {\n                        scroll(e.data.direction);\n                        scrolling = true;\n                    }\n                };\n\n                var mousedownHandler = function(e) {\n                    var scrollValue = isHorizontal ? { \"scrollLeft\": e.data.direction } : { \"scrollTop\": e.data.direction };\n                    touchEvents = isTouch(e) || isPointerTouch(e);\n                    scrollElement.stop().animate(scrollValue, \"fast\", \"linear\", function() {\n                        if (!touchEvents) {\n                            $(e.currentTarget).trigger(MOUSEENTER);\n                        } else {\n                             that._toggleScrollButtons(scrollElement, backwardBtn, forwardBtn, isHorizontal, isRtl);\n                             scrolling = true;\n                        }\n                    });\n                    scrolling = false;\n\n                    e.stopPropagation();\n                    e.preventDefault();\n                };\n\n                backwardBtn.on(MOUSEENTER + NS, { direction: isRtl && isHorizontal ? forward : backward }, mouseenterHandler)\n                    .on(kendo.eventMap.down + NS, { direction: isRtl && isHorizontal ? forwardDouble : backwardDouble }, mousedownHandler);\n\n                forwardBtn.on(MOUSEENTER + NS, { direction: isRtl && isHorizontal ? backward : forward }, mouseenterHandler)\n                    .on(kendo.eventMap.down + NS, { direction: isRtl && isHorizontal ? backwardDouble : forwardDouble }, mousedownHandler);\n\n                backwardBtn.add(forwardBtn)\n                    .on(MOUSELEAVE + NS, function() {\n                        scrollElement.stop();\n                        scrolling = false;\n                        that._toggleScrollButtons(scrollElement, backwardBtn, forwardBtn, isHorizontal, isRtl);\n                    });\n\n                scrollElement.on(MOUSEWHEEL, function(e) {\n                    if (!e.ctrlKey && !e.shiftKey && !e.altKey) {\n                        var wheelDelta = mousewheelDelta(e.originalEvent);\n                        var scrollSpeed = Math.abs(wheelDelta) * mouseWheelDistance;\n                        var value = (wheelDelta > 0 ? \"+=\" : \"-=\") + scrollSpeed;\n                        var scrollValue = isHorizontal ? { \"scrollLeft\": value } : { \"scrollTop\": value };\n\n                        that._closeChildPopups(scrollElement);\n\n                        scrollElement.finish().animate(scrollValue, \"fast\", \"linear\", function() {\n                            that._toggleScrollButtons(scrollElement, backwardBtn, forwardBtn, isHorizontal);\n                        });\n                        e.preventDefault();\n                    }\n                });\n            },\n\n            isNumeric: function(n) {\n                return !isNaN(parseFloat(n)) && isFinite(n);\n            },\n\n            _toggleScrollButtons: function(scrollElement, backwardBtn, forwardBtn, horizontal) {\n                const neededSpace = this._getNeededSpaceForChildren(scrollElement, horizontal);\n                const elementSpace = horizontal ? kendo._outerWidth(this.element) : kendo._outerHeight(this.element);\n\n                backwardBtn.toggle(neededSpace > elementSpace);\n                forwardBtn.toggle(neededSpace > elementSpace);\n\n                const currentScroll = horizontal ? kendo.scrollLeft(scrollElement) : scrollElement.scrollTop();\n                const elementIsPopup = scrollElement.is(popupSelector) || scrollElement.parent().is(childAnimationContainerSelector);\n\n                let disableNextButton = Math.abs(currentScroll - (scrollElement[0].scrollWidth - scrollElement[0].offsetWidth)) <= 1;\n\n                if (!horizontal) {\n                    disableNextButton = Math.abs(currentScroll - (scrollElement[0].scrollHeight - scrollElement[0].offsetHeight)) <= 1;\n                }\n\n                if (elementIsPopup) {\n                    disableNextButton = Math.abs(currentScroll - (scrollElement[0].scrollHeight - scrollElement[0].offsetHeight) - 1) <= 1;\n                }\n\n                backwardBtn.toggleClass(DISABLEDSTATE, Math.floor(currentScroll) === 0);\n                forwardBtn.toggleClass(DISABLEDSTATE, disableNextButton);\n            },\n\n            setOptions: function(options) {\n                var animation = this.options.animation;\n\n                this._animations(options);\n\n                options.animation = extend(true, animation, options.animation);\n\n                if (\"dataSource\" in options) {\n                    this._dataSource(options);\n                }\n\n                this._updateClasses();\n                this._wrapGroups();\n                this._reinitOverflow(options);\n\n                Widget.fn.setOptions.call(this, options);\n            },\n\n            destroy: function() {\n                var that = this;\n\n                Widget.fn.destroy.call(that);\n\n                that._detachMenuEventsHandlers();\n\n                that._destroyOverflow();\n\n                kendo.destroy(that.element);\n            },\n\n            enable: function(element, enable) {\n                this._toggleDisabled(element, enable !== false);\n\n                return this;\n            },\n\n            disable: function(element) {\n                this._toggleDisabled(element, false);\n\n                return this;\n            },\n\n            attemptGetItem: function(candidate) {\n                candidate = candidate || this.element;\n                var item = this.element.find(candidate);\n                var overflowWrapper = this._overflowWrapper();\n\n                if (item.length || candidate === this.element) {\n                    return item;\n                } else if (overflowWrapper) {\n                    return overflowWrapper.find(candidate);\n                } else {\n                    return $();\n                }\n            },\n\n            append: function(item, referenceItem) {\n                referenceItem = this.attemptGetItem(referenceItem);\n\n                var inserted = this._insert(item, referenceItem, referenceItem.length ? this._childPopupElement(referenceItem).children().eq(0) : null);\n\n                each(inserted.items, function(i) {\n                    inserted.group.append(this);\n                    updateArrow(this);\n                    storeItemSelectEventHandler(this, item[i] || item);\n                });\n\n                updateArrow(referenceItem);\n                updateFirstLast(inserted.group.find(\".k-first, .k-last\").add(inserted.items));\n                updateHasAriaPopup(getParentLiItems(inserted.group));\n\n                return this;\n            },\n\n            insertBefore: function(item, referenceItem) {\n                referenceItem = this.attemptGetItem(referenceItem);\n\n                var inserted = this._insert(item, referenceItem, referenceItem.parent());\n\n                each(inserted.items, function(i) {\n                    referenceItem.before(this);\n                    updateArrow(this);\n                    updateFirstLast(this);\n                    storeItemSelectEventHandler(this, item[i] || item);\n                });\n\n                updateFirstLast(referenceItem);\n\n                return this;\n            },\n\n            insertAfter: function(item, referenceItem) {\n                referenceItem = this.attemptGetItem(referenceItem);\n\n                var inserted = this._insert(item, referenceItem, referenceItem.parent());\n\n                each(inserted.items, function(i) {\n                    referenceItem.after(this);\n                    updateArrow(this);\n                    updateFirstLast(this);\n                    storeItemSelectEventHandler(this, item[i] || item);\n                });\n\n                updateFirstLast(referenceItem);\n\n                return this;\n            },\n\n            _insert: function(item, referenceItem, parent) {\n                var that = this,\n                    items, groups;\n\n                if (!referenceItem || !referenceItem.length) {\n                    parent = that.element;\n                }\n\n                var plain = $.isPlainObject(item) || item instanceof kendo.data.ObservableObject,\n                    groupData = {\n                        firstLevel: parent.hasClass(MENU),\n                        horizontal: parent.hasClass(MENU + \"-horizontal\"),\n                        expanded: true,\n                        length: parent.children().length\n                    };\n\n                if (referenceItem && !parent.length) {\n                    parent = $(that.renderGroup({ group: groupData, options: that.options })).css(\"display\", \"none\").appendTo(referenceItem);\n                    kendo.applyStylesFromKendoAttributes(parent, [\"display\"]);\n                }\n\n                if (plain || isArray(item) || item instanceof kendo.data.ObservableArray) { // is JSON\n                    items = $($.map(plain ? [ item ] : item, function(value, idx) {\n                                if (typeof value === \"string\") {\n                                    return $(value).get();\n                                } else {\n                                    let itemElement = $(that.renderItem({\n                                        group: groupData,\n                                        item: extend(value, { index: idx })\n                                    }));\n\n                                    kendo.applyStylesFromKendoAttributes(itemElement, [\"display\"]);\n                                    return itemElement.get();\n                                }\n                            }));\n                } else {\n                    if (typeof item == \"string\" && item.charAt(0) != \"<\") {\n                        items = that.element.find(item);\n                    } else {\n                        items = $(item);\n                    }\n\n                    groups = items.find(\"> ul\")\n                                    .addClass(\"k-menu-group k-menu-group-md\")\n                                    .attr(ROLE, \"menu\");\n\n                    items = items.filter(\"li\");\n\n                    items.add(groups.find(\"> li\")).each(function() {\n                        updateItemClasses(this);\n                    });\n                }\n\n                parent = parent.is(popupSelector) ? parent.find(groupSelector).first() : parent;\n\n                return { items: items, group: parent };\n            },\n\n            remove: function(element) {\n                element = this.attemptGetItem(element);\n\n                var that = this,\n                    parent = element.parentsUntil(that.element, allItemsSelector),\n                    group = element.parent(\"ul:not(.k-menu)\");\n\n                element.remove();\n\n                if (group && !group.children(allItemsSelector).length) {\n                    var parentItems = getParentLiItems(group);\n\n                    var container = group.parent(animationContainerSelector);\n\n                    if (container.length) {\n                        container.remove();\n                    } else {\n                        group.remove();\n                    }\n\n                    updateHasAriaPopup(parentItems);\n                }\n\n                if (parent.length) {\n                    parent = parent.eq(0);\n\n                    updateArrow(parent);\n                    updateFirstLast(parent);\n                }\n\n                return that;\n            },\n\n            _openAfterLoad: function(element, dataItem) {\n                var that = this;\n                if (dataItem.loaded()) {\n                    that.open(element);\n                    that._loading = false;\n                } else {\n                    dataItem.one(CHANGE, function() {\n                        element.find(ICON_SELECTOR).children().removeClass(\"k-i-loading\");\n                        if (that._loading) {\n                            that.open(element);\n                            that._loading = false;\n                        }\n                    });\n                }\n            },\n\n            _createPopup: function(div, options) {\n                let that = this;\n                let overflowWrapper = that._overflowWrapper();\n                return div.kendoPopup(extend({\n                    activate: function() { that._triggerEvent({ item: this.wrapper.parent(), type: ACTIVATE }); },\n                    deactivate: function(e) {\n                        that._closing = false;\n                        e.sender.element // Restore opacity after fade.\n                            .removeData(\"targetTransform\")\n                            .css({ opacity: \"\" });\n                        that._triggerEvent({ item: this.wrapper.parent(), type: DEACTIVATE });\n                    },\n                    open: that._popupOpen.bind(that),\n                    close: function(e) {\n                        that._closing = e.sender.element;\n                        var li = e.sender.wrapper.parent();\n\n                        if (overflowWrapper) {\n                            var popupId = e.sender.element.data(POPUP_ID_ATTR);\n                            if (popupId) {\n                                li = (overflowWrapper || that.element).find(popupOpenerSelector(popupId));\n                            }\n                            e.sender.wrapper.children(scrollButtonSelector).hide();\n                        }\n\n                        if (!that._triggerEvent({ item: li[0], type: CLOSE })) {\n                            li.css(ZINDEX, li.data(ZINDEX));\n                            li.removeData(ZINDEX);\n\n                            if (that.options.scrollable) {\n                                li.parent().siblings(scrollButtonSelector).css({ zIndex: \"\" });\n                            }\n\n                            if (touch || allPointers || kendo.support.mouseAndTouchPresent) {\n                                li.removeClass(HOVERSTATE);\n                                that._removeHoverItem();\n                            }\n                        } else {\n                            e.preventDefault();\n                        }\n                    }\n                }, options)).data(KENDOPOPUP);\n            },\n\n            open: function(element) {\n                var that = this;\n                var options = that.options;\n                var horizontal = options.orientation == \"horizontal\";\n                var direction = options.direction;\n                var isRtl = kendo.support.isRtl(that.wrapper);\n                var overflowWrapper = that._overflowWrapper();\n                element = (overflowWrapper || that.element).find(element);\n\n                var dataItem = that.dataSource && that.dataSource.getByUid(element.data(kendo.ns + \"uid\"));\n\n                if (dataItem && dataItem.hasChildren && !dataItem.loaded() && !that._loading) {\n                    that._loading = true;\n                    element.find(ICON_SELECTOR).children().addClass(\"k-i-loading\");\n                    dataItem.load();\n                    that._openAfterLoad(element, dataItem);\n                    return;\n                }\n\n                if (/^(top|bottom|default)$/.test(direction)) {\n                    if (isRtl) {\n                        direction = horizontal ? (direction + \" left\").replace(\"default\", \"bottom\") : \"left\";\n                    } else {\n                        direction = horizontal ? (direction + \" right\").replace(\"default\", \"bottom\") : \"right\";\n                    }\n                }\n\n                var visiblePopups = \">.k-popup:visible,>.k-animation-container > .k-child-animation-container > .k-menu-popup:visible\";\n                var closePopup = function() {\n                    var popup = $(this).data(KENDOPOPUP);\n                    if (popup) {\n                        // Use the built-in close method to play the hoverDelay from the options\n                        that.close($(this).closest(\"li.k-item\"), true);\n                    }\n                };\n\n                element.siblings()\n                       .find(visiblePopups)\n                       .each(closePopup);\n\n                if (overflowWrapper) {\n                    element.find(visiblePopups).each(closePopup);\n                }\n\n                if (that.options.openOnClick) {\n                    that.clicked = true;\n                }\n\n                element.each(function() {\n                    var li = $(this);\n\n                    clearTimeout(li.data(TIMER));\n                    clearTimeout(that._timerTimeout);\n                    that._timerTimeout = setTimeout(function() {\n                        var div = li.find(\"> .k-menu-popup, > .k-animation-container > .k-child-animation-container > .k-menu-popup\").filter(\":hidden\").first();\n                        var popup;\n                        var overflowPopup;\n\n                        if (!div[0] && overflowWrapper) {\n                            overflowPopup = that._getPopup(li);\n                            div = overflowPopup && overflowPopup.element;\n                        }\n                        if (div.is(\":visible\")) {\n                            return;\n                        }\n\n                        if (div[0] && that._triggerEvent({ item: li[0], type: OPEN }) === false) {\n                            const menuParent = div.children('.k-menu-scroll-wrapper').length ? div.children('.k-menu-scroll-wrapper') : div;\n                            const menu = that._groupElementsInitialSpace.find(({ element }) => menuParent.children('ul').is(element));\n\n                            let maxHeight = \"\";\n                            if (menu && Object.keys(menu).length > 0) {\n                                if (menu.height > 0) {\n                                    maxHeight = menu.height;\n                                }\n\n                                that._popupToBeOpened = menu;\n\n                                if (menu.inlineHeight) {\n                                    $(menu.element).css({ height: menu.inlineHeight });\n                                } else {\n                                    $(menu.element).css({ height: \"\" });\n                                }\n                            }\n\n                            div.css({ maxHeight: options.scrollable ? \"\" : maxHeight, overflow: \"visible\", });\n\n                            li.data(ZINDEX, li.css(ZINDEX));\n                            var nextZindex = that.nextItemZIndex++;\n                            li.css(ZINDEX, nextZindex);\n\n                            if (that.options.scrollable) {\n                                li.parent().siblings(scrollButtonSelector).css({ zIndex: ++nextZindex });\n                            }\n\n                            popup = div.data(KENDOPOPUP);\n                            var root = li.parent().hasClass(MENU),\n                                parentHorizontal = root && horizontal,\n                                directions = parseDirection(direction, root, isRtl),\n                                effects = options.animation.open.effects,\n                                openEffects = effects !== undefined$1 ? effects : \"slideIn:\" + getEffectDirection(direction, root),\n                                collision;\n\n                            if (options.popupCollision !== null) {\n                                collision = options.popupCollision;\n                            } else if (parentHorizontal) {\n                                collision = \"fit\";\n                            } else {\n                                collision = \"fit flip\";\n                            }\n\n                            if (!popup) {\n                                popup = that._createPopup(div, {\n                                    origin: directions.origin,\n                                    position: directions.position,\n                                    collision: collision,\n                                    anchor: li,\n                                    appendTo: overflowWrapper || li,\n                                    animation: {\n                                        open: extend(true, { effects: openEffects }, options.animation.open),\n                                        close: options.animation.close\n                                    },\n                                });\n\n                                div.closest(animationContainerSelector).removeAttr(ROLE);\n                            } else {\n                                popup = div.data(KENDOPOPUP);\n                                popup.options.origin = directions.origin;\n                                popup.options.position = directions.position;\n                                popup.options.animation.open.effects = openEffects;\n                            }\n                            div.removeAttr(\"aria-hidden\");\n                            li.attr(ARIA_EXPANDED, true);\n\n                            that._configurePopupOverflow(popup, li);\n\n                            popup._hovered = true;\n                            popup.open();\n\n                            that._initPopupScrolling(popup);\n                        }\n\n                    }, that.options.hoverDelay);\n\n                    li.data(TIMER, that._timerTimeout);\n                });\n\n                return that;\n            },\n\n            _configurePopupOverflow: function(popup, popupOpener) {\n                var that = this;\n               if (that.options.scrollable) {\n                    that._wrapPopupElement(popup);\n                    if (!popupOpener.attr(\"data-groupparent\")) {\n                        var groupId = new Date().getTime();\n                        popupOpener.attr(\"data-groupparent\", groupId);\n                        popup.element.attr(\"data-group\", groupId);\n                    }\n               }\n            },\n\n            _wrapPopupElement: function(popup) {\n                if (!popup.element.parent().is(childAnimationContainerSelector)) {\n                    popup.wrapper = kendo.wrap(popup.element, popup.options.autosize)\n                        .css({\n                            overflow: \"hidden\",\n                            display: \"block\",\n                            position: \"absolute\"\n                        });\n                }\n            },\n\n            _initPopupScrolling: function(popup, isHorizontal, skipMouseEvents) {\n                var that = this;\n                const popupElement = popup.element;\n                const scrollWrapper = popupElement.children('.k-menu-scroll-wrapper');\n                const menu = scrollWrapper.length ? $(scrollWrapper.children('ul')) : $(popupElement.children('ul'));\n                let childrenScrollSpace = that._getNeededSpaceForChildren(menu, isHorizontal);\n                let initScrolling = false;\n\n                if (isHorizontal) {\n                    initScrolling = (kendo._outerWidth(popupElement) < childrenScrollSpace);\n                } else {\n                    initScrolling = (kendo._outerHeight(popupElement) < childrenScrollSpace);\n                }\n\n\n                if (that.options.scrollable && ((popupElement[0].scrollHeight > popupElement[0].offsetHeight) || initScrolling)) {\n                    that._initPopupScrollButtons(popup, isHorizontal, skipMouseEvents);\n                } else {\n                    if (scrollWrapper.length) {\n                        scrollWrapper.find(scrollButtonSelector).remove();\n                        menu.unwrap();\n                    }\n                }\n            },\n\n            _scrollButtonsMouseEnter: function() {\n                let that = this;\n                let popup = that.popup;\n                let overflowWrapper = that._overflowWrapper();\n                $(getChildPopups(popup.element, overflowWrapper)).each(function(i, p) {\n                    let popupOpener = overflowWrapper.find(popupOpenerSelector(p.data(POPUP_ID_ATTR)));\n                    that.close(popupOpener);\n                });\n            },\n\n            _scrollButtonsMouseLeave: function() {\n                let that = this;\n                let popup = that.popup;\n                setTimeout(function() {\n                    if ($.isEmptyObject(that._openedPopups)) {\n                        that._closeParentPopups(popup.element);\n                    }\n                }, DELAY);\n            },\n\n            _initPopupScrollButtons: function(popup, isHorizontal, skipMouseEvents) {\n                let that = this,\n                    scrollButtons = popup.wrapper.find(scrollButtonSelector),\n                    element = popup.element,\n                    scrollWrapper = element.children('.k-menu-scroll-wrapper'),\n                    menu = element.children('ul');\n                    that._denyOpening = true;\n                    if (!menu.length && scrollWrapper.length) {\n                        menu = scrollWrapper.children('ul');\n                    }\n\n                    if (!isHorizontal) {\n                        menu.css({\n                            overflow: 'hidden',\n                        });\n                    }\n                    const wrapper = scrollWrapper.length > 0 ? scrollWrapper : menu.wrap(`<div class=\"k-menu-scroll-wrapper${!isHorizontal ? \" k-menu-scroll-wrapper-vertical\" : \"\"}\"></div>`).parent();\n                    if (!scrollButtons.length) {\n                        let backwardBtn = $(that.templates.scrollButton({ direction: isHorizontal ? \"left\" : \"up\" }));\n                        let forwardBtn = $(that.templates.scrollButton({ direction: isHorizontal ? \"right\" : \"down\" }));\n\n                        scrollButtons = backwardBtn.add(forwardBtn);\n                        scrollButtons.css({\n                            width: !isHorizontal && '100%',\n                        });\n\n                        backwardBtn.prependTo(wrapper);\n                        forwardBtn.appendTo(wrapper);\n\n                        that._initScrolling(menu, backwardBtn, forwardBtn, isHorizontal);\n                        if (!skipMouseEvents) {\n                            scrollButtons.on(MOUSEENTER + NS, function() {\n                                let overflowWrapper = that._overflowWrapper();\n                                $(getChildPopups(popup.element, overflowWrapper)).each(function(i, p) {\n                                    let popupOpener = overflowWrapper.find(popupOpenerSelector(p.data(POPUP_ID_ATTR)));\n                                    that.close(popupOpener);\n                                });\n                            })\n                            .on(MOUSELEAVE + NS, function(e) {\n                                setTimeout(function() {\n                                    if ($.isEmptyObject(that._openedPopups) && !popup.element.find(e.relatedTarget).length) {\n                                        that._closeParentPopups(popup.element);\n                                    }\n                                }, DELAY);\n                            });\n                        }\n                    } else {\n                        if (scrollButtons.is(':hidden')) {\n                            scrollButtons.show();\n                        }\n                    }\n\n                    if (scrollButtons.length > 0 && !isHorizontal) {\n                        const initialInlineHeight = that._popupToBeOpened ? that._popupToBeOpened.inlineHeight : \"\";\n\n                        menu.css({ height: initialInlineHeight !== '' ? initialInlineHeight : `${kendo._outerHeight(popup.wrapper) - (kendo._outerHeight(scrollButtons) * 2)}px` });\n                    }\n\n                    that._toggleScrollButtons(menu, scrollButtons.first(), scrollButtons.last(), isHorizontal);\n                    that._denyOpening = false;\n            },\n\n            _popupOpen: function(e) {\n                if (!this._keyTriggered) {\n                    e.sender.element.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                }\n                if (this.options.scrollable) {\n                    this._setPopupHeight(e.sender);\n                }\n            },\n\n            _setPopupHeight: function(popup, isFixed) {\n                let popupElement = popup.element,\n                    popups = popupElement.add(popupElement.parent(childAnimationContainerSelector));\n\n                popups.height((popupElement.hasClass(MENU) && this._initialHeight) || \"\");\n\n                let location = popup._location(isFixed),\n                    windowHeight = $(window).height(),\n                    popupOuterHeight = location.height,\n                    popupOffsetTop = isFixed ? 0 : Math.max(location.top, 0),\n                    scrollTop = isFixed ? 0 : parentsScroll(this._overflowWrapper()[0], \"scrollTop\"),\n                    bottomScrollbar = window.innerHeight - windowHeight,\n                    maxHeight = windowHeight + bottomScrollbar,\n                    canFit = maxHeight + scrollTop > popupOuterHeight + popupOffsetTop;\n\n                if (!canFit) {\n                    let popupViewportGap = windowHeight * 0.05, // 5% gap from the viewport.\n                    height = Math.min(maxHeight, maxHeight - popupOffsetTop - popupViewportGap + scrollTop);\n                    popups.css({ height: height + \"px\" });\n                    popupElement.css({ overflow: 'hidden' });\n                }\n            },\n\n            close: function(items, dontClearClose) {\n                var that = this;\n                var overflowWrapper = that._overflowWrapper();\n                var element = (overflowWrapper || that.element);\n\n                items = element.find(items);\n\n                if (!items.length) {\n                    items = element.find(\">.k-item\");\n                }\n\n                var hasChildPopupsHovered = function(currentPopup) {\n                    var result = false;\n                    if ($.isEmptyObject(that._openedPopups)) {\n                        return result;\n                    }\n                    $(getChildPopups(currentPopup, overflowWrapper)).each(function(i, popup) {\n                        result = !!that._openedPopups[popup.data(POPUP_ID_ATTR).toString()];\n                        return !result;\n                    });\n                    return result;\n                };\n\n                var isPopupMouseLeaved = function(opener) {\n                    var groupId = opener.data(POPUP_OPENER_ATTR);\n                    return (!overflowWrapper || !groupId || !that._openedPopups[groupId.toString()]);\n                };\n\n                items.each(function() {\n                    var li = $(this);\n\n                    li.attr(ARIA_EXPANDED, false);\n\n                    if (!dontClearClose && that._isRootItem(li)) {\n                        that.clicked = false;\n                    }\n\n                    clearTimeout(li.data(TIMER));\n\n                    li.data(TIMER, setTimeout(function() {\n                        var popup = that._getPopup(li);\n                        if (popup && (isPopupMouseLeaved(li) || that._forceClose)) {\n                            if (!that._forceClose && hasChildPopupsHovered(popup.element)) {\n                                return;\n                            }\n\n                            popup.close();\n                            popup.element.attr(\"aria-hidden\", true);\n\n                            if (overflowWrapper) {\n                                if (that._forceClose && items.last().is(li[0])) {\n                                    delete that._forceClose;\n                                }\n                            }\n                        }\n                    }, that.options.hoverDelay));\n                });\n\n                return that;\n            },\n\n            _getPopup: function(li) {\n                var that = this;\n                var popup = li.find(\".k-menu-popup:not(.k-list-container):not(.k-calendar-container):visible\").first().data(KENDOPOPUP);\n                var overflowWrapper = that._overflowWrapper();\n\n                if (!popup && overflowWrapper) {\n                    var groupId = li.data(POPUP_OPENER_ATTR);\n                    if (groupId) {\n                        var popupElement = overflowWrapper.find(popupGroupSelector(groupId));\n                        popup = popupElement.data(KENDOPOPUP);\n                    }\n                }\n                return popup;\n            },\n\n            _toggleDisabled: function(items, enable) {\n                this.element.find(items).each(function() {\n                    $(this)\n                        .toggleClass(DISABLEDSTATE, !enable)\n                        .attr(\"aria-disabled\", !enable);\n                });\n            },\n\n            _toggleHover: function(e) {\n                var target = $(kendo.eventTarget(e) || e.target).closest(allItemsSelector),\n                    isEnter = e.type == MOUSEENTER || MOUSEDOWN.indexOf(e.type) !== -1;\n\n                target.siblings().removeClass(HOVERSTATE);\n\n                if (!target.parents(\"li.\" + DISABLEDSTATE).length) {\n                    target.toggleClass(HOVERSTATE, isEnter || e.type == \"mousedown\" || e.type == \"pointerover\" || e.type == TOUCHSTART);\n                }\n            },\n\n            _preventClose: function() {\n                if (!this.options.closeOnClick) {\n                    this._closurePrevented = true;\n                }\n            },\n\n            _checkActiveElement: function(e) {\n                var that = this,\n                    focusedItem = $(e ? e.currentTarget : this._focusItem()),\n                    target = that._findRootParent(focusedItem)[0];\n\n                if (!this._closurePrevented) {\n                    setTimeout(function() {\n                        if (!document.hasFocus() || (!contains(target, kendo._activeElement()) && e && !contains(target, e.currentTarget))) {\n                            that.close(target);\n                        }\n                    }, 0);\n                }\n\n                this._closurePrevented = false;\n            },\n\n            _removeFocusItem: function() {\n                var oldFocusedItem = this._focusItem();\n                if (oldFocusedItem && oldFocusedItem.hasClass(FOCUSEDSTATE)) {\n                    oldFocusedItem.removeClass(FOCUSEDSTATE);\n                    this._oldFocusItem = null;\n                }\n            },\n\n            _wrapGroups: function() {\n                var that = this;\n                const elements = that.element.find(\"li > ul\");\n\n                that._groupElementsInitialSpace = Array.from(elements).map(element => ({\n                    element,\n                    width: kendo._outerWidth(element),\n                    height: kendo._outerHeight(element),\n                    inlineHeight: element.style && element.style.height ? element.style.height : \"\"\n                }));\n\n                elements\n                    .filter(function() {\n                        return !$(this).parent().hasClass(\"k-menu-popup\");\n                    })\n                    .wrap(\"<div class='k-menu-popup k-popup'></div>\")\n                    .parent(\"div\")\n                    .attr(\"aria-hidden\", that.element.is(\":visible\"))\n                    .hide();\n\n                that.element.find(\"ul\").each(function() {\n                    var group = $(this);\n                    var id = kendo.guid();\n                    group.attr(\"id\", id)\n                        .closest(\"li\")\n                        .attr(\"aria-controls\", id);\n                });\n            },\n\n            _updateClasses: function() {\n                var element = this.element,\n                    nonContentGroupsSelector = \".k-menu-init div ul\",\n                    items;\n\n                element.removeClass(\"k-menu-horizontal k-menu-vertical\");\n                element.addClass(\"k-reset k-header k-menu-init \" + MENU).addClass(MENU + \"-\" + this.options.orientation);\n\n                if (this.options.orientation === \"vertical\") {\n                    element.attr(\"aria-orientation\", \"vertical\");\n                } else {\n                    element.attr(\"aria-orientation\", \"horizontal\");\n                }\n\n                element.find(\"li > ul\")\n                       .filter(function() {\n                           return !kendo.support.matchesSelector.call(this, nonContentGroupsSelector);\n                       })\n                       .addClass(\"k-menu-group k-menu-group-md\")\n                       .attr(ROLE, \"menu\")\n                       .parent(\"li\")\n                       .attr(\"aria-haspopup\", \"true\")\n                       .end()\n                       .find(\"li > div\")\n                       .addClass(\"k-content\")\n                       .attr(\"tabindex\", \"-1\"); // Capture the focus before the Menu\n\n                element.find(\"li[aria-haspopup]\").attr(ARIA_EXPANDED, false);\n\n                items = element.find(\"> li,.k-menu-group > li\");\n\n                element.removeClass(\"k-menu-init\");\n\n                items.each(function() {\n                    updateItemClasses(this);\n                });\n            },\n\n            _mouseenter: function(e) {\n                var that = this;\n                var element = $(e.currentTarget);\n                var hasChildren = that._itemHasChildren(element);\n                var popupId = element.data(POPUP_OPENER_ATTR) || element.closest(popupSelector).data(POPUP_ID_ATTR);\n                var pointerTouch = isPointerTouch(e);\n                var isParentClosing = false;\n\n                if (that._denyOpening) {\n                    return;\n                }\n\n                if (popupId) {\n                    that._openedPopups[popupId.toString()] = true;\n                }\n\n                if (that._closing) {\n                    isParentClosing = !!that._closing.find(element).length;\n                }\n\n                if (isParentClosing) {\n                    return;\n                }\n\n                that._keyTriggered = false;\n\n                if ((that.options.openOnClick.rootMenuItems && that._isRootItem(element.closest(allItemsSelector))) ||\n                    (that.options.openOnClick.subMenuItems && !that._isRootItem(element.closest(allItemsSelector)))) {\n                    return;\n                }\n\n                if ((that.options.openOnClick === false ||\n                    (that.options.openOnClick.rootMenuItems === false && that._isRootItem(element.closest(allItemsSelector))) ||\n                    (that.options.openOnClick.subMenuItems === false && !that._isRootItem(element.closest(allItemsSelector))) || that.clicked) && !touch &&\n                    !(pointerTouch && that._isRootItem(element.closest(allItemsSelector)))) {\n\n                    if (!contains(e.currentTarget, e.relatedTarget) && hasChildren) {\n                        that.open(element);\n                    }\n                }\n\n                if (that.options.openOnClick === true && that.clicked || touch) {\n                    element.siblings().each(function(_, sibling) {\n                        that.close(sibling, true);\n                    });\n                }\n            },\n\n            _mousedown: function(e) {\n                var that = this;\n                var element = $(e.currentTarget);\n                // needs to close subMenuItems\n                that._mousedownedElement = element;\n                if (that.options.openOnClick.subMenuItems && !that._isRootItem(element) || touch) {\n                    element.siblings().each(function(_, sibling) {\n                        that.close(sibling, true);\n                    });\n                }\n            },\n\n            _mouseleave: function(e) {\n                var that = this;\n                var element = $(e.currentTarget);\n                var popupOpener = element.data(POPUP_OPENER_ATTR);\n                var hasChildren = element.children(popupSelector).length || popupOpener;\n                var $window = $(window);\n\n                if (popupOpener) {\n                    delete that._openedPopups[popupOpener.toString()];\n                }\n\n                if (element.parentsUntil(animationContainerSelector, \".k-list-container,.k-calendar-container\")[0]) {\n                    e.stopImmediatePropagation();\n                    return;\n                }\n\n                if ((that.options.openOnClick === false || (!that.options.openOnClick.rootMenuItems && that._isRootItem(element)) ||\n                    (!that.options.openOnClick.subMenuItems && !that._isRootItem(element))) && !touch && !isPointerTouch(e) &&\n                    !contains(e.currentTarget, e.relatedTarget || e.target) && hasChildren &&\n                    !contains(e.currentTarget, kendo._activeElement())) {\n                        that.close(element, true);\n                        that._loading = false;\n                        return;\n                }\n\n                // Detect if cursor goes outside the viewport of the browser\n                if ( (kendo.support.browser.msie && !e.toElement && !e.relatedTarget && !isPointerTouch(e)) ||\n                    e.clientX < 0 || e.clientY < 0 ||\n                    e.clientY > $window.height() ||\n                    e.clientX > $window.width()) {\n                    that.close(element);\n                }\n            },\n\n            _mouseenterPopup: function(e) {\n                var that = this;\n                var popupElement = $(e.currentTarget);\n\n                if (popupElement.parent().is(childAnimationContainerSelector)) {\n                     return;\n                }\n\n                popupElement = popupElement.find(popupSelector);\n                var popupId = popupElement.data(POPUP_ID_ATTR);\n\n                if (popupId) {\n                    that._openedPopups[popupId.toString()] = true;\n                }\n            },\n\n            _mouseleavePopup: function(e) {\n                var that = this;\n                var popupElement = $(e.currentTarget);\n\n                if (!isPointerTouch(e) && popupElement.is(animationContainerSelector)) {\n                    that._closePopups(popupElement.find(popupSelector));\n                }\n            },\n\n            _closePopups: function(rootPopup) {\n                var that = this;\n                var overflowWrapper = that._overflowWrapper();\n                var popupId = rootPopup.data(POPUP_ID_ATTR);\n\n                if (popupId) {\n                    delete that._openedPopups[popupId.toString()];\n                    var groupParent = overflowWrapper.find(popupOpenerSelector(popupId));\n\n                    setTimeout(function() {\n                        if (that.options.openOnClick) {\n                            that._closeChildPopups(rootPopup);\n                        } else {\n                            if ($.isEmptyObject(that._openedPopups)) {\n                                var innerPopup = that._innerPopup(rootPopup);\n                                that._closeParentPopups(innerPopup);\n                            } else {\n                                that.close(groupParent, true);\n                            }\n                        }\n                    }, 0);\n                }\n            },\n\n            _closeChildPopups: function(current) {\n                var that = this;\n                var overflowWrapper = that._overflowWrapper();\n                $(getChildPopups(current, overflowWrapper)).each(function() {\n                    var popupOpener = overflowWrapper.find(popupOpenerSelector(this.data(POPUP_ID_ATTR)));\n                    that.close(popupOpener, true);\n                });\n            },\n\n            _innerPopup: function(current) {\n                var overflowWrapper = this._overflowWrapper();\n                var popups = getChildPopups(current, overflowWrapper);\n                return popups[popups.length - 1] || current;\n            },\n\n            _closeParentPopups: function(current) {\n                var that = this;\n                var overflowWrapper = that._overflowWrapper();\n                var popupId = current.data(POPUP_ID_ATTR);\n                const target = overflowWrapper ?? that.element;\n                var popupOpener = target.find(popupOpenerSelector(popupId));\n                popupId = popupOpener.closest(popupSelector).data(POPUP_ID_ATTR);\n                that.close(popupOpener, true);\n                while (popupId && !that._openedPopups[popupId]) {\n                    if (popupOpener.parent().is(menuSelector)) {\n                        break;\n                    }\n                    popupOpener = overflowWrapper.find(popupOpenerSelector(popupId));\n                    that.close(popupOpener, true);\n                    popupId = popupOpener.closest(popupSelector).data(POPUP_ID_ATTR);\n                }\n            },\n\n            _click: function(e) {\n                var that = this, openHandle,\n                    options = that.options,\n                    target = $(kendo.eventTarget(e)),\n                    targetElement = target[0],\n                    nodeName = target[0] ? target[0].nodeName.toUpperCase() : \"\",\n                    formNode = (nodeName == \"INPUT\" || nodeName == \"SELECT\" || nodeName == \"BUTTON\" || nodeName == \"LABEL\"),\n                    link = target.closest(LINK_SELECTOR),\n                    element = target.closest(allItemsSelector),\n                    itemElement = element[0],\n                    href = link.attr(\"href\"), childGroup, childGroupVisible,\n                    targetHref = target.attr(\"href\"),\n                    sampleHref = $(\"<a href='#' />\").attr(\"href\"),\n                    isLink = (!!href && href !== sampleHref),\n                    isLocalLink = isLink && !!href.match(/^#/),\n                    isTargetLink = (!!targetHref && targetHref !== sampleHref),\n                    overflowWrapper = that._overflowWrapper(),\n                    shouldCloseTheRootItem;\n\n                if (targetElement && (!targetElement.parentNode || !itemElement)) {\n                    return;\n                }\n\n                if ($(target).closest(\"span\").parent().hasClass('k-menu-expand-arrow')) {\n                    this._lastClickedElement = itemElement;\n                }\n\n                while (targetElement && targetElement.parentNode != itemElement) {\n                    targetElement = targetElement.parentNode;\n                }\n\n                if ($(targetElement).is(templateSelector)) {\n                    return;\n                }\n\n                if (element.hasClass(DISABLEDSTATE)) {\n                    e.preventDefault();\n                    return;\n                }\n\n                if (!e.handled && that._triggerSelect(target, itemElement) && !formNode) { // We shouldn't stop propagation and shoudn't prevent form elements.\n                    e.preventDefault();\n                }\n\n                e.handled = true;\n\n                childGroup = element.children(popupSelector);\n                if (overflowWrapper) {\n                    var childPopupId = element.data(POPUP_OPENER_ATTR);\n                    if (childPopupId) {\n                        childGroup = overflowWrapper.find(popupGroupSelector(childPopupId));\n                    }\n                }\n                childGroupVisible = childGroup.is(\":visible\");\n                shouldCloseTheRootItem = options.openOnClick && childGroupVisible && that._isRootItem(element);\n\n                if (options.closeOnClick && (!isLink || isLocalLink) && (!childGroup.length || shouldCloseTheRootItem)) {\n                    element.removeClass(HOVERSTATE).css(\"height\"); // Force refresh for Chrome\n                    that._oldFocusItem = that._findRootParent(element);\n                    var item = that._parentsUntil(link, that.element, allItemsSelector);\n                    that._forceClose = !!overflowWrapper;\n                    that.close(item);\n                    that.clicked = false;\n                    return;\n                }\n\n                if (isLink && e.enterKey) {\n                    link[0].click();\n                }\n\n                if (((!that._isRootItem(element) || options.openOnClick === false) && !options.openOnClick.subMenuItems) && !kendo.support.touch && !(isPointerTouch(e) && that._isRootItem(element.closest(allItemsSelector)))) {\n                    return;\n                }\n\n                if (!isLink && !formNode && !isTargetLink) {\n                    e.preventDefault();\n                }\n\n                that.clicked = true;\n                openHandle = childGroup.is(\":visible\") ? CLOSE : OPEN;\n                if (!options.closeOnClick && openHandle == CLOSE) {\n                    return;\n                }\n                that[openHandle](element);\n            },\n\n            _parentsUntil: function(context, top, selector) {\n                var overflowWrapper = this._overflowWrapper();\n                if (!overflowWrapper) {\n                    return context.parentsUntil(top, selector);\n                } else {\n                    var parents = overflowMenuParents(context, overflowWrapper);\n                    var result = [];\n                    $(parents).each(function() {\n                        var parent = $(this);\n                        if (parent.is(top)) {\n                            return false;\n                        }\n                        if (parent.is(selector)) {\n                            result.push(this);\n                        }\n                    });\n                    return $(result);\n                }\n            },\n\n            _triggerSelect: function(target, itemElement) {\n                target = target.is(\".k-link\") ? target : target.closest(\".k-link\");\n\n                var selectHandler = target.data(\"selectHandler\"),\n                    itemSelectEventData;\n\n                if (selectHandler) {\n                    itemSelectEventData = this._getEventData(target);\n                    selectHandler.call(this, itemSelectEventData);\n                }\n\n                var isSelectItemDefaultPrevented = itemSelectEventData && itemSelectEventData.isDefaultPrevented();\n                var isSelectDefaultPrevented = this._triggerEvent({ item: itemElement, type: SELECT });\n                return isSelectItemDefaultPrevented || isSelectDefaultPrevented;\n            },\n\n            _getEventData: function(target) {\n                var eventData = {\n                    sender: this,\n                    target: target,\n                    _defaultPrevented: false,\n                    preventDefault: function() {\n                        this._defaultPrevented = true;\n                    },\n                    isDefaultPrevented: function() {\n                        return this._defaultPrevented;\n                    }\n                };\n                return eventData;\n            },\n\n            _documentClick: function(e) {\n                var that = this;\n                var target = $(e.target).closest(\"span\").parent().hasClass('k-menu-expand-arrow') ? that._lastClickedElement : e.target;\n\n                if (contains((that._overflowWrapper() || that.element)[0], target)) {\n                    that._lastClickedElement = undefined$1;\n                    return;\n                }\n\n                that.clicked = false;\n            },\n\n            _focus: function(e) {\n                var that = this,\n                    target = e.target,\n                    focusItem = that._focusItem(),\n                    active = activeElement();\n\n                if (that._mousedownedElement) {\n                    that._mousedownedElement = null;\n                    return;\n                }\n\n                if (target != that.wrapper[0] && !$(target).is(\":kendoFocusable\")) {\n                    e.stopPropagation();\n                    $(target).closest(\".k-content\").closest(\".k-menu-popup\").closest(\".k-item\").addClass(FOCUSEDSTATE);\n                    that.wrapper.trigger(\"focus\");\n                    return;\n                }\n                if (active === e.currentTarget) {\n                    if (focusItem.length) {\n                        that._moveFocus([], focusItem);\n                    } else if (!that._oldFocusItem) {\n                        that._moveFocus([], that.wrapper.children().first());\n                    }\n                }\n            },\n\n            _keydown: function(e) {\n                var that = this,\n                    key = e.keyCode,\n                    focusItem = that._oldFocusItem,\n                    target,\n                    belongsToVertical,\n                    hasChildren,\n                    isRtl = kendo.support.isRtl(that.wrapper);\n\n                if (e.target != e.currentTarget && key != keys.ESC) {\n                    return;\n                }\n\n                if (!focusItem) {\n                    focusItem = that._oldFocusItem = that._focusItem();\n                }\n\n                belongsToVertical = that._itemBelongsToVertival(focusItem);\n                hasChildren = that._itemHasChildren(focusItem);\n                that._keyTriggered = true;\n\n                if (key == keys.RIGHT) {\n                    target = that[isRtl ? \"_itemLeft\" : \"_itemRight\"](focusItem, belongsToVertical, hasChildren);\n                } else if (key == keys.LEFT) {\n                    target = that[isRtl ? \"_itemRight\" : \"_itemLeft\"](focusItem, belongsToVertical, hasChildren);\n                } else if (key == keys.DOWN) {\n                    target = that._itemDown(focusItem, belongsToVertical, hasChildren);\n                } else if (key == keys.UP) {\n                    target = that._itemUp(focusItem, belongsToVertical, hasChildren);\n                } else if (key == keys.HOME) {\n                    that._moveFocus(focusItem, focusItem.parent().children(\":visible\").first());\n                    e.preventDefault();\n                } else if (key == keys.END) {\n                    that._moveFocus(focusItem, focusItem.parent().children(\":visible\").last());\n                    e.preventDefault();\n                } else if (key == keys.ESC) {\n                    target = that._itemEsc(focusItem, belongsToVertical);\n                } else if (key == keys.ENTER || key == keys.SPACEBAR) {\n                    target = focusItem.children(\".k-link\");\n                    if (target.length > 0) {\n                        that._click({ target: target[0], preventDefault: function() {}, enterKey: true });\n                        if (hasChildren && !focusItem.hasClass(DISABLEDSTATE)) {\n                            that.open(focusItem);\n                            that._moveFocus(focusItem, that._childPopupElement(focusItem).children().find(\"li\").first());\n                        } else if (focusItem.is(\"li\") && focusItem.attr(\"role\") === \"menuitemcheckbox\") {\n                            focusItem.find(\".k-checkbox\").attr(\"checked\", true);\n                        } else {\n                            that._moveFocusToRoot(focusItem, that._findRootParent(focusItem));\n                        }\n                    }\n                } else if (key == keys.TAB) {\n                    target = that._findRootParent(focusItem);\n                    that._moveFocus(focusItem, target);\n                    that._checkActiveElement();\n                    return;\n                }\n\n                if (target && target[0]) {\n                    e.preventDefault();\n                    e.stopPropagation(); // needed to handle ESC in column menu only when a root item is focused\n                }\n            },\n\n            _focusItem: function() {\n                return this.wrapper.find(\".k-item.k-focus\").filter(\":visible\");\n            },\n\n            _itemBelongsToVertival: function(item) {\n                var menuIsVertical = this.wrapper.hasClass(\"k-menu-vertical\");\n\n                if (!item.length) {\n                    return menuIsVertical;\n                }\n                return item.parent().hasClass(\"k-menu-group\") || menuIsVertical;\n            },\n\n            _itemHasChildren: function(item) {\n                if (!item || !item.length || !item[0].nodeType) {\n                    return false;\n                }\n                return item.children(\".k-menu-group, .k-menu-popup, div.k-animation-container\").length > 0 ||\n                    (!!item.data(POPUP_OPENER_ATTR) && !!this._overflowWrapper().children(popupGroupSelector(item.data(POPUP_OPENER_ATTR))));\n            },\n\n            _moveFocus: function(item, nextItem) {\n                var that = this,\n                    id = that._ariaId;\n\n                if (item.length && nextItem.length) {\n                    item.removeClass(FOCUSEDSTATE);\n                }\n\n                if (nextItem.length) {\n                    if (nextItem[0].id) {\n                        id = nextItem[0].id;\n                    }\n\n                    that.wrapper.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                    nextItem.addClass(FOCUSEDSTATE);\n                    that._oldFocusItem = nextItem;\n\n                    if (id) {\n                        that.element.removeAttr(\"aria-activedescendant\");\n                        $(\"#\" + id).removeAttr(\"id\");\n                        nextItem.attr(\"id\", id);\n                        that.element.attr(\"aria-activedescendant\", id);\n                    }\n                    that._scrollToItem(nextItem);\n                }\n            },\n\n            _moveFocusToRoot: function(item, nextItem) {\n                this._moveFocus(item, nextItem);\n            },\n\n            _findRootParent: function(item) {\n                if (this._isRootItem(item)) {\n                    return item;\n                } else {\n                    return this._parentsUntil(item, menuSelector, \"li.k-item\").last();\n                }\n            },\n\n            _isRootItem: function(item) {\n                return item.parent().hasClass(MENU);\n            },\n\n            _itemRight: function(item, belongsToVertical, hasChildren) {\n                var that = this,\n                    nextItem,\n                    parentItem,\n                    overflowWrapper;\n\n                if (!belongsToVertical) {\n                    nextItem = item.nextAll(itemSelector + exclusionSelector).eq(0);\n                    if (!nextItem.length) {\n                        nextItem = item.prevAll(itemSelector + exclusionSelector).last();\n                    }\n                    that.close(item);\n                } else if (hasChildren && !item.hasClass(DISABLEDSTATE)) {\n                    that.open(item);\n                    nextItem = that._childPopupElement(item).children().find(\"li\").first();\n                } else if (that.options.orientation == \"horizontal\") {\n                    parentItem = that._findRootParent(item);\n                    overflowWrapper = that._overflowWrapper();\n                    if (overflowWrapper) {\n                        var rootPopup = itemPopup(parentItem, overflowWrapper);\n                        that._closeChildPopups(rootPopup);\n                    }\n                    that.close(parentItem);\n                    nextItem = parentItem.nextAll(itemSelector + exclusionSelector).eq(0);\n                }\n\n                if (nextItem && !nextItem.length) {\n                    nextItem = that.wrapper.children(\".k-item\").first();\n                } else if (!nextItem) {\n                    nextItem = [];\n                }\n\n                that._moveFocus(item, nextItem);\n                return nextItem;\n            },\n\n            _itemLeft: function(item, belongsToVertical) {\n                var that = this,\n                    nextItem,\n                    overflowWrapper;\n\n                if (!belongsToVertical) {\n                    nextItem = item.prevAll(itemSelector + exclusionSelector).eq(0);\n                    if (!nextItem.length) {\n                        nextItem = item.nextAll(itemSelector + exclusionSelector).last();\n                    }\n                    that.close(item);\n                } else {\n                    nextItem = item.parent().closest(\".k-item\");\n                    overflowWrapper = that._overflowWrapper();\n                    if (!nextItem.length && overflowWrapper) {\n                        nextItem = popupParentItem(item.parent(), overflowWrapper);\n                    }\n                    that.close(nextItem);\n                    if (that._isRootItem(nextItem) && that.options.orientation == \"horizontal\") {\n                        nextItem = nextItem.prevAll(itemSelector + exclusionSelector).eq(0);\n                    }\n                }\n\n                if (!nextItem.length) {\n                    nextItem = that.wrapper.children(\".k-item\").last();\n                }\n\n                that._moveFocus(item, nextItem);\n                return nextItem;\n            },\n\n            _itemDown: function(item, belongsToVertical, hasChildren) {\n                var that = this,\n                    nextItem;\n\n                if (!belongsToVertical) {\n                    if (!hasChildren || item.hasClass(DISABLEDSTATE)) {\n                        return;\n                    } else {\n                        that.open(item);\n                        nextItem = that._childPopupElement(item).children().find(\"li\").first();\n                    }\n                } else {\n                    nextItem = item.nextAll(itemSelector + exclusionSelector).eq(0);\n                }\n\n                if (!nextItem.length && item.length) {\n                    nextItem = item.parent().children(\":visible\").first();\n                } else if (!item.length) {\n                    nextItem = that.wrapper.children(\".k-item\").first();\n                }\n\n                that._moveFocus(item, nextItem);\n                return nextItem;\n            },\n\n            _itemUp: function(item, belongsToVertical) {\n                var that = this,\n                    nextItem;\n\n                if (!belongsToVertical) {\n                    return;\n                } else {\n                    nextItem = item.prevAll(itemSelector + exclusionSelector).eq(0);\n                }\n\n                if (!nextItem.length && item.length) {\n                    nextItem = item.parent().children(\":visible\").last();\n                } else if (!item.length) {\n                    nextItem = that.wrapper.children(\".k-item\").last();\n                }\n\n                that._moveFocus(item, nextItem);\n                return nextItem;\n            },\n\n            _scrollToItem: function(item) {\n                var that = this;\n                if (that.options.scrollable && item && item.length) {\n                    var ul = item.parent();\n                    var isHorizontal = ul.hasClass(MENU) ? that.options.orientation == \"horizontal\" : false;\n                    var scrollDir = isHorizontal ? \"scrollLeft\" : \"scrollTop\";\n                    var getSize = isHorizontal ? kendo._outerWidth : kendo._outerHeight;\n                    var currentScrollOffset = ul[scrollDir]();\n                    var itemSize = getSize(item);\n                    var itemOffset = item[0][isHorizontal ? \"offsetLeft\" : \"offsetTop\"];\n                    var ulSize = getSize(ul);\n                    var scrollButtons = ul.siblings(scrollButtonSelector);\n                    var scrollButtonSize = scrollButtons.length ? getSize(scrollButtons.first()) : 0;\n                    var itemPosition;\n\n                    if (currentScrollOffset + ulSize < itemOffset + itemSize + scrollButtonSize) {\n                        itemPosition = itemOffset + itemSize - ulSize + scrollButtonSize;\n                    } else if (currentScrollOffset > itemOffset - scrollButtonSize) {\n                        itemPosition = itemOffset - scrollButtonSize;\n                    }\n\n                    if (!isNaN(itemPosition)) {\n                        var scrolling = {};\n                        scrolling[scrollDir] = itemPosition;\n                        ul.finish().animate(scrolling, \"fast\", \"linear\", function() {\n                            that._toggleScrollButtons(ul, scrollButtons.first(), scrollButtons.last(), isHorizontal);\n                        });\n                    }\n                }\n            },\n\n            _itemEsc: function(item, belongsToVertical) {\n                var that = this,\n                    nextItem, groupId;\n\n                if (!belongsToVertical) {\n                    return item;\n                } else {\n                    nextItem = item.parent().closest(\".k-item\");\n\n                    if (nextItem.length === 0) {\n                        groupId = item.closest(\".k-menu-popup\").data(\"group\");\n                        nextItem = that.wrapper.find(\".k-item[data-groupparent='\" + groupId + \"']\");\n                    }\n\n                    that.close(nextItem);\n                    that._moveFocus(item, nextItem);\n                }\n\n                return nextItem;\n            },\n\n            _childPopupElement: function(item) {\n                var popupElement = item.find(\".k-menu-popup\");\n                var wrapper = this._overflowWrapper();\n                if (!popupElement.length && wrapper) {\n                    popupElement = itemPopup(item, wrapper);\n                }\n                return popupElement;\n            },\n\n            _triggerEvent: function(e) {\n                var that = this;\n\n                return that.trigger(e.type, { type: e.type, item: e.item });\n            },\n\n            _focusHandler: function(e) {\n                var that = this,\n                    item = $(kendo.eventTarget(e)).closest(allItemsSelector);\n\n                if (item.hasClass(DISABLEDSTATE)) {\n                    return;\n                }\n\n                setTimeout(function() {\n                    that._moveFocus([], item);\n                    if (item.children(\".k-content\")[0]) {\n                        item.parent().closest(\".k-item\").removeClass(FOCUSEDSTATE);\n                    }\n                }, 200);\n            },\n\n            _animations: function(options) {\n                if (options && (\"animation\" in options) && !options.animation) {\n                    options.animation = { open: { effects: {} }, close: { hide: true, effects: {} } };\n                }\n            },\n            _dataSource: function(options) {\n                var that = this,\n                    dataSource = options ? options.dataSource : that.options.dataSource;\n\n                if (!dataSource) {\n                    return;\n                }\n\n                dataSource = isArray(dataSource) ? { data: dataSource } : dataSource;\n\n                that._unbindDataSource();\n\n                if (!dataSource.fields) {\n                    dataSource.fields = [\n                        { field: \"uid\" },\n                        { field: \"text\" },\n                        { field: \"url\" },\n                        { field: \"cssClass\" },\n                        { field: \"spriteCssClass\" },\n                        { field: \"imageUrl\" },\n                        { field: \"imageAttr\" },\n                        { field: \"attr\" },\n                        { field: \"contentAttr\" },\n                        { field: \"content\" },\n                        { field: \"encoded\" },\n                        { field: \"items\" },\n                        { field: \"select\" }\n                    ];\n                }\n\n                that.dataSource = HierarchicalDataSource.create(dataSource);\n\n                that._bindDataSource();\n\n                that.dataSource.fetch();\n            },\n\n            _bindDataSource: function() {\n                this._refreshHandler = this.refresh.bind(this);\n                this._errorHandler = this._error.bind(this);\n\n                this.dataSource.bind(CHANGE, this._refreshHandler);\n                this.dataSource.bind(ERROR, this._errorHandler);\n            },\n\n            _unbindDataSource: function() {\n                var dataSource = this.dataSource;\n\n                if (dataSource) {\n                    dataSource.unbind(CHANGE, this._refreshHandler);\n                    dataSource.unbind(ERROR, this._errorHandler);\n                }\n            },\n\n            _error: function() {\n\n            },\n\n            findByUid: function(uid) {\n                var wrapperElement = this._overflowWrapper() || this.element;\n                return wrapperElement.find(\"[\" + kendo.attr(\"uid\") + \"=\" + uid + \"]\");\n            },\n\n            refresh: function(ev) {\n                var that = this;\n                var node = ev.node;\n                var action = ev.action;\n                var parentElement = node ? that.findByUid(node.uid) : that.element;\n                var itemsToUpdate = ev.items;\n                var index = ev.index;\n                var updateProxy = that._updateItem.bind(that);\n                var removeProxy = that._removeItem.bind(that);\n\n                if (action == \"add\") {\n                    that._appendItems(itemsToUpdate, index, parentElement);\n                } else if (action == \"remove\") {\n                    itemsToUpdate.forEach(removeProxy);\n                } else if (action == \"itemchange\") {\n                    itemsToUpdate.forEach(updateProxy);\n                } else if (action === \"itemloaded\") {\n                    that.append(ev.items, parentElement);\n                } else {\n                    this._initData();\n                }\n\n                this.trigger(DATABOUND, { item: parentElement, dataItem: node });\n            },\n\n            _appendItems: function(items, index, parent) {\n                var that = this;\n                var referenceItem = parent.find(itemSelector).eq(index);\n\n                if (referenceItem.length) {\n                    that.insertBefore(items, referenceItem);\n                } else {\n                    that.append(items, parent);\n                }\n            },\n\n            _removeItem: function(item) {\n                var that = this;\n                var element = that.findByUid(item.uid);\n                that.remove(element);\n            },\n\n            _updateItem: function(item) {\n                var that = this;\n                var element = that.findByUid(item.uid);\n                var nextElement = element.next();\n                var parentNode = item.parentNode();\n\n                that.remove(element);\n\n                if (nextElement.length) {\n                    that.insertBefore(item, nextElement);\n                } else {\n                    that.append(item, parentNode && that.findByUid(parentNode.uid));\n                }\n            },\n\n            _accessors: function() {\n                var that = this,\n                    options = that.options,\n                    i, field, textField,\n                    element = that.element;\n\n                for (i in bindings) {\n                    field = options[bindings[i]];\n                    textField = element.attr(kendo.attr(i + \"-field\"));\n\n                    if (!field && textField) {\n                        field = textField;\n                    }\n\n                    if (!field) {\n                        field = i;\n                    }\n\n                    if (!isArray(field)) {\n                        field = [field];\n                    }\n\n                    options[bindings[i]] = field;\n                }\n            },\n\n            _fieldAccessor: function(fieldName) {\n                var fieldBindings = this.options[bindings[fieldName]] || [],\n                    count = fieldBindings.length;\n\n                if (count === 0) {\n                    return (function(item) { return item[fieldName]; });\n                } else {\n                    return (function(item) {\n                        var levels = $.map(fieldBindings, kendo.getter);\n                        if (item.level) {\n                            return levels[Math.min(item.level(), count - 1)](item);\n                        } else {\n                            return levels[count - 1](item);\n                        }\n                    });\n                }\n            },\n\n            _templates: function() {\n                var that = this,\n                    options = that.options,\n                    fieldAccessor = that._fieldAccessor.bind(that);\n\n                if (options.template && typeof options.template == STRING) {\n                    options.template = template(options.template);\n                } else if (!options.template) {\n                    options.template = template((data) => {\n                        var text = fieldAccessor(\"text\")(data.item);\n                        if (!(typeof data.item.encoded != 'undefined' && data.item.encoded === false)) {\n                            text = encode(text);\n                        }\n\n                        return `<span class='k-menu-link-text' role='none'>${text}</span>`;\n                    });\n                }\n\n                that.templates = {\n                    content: template((data) => {\n                        var item = data.item;\n                        var contentHtml = fieldAccessor(\"content\")(item);\n                        var contCssAttributes = data.contentCssAttributes(item.toJSON ? item.toJSON() : item);\n                        return `<div class='${data.groupWrapperCssClass(data.group)}' ${data.groupAttributes(data.group)}><div ${contCssAttributes} tabindex='-1'>${contentHtml || ''}</div></div>`;\n                    }),\n                    group: template((data) =>\n                        `<div class='${data.groupWrapperCssClass(data.group)}' ${data.groupAttributes(data.group)}>` +\n                        `<ul class='${data.groupCssClass(data.group)}' id='${data.groupId}' role='menu'>` +\n                        `${data.renderItems(data)}` +\n                        \"</ul>\" +\n                        \"</div>\"\n                    ),\n                    itemWrapper: template((data) => {\n                        var item = data.item;\n                        var url = fieldAccessor(\"url\")(item);\n                        var imageUrl = fieldAccessor(\"imageUrl\")(item);\n                        var imgAttributes = fieldAccessor(\"imageAttr\")(item);\n                        var tag = url ? 'a' : 'span';\n\n                        return `<${tag} class='${rendering.textClass(item)}' role='none' ${url ? `href='${url}'` : ''} >` +\n                            (imageUrl ? `<img ${rendering.imageCssAttributes(imgAttributes)}  alt='' src='${imageUrl}' />` : '') +\n                            this.templates.sprite(item) +\n                            this.options.template(data) +\n                            data.arrow(data) +\n                            `</${tag}>`;\n                    }),\n                    item: template((data) => {\n                        var item = data.item,\n                            menu = data.menu,\n                            group = data.group,\n                            subGroup = data.subGroup;\n                        var contentHtml = fieldAccessor(\"content\")(item);\n                        var groupId = kendo.guid();\n                        return `<li class='${rendering.wrapperCssClass(group, item)}' ${(item.hasChildren || item.items || item.content) ? 'aria-controls=\"' + groupId + '\"' : '' } ${rendering.itemCssAttributes(item.toJSON ? item.toJSON() : item)} role='menuitem'  ${item.items || item.content ? \"aria-haspopup='true'\" : ''}` +\n                            `${item.enabled === false ? \"aria-disabled='true'\" : ''}` +\n                            kendo.attr(\"uid\") + `='${item.uid}' ` +\n                            ((item.items && item.items.length > 0) || item.content ?\n                                (item.expanded ?\n                                    \" aria-expanded='true'\"\n                                    : \" aria-expanded='false'\")\n                                : '') +\n                            \">\" +\n                            `${!item.separator ? this.templates.itemWrapper(data) : ''}` +\n                            ((item.hasChildren || item.items) ?\n                                `${subGroup({ items: item.items, menu: menu, group: { expanded: item.expanded }, groupId: groupId })}`\n                                : (item.content || item.contentUrl || contentHtml ?\n                                `${data.renderContent($.extend({}, data, { group: { expanded: item.expanded } }))}`\n                                : '')\n                            ) +\n                            \"</li>\";\n                    }),\n                    scrollButton: template(({ direction }) =>\n                        `<span class='k-button k-button-md k-button-flat k-button-flat-base k-icon-button k-menu-scroll-button k-menu-scroll-button-${direction === 'left' || direction === 'up' ? 'prev' : 'next'}' unselectable='on'>` +\n                            kendo.ui.icon({ icon: `caret-alt-${direction}`, iconClass: \"k-button-icon\" }) +\n                        \"</span>\"\n                    ),\n                    arrow: template(({ item, group }) =>\n                        `<span aria-hidden='true' class='k-menu-expand-arrow'>${kendo.ui.icon({ icon: group.horizontal ? \"caret-alt-down\" : \"caret-alt-right\" })}</span>`),\n                    sprite: template((data) => {\n                        var spriteCssClass = fieldAccessor(\"spriteCssClass\")(data);\n                        if (spriteCssClass) {\n                            return `<span class='k-sprite ${spriteCssClass}'></span>`;\n                        }\n                        return '';\n                    }),\n                    empty: template(() => \"\")\n                };\n            },\n\n            renderItem: function(options) {\n                var that = this;\n                options = extend({ menu: that, group: {} }, options);\n\n                var empty = that.templates.empty,\n                    item = options.item;\n\n                return that.templates.item(extend(options, {\n                    separator: item.separator ? that.templates.separator : empty,\n                    sprite: that.templates.sprite,\n                    itemWrapper: that.templates.itemWrapper,\n                    renderContent: that.renderContent,\n                    arrow: item.items || item.content || item[that.options.dataContentField[0]] ? that.templates.arrow : empty,\n                    subGroup: that.renderGroup.bind(that)\n                }, rendering));\n            },\n\n            renderGroup: function(options) {\n                var that = this;\n                var templates = that.templates || options.menu.templates;\n\n                return templates.group(extend({\n                    renderItems: function(options) {\n                        var html = \"\",\n                            i = 0,\n                            items = options.items,\n                            len = items ? items.length : 0,\n                            group = extend({ length: len }, options.group);\n\n                        for (; i < len; i++) {\n                            html += options.menu.renderItem(extend(options, {\n                                group: group,\n                                item: extend({ index: i }, items[i])\n                            }));\n                        }\n\n                        return html;\n                    }\n                }, options, rendering));\n            },\n\n            renderContent: function(options) {\n                return options.menu.templates.content(extend(options, rendering));\n            }\n        });\n\n        var ContextMenu = Menu.extend({\n            init: function(element, options) {\n                var that = this;\n\n                Menu.fn.init.call(that, element, options);\n\n                that.element.attr(ROLE, \"menu\");\n                that._initialInlineHeight = that.element[0].style && that.element[0].style.height ? that.element[0].style.height : \"\";\n                that._marker = kendo.guid().substring(0, 8);\n\n                that.target = $(that.options.target);\n\n                that._popup();\n                that._wire();\n            },\n\n            _initOverflow: function(options) {\n                var that = this;\n                that._openedPopups = {};\n                if (options.scrollable && !that._overflowWrapper()) {\n                    that._popupsWrapper = (that.element.parent().is(childAnimationContainerSelector) ? that.element.closes(animationContainerSelector) : that.element)\n                        .wrap(`<div class=\"k-menu-scroll-wrapper${options.orientation === 'vertical' ? \" k-menu-scroll-wrapper-vertical\" : \"\"}\"></div>`).parent();\n\n                    if (that.options.orientation == \"horizontal\") {\n                        removeSpacesBetweenItems(that.element);\n                    }\n\n                    if (options.appendTo) {\n                        options.appendTo = $(options.appendTo);\n                        options.appendTo.append(that._popupsWrapper);\n                    }\n\n                    that._initialHeight = that.element[0].style.height;\n                    that._initialWidth = that.element[0].style.width;\n                }\n            },\n\n            options: {\n                name: \"ContextMenu\",\n                filter: null,\n                showOn: \"contextmenu\",\n                orientation: \"vertical\",\n                alignToAnchor: false,\n                copyAnchorStyles: true,\n                target: \"body\",\n                origin: undefined$1,\n                position: undefined$1\n            },\n\n            events: [\n                OPEN,\n                CLOSE,\n                ACTIVATE,\n                DEACTIVATE,\n                SELECT\n            ],\n\n            setOptions: function(options) {\n                var that = this;\n\n                Menu.fn.setOptions.call(that, options);\n\n                that.target.off(that.showOn + NS + that._marker, that._showProxy);\n\n                if (that.userEvents) {\n                    that.userEvents.destroy();\n                }\n\n                that.target = $(that.options.target);\n                if (options.orientation && that.popup.wrapper[0]) {\n                    that.popup.element.unwrap();\n                }\n\n                that._wire();\n\n                Menu.fn.setOptions.call(this, options);\n            },\n\n            destroy: function() {\n                var that = this;\n\n                that.target.off(that.options.showOn + NS + that._marker);\n                DOCUMENT_ELEMENT.off(kendo.support.mousedown + NS + that._marker, that._closeProxy);\n\n                if (that.userEvents) {\n                    that.userEvents.destroy();\n                }\n\n                Menu.fn.destroy.call(that);\n\n                if (that.popup) {\n                    that.popup.destroy();\n                }\n            },\n\n            open: function(x, y) {\n                var that = this;\n                const isHorizontal = that.options.orientation === 'horizontal';\n                x = $(x)[0];\n\n                if (typeof x === \"number\") {\n                    if (that._initialInlineHeight) {\n                        $(that.element).css({ height: that._initialInlineHeight });\n                    } else {\n                        $(that.element).css({ height: \"\" });\n                    }\n                }\n\n                if (contains(that.element[0], $(x)[0]) || that._itemHasChildren($(x))) { // call parent open for children elements\n                    Menu.fn.open.call(that, x);\n                } else {\n                    if (that._triggerEvent({ item: that.element, type: OPEN }) === false) {\n                        if (that.popup.visible() && that.options.filter) {\n                            that.popup.close(true);\n                            that.popup.element.parent().kendoStop(true);\n                        }\n\n                        if (!that._triggerFocusOnActivate) {\n                            that._triggerFocusOnActivate = that._focusMenu.bind(that);\n                        }\n                        that.bind(ACTIVATE, that._triggerFocusOnActivate);\n\n                        if (y !== undefined$1) {\n                            var overflowWrapper = that._overflowWrapper();\n                            if (overflowWrapper) {\n                                var offset = overflowWrapper.offset();\n                                x -= offset.left;\n                                y -= offset.top;\n                            }\n                            that.popup.wrapper.hide();\n                            that._configurePopupScrolling(x, y);\n                            that.popup.open(x, y);\n                        } else {\n                            that.popup.options.anchor = (x ? x : that.popup.anchor) || that.target;\n                            that.popup.element.kendoStop(true);\n                            that._configurePopupScrolling();\n                            that.popup.open();\n                        }\n\n                        that._initPopupScrolling(that.popup, isHorizontal);\n                        that.popup.element.siblings(scrollButtonSelector).hide();\n                        DOCUMENT_ELEMENT.off(that.popup.downEvent, that.popup._mousedownProxy);\n                        DOCUMENT_ELEMENT\n                            .on(kendo.support.mousedown + NS + that._marker, that._closeProxy);\n                    }\n                }\n\n                return that;\n            },\n\n            _focusMenu: function() {\n                var that = this;\n\n                that.unbind(ACTIVATE, that._triggerFocusOnActivate);\n                that.element.trigger(\"focus\");\n            },\n\n            _configurePopupScrolling: function(x, y) {\n                var that = this;\n                var popup = that.popup;\n                var isHorizontal = that.options.orientation == \"horizontal\";\n\n                if (that.options.scrollable) {\n                    that._wrapPopupElement(popup);\n\n                    popup.element.parent().css({\n                        position: \"\",\n                        height: \"\"\n                    });\n\n                    popup.element.css({\n                        visibility: \"hidden\",\n                        display: \"\",\n                        position: \"\"\n                    });\n\n                    if (isHorizontal) {\n                        that._setPopupWidth(popup, isNaN(x) ? undefined$1 : { isFixed: true, x: x, y: y });\n                    } else {\n                        that._setPopupHeight(popup, isNaN(x) ? undefined$1 : { isFixed: true, x: x, y: y });\n                    }\n\n                    popup.element.css({\n                        visibility: \"\",\n                        display: \"none\",\n                        position: \"absolute\"\n                    });\n                }\n            },\n\n            _setPopupWidth: function(popup, isFixed) {\n                var popupElement = popup.element;\n                var popups = popupElement.add(popupElement.parent(childAnimationContainerSelector));\n\n                popups.width(this._initialWidth || \"\");\n\n                var location = popup._location(isFixed);\n                var windowWidth = $(window).width();\n                var popupOuterWidth = location.width;\n                var popupOffsetLeft = Math.max(location.left, 0);\n                var scrollLeft = isFixed ? 0 : parentsScroll(this._overflowWrapper()[0], \"scrollLeft\");\n                var shadow = kendo.getShadows(popupElement);\n                var maxWidth = windowWidth - shadow.left - shadow.right;\n                var canFit = maxWidth + scrollLeft > popupOuterWidth + popupOffsetLeft;\n\n                if (!canFit) {\n                    popups.css({ overflow: \"hidden\", width: (maxWidth - popupOffsetLeft + scrollLeft) + \"px\" });\n                }\n            },\n\n            close: function() {\n                var that = this;\n\n                if (contains(that.element[0], $(arguments[0])[0]) || that._itemHasChildren(arguments[0])) {\n                    Menu.fn.close.call(that, arguments[0]);\n                } else {\n                    if (that.popup.visible()) {\n                        if (that._triggerEvent({ item: that.element, type: CLOSE }) === false) {\n                            that._removeFocusItem();\n                            that.element.find(\"#\" + that._ariaId).removeAttr(\"id\");\n                            that.popup.close();\n                            DOCUMENT_ELEMENT.off(kendo.support.mousedown + NS + that._marker, that._closeProxy);\n                            that.unbind(SELECT, that._closeTimeoutProxy);\n                            that.popup.options.anchor.focus();\n                        }\n                    }\n                }\n            },\n\n            _showHandler: function(e) {\n                var ev = e, offset,\n                    that = this,\n                    options = that.options,\n                    target = kendo.support.mobileOS ? $(ev.target) : $(ev.currentTarget);\n\n                if (e.event) {\n                    ev = e.event;\n                    ev.pageX = e.x.location;\n                    ev.pageY = e.y.location;\n                }\n\n                if (contains(that.element[0], e.relatedTarget || e.target)) {\n                    return;\n                }\n\n                that._eventOrigin = ev;\n\n                ev.preventDefault();\n                ev.stopImmediatePropagation();\n\n                that.element.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n\n                if ((options.filter && target.is(options.filter)) || !options.filter) {\n                    if (options.alignToAnchor) {\n                        that.popup.options.anchor = ev.currentTarget;\n                        that.open(ev.currentTarget);\n                    } else {\n                        that.popup.options.anchor = ev.currentTarget;\n\n                        if (that._targetChild) {\n                            offset = that.target.offset();\n                            that.open(ev.pageX - offset.left, ev.pageY - offset.top);\n                        } else {\n                            that.open(ev.pageX, ev.pageY);\n                        }\n                    }\n                }\n            },\n\n            _closeHandler: function(e) {\n                var that = this,\n                    target = $(e.relatedTarget || e.target),\n                    sameTarget = target.closest(that.target.selector)[0] == that.target[0],\n                    item = target.closest(itemSelector),\n                    children = that._itemHasChildren(item),\n                    overflowWrapper = that._overflowWrapper(),\n                    containment = contains(that.element[0], target[0]) || (overflowWrapper && contains(overflowWrapper[0], target[0]));\n\n                that._eventOrigin = e;\n\n                var normalClick = e.which !== 3;\n\n                if (that.popup.visible() && ((normalClick && sameTarget) || !sameTarget) && ((that.options.closeOnClick && !children && containment) || !containment)) {\n                    if (containment) {\n                        this.unbind(SELECT, this._closeTimeoutProxy);\n                        that.bind(SELECT, that._closeTimeoutProxy);\n                    } else {\n                        that.close();\n                    }\n                }\n            },\n\n            _wire: function() {\n                var that = this,\n                    options = that.options,\n                    target = that.target;\n\n                that._preventProxy = null;\n                that._showProxy = that._showHandler.bind(that);\n                that._closeProxy = that._closeHandler.bind(that);\n                that._closeTimeoutProxy = that.close.bind(that);\n\n                if (target[0]) {\n                    if (kendo.support.mobileOS && options.showOn == \"contextmenu\") {\n                        that.userEvents = new kendo.UserEvents(target, {\n                            filter: options.filter,\n                            allowSelection: false\n                        });\n\n                        that._preventProxy = function() { return false; };\n\n                        that.userEvents.bind(\"hold\", that._showProxy);\n                    }\n\n                    if (options.filter) {\n                        target.on(options.showOn + NS + that._marker, options.filter, that._preventProxy || that._showProxy);\n                    } else {\n                        target.on(options.showOn + NS + that._marker, that._preventProxy || that._showProxy);\n                    }\n\n                    target.on(\"keydown\", (e) => {\n                        if (e.keyCode === kendo.keys.F10 && e.shiftKey) {\n                            e.preventDefault();\n                            that.open(e.target);\n                        }\n                    });\n                }\n            },\n\n            _triggerEvent: function(e) {\n                var that = this,\n                    anchor = $(that.popup.options.anchor)[0],\n                    origin = that._eventOrigin;\n\n                that._eventOrigin = undefined$1;\n\n                return that.trigger(e.type, extend({ type: e.type, item: e.item || this.element[0], target: anchor }, origin ? { event: origin } : {} ));\n            },\n\n            _popup: function() {\n                var that = this;\n                var overflowWrapper = that._overflowWrapper();\n                var contextMenuElement = that.element\n                    .addClass(\"k-context-menu\");\n\n                that._triggerProxy = that._triggerEvent.bind(that);\n\n                that.popup = $(\"<div></div>\")\n                                .append(contextMenuElement)\n                                .kendoPopup({\n                                    origin: that.options.origin,\n                                    position: that.options.position,\n                                    autosize: that.options.orientation === \"horizontal\",\n                                    anchor: that.target || \"body\",\n                                    copyAnchorStyles: that.options.copyAnchorStyles,\n                                    collision: that.options.popupCollision || \"fit\",\n                                    animation: that.options.animation,\n                                    activate: that._triggerProxy,\n                                    deactivate: that._triggerProxy,\n                                    appendTo: overflowWrapper || that.options.appendTo,\n                                    close: !overflowWrapper ? $.noop : function(e) {\n                                        $(getChildPopups(e.sender.element, overflowWrapper)).each(function(i, p) {\n                                            var popup = p.data(KENDOPOPUP);\n                                            if (popup) {\n                                                popup.close(true);\n                                            }\n                                        });\n                                    }\n                                }).data(KENDOPOPUP);\n\n                that._targetChild = contains(that.target[0], that.popup.element[0]);\n            },\n\n            _moveFocusToRoot: function(item, nextItem) {\n                this._moveFocus(item, nextItem);\n                this.close();\n            },\n\n            _focus: function(e) {\n                var focusItem = this._oldFocusItem = this._focusItem() || [];\n\n                Menu.fn._focus.call(this, e);\n\n                if (activeElement() === e.currentTarget) {\n                    this._moveFocus(focusItem, this.wrapper.children().filter(\":visible\").not(\".k-separator\").first());\n                }\n            }\n        });\n\n        ui.plugin(Menu);\n        ui.plugin(ContextMenu);\n\n    })(window.kendo.jQuery);\n    var kendo$1 = kendo;\n\n    exports.__meta__ = __meta__;\n    exports.default = kendo$1;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n"]}