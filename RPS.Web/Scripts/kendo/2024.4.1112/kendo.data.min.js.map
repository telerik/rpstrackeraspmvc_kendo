{"version":3,"file":"kendo.data.min.js","names":["global","factory","exports","module","require","define","amd","globalThis","self","kendo","_globals","Data","this","logic","or","concat","acc","fn","a","identity","and","operatorsMap","isnullorempty","isBlank","isnotnullorempty","isPresent","contains","b","indexOf","doesnotcontain","doesnotendwith","length","doesnotstartwith","lastIndexOf","endswith","eq","gt","gte","isempty","isnotempty","isnotnull","isnull","lt","lte","neq","startswith","dateRegExp","transformFilter","field","ignoreCase","value","operator","accentFoldingFiltering","itemProp","prop","isString","date","exec","Date","x","toLocaleLowerCase","toLowerCase","isNumeric","isDate","getTime","typedGetter","isFunction","getter","convertValue","op","transformCompositeFilter","filter","combiner","filters","map","source","extendAccentFolding","reduce","Object","assign","$","undefined$1","extend","isPlainObject","isEmptyObject","isArray","Array","grep","ajax","each","noop","window","Observable","Class","STRING","FUNCTION","CREATE","READ","UPDATE","DESTROY","CHANGE","SYNC","GET","ERROR","REQUESTSTART","PROGRESS","REQUESTEND","ITEMSLOADED","ITEMLOAD","crud","o","stringify","math","Math","push","join","pop","splice","shift","slice","unshift","toString","stableSort","support","objectKeys","ObservableArray","init","array","type","that","ObservableObject","call","wrapAll","_loadPromises","_loadedNodes","at","index","toJSON","serializeFunctions","idx","json","parent","target","wrap","object","Model","bind","e","isGroup","hasOwnProperty","trigger","node","items","action","promise","_loading","done","collection","nodes","loading","result","arguments","apply","omitChangeEvent","sort","howMany","item","i","len","omitCache","children","unbind","forEach","callback","thisArg","context","reduceRight","find","every","some","remove","empty","Symbol","iterator","prototype","LazyObservableArray","data","events","_events","_parent","eventHandler","prefix","key","event","_notifyChange","ownKeys","ignoreObjectKeys","keys","filteredObjectKeys","props","protoKeys","getPrototypeOf","isPrimitiveType","getOwnPropertyNames","f","member","_handlers","charAt","uid","guid","shouldSerialize","get","_set","composite","paths","split","path","obj","set","setter","isSetPrevented","current","change","isObservableArray","isDataSource","DataSource","equal","y","xtype","parsers","number","parseFloat","parseDate","boolean","string","default","defaultValues","defaults","_initializers","name","dirty","dirtyFields","idField","id","_defaultId","_parse","parse","fieldName","fields","getFieldByName","editable","accept","isNew","base","options","model","originalName","proto","functionFields","nameToUse","nullable","defaultValue","Comparer","selector","compare","localeCompare","create","dir","combine","comparers","StableComparer","asc","valueA","valueB","__position","desc","operators","quote","str","replace","JSON","textOp","impl","ignore","getMatchRegexp","pattern","rx","esc","ch","matches","substring","doesnotmatch","Query","normalizeSort","descriptor","descriptors","d","sortFields","sorts","sortObject","filterExpr","expression","noEval","expr","filterExprNoEval","expressions","fieldFunctions","operatorFunctions","match","operatorMap","equals","isequalto","equalto","ne","notequals","isnotequalto","notequalto","notequal","islessthan","lessthan","less","le","islessthanorequalto","lessthanequal","isgreaterthan","greaterthan","greater","isgreaterthanorequalto","greaterthanequal","ge","notsubstringof","normalizeOperator","normalizeFilter","compareDescriptor","f1","f2","normalizeDescriptor","fieldComparer","normalizeGroup","skipItemSorting","aggregates","normalizeGroupWithoutCompare","groupValueComparer","calculateAggregate","accumulator","state","aggr","functionName","aggregate","functions","accessor","compareFilters","expr1","expr2","filters1","filters2","toArray","range","count","skip","take","select","order","inPlace","orderBy","orderByDescending","comparer","compiled","group","allData","getFilteredData","g","groupPaging","groupAllData","cachedFilteredData","hasSubgroups","itemCount","subgroupCount","groupBy","currentValue","sorted","_sortForGrouping","groupValue","_sortGroups","groups","sum","isNumber","average","max","min","val","isNaN","process","groupDescriptorsWithoutSort","total","customGroupSort","groupDescriptors","anyGroupDescriptorHasCompare","query","groupDescriptorsWithoutCompare","normalizedSort","filterCallback","flatGroups","groupDescriptor","virtual","LocalTransport","read","success","update","destroy","RemoteTransport","parameterMap","url","cache","Cache","add","submit","option","setup","error","parameters","operation","_store","clear","serializeRecords","getters","modelInstance","originalFieldNames","fieldNames","record","setters","convertRecords","convertGroup","wrapDataAccess","originalFunction","converter","wrapDataAccessBase","store","inmemory","DataReader","schema","modelBase","dataFunction","_dataAccessFunction","groupsFunction","serializeFunction","serialize","serializeGetters","fromName","from","_wrapDataAccessBase","errors","fillLastGroup","originalGroup","newGroup","currOriginal","currentNew","mergeGroups","dest","indexFunction","groupsLength","indexFn","groupIndex","itemIndex","flattenGroups","wrapGroupItems","eachGroupItems","func","replaceInRanges","ranges","observable","replaceInRange","replaceWithObservable","view","serverGrouping","viewIndex","indexOfPristineModel","indexOfModel","fieldNameFromModel","convertFilterDescriptorsField","convertDescriptorsField","_map","_prefetch","_data","_pristineData","_ranges","_view","_pristineTotal","_destroyed","_pageSize","pageSize","_page","page","_sort","_sortFields","_filter","_group","_aggregate","_total","_groupPaging","_groupsState","_shouldDetachObservableParents","transport","Transport","pushCreate","_pushCreate","pushUpdate","_pushUpdate","pushDestroy","_pushDestroy","offlineStorage","_storage","getItem","localStorage","setItem","reader","readers","_detachObservableParents","_observe","_online","serverSorting","serverPaging","serverFiltering","serverAggregates","batch","inPlaceSort","clone","online","sync","Deferred","resolve","offlineData","_isGrouped","_isServerGrouped","_isServerGroupPaged","_isGroupPaged","_push","_readData","_flatData","useRanges","getByUid","_getByUid","dataItems","_storeData","_addRange","_process","_observeView","flatView","insert","_createNewModel","_wrapInEmptyGroup","_insertModelInRange","pushInsert","rangeSpan","_getCurrentRangeSpan","pushed","autoSync","pristine","last","pristineData","_updatePristineForModel","_removeItems","itemsToRemove","removePristine","shouldRemovePristine","destroyed","found","_eachItem","_removePristineForModel","pushMove","_moveItems","moved","dataItem","hasGroups","_pushInDestroyed","removeModel","_removeModelFromRanges","created","notFetched","updated","promises","_sendSubmit","_send","when","then","changedItems","_accept","models","_syncEnd","_change","cancelChanges","_cancelModel","_changesCanceled","_markOfflineUpdatesAsDirty","__state__","hasChanges","response","serverGroup","_handleCustomErrors","values","_executeOnPristineForModel","deepExtend","_eachPristineItem","_pristineForModel","_modelCanceled","_submit","status","reject","deferred","_promise","method","converted","params","_params","_queueRequest","isPrevented","_dequeueRequest","args","_readAggregates","replaceSubset","_serverGroupsTotal","_aggregateResult","itemIds","_skip","endless","j","_changeHandler","updatePristine","end","start","timestamp","_timeStamp","outerStart","outerEnd","_sortRanges","_groupsFlat","_appendToGroupsFlat","_updateOuterRangesLength","_getGroupByUid","xhr","errorThrown","isExcelExportRequest","_requestInProgress","_pending","_shouldWrap","_updateTotalForAction","parseInt","_operationsForUpdatedFields","updatedFields","_updatedFields","operations","stringified","u","partialUpdate","_preventPartialUpdate","stringifiedKey","cleanObject","cleanObjectKeys","k","handler","first","_calculateAggregates","_take","currentRangeStart","_clearEmptyGroups","_queryProcess","resultData","dataToAggregate","_setView","_setFilterTotal","_mergeState","_currentRangeStart","moreItemsCount","_hasExpandedSubGroups","_findGroupedRange","parents","itemsLength","groupCount","itemsToSkip","taken","_fetchGroupItems","_fetchingGroupItems","skipped","includeParents","excludeHeader","currentItems","_expandedSubGroupItemsCount","includeCurrentItems","subGroup","temp","endSpecified","groupItemsSkip","firstItem","lastItem","expandedSubGroupItemsCount","groupItemCount","getGroupItems","lastItemIndex","round","floor","hasNotFetchedItems","subgroups","_composeItemsFilter","findSubgroups","_queueWithTimeout","_groupItemsSuccessHandler","delay","clearTimeout","_timeout","setTimeout","totalField","totalCount","_updateRangePristineData","countAdded","_currentRequestTimeStamp","_skipRequestsInProgress","indexOfCurrentGroup","currentGroup","dataLength","indexes","rangesLength","_containsSubGroup","_cloneGroup","subgroup","currentSubGroup","filterTotal","setDefaultValue","fetch","_query","next","totalPages","prev","_pageableQueryOptions","getGroupsFlat","groupsTotal","includeExpanded","_calculateGroupsTotal","itemsField","ignoreState","_groupsTotal","countGroupRange","_emptyAggregates","ceil","inRange","_findRange","lastRange","firstItemUid","enableRequestsInProgress","pageSkip","size","_processRangeData","_originalPageSkip","_originalSize","_adjustPageSkip","_groupRangeExists","_rangeExists","prefetch","skipIdx","takeIdx","startIndex","endIndex","rangeData","rangeEnd","processed","flatData","prevRangeEnd","remote","groupMapOptions","isGroupPaged","startField","endField","_mergeGroups","_getRangesMismatch","mismatch","prevGroup","eventData","_omitPrefetch","paging","sorting","filtering","_prefetchSuccessHandler","force","_multiplePrefetch","prevRange","_getPrevRange","_getNextRange","availableItemsCount","_removeModelFromRange","_updateRangesLength","mismatchFound","mismatchLength","lengthDifference","abs","rangeLength","dataSource","transportOptions","transports","schemas","logToConsole","table","fieldIndex","cells","cell","tbody","tBodies","rows","fieldCount","nodeName","innerHTML","inferTable","optgroup","firstField","secondField","parentNode","disabled","label","text","attributes","specified","inferSelect","Node","hasChildren","childrenField","childrenOptions","hasChildrenObject","_childrenOptions","_initChildren","_loaded","HierarchicalDataSource","_updateChildrenField","append","loaded","level","_childrenLoaded","load","one","_matchFilter","dataMethod","_attachBubbleHandlers","_hierarchicalFilter","_childrenLoading","isLoading","_markHierarchicalQuery","_updateHierarchicalFilter","_find","inferList","list","textChild","className","textField","urlField","spriteCssClassField","imageUrlField","elements","tagName","firstChild","attr","nodeType","nodeValue","trim","_dataSource","Buffer","viewSize","disablePrefetch","_prefetching","buffer","_reset","_syncWithDataSource","setViewSize","_recalculate","itemPresent","dataOffset","prefetchThreshold","midPageThreshold","nextMidRange","nextPageThreshold","nextFullRange","pullBackThreshold","offset","previousMidRange","previousFullRange","_goToRange","nextRange","syncDataSource","prefetchOffset","expanding","_expanding","_syncPending","_firstItemUid","BatchBuffer","batchSize","batchBuffer","endreached","prefetching","prefetched","reset","resize","jQuery","kendo$1","__meta__","category","description","depends","features","defineProperty"],"sources":["kendo.data.js"],"mappings":"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","ignoreList":[],"sourcesContent":["(function (global, factory) {\n   typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('kendo.core.js'), require('kendo.data.odata.js'), require('kendo.data.xml.js')) :\n   typeof define === 'function' && define.amd ? define(['exports', 'kendo.core', 'kendo.data.odata', 'kendo.data.xml'], factory) :\n   (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory((global.kendo = global.kendo || {}, global.kendo._globals = global.kendo._globals || {}, global.kendo._globals.Data = {})));\n})(this, (function (exports) {\n   /*\n   This code is copied/inspired by the internal @progress/kendo-data-query repo:\n   https://github.com/telerik/kendo-data-query/tree/develop/src/filtering\n\n   !!!\n   1. If updates are to be synced consider the accentFoldingFiltering,\n      which at the moment is not present as a feature in the data-query-package.\n\n   2. Double-check available operators as well.\n\n   3. Make sure objs are strings -> i.e., replace (a || \"\") to (a + '')\n   !!!\n\n   In future, if we consider reusing the code directly we should revise the above omissions.\n   */\n\n   const logic = {\n       \"or\": {\n           concat: (acc, fn) => a => acc(a) || fn(a),\n           identity: () => false\n       },\n       \"and\": {\n           concat: (acc, fn) => a => acc(a) && fn(a),\n           identity: () => true\n       }\n   };\n\n   const operatorsMap = {\n       isnullorempty: (a) => kendo.isBlank(a) || a === '',\n       isnotnullorempty: (a) => kendo.isPresent(a) && a !== '',\n       contains: (a, b) => (a + '').indexOf(b) >= 0,\n       doesnotcontain: (a, b) => (a + '').indexOf(b) === -1,\n       doesnotendwith: (a, b) => (a + '').indexOf(b, (a || \"\").length - (b || \"\").length) < 0,\n       doesnotstartwith: (a, b) => (a + '').lastIndexOf(b, 0) === -1,\n       endswith: (a, b) => (a + '').indexOf(b, (a || \"\").length - (b || \"\").length) >= 0,\n       eq: (a, b) => a === b,\n       gt: (a, b) => a > b,\n       gte: (a, b) => a >= b,\n       isempty: (a) => a === '',\n       isnotempty: (a) => a !== '',\n       isnotnull: (a) => kendo.isPresent(a),\n       isnull: (a) => kendo.isBlank(a),\n       lt: (a, b) => a < b,\n       lte: (a, b) => a <= b,\n       neq: (a, b) => a != b,\n       startswith: (a, b) => (a + '').lastIndexOf(b, 0) === 0\n   };\n\n   const dateRegExp = /^\\/Date\\((.*?)\\)\\/$/;\n\n   const convertValue = (value, ignoreCase, accentFoldingFiltering) => {\n       if (value != null && kendo.isString(value)) {\n           const date = dateRegExp.exec(value);\n           if (date) {\n               return new Date(+date[1]).getTime();\n           } else if (ignoreCase) {\n               return accentFoldingFiltering ? value.toLocaleLowerCase(accentFoldingFiltering) : value.toLowerCase();\n           }\n       } else if (value != null && kendo.isDate(value)) {\n           return value.getTime();\n       }\n       return value;\n   };\n\n   const typedGetter = (prop, value, ignoreCase, accentFoldingFiltering) => {\n       if (!kendo.isPresent(value)) {\n           return prop;\n       }\n\n       let acc = prop;\n\n       if (kendo.isString(value)) {\n           const date = dateRegExp.exec(value);\n           if (date) {\n               value = new Date(+date[1]);\n           } else {\n               acc = a => {\n                   const x = prop(a);\n                   if (typeof x === 'string' && ignoreCase) {\n                       return accentFoldingFiltering ? x.toLocaleLowerCase(accentFoldingFiltering) : x.toLowerCase();\n                   } else {\n                       return kendo.isNumeric(x) ? x + \"\" : x;\n                   }\n               };\n           }\n       }\n\n       if (kendo.isDate(value)) {\n           return a => {\n               const x = acc(a);\n               return kendo.isDate(x) ? x.getTime() : x;\n           };\n       }\n       return acc;\n   };\n\n   const transformFilter = ({ field, ignoreCase, value, operator = 'eq', accentFoldingFiltering }) => {\n       field = !kendo.isPresent(field) ? a => a : field;\n\n       ignoreCase = kendo.isPresent(ignoreCase) ? ignoreCase : true;\n\n       const itemProp = typedGetter(\n           kendo.isFunction(field) ? field : kendo.getter(field, true),\n           value,\n           ignoreCase,\n           accentFoldingFiltering\n       );\n\n       value = convertValue(value, ignoreCase, accentFoldingFiltering);\n\n       const op = kendo.isFunction(operator) ? operator : operatorsMap[operator];\n\n       return a => op(itemProp(a), value, ignoreCase);\n   };\n\n   const isCompositeFilterDescriptor = (source) => kendo.isPresent(source.filters);\n\n   const transformCompositeFilter = (filter) => {\n       const accentFoldingFiltering = filter.accentFoldingFiltering;\n       const combiner = logic[filter.logic || 'and'];\n       return filter.filters\n           .filter(kendo.isPresent)\n           .map(x => (isCompositeFilterDescriptor(x) ? transformCompositeFilter(extendAccentFolding(x, accentFoldingFiltering)) : transformFilter(extendAccentFolding(x, accentFoldingFiltering))))\n           .reduce(combiner.concat, combiner.identity);\n   };\n\n   const extendAccentFolding = (filter, accentFoldingFiltering) => (kendo.isPresent(accentFoldingFiltering) ? Object.assign(filter, { accentFoldingFiltering }) : filter);\n\n   const filterExprNoEval = function(expr) {\n       return transformCompositeFilter(expr);\n   };\n\n   const __meta__ = {\n       id: \"data\",\n       name: \"Data source\",\n       category: \"framework\",\n       description: \"Powerful component for using local and remote data.Fully supports CRUD, Sorting, Paging, Filtering, Grouping, and Aggregates.\",\n       depends: [ \"core\" ],\n       features: [ {\n           id: \"data-odata\",\n           name: \"OData\",\n           description: \"Support for accessing Open Data Protocol (OData) services.\",\n           depends: [ \"data.odata\" ]\n       }, {\n           id: \"data-signalr\",\n           name: \"SignalR\",\n           description: \"Support for binding to SignalR hubs.\",\n           depends: [ \"data.signalr\" ]\n       }, {\n           id: \"data-XML\",\n           name: \"XML\",\n           description: \"Support for binding to XML.\",\n           depends: [ \"data.xml\" ]\n       }]\n   };\n\n\n   (function($, undefined$1) {\n       var extend = $.extend,\n           isPlainObject = $.isPlainObject,\n           isEmptyObject = $.isEmptyObject,\n           isArray = Array.isArray,\n           grep = $.grep,\n           ajax = $.ajax,\n           map,\n           each = $.each,\n           noop = $.noop,\n           kendo = window.kendo,\n           isFunction = kendo.isFunction,\n           Observable = kendo.Observable,\n           Class = kendo.Class,\n           STRING = \"string\",\n           FUNCTION = \"function\",\n           ASCENDING = \"asc\",\n           CREATE = \"create\",\n           READ = \"read\",\n           UPDATE = \"update\",\n           DESTROY = \"destroy\",\n           CHANGE = \"change\",\n           SYNC = \"sync\",\n           GET = \"get\",\n           ERROR = \"error\",\n           REQUESTSTART = \"requestStart\",\n           PROGRESS = \"progress\",\n           REQUESTEND = \"requestEnd\",\n           ITEMSLOADED = \"itemsLoaded\",\n           ITEMLOAD = \"itemLoad\",\n           crud = [CREATE, READ, UPDATE, DESTROY],\n           identity = function(o) { return o; },\n           getter = kendo.getter,\n           stringify = kendo.stringify,\n           math = Math,\n           push = [].push,\n           join = [].join,\n           pop = [].pop,\n           splice = [].splice,\n           shift = [].shift,\n           slice = [].slice,\n           unshift = [].unshift,\n           toString = {}.toString,\n           stableSort = kendo.support.stableSort,\n           dateRegExp = /^\\/Date\\((.*?)\\)\\/$/,\n           objectKeys = [];\n\n       var ObservableArray = Observable.extend({\n           init: function(array, type) {\n               var that = this;\n\n               that.type = type || ObservableObject;\n\n               Observable.fn.init.call(that);\n\n               that.length = array.length;\n\n               that.wrapAll(array, that);\n               that._loadPromises = [];\n               that._loadedNodes = [];\n           },\n\n           at: function(index) {\n               return this[index];\n           },\n\n           toJSON: function(serializeFunctions) {\n               var idx, length = this.length, value, json = new Array(length);\n\n               for (idx = 0; idx < length; idx++) {\n                   value = this[idx];\n\n                   if (value instanceof ObservableObject) {\n                       value = value.toJSON(serializeFunctions);\n                   }\n\n                   json[idx] = value;\n               }\n\n               return json;\n           },\n\n           parent: noop,\n\n           wrapAll: function(source, target) {\n               var that = this,\n                   idx,\n                   length,\n                   parent = function() {\n                       return that;\n                   };\n\n               target = target || [];\n\n               for (idx = 0, length = source.length; idx < length; idx++) {\n                   target[idx] = that.wrap(source[idx], parent);\n               }\n\n               return target;\n           },\n\n           wrap: function(object, parent) {\n               var that = this,\n                   observable;\n\n               if (object !== null && toString.call(object) === \"[object Object]\") {\n                   observable = object instanceof that.type || object instanceof Model;\n\n                   if (!observable) {\n                       object = object instanceof ObservableObject ? object.toJSON() : object;\n                       object = new that.type(object);\n                   }\n\n                   object.parent = parent;\n\n                   object.bind(CHANGE, function(e) {\n                       var isGroup = object.hasOwnProperty(\"hasSubgroups\");\n                       that.trigger(CHANGE, {\n                           field: e.field,\n                           node: e.node,\n                           index: e.index,\n                           items: e.items || [this],\n                           action: e.node || isGroup ? (e.action || \"itemloaded\") : \"itemchange\"\n                       });\n                   });\n\n                   object.bind(ITEMLOAD, function(e) {\n                       that._loadPromises.push(e.promise);\n                       that._loading = true;\n\n                       e.promise.done(function() {\n                           that._loadedNodes.push(e.node);\n                           var index = that._loadPromises.indexOf(e.promise);\n                           that._loadPromises.splice(index, 1);\n\n                           if (!that._loadPromises.length) {\n                               that._loading = false;\n                               that.trigger(ITEMSLOADED, { collection: that, nodes: that._loadedNodes });\n                               that._loadedNodes = [];\n                           }\n                       });\n                   });\n               }\n\n               return object;\n           },\n\n           loading: function() {\n               return this._loading;\n           },\n\n           push: function() {\n               var index = this.length,\n                   items = this.wrapAll(arguments),\n                   result;\n\n               result = push.apply(this, items);\n\n               if (!this.omitChangeEvent) {\n                   this.trigger(CHANGE, {\n                       action: \"add\",\n                       index: index,\n                       items: items\n                   });\n               }\n\n               return result;\n           },\n\n           slice: slice,\n\n           sort: [].sort,\n\n           join: join,\n\n           pop: function() {\n               var length = this.length, result = pop.apply(this);\n\n               if (length) {\n                   this.trigger(CHANGE, {\n                       action: \"remove\",\n                       index: length - 1,\n                       items: [result]\n                   });\n               }\n\n               return result;\n           },\n\n           splice: function(index, howMany, item) {\n               var items = this.wrapAll(slice.call(arguments, 2)),\n                   result, i, len;\n\n               result = splice.apply(this, [index, howMany].concat(items));\n\n               if (result.length) {\n                   if (!this.omitChangeEvent) {\n                       this.trigger(CHANGE, {\n                           action: \"remove\",\n                           index: index,\n                           items: this.omitCache && this.omitCache.length ? result.concat(this.omitCache) : result\n                       });\n                       this.omitCache = [];\n                   }\n\n                   for (i = 0, len = result.length; i < len; i++) {\n                       if (result[i] && result[i].children) {\n                           result[i].unbind(CHANGE);\n                       }\n                   }\n               }\n\n               if (item) {\n                   if (!this.omitChangeEvent) {\n                       this.trigger(CHANGE, {\n                           action: \"add\",\n                           index: index,\n                           items: items\n                       });\n                   }\n               }\n               return result;\n           },\n\n           shift: function() {\n               var length = this.length, result = shift.apply(this);\n\n               if (length) {\n                   this.trigger(CHANGE, {\n                       action: \"remove\",\n                       index: 0,\n                       items: [result]\n                   });\n               }\n\n               return result;\n           },\n\n           unshift: function() {\n               var items = this.wrapAll(arguments),\n                   result;\n\n               result = unshift.apply(this, items);\n\n               this.trigger(CHANGE, {\n                   action: \"add\",\n                   index: 0,\n                   items: items\n               });\n\n               return result;\n           },\n\n           indexOf: function(item) {\n               var that = this,\n                   idx,\n                   length;\n\n               for (idx = 0, length = that.length; idx < length; idx++) {\n                   if (that[idx] === item) {\n                       return idx;\n                   }\n               }\n               return -1;\n           },\n\n           forEach: function(callback, thisArg) {\n               var idx = 0;\n               var length = this.length;\n               var context = thisArg || window;\n\n               for (; idx < length; idx++) {\n                   callback.call(context, this[idx], idx, this);\n               }\n           },\n\n           map: function(callback, thisArg) {\n               var idx = 0;\n               var result = [];\n               var length = this.length;\n               var context = thisArg || window;\n\n               for (; idx < length; idx++) {\n                   result[idx] = callback.call(context, this[idx], idx, this);\n               }\n\n               return result;\n           },\n\n           reduce: function(callback) {\n               var idx = 0,\n                   result,\n                   length = this.length;\n\n               if (arguments.length == 2) {\n                   result = arguments[1];\n               } else if (idx < length) {\n                   result = this[idx++];\n               }\n\n               for (; idx < length; idx++) {\n                   result = callback(result, this[idx], idx, this);\n               }\n\n               return result;\n           },\n\n           reduceRight: function(callback) {\n               var idx = this.length - 1,\n                   result;\n\n               if (arguments.length == 2) {\n                   result = arguments[1];\n               } else if (idx > 0) {\n                   result = this[idx--];\n               }\n\n               for (; idx >= 0; idx--) {\n                   result = callback(result, this[idx], idx, this);\n               }\n\n               return result;\n           },\n\n           filter: function(callback, thisArg) {\n               var idx = 0;\n               var result = [];\n               var item;\n               var length = this.length;\n               var context = thisArg || window;\n\n               for (; idx < length; idx++) {\n                   item = this[idx];\n                   if (callback.call(context, item, idx, this)) {\n                       result[result.length] = item;\n                   }\n               }\n\n               return result;\n           },\n\n           find: function(callback, thisArg) {\n               var idx = 0;\n               var item;\n               var length = this.length;\n               var context = thisArg || window;\n\n               for (; idx < length; idx++) {\n                   item = this[idx];\n                   if (callback.call(context, item, idx, this)) {\n                       return item;\n                   }\n               }\n           },\n\n           every: function(callback, thisArg) {\n               var idx = 0;\n               var item;\n               var length = this.length;\n               var context = thisArg || window;\n\n               for (; idx < length; idx++) {\n                   item = this[idx];\n                   if (!callback.call(context, item, idx, this)) {\n                       return false;\n                   }\n               }\n\n               return true;\n           },\n\n           some: function(callback, thisArg) {\n               var idx = 0;\n               var item;\n               var length = this.length;\n               var context = thisArg || window;\n\n               for (; idx < length; idx++) {\n                   item = this[idx];\n                   if (callback.call(context, item, idx, this)) {\n                       return true;\n                   }\n               }\n\n               return false;\n           },\n\n           // non-standard collection methods\n           remove: function(item) {\n               var idx = this.indexOf(item);\n\n               if (idx !== -1) {\n                   this.splice(idx, 1);\n               }\n           },\n\n           empty: function() {\n               this.splice(0, this.length);\n           }\n       });\n\n       // Polyfill for Symbol.iterator\n       if (typeof Symbol !== \"undefined\" && Symbol.iterator && !ObservableArray.prototype[Symbol.iterator]) {\n           ObservableArray.prototype[Symbol.iterator] = [][Symbol.iterator];\n       }\n\n       var LazyObservableArray = ObservableArray.extend({\n           init: function(data, type, events) {\n               var parentFn = function() { return this; };\n\n               Observable.fn.init.call(this);\n\n               this.type = type || ObservableObject;\n\n               if (events) {\n                   this._events = events;\n               }\n\n               for (var idx = 0; idx < data.length; idx++) {\n                   this[idx] = data[idx];\n               }\n\n               this.length = idx;\n               this._parent = parentFn.bind(this);\n               this._loadPromises = [];\n               this._loadedNodes = [];\n           },\n           at: function(index) {\n               var item = this[index];\n\n               if (!(item instanceof this.type)) {\n                   item = this[index] = this.wrap(item, this._parent);\n               } else {\n                   item.parent = this._parent;\n               }\n\n               return item;\n           }\n       });\n\n       function eventHandler(context, type, field, prefix) {\n           return function(e) {\n               var event = {}, key;\n\n               for (key in e) {\n                   event[key] = e[key];\n               }\n\n               if (prefix) {\n                   event.field = field + \".\" + e.field;\n               } else {\n                   event.field = field;\n               }\n\n               if (type == CHANGE && context._notifyChange) {\n                   context._notifyChange(event);\n               }\n\n               context.trigger(type, event);\n           };\n       }\n\n       function isPrimitiveType(value) {\n           return (typeof value === \"object\" && Object.getPrototypeOf(value) === Object.getPrototypeOf({}))\n                   || Object.getPrototypeOf(value) === Object.getPrototypeOf(new Date())\n                   || typeof value !== \"object\";\n         }\n\n       function ownKeys(value, ignoreObjectKeys) {\n           var props = [];\n           var protoKeys = [];\n           var keys, filteredObjectKeys;\n\n           value = value || {};\n\n           if (!isPrimitiveType(value)) {\n               protoKeys = Object.getOwnPropertyNames(Object.getPrototypeOf(value)).filter(f => f.indexOf(\"__\") !== 0);\n           }\n\n           keys = Object.getOwnPropertyNames(value).concat(protoKeys);\n\n           filteredObjectKeys = objectKeys.filter(function(key) {\n               return keys.indexOf(key) < 0;\n           });\n\n           while (value) {\n               Object.getOwnPropertyNames(value).forEach(function(prop) {\n                   if (props.indexOf(prop) === -1 && (!ignoreObjectKeys || filteredObjectKeys.indexOf(prop) < 0)) {\n                       props.push(prop);\n                   }\n               });\n               value = Object.getPrototypeOf(value);\n           }\n\n           return props;\n       }\n\n       objectKeys = ownKeys({}, false);\n\n       var ObservableObject = Observable.extend({\n           init: function(value) {\n               var that = this,\n                   member,\n                   keys = ownKeys(value, true),\n                   parent = function() {\n                       return that;\n                   };\n\n               Observable.fn.init.call(this);\n\n               this._handlers = {};\n\n               keys.forEach(function(field) {\n                   member = value[field];\n\n                   if (typeof member === \"object\" && member && !member.getTime && field.charAt(0) != \"_\") {\n                       member = that.wrap(member, field, parent);\n                   }\n\n                   that[field] = member;\n               });\n\n               that.uid = kendo.guid();\n           },\n\n           shouldSerialize: function(field, serializeFunctions) {\n               // This way we cover both if the serializeFunctions parameter is an object OR a boolean.\n               if (typeof serializeFunctions === \"object\") {\n                   serializeFunctions = (serializeFunctions && serializeFunctions[field]);\n               }\n               return this.hasOwnProperty(field) && field !== \"_handlers\" && field !== \"_events\" && (serializeFunctions || typeof this[field] !== FUNCTION) && field !== \"uid\";\n           },\n\n           forEach: function(f) {\n               for (var i in this) {\n                   if (this.shouldSerialize(i)) {\n                       f(this[i], i);\n                   }\n               }\n           },\n\n           toJSON: function(serializeFunctions) {\n               var result = {}, value, field;\n\n               for (field in this) {\n                   if (this.shouldSerialize(field, serializeFunctions)) {\n                       value = this[field];\n\n                       if (value instanceof ObservableObject || value instanceof ObservableArray) {\n                           value = value.toJSON(serializeFunctions);\n                       }\n\n                       result[field] = value;\n                   }\n               }\n\n               return result;\n           },\n\n           get: function(field) {\n               var that = this, result;\n\n               that.trigger(GET, { field: field });\n\n               if (field === \"this\") {\n                   result = that;\n               } else {\n                   result = kendo.getter(field, true)(that);\n               }\n\n               return result;\n           },\n\n           _set: function(field, value) {\n               var that = this;\n               var composite = field.indexOf(\".\") >= 0;\n\n               if (composite) {\n                   var paths = field.split(\".\"),\n                       path = \"\";\n\n                   while (paths.length > 1) {\n                       path += paths.shift();\n                       var obj = kendo.getter(path, true)(that);\n                       if (obj instanceof ObservableObject) {\n                           obj.set(paths.join(\".\"), value);\n                           return composite;\n                       }\n                       path += \".\";\n                   }\n               }\n\n               kendo.setter(field)(that, value);\n\n               return composite;\n           },\n\n           set: function(field, value) {\n               var that = this,\n                   isSetPrevented = false,\n                   composite = field.indexOf(\".\") >= 0,\n                   current = kendo.getter(field, true)(that);\n\n               if (current !== value) {\n                   if (current instanceof Observable && this._handlers[field]) {\n                       if (this._handlers[field].get) {\n                          current.unbind(GET, this._handlers[field].get);\n                       }\n                       current.unbind(CHANGE, this._handlers[field].change);\n                   }\n\n                   isSetPrevented = that.trigger(\"set\", { field: field, value: value });\n\n                   if (!isSetPrevented) {\n                       if (!composite) {\n                           value = that.wrap(value, field, function() { return that; });\n                       }\n                       if ((!that._set(field, value) || field.indexOf(\"(\") >= 0 || field.indexOf(\"[\") >= 0)) {\n                           that.trigger(CHANGE, { field: field });\n                       }\n                   }\n               }\n\n               return isSetPrevented;\n           },\n\n           parent: noop,\n\n           wrap: function(object, field, parent) {\n               var that = this;\n               var get;\n               var change;\n               var type = toString.call(object);\n\n               if (object != null && (type === \"[object Object]\" || type === \"[object Array]\")) {\n                   var isObservableArray = object instanceof ObservableArray;\n                   var isDataSource = object instanceof DataSource;\n\n                   if (type === \"[object Object]\" && !isDataSource && !isObservableArray) {\n                       if (!(object instanceof ObservableObject)) {\n                           object = new ObservableObject(object);\n                       }\n\n                       get = eventHandler(that, GET, field, true);\n                       object.bind(GET, get);\n                       change = eventHandler(that, CHANGE, field, true);\n                       object.bind(CHANGE, change);\n\n                       that._handlers[field] = { get: get, change: change };\n                   } else if (type === \"[object Array]\" || isObservableArray || isDataSource) {\n                       if (!isObservableArray && !isDataSource) {\n                           object = new ObservableArray(object);\n                       }\n\n                       change = eventHandler(that, CHANGE, field, false);\n\n                       object.bind(CHANGE, change);\n\n                       that._handlers[field] = { change: change };\n                   }\n\n                   object.parent = parent;\n               }\n\n               return object;\n           }\n       });\n\n       function equal(x, y) {\n           if (x === y) {\n               return true;\n           }\n\n           var xtype = kendo.type(x), ytype = kendo.type(y), field;\n\n           if (xtype !== ytype) {\n               return false;\n           }\n\n           if (xtype === \"date\") {\n               return x.getTime() === y.getTime();\n           }\n\n           if (xtype !== \"object\" && xtype !== \"array\") {\n               return false;\n           }\n\n           for (field in x) {\n               if (!equal(x[field], y[field])) {\n                   return false;\n               }\n           }\n\n           return true;\n       }\n\n       var parsers = {\n           \"number\": function(value) {\n               if (typeof value === STRING && value.toLowerCase() === \"null\") {\n                   return null;\n               }\n               return kendo.parseFloat(value);\n           },\n\n           \"date\": function(value) {\n               if (typeof value === STRING && value.toLowerCase() === \"null\") {\n                   return null;\n               }\n               return kendo.parseDate(value);\n           },\n\n           \"boolean\": function(value) {\n               if (typeof value === STRING) {\n                   if (value.toLowerCase() === \"null\") {\n                       return null;\n                   } else {\n                       return value.toLowerCase() === \"true\";\n                   }\n               }\n               return value != null ? !!value : value;\n           },\n\n           \"string\": function(value) {\n               if (typeof value === STRING && value.toLowerCase() === \"null\") {\n                   return null;\n               }\n               return value != null ? (value + \"\") : value;\n           },\n\n           \"default\": function(value) {\n               return value;\n           }\n       };\n\n       var defaultValues = {\n           \"string\": \"\",\n           \"number\": 0,\n           \"date\": new Date(),\n           \"boolean\": false,\n           \"default\": \"\"\n       };\n\n       function getFieldByName(obj, name) {\n           var field,\n               fieldName;\n\n           for (fieldName in obj) {\n               field = obj[fieldName];\n               if (isPlainObject(field) && field.field && field.field === name) {\n                   return field;\n               } else if (field === name) {\n                   return field;\n               }\n           }\n           return null;\n       }\n\n       var Model = ObservableObject.extend({\n           init: function(data) {\n               var that = this;\n\n               if (!data || $.isEmptyObject(data)) {\n                   data = $.extend({}, that.defaults, data);\n\n                   if (that._initializers) {\n                       for (var idx = 0; idx < that._initializers.length; idx++) {\n                            var name = that._initializers[idx];\n                            data[name] = that.defaults[name]();\n                       }\n                   }\n               }\n\n               ObservableObject.fn.init.call(that, data);\n\n               that.dirty = false;\n               that.dirtyFields = {};\n\n               if (that.idField) {\n                   that.id = that.get(that.idField);\n\n                   if (that.id === undefined$1) {\n                       that.id = that._defaultId;\n                   }\n               }\n           },\n\n           shouldSerialize: function(field) {\n               return ObservableObject.fn.shouldSerialize.call(this, field) &&\n                   field !== \"uid\" && !(this.idField !== \"id\" && field === \"id\") &&\n                   field !== \"dirty\" && field !== \"dirtyFields\" && field !== \"_accessors\";\n           },\n\n           _parse: function(field, value) {\n               var that = this,\n                   fieldName = field,\n                   fields = (that.fields || {}),\n                   parse;\n\n               field = fields[field];\n               if (!field) {\n                   field = getFieldByName(fields, fieldName);\n               }\n               if (field) {\n                   parse = field.parse;\n                   if (!parse && field.type) {\n                       parse = parsers[field.type.toLowerCase()];\n                   }\n               }\n\n               return parse ? parse(value) : value;\n           },\n\n           _notifyChange: function(e) {\n               var action = e.action;\n\n               if (action == \"add\" || action == \"remove\") {\n                   this.dirty = true;\n                   this.dirtyFields[e.field] = true;\n               }\n           },\n\n           editable: function(field) {\n               field = (this.fields || {})[field];\n               return field ? field.editable !== false : true;\n           },\n\n           set: function(field, value) {\n               var that = this;\n               var dirty = that.dirty;\n\n               if (that.editable(field)) {\n                   value = that._parse(field, value);\n\n                   if (!equal(value, that.get(field))) {\n                       that.dirty = true;\n                       that.dirtyFields[field] = true;\n\n                       if (ObservableObject.fn.set.call(that, field, value) && !dirty) {\n                           that.dirty = dirty;\n\n                           if (!that.dirty) {\n                               that.dirtyFields[field] = false;\n                           }\n                       }\n                   } else {\n                       that.trigger(\"equalSet\", { field: field, value: value });\n                   }\n               }\n           },\n\n           accept: function(data) {\n               var that = this,\n                   parent = function() { return that; },\n                   field;\n\n               for (field in data) {\n                   var value = data[field];\n\n                   if (field.charAt(0) != \"_\") {\n                       value = that.wrap(data[field], field, parent);\n                   }\n\n                   that._set(field, value);\n               }\n\n               if (that.idField) {\n                   that.id = that.get(that.idField);\n               }\n\n               that.dirty = false;\n               that.dirtyFields = {};\n           },\n\n           isNew: function() {\n               return this.id === this._defaultId;\n           }\n       });\n\n       Model.define = function(base, options) {\n           if (options === undefined$1) {\n               options = base;\n               base = Model;\n           }\n\n           var model,\n               proto = extend({ defaults: {} }, options),\n               name,\n               field,\n               type,\n               value,\n               idx,\n               length,\n               fields = {},\n               originalName,\n               id = proto.id,\n               functionFields = [];\n\n           if (id) {\n               proto.idField = id;\n           }\n\n           if (proto.id) {\n               delete proto.id;\n           }\n\n           if (id) {\n               proto.defaults[id] = proto._defaultId = \"\";\n           }\n\n           if (toString.call(proto.fields) === \"[object Array]\") {\n               for (idx = 0, length = proto.fields.length; idx < length; idx++) {\n                   field = proto.fields[idx];\n                   if (typeof field === STRING) {\n                       fields[field] = {};\n                   } else if (field.field) {\n                       fields[field.field] = field;\n                   }\n               }\n               proto.fields = fields;\n           }\n\n           for (name in proto.fields) {\n               field = proto.fields[name];\n               type = field.type || \"default\";\n               value = null;\n               originalName = name;\n\n               let nameToUse = typeof (field.field) === STRING ? field.field : name;\n\n               if (!field.nullable || field.defaultValue) {\n                   value = proto.defaults[originalName !== nameToUse ? originalName : nameToUse] = field.defaultValue !== undefined$1 ? field.defaultValue : defaultValues[type.toLowerCase()];\n\n                   if (typeof value === \"function\") {\n                       functionFields.push(nameToUse);\n                   }\n               }\n\n               if (options.id === nameToUse) {\n                   proto._defaultId = value;\n               }\n\n               proto.defaults[originalName !== nameToUse ? originalName : nameToUse] = value;\n\n               if ($.isPlainObject(field)) {\n                   field.parse = field.parse || parsers[type];\n               } else {\n                   field = {\n                       parse: parsers[type]\n                   };\n               }\n           }\n\n           if (functionFields.length > 0) {\n               proto._initializers = functionFields;\n           }\n\n           model = base.extend(proto);\n           model.define = function(options) {\n               return Model.define(model, options);\n           };\n\n           if (proto.fields) {\n               model.fields = proto.fields;\n               model.idField = proto.idField;\n           }\n\n           return model;\n       };\n\n       var Comparer = {\n           selector: function(field) {\n               return isFunction(field) ? field : getter(field);\n           },\n\n           compare: function(field) {\n               var selector = this.selector(field);\n               return function(a, b) {\n                   a = selector(a);\n                   b = selector(b);\n\n                   if (a == null && b == null) {\n                       return 0;\n                   }\n\n                   if (a == null) {\n                       return -1;\n                   }\n\n                   if (b == null) {\n                       return 1;\n                   }\n\n                   if (a.localeCompare) {\n                       return a.localeCompare(b);\n                   }\n\n                   return a > b ? 1 : (a < b ? -1 : 0);\n               };\n           },\n\n           create: function(sort) {\n               var compare = sort.compare || this.compare(sort.field);\n\n               if (sort.dir == \"desc\") {\n                   return function(a, b) {\n                       return compare(b, a, true);\n                   };\n               }\n\n               return compare;\n           },\n\n           combine: function(comparers) {\n               return function(a, b) {\n                   var result = comparers[0](a, b),\n                       idx,\n                       length;\n\n                   for (idx = 1, length = comparers.length; idx < length; idx ++) {\n                       result = result || comparers[idx](a, b);\n                   }\n\n                   return result;\n               };\n           }\n       };\n\n       var StableComparer = extend({}, Comparer, {\n           asc: function(field) {\n               var selector = this.selector(field);\n               return function(a, b) {\n                   var valueA = selector(a);\n                   var valueB = selector(b);\n\n                   if (valueA && valueA.getTime && valueB && valueB.getTime) {\n                       valueA = valueA.getTime();\n                       valueB = valueB.getTime();\n                   }\n\n                   if (valueA === valueB) {\n                       return a.__position - b.__position;\n                   }\n\n                   if (valueA == null) {\n                       return -1;\n                   }\n\n                   if (valueB == null) {\n                       return 1;\n                   }\n\n                   if (valueA.localeCompare) {\n                       return valueA.localeCompare(valueB);\n                   }\n\n                   return valueA > valueB ? 1 : -1;\n               };\n           },\n\n           desc: function(field) {\n               var selector = this.selector(field);\n               return function(a, b) {\n                   var valueA = selector(a);\n                   var valueB = selector(b);\n\n                   if (valueA && valueA.getTime && valueB && valueB.getTime) {\n                       valueA = valueA.getTime();\n                       valueB = valueB.getTime();\n                   }\n\n                   if (valueA === valueB) {\n                       return a.__position - b.__position;\n                   }\n\n                   if (valueA == null) {\n                       return 1;\n                   }\n\n                   if (valueB == null) {\n                       return -1;\n                   }\n\n                   if (valueB.localeCompare) {\n                       return valueB.localeCompare(valueA);\n                   }\n\n                   return valueA < valueB ? 1 : -1;\n               };\n           },\n           create: function(sort) {\n              return this[sort.dir](sort.field);\n           }\n       });\n\n       map = function(array, callback) {\n           var idx, length = array.length, result = new Array(length);\n\n           for (idx = 0; idx < length; idx++) {\n               result[idx] = callback(array[idx], idx, array);\n           }\n\n           return result;\n       };\n\n       var operators = (function() {\n\n           function quote(str) {\n               if (typeof str == \"string\") {\n                   str = str.replace(/[\\r\\n]+/g, \"\");\n               }\n               return JSON.stringify(str);\n           }\n\n           function textOp(impl) {\n               return function(a, b, ignore, accentFoldingFiltering) {\n                   b += \"\";\n                   if (ignore) {\n                       a = \"(\" + a + \" + '').toString()\" + ((accentFoldingFiltering) ? \".toLocaleLowerCase('\" + accentFoldingFiltering + \"')\" : \".toLowerCase()\");\n                       b = ((accentFoldingFiltering) ? b.toLocaleLowerCase(accentFoldingFiltering) : b.toLowerCase());\n                   }\n                   return impl(a, quote(b), ignore);\n               };\n           }\n\n           function operator(op, a, b, ignore, accentFoldingFiltering) {\n               if (b != null) {\n                   if (typeof b === STRING) {\n                       var date = dateRegExp.exec(b);\n                       if (date) {\n                           b = new Date(+date[1]);\n                       } else if (ignore) {\n                           b = quote(((accentFoldingFiltering) ? b.toLocaleLowerCase(accentFoldingFiltering) : b.toLowerCase()));\n                           a = \"((\" + a + \" || '')+'')\" + ((accentFoldingFiltering) ? \".toLocaleLowerCase('\" + accentFoldingFiltering + \"')\" : \".toLowerCase()\");\n                       } else {\n                           b = quote(b);\n                       }\n                   }\n\n                   if (b.getTime) {\n                       //b looks like a Date\n                       a = \"(\" + a + \"&&\" + a + \".getTime?\" + a + \".getTime():\" + a + \")\";\n                       b = b.getTime();\n                   }\n               }\n\n               return a + \" \" + op + \" \" + b;\n           }\n\n           function getMatchRegexp(pattern) {\n               // take a pattern, as supported by Excel match filter, and\n               // convert it to the equivalent JS regular expression.\n               // Excel patterns support:\n               //\n               //   * - match any sequence of characters\n               //   ? - match a single character\n               //\n               // to match a literal * or ?, they must be prefixed by a tilde (~)\n               for (var rx = \"/^\", esc = false, i = 0; i < pattern.length; ++i) {\n                   var ch = pattern.charAt(i);\n                   if (esc) {\n                       rx += \"\\\\\" + ch;\n                   } else if (ch == \"~\") {\n                       esc = true;\n                       continue;\n                   } else if (ch == \"*\") {\n                       rx += \".*\";\n                   } else if (ch == \"?\") {\n                       rx += \".\";\n                   } else if (\".+^$()[]{}|\\\\/\\n\\r\\u2028\\u2029\\xA0\".indexOf(ch) >= 0) {\n                       rx += \"\\\\\" + ch;\n                   } else {\n                       rx += ch;\n                   }\n                   esc = false;\n               }\n               return rx + \"$/\";\n           }\n\n           return {\n               quote: function(value) {\n                   if (value && value.getTime) {\n                       return \"new Date(\" + value.getTime() + \")\";\n                   }\n                   return quote(value);\n               },\n               eq: function(a, b, ignore, accentFoldingFiltering) {\n                   return operator(\"==\", a, b, ignore, accentFoldingFiltering);\n               },\n               neq: function(a, b, ignore, accentFoldingFiltering) {\n                   return operator(\"!=\", a, b, ignore, accentFoldingFiltering);\n               },\n               gt: function(a, b, ignore) {\n                   return operator(\">\", a, b, ignore);\n               },\n               gte: function(a, b, ignore) {\n                   return operator(\">=\", a, b, ignore);\n               },\n               lt: function(a, b, ignore) {\n                   return operator(\"<\", a, b, ignore);\n               },\n               lte: function(a, b, ignore) {\n                   return operator(\"<=\", a, b, ignore);\n               },\n               startswith: textOp(function(a, b) {\n                   return a + \".lastIndexOf(\" + b + \", 0) == 0\";\n               }),\n               doesnotstartwith: textOp(function(a, b) {\n                   return a + \".lastIndexOf(\" + b + \", 0) == -1\";\n               }),\n               endswith: textOp(function(a, b) {\n                   var n = b ? b.length - 2 : 0;\n                   return a + \".indexOf(\" + b + \", \" + a + \".length - \" + n + \") >= 0\";\n               }),\n               doesnotendwith: textOp(function(a, b) {\n                   var n = b ? b.length - 2 : 0;\n                   return a + \".indexOf(\" + b + \", \" + a + \".length - \" + n + \") < 0\";\n               }),\n               contains: textOp(function(a, b) {\n                   return a + \".indexOf(\" + b + \") >= 0\";\n               }),\n               doesnotcontain: textOp(function(a, b) {\n                   return a + \".indexOf(\" + b + \") == -1\";\n               }),\n               matches: textOp(function(a, b) {\n                   b = b.substring(1, b.length - 1);\n                   return getMatchRegexp(b) + \".test(\" + a + \")\";\n               }),\n               doesnotmatch: textOp(function(a, b) {\n                   b = b.substring(1, b.length - 1);\n                   return \"!\" + getMatchRegexp(b) + \".test(\" + a + \")\";\n               }),\n               isempty: function(a) {\n                   return a + \" === ''\";\n               },\n               isnotempty: function(a) {\n                   return a + \" !== ''\";\n               },\n               isnull: function(a) {\n                   return \"(\" + a + \" == null)\";\n               },\n               isnotnull: function(a) {\n                   return \"(\" + a + \" != null)\";\n               },\n               isnullorempty: function(a) {\n                   return \"(\" + a + \" === null) || (\" + a + \" === '')\";\n               },\n               isnotnullorempty: function(a) {\n                   return \"(\" + a + \" !== null) && (\" + a + \" !== '')\";\n               }\n           };\n       })();\n\n       function Query(data) {\n           this.data = data || [];\n       }\n\n       // Continue to support legacy unsafe-eval for the spreadsheet\n       Query.filterExpr = function(expression, options = { noEval: false }) {\n           if (options.noEval) {\n               // using no-eval for most cases\n               return filterExprNoEval(expression);\n           }\n\n           var expressions = [],\n               logic = { and: \" && \", or: \" || \" },\n               idx,\n               length,\n               filter,\n               expr,\n               fieldFunctions = [],\n               operatorFunctions = [],\n               field,\n               operator,\n               filters = expression.filters;\n\n           for (idx = 0, length = filters.length; idx < length; idx++) {\n               filter = filters[idx];\n               field = filter.field;\n               operator = filter.operator;\n\n               if (filter.filters) {\n                   expr = Query.filterExpr(filter);\n                   //Nested function fields or operators - update their index e.g. __o[0] -> __o[1]\n                   filter = expr.expression\n                   .replace(/__o\\[(\\d+)\\]/g, function(match, index) {\n                       index = +index;\n                       return \"__o[\" + (operatorFunctions.length + index) + \"]\";\n                   })\n                   .replace(/__f\\[(\\d+)\\]/g, function(match, index) {\n                       index = +index;\n                       return \"__f[\" + (fieldFunctions.length + index) + \"]\";\n                   });\n\n                   operatorFunctions.push.apply(operatorFunctions, expr.operators);\n                   fieldFunctions.push.apply(fieldFunctions, expr.fields);\n               } else {\n                   if (typeof field === FUNCTION) {\n                       expr = \"__f[\" + fieldFunctions.length + \"](d)\";\n                       fieldFunctions.push(field);\n                   } else {\n                       expr = kendo.expr(field);\n                   }\n\n                   if (typeof operator === FUNCTION) {\n                       filter = \"__o[\" + operatorFunctions.length + \"](\" + expr + \", \" + operators.quote(filter.value) + \")\";\n                       operatorFunctions.push(operator);\n                   } else {\n                       filter = operators[(operator || \"eq\").toLowerCase()](expr, filter.value, filter.ignoreCase !== undefined$1 ? filter.ignoreCase : true, expression.accentFoldingFiltering);\n                   }\n               }\n\n               expressions.push(filter);\n           }\n\n           return { expression: \"(\" + expressions.join(logic[expression.logic]) + \")\", fields: fieldFunctions, operators: operatorFunctions };\n       };\n\n       function normalizeSort(field, dir) {\n           if (field) {\n               var descriptor = typeof field === STRING ? { field: field, dir: dir } : field,\n               descriptors = isArray(descriptor) ? descriptor : (descriptor !== undefined$1 ? [descriptor] : []);\n\n               return grep(descriptors, function(d) { return !!d.dir; });\n           }\n       }\n\n       function sortFields(sorts, dir) {\n           var sortObject = {};\n\n           if (sorts) {\n               var descriptor = typeof sorts === STRING ? { field: sorts, dir: dir } : sorts,\n               descriptors = isArray(descriptor) ? descriptor : (descriptor !== undefined$1 ? [descriptor] : []);\n\n               for (var i = 0; i < descriptors.length; i++) {\n                   sortObject[descriptors[i].field] = { dir: descriptors[i].dir, index: i + 1 };\n               }\n           }\n\n           return sortObject;\n       }\n\n       var operatorMap = {\n           \"==\": \"eq\",\n           equals: \"eq\",\n           isequalto: \"eq\",\n           equalto: \"eq\",\n           equal: \"eq\",\n           \"!=\": \"neq\",\n           ne: \"neq\",\n           notequals: \"neq\",\n           isnotequalto: \"neq\",\n           notequalto: \"neq\",\n           notequal: \"neq\",\n           \"<\": \"lt\",\n           islessthan: \"lt\",\n           lessthan: \"lt\",\n           less: \"lt\",\n           \"<=\": \"lte\",\n           le: \"lte\",\n           islessthanorequalto: \"lte\",\n           lessthanequal: \"lte\",\n           \">\": \"gt\",\n           isgreaterthan: \"gt\",\n           greaterthan: \"gt\",\n           greater: \"gt\",\n           \">=\": \"gte\",\n           isgreaterthanorequalto: \"gte\",\n           greaterthanequal: \"gte\",\n           ge: \"gte\",\n           notsubstringof: \"doesnotcontain\",\n           isnull: \"isnull\",\n           isempty: \"isempty\",\n           isnotempty: \"isnotempty\"\n       };\n\n       function normalizeOperator(expression) {\n           var idx,\n           length,\n           filter,\n           operator,\n           filters = expression.filters;\n\n           if (filters) {\n               for (idx = 0, length = filters.length; idx < length; idx++) {\n                   filter = filters[idx];\n                   operator = filter.operator;\n\n                   if (operator && typeof operator === STRING) {\n                       filter.operator = operatorMap[operator.toLowerCase()] || operator;\n                   }\n\n                   normalizeOperator(filter);\n               }\n           }\n       }\n\n       function normalizeFilter(expression) {\n           if (expression && !isEmptyObject(expression)) {\n               if (isArray(expression) || !expression.filters) {\n                   expression = {\n                       logic: \"and\",\n                       filters: isArray(expression) ? expression : [expression]\n                   };\n               }\n\n               normalizeOperator(expression);\n\n               return expression;\n           }\n       }\n\n       Query.normalizeFilter = normalizeFilter;\n\n       function compareDescriptor(f1, f2) {\n           if (f1.logic || f2.logic) {\n               return false;\n           }\n\n           return f1.field === f2.field && f1.value === f2.value && f1.operator === f2.operator;\n       }\n\n       function normalizeDescriptor(filter) {\n           filter = filter || {};\n\n           if (isEmptyObject(filter)) {\n               return { logic: \"and\", filters: [] };\n           }\n\n           return normalizeFilter(filter);\n       }\n\n       function fieldComparer(a, b) {\n           if (b.logic || (a.field > b.field)) {\n               return 1;\n           } else if (a.field < b.field) {\n               return -1;\n           } else {\n               return 0;\n           }\n       }\n\n       function hasNotFetchedItems(items, start, end) {\n           for (let idx = start; idx < end; idx++) {\n               if (items[idx].notFetched) {\n                   return true;\n               }\n           }\n           return false;\n       }\n\n       function compareFilters(expr1, expr2) {\n           expr1 = normalizeDescriptor(expr1);\n           expr2 = normalizeDescriptor(expr2);\n\n           if (expr1.logic !== expr2.logic) {\n               return false;\n           }\n\n           var f1, f2;\n           var filters1 = (expr1.filters || []).slice();\n           var filters2 = (expr2.filters || []).slice();\n\n           if (filters1.length !== filters2.length) {\n               return false;\n           }\n\n           filters1 = filters1.sort(fieldComparer);\n           filters2 = filters2.sort(fieldComparer);\n\n           for (var idx = 0; idx < filters1.length; idx++) {\n               f1 = filters1[idx];\n               f2 = filters2[idx];\n\n               if (f1.logic && f2.logic) {\n                   if (!compareFilters(f1, f2)) {\n                       return false;\n                   }\n               } else if (!compareDescriptor(f1, f2)) {\n                   return false;\n               }\n           }\n\n           return true;\n       }\n\n       Query.compareFilters = compareFilters;\n\n       function normalizeAggregate(expressions) {\n           return isArray(expressions) ? expressions : [expressions];\n       }\n\n       function normalizeGroup(field, dir, compare, skipItemSorting) {\n           var descriptor = typeof field === STRING ? { field: field, dir: dir, compare: compare, skipItemSorting: skipItemSorting } : field,\n           descriptors = isArray(descriptor) ? descriptor : (descriptor !== undefined$1 ? [descriptor] : []);\n\n           return map(descriptors, function(d) {\n               return {\n                   field: d.field,\n                   dir: d.dir || \"asc\",\n                   aggregates: d.aggregates,\n                   compare: d.compare,\n                   skipItemSorting: d.skipItemSorting\n               };\n           });\n       }\n\n       function normalizeGroupWithoutCompare(field, dir, compare) {\n           var descriptors = normalizeGroup(field, dir, compare);\n\n           for (var i = 0; i < descriptors.length; i++) {\n               delete descriptors[i].compare;\n           }\n\n           return descriptors;\n       }\n\n       function anyGroupDescriptorHasCompare(groupDescriptors) {\n           var descriptors = isArray(groupDescriptors) ? groupDescriptors : [groupDescriptors];\n\n           for (var i = 0; i < descriptors.length; i++) {\n               if (descriptors[i] && isFunction(descriptors[i].compare)) {\n                   return true;\n               }\n           }\n\n           return false;\n       }\n\n       Query.prototype = {\n           toArray: function() {\n               return this.data;\n           },\n           range: function(index, count) {\n               return new Query(this.data.slice(index, index + count));\n           },\n           skip: function(count) {\n               return new Query(this.data.slice(count));\n           },\n           take: function(count) {\n               return new Query(this.data.slice(0, count));\n           },\n           select: function(selector) {\n               return new Query(map(this.data, selector));\n           },\n           order: function(selector, dir, inPlace) {\n               var sort = { dir: dir };\n\n               if (selector) {\n                   if (selector.compare) {\n                       sort.compare = selector.compare;\n                   } else {\n                       sort.field = selector;\n                   }\n               }\n\n               if (inPlace) {\n                   return new Query(this.data.sort(Comparer.create(sort)));\n               }\n\n               return new Query(this.data.slice(0).sort(Comparer.create(sort)));\n           },\n           orderBy: function(selector, inPlace) {\n               return this.order(selector, \"asc\", inPlace);\n           },\n           orderByDescending: function(selector, inPlace) {\n               return this.order(selector, \"desc\", inPlace);\n           },\n           sort: function(field, dir, comparer, inPlace) {\n               var idx,\n               length,\n               descriptors = normalizeSort(field, dir),\n               comparers = [];\n\n               comparer = comparer || Comparer;\n\n               if (descriptors.length) {\n                   for (idx = 0, length = descriptors.length; idx < length; idx++) {\n                       comparers.push(comparer.create(descriptors[idx]));\n                   }\n\n                   return this.orderBy({ compare: comparer.combine(comparers) }, inPlace);\n               }\n\n               return this;\n           },\n\n           filter: function(expressions) {\n               var compiled,\n               data = this.data,\n               result = [];\n\n               expressions = normalizeFilter(expressions);\n\n               if (!expressions || expressions.filters.length === 0) {\n                   return this;\n               }\n\n               compiled = Query.filterExpr(expressions, { noEval: true });\n\n               result = data.filter(compiled);\n               return new Query(result);\n           },\n\n           group: function(descriptors, allData, options) {\n               descriptors = normalizeGroup(descriptors || []);\n               allData = allData || this.data;\n\n               var that = this,\n               result = new Query(that.data),\n               descriptor;\n\n               var getFilteredData = (g, data) => {\n                   data = data || new Query(allData).filter([{\n                       field: g.field,\n                       operator: \"eq\",\n                       value: g.value,\n                       ignoreCase: false\n                   }]);\n\n                   return data;\n               };\n\n               if (descriptors.length > 0) {\n                   descriptor = descriptors[0];\n\n                   if (options && options.groupPaging) {\n                       result = new Query(allData).groupAllData(descriptor, allData).select(function(group) {\n                           var cachedFilteredData;\n\n                           var items = descriptors.length > 1 ? new Query(group.items).group(descriptors.slice(1), getFilteredData(group, cachedFilteredData).toArray(), options).toArray() : group.items;\n\n                           return {\n                               field: group.field,\n                               value: group.value,\n                               hasSubgroups: descriptors.length > 1,\n                               items: items,\n                               aggregates: descriptor.aggregates && descriptor.aggregates.length ? getFilteredData(group, cachedFilteredData).aggregate(descriptor.aggregates) : {},\n                               uid: kendo.guid(),\n                               itemCount: items.length,\n                               subgroupCount: items.length\n                           };\n                       });\n\n                   } else {\n                       result = result.groupBy(descriptor).select(function(group) {\n                           var cachedFilteredData;\n                           return {\n                               field: group.field,\n                               value: group.value,\n                               items: descriptors.length > 1 ? new Query(group.items).group(descriptors.slice(1), getFilteredData(group, cachedFilteredData).toArray()).toArray() : group.items,\n                               hasSubgroups: descriptors.length > 1,\n                               aggregates: descriptor.aggregates && descriptor.aggregates.length ? getFilteredData(group, cachedFilteredData).aggregate(descriptor.aggregates) : {},\n                           };\n                       });\n                   }\n               }\n               return result;\n           },\n\n           groupBy: function(descriptor) {\n               var that = this;\n\n               if (isEmptyObject(descriptor) || !this.data.length) {\n                   return new Query([]);\n               }\n\n               var field = descriptor.field,\n                   sorted = descriptor.skipItemSorting ? this.data : this._sortForGrouping(field, descriptor.dir || \"asc\"),\n                   accessor = kendo.accessor(field),\n                   item,\n                   groupValue = accessor.get(sorted[0], field),\n                   group = {\n                       field: field,\n                       value: groupValue,\n                       items: []\n                   },\n                   currentValue,\n                   idx,\n                   len,\n                   result = [group];\n\n               for (idx = 0, len = sorted.length; idx < len; idx++) {\n                   item = sorted[idx];\n                   currentValue = accessor.get(item, field);\n                   if (!groupValueComparer(groupValue, currentValue)) {\n                       groupValue = currentValue;\n                       group = {\n                           field: field,\n                           value: groupValue,\n                           items: []\n                       };\n                       result.push(group);\n                   }\n                   group.items.push(item);\n               }\n\n               result = that._sortGroups(result, descriptor);\n\n               return new Query(result);\n           },\n\n           groupAllData: function(descriptor, allData) {\n               if (isEmptyObject(descriptor) || this.data && !this.data.length) {\n                   return new Query([]);\n               }\n\n               var field = descriptor.field,\n                   sorted = descriptor.skipItemSorting ? allData : new Query(allData).sort(field, descriptor.dir || \"asc\", StableComparer).toArray(),\n                   accessor = kendo.accessor(field),\n                   item,\n                   groupValue = accessor.get(sorted[0], field),\n                   group = {\n                       field: field,\n                       value: groupValue,\n                       items: []\n                   },\n                   currentValue,\n                   idx,\n                   len,\n                   result = [group];\n\n               for (idx = 0, len = sorted.length; idx < len; idx++) {\n                   item = sorted[idx];\n                   currentValue = accessor.get(item, field);\n                   if (!groupValueComparer(groupValue, currentValue)) {\n                       groupValue = currentValue;\n                       group = {\n                           field: field,\n                           value: groupValue,\n                           items: []\n                       };\n                       result.push(group);\n                   }\n                   group.items.push(item);\n               }\n\n               result = this._sortGroups(result, descriptor);\n\n               return new Query(result);\n           },\n\n           _sortForGrouping: function(field, dir) {\n               var idx, length,\n                   data = this.data;\n\n               if (!stableSort) {\n                   for (idx = 0, length = data.length; idx < length; idx++) {\n                       data[idx].__position = idx;\n                   }\n\n                   data = new Query(data).sort(field, dir, StableComparer).toArray();\n\n                   for (idx = 0, length = data.length; idx < length; idx++) {\n                       delete data[idx].__position;\n                   }\n                   return data;\n               }\n\n               return this.sort(field, dir).toArray();\n           },\n\n           _sortGroups: function(groups, descriptor) {\n               var result = groups;\n\n               if (descriptor && isFunction(descriptor.compare)) {\n                   result = new Query(result).order({ compare: descriptor.compare }, descriptor.dir || ASCENDING).toArray();\n               }\n\n               return result;\n           },\n\n           aggregate: function(aggregates) {\n               var idx,\n                   len,\n                   result = {},\n                   state = {};\n\n               if (aggregates && aggregates.length) {\n                   for (idx = 0, len = this.data.length; idx < len; idx++) {\n                       calculateAggregate(result, aggregates, this.data[idx], idx, len, state);\n                   }\n               }\n               return result;\n           }\n       };\n\n       function groupValueComparer(a, b) {\n           if (a && a.getTime && b && b.getTime) {\n               return a.getTime() === b.getTime();\n           }\n           return a === b;\n       }\n\n       function calculateAggregate(accumulator, aggregates, item, index, length, state) {\n           aggregates = aggregates || [];\n           var idx,\n               aggr,\n               functionName,\n               len = aggregates.length;\n\n           for (idx = 0; idx < len; idx++) {\n               aggr = aggregates[idx];\n               functionName = aggr.aggregate;\n               var field = aggr.field;\n               accumulator[field] = accumulator[field] || {};\n               state[field] = state[field] || {};\n               state[field][functionName] = state[field][functionName] || {};\n               accumulator[field][functionName] = functions[functionName.toLowerCase()](accumulator[field][functionName], item, kendo.accessor(field), index, length, state[field][functionName]);\n           }\n       }\n\n       var functions = {\n           sum: function(accumulator, item, accessor) {\n               var value = accessor.get(item);\n\n               if (!isNumber(accumulator)) {\n                   accumulator = value;\n               } else if (isNumber(value)) {\n                   accumulator += value;\n               }\n\n               return accumulator;\n           },\n           count: function(accumulator) {\n               return (accumulator || 0) + 1;\n           },\n           average: function(accumulator, item, accessor, index, length, state) {\n               var value = accessor.get(item);\n\n               if (state.count === undefined$1) {\n                   state.count = 0;\n               }\n\n               if (!isNumber(accumulator)) {\n                   accumulator = value;\n               } else if (isNumber(value)) {\n                   accumulator += value;\n               }\n\n               if (isNumber(value)) {\n                   state.count++;\n               }\n\n               if (index == length - 1 && isNumber(accumulator)) {\n                   accumulator = accumulator / state.count;\n               }\n               return accumulator;\n           },\n           max: function(accumulator, item, accessor) {\n               var value = accessor.get(item);\n\n               if (!isNumber(accumulator) && !isDate(accumulator)) {\n                   accumulator = value;\n               }\n\n               if (accumulator < value && (isNumber(value) || isDate(value))) {\n                   accumulator = value;\n               }\n               return accumulator;\n           },\n           min: function(accumulator, item, accessor) {\n               var value = accessor.get(item);\n\n               if (!isNumber(accumulator) && !isDate(accumulator)) {\n                   accumulator = value;\n               }\n\n               if (accumulator > value && (isNumber(value) || isDate(value))) {\n                   accumulator = value;\n               }\n               return accumulator;\n           }\n       };\n\n       function isNumber(val) {\n           return typeof val === \"number\" && !isNaN(val);\n       }\n\n       function isDate(val) {\n           return val && val.getTime;\n       }\n\n       function toJSON(array) {\n           var idx, length = array.length, result = new Array(length);\n\n           for (idx = 0; idx < length; idx++) {\n               result[idx] = array[idx].toJSON();\n           }\n\n           return result;\n       }\n\n       Query.normalizeGroup = normalizeGroup;\n       Query.normalizeSort = normalizeSort;\n\n       Query.process = function(data, options, inPlace) {\n           options = options || {};\n\n           var group = options.group;\n           var customGroupSort = anyGroupDescriptorHasCompare(normalizeGroup(group || []));\n           var query = new Query(data),\n               groupDescriptorsWithoutCompare = normalizeGroupWithoutCompare(group || []),\n               normalizedSort = normalizeSort(options.sort || []),\n               sort = customGroupSort ? normalizedSort : groupDescriptorsWithoutCompare.concat(normalizedSort),\n               groupDescriptorsWithoutSort,\n               total,\n               filterCallback = options.filterCallback,\n               filter = options.filter,\n               skip = options.skip,\n               take = options.take;\n\n           if (sort && inPlace) {\n               query = query.sort(sort, undefined$1, undefined$1, inPlace);\n           }\n\n           if (filter) {\n               query = query.filter(filter);\n\n               if (filterCallback) {\n                   query = filterCallback(query);\n               }\n\n               total = query.toArray().length;\n           }\n\n           if (sort) {\n               if (!inPlace) {\n                   query = query.sort(sort);\n               }\n\n               if (group) {\n                   data = query.toArray();\n               }\n           }\n\n           if (customGroupSort) {\n               query = query.group(group, data, options);\n\n               if (skip !== undefined$1 && take !== undefined$1 && !options.groupPaging) {\n                   query = new Query(flatGroups(query.toArray())).range(skip, take);\n\n                   groupDescriptorsWithoutSort = map(groupDescriptorsWithoutCompare, function(groupDescriptor) {\n                       return extend({}, groupDescriptor, {\n                           skipItemSorting: true\n                       });\n                   });\n\n                   query = query.group(groupDescriptorsWithoutSort, data, options);\n               }\n           } else {\n               if (skip !== undefined$1 && take !== undefined$1) {\n                   total = query.data.length;\n\n                   if (skip + take > total && options.virtual) {\n                       skip -= skip + take - total;\n                       skip = skip < 0 ? 0 : skip;\n                   }\n                   query = query.range(skip, take);\n               }\n\n               if (group && (!isEmptyObject(group) || group.length !== 0)) {\n                   query = query.group(group, data, options);\n               }\n           }\n\n           return {\n               total: total,\n               data: query.toArray()\n           };\n       };\n\n       var LocalTransport = Class.extend({\n           init: function(options) {\n               this.data = options.data;\n           },\n\n           read: function(options) {\n               options.success(this.data);\n           },\n           update: function(options) {\n               options.success(options.data);\n           },\n           create: function(options) {\n               options.success(options.data);\n           },\n           destroy: function(options) {\n               options.success(options.data);\n           }\n       });\n\n       var RemoteTransport = Class.extend( {\n           init: function(options) {\n               var that = this, parameterMap;\n\n               options = that.options = extend({}, that.options, options);\n\n               each(crud, function(index, type) {\n                   if (typeof options[type] === STRING) {\n                       options[type] = {\n                           url: options[type]\n                       };\n                   }\n               });\n\n               that.cache = options.cache ? Cache.create(options.cache) : {\n                   find: noop,\n                   add: noop\n               };\n\n               parameterMap = options.parameterMap;\n\n               if (options.submit) {\n                   that.submit = options.submit;\n               }\n\n               if (isFunction(options.push)) {\n                   that.push = options.push;\n               }\n\n               if (!that.push) {\n                   that.push = identity;\n               }\n\n               that.parameterMap = isFunction(parameterMap) ? parameterMap : function(options) {\n                   var result = {};\n\n                   each(options, function(option, value) {\n                       if (option in parameterMap) {\n                           option = parameterMap[option];\n                           if (isPlainObject(option)) {\n                               value = option.value(value);\n                               option = option.key;\n                           }\n                       }\n\n                       result[option] = value;\n                   });\n\n                   return result;\n               };\n           },\n\n           options: {\n               parameterMap: identity\n           },\n\n           create: function(options) {\n               return ajax(this.setup(options, CREATE));\n           },\n\n           read: function(options) {\n               var that = this,\n                   success,\n                   error,\n                   result,\n                   cache = that.cache;\n\n               options = that.setup(options, READ);\n\n               success = options.success || noop;\n               error = options.error || noop;\n\n               result = cache.find(options.data);\n\n               if (result !== undefined$1) {\n                   success(result);\n               } else {\n                   options.success = function(result) {\n                       cache.add(options.data, result);\n\n                       success(result);\n                   };\n\n                   $.ajax(options);\n               }\n           },\n\n           update: function(options) {\n               return ajax(this.setup(options, UPDATE));\n           },\n\n           destroy: function(options) {\n               return ajax(this.setup(options, DESTROY));\n           },\n\n           setup: function(options, type) {\n               options = options || {};\n\n               var that = this,\n                   parameters,\n                   operation = that.options[type],\n                   data = isFunction(operation.data) ? operation.data(options.data) : operation.data;\n\n               options = extend(true, {}, operation, options);\n               parameters = extend(true, {}, data, options.data);\n\n               options.data = that.parameterMap(parameters, type);\n\n               if (isFunction(options.url)) {\n                   options.url = options.url(parameters);\n               }\n\n               return options;\n           }\n       });\n\n       var Cache = Class.extend({\n           init: function() {\n               this._store = {};\n           },\n           add: function(key, data) {\n               if (key !== undefined$1) {\n                   this._store[stringify(key)] = data;\n               }\n           },\n           find: function(key) {\n               return this._store[stringify(key)];\n           },\n           clear: function() {\n               this._store = {};\n           },\n           remove: function(key) {\n               delete this._store[stringify(key)];\n           }\n       });\n\n       Cache.create = function(options) {\n           var store = {\n               \"inmemory\": function() { return new Cache(); }\n           };\n\n           if (isPlainObject(options) && isFunction(options.find)) {\n               return options;\n           }\n\n           if (options === true) {\n               return new Cache();\n           }\n\n           return store[options]();\n       };\n\n       function serializeRecords(data, getters, modelInstance, originalFieldNames, fieldNames) {\n           var record,\n               getter,\n               originalName,\n               idx,\n               setters = {},\n               length;\n\n           for (idx = 0, length = data.length; idx < length; idx++) {\n               record = data[idx];\n               for (getter in getters) {\n                   originalName = fieldNames[getter];\n\n                   if (originalName && originalName !== getter) {\n                       if (!setters[originalName]) {\n                           setters[originalName] = kendo.setter(originalName);\n                       }\n                       setters[originalName](record, getters[getter](record));\n                       delete record[getter];\n                   }\n               }\n           }\n       }\n\n       function convertRecords(data, getters, modelInstance, originalFieldNames, fieldNames) {\n           var record,\n               getter,\n               originalName,\n               idx,\n               length;\n\n           for (idx = 0, length = data.length; idx < length; idx++) {\n               record = data[idx];\n               for (getter in getters) {\n                   record[getter] = modelInstance._parse(getter, getters[getter](record));\n\n                   originalName = fieldNames[getter];\n                   if (originalName && originalName !== getter) {\n                       delete record[originalName];\n                   }\n               }\n           }\n       }\n\n       function convertGroup(data, getters, modelInstance, originalFieldNames, fieldNames) {\n           var record,\n               idx,\n               fieldName,\n               length;\n\n           for (idx = 0, length = data.length; idx < length; idx++) {\n               record = data[idx];\n\n               fieldName = originalFieldNames[record.field];\n               if (fieldName && fieldName != record.field) {\n                   record.field = fieldName;\n               }\n\n               record.value = modelInstance._parse(record.field, record.value);\n\n               if (record.items) {\n                   if (record.hasSubgroups) {\n                       convertGroup(record.items, getters, modelInstance, originalFieldNames, fieldNames);\n                   } else {\n                       convertRecords(record.items, getters, modelInstance, originalFieldNames, fieldNames);\n                   }\n               }\n           }\n       }\n\n       function wrapDataAccess(originalFunction, model, converter, getters, originalFieldNames, fieldNames) {\n           return function(data) {\n               data = originalFunction(data);\n\n               return wrapDataAccessBase(model, converter, getters, originalFieldNames, fieldNames)(data);\n           };\n       }\n\n       function wrapDataAccessBase(model, converter, getters, originalFieldNames, fieldNames) {\n           return function(data) {\n\n               if (data && !isEmptyObject(getters)) {\n                   if (toString.call(data) !== \"[object Array]\" && !(data instanceof ObservableArray)) {\n                       data = [data];\n                   }\n\n                   converter(data, getters, new model(), originalFieldNames, fieldNames);\n               }\n\n               return data || [];\n           };\n       }\n\n       var DataReader = Class.extend({\n           init: function(schema) {\n               var that = this, member, get, model, base;\n\n               schema = schema || {};\n\n               for (member in schema) {\n                   get = schema[member];\n\n                   that[member] = typeof get === STRING ? getter(get) : get;\n               }\n\n               base = schema.modelBase || Model;\n\n               if (isPlainObject(that.model)) {\n                   that.model = model = base.define(that.model);\n               }\n\n               var dataFunction = that.data.bind(that);\n\n               that._dataAccessFunction = dataFunction;\n\n               if (that.model) {\n                   var groupsFunction = that.groups.bind(that),\n                       serializeFunction = that.serialize.bind(that),\n                       originalFieldNames = {},\n                       getters = {},\n                       serializeGetters = {},\n                       fieldNames = {},\n                       shouldSerialize = false,\n                       fieldName,\n                       name;\n\n                   model = that.model;\n\n                   if (model.fields) {\n                       each(model.fields, function(field, value) {\n                           var fromName;\n\n                           fieldName = field;\n\n                           if (isPlainObject(value) && value.field) {\n                               fieldName = value.field;\n                           } else if (typeof value === STRING) {\n                               fieldName = value;\n                           }\n\n                           if (isPlainObject(value) && value.from) {\n                               fromName = value.from;\n                           }\n\n                           shouldSerialize = shouldSerialize || (fromName && fromName !== field) || fieldName !== field;\n                           name = fromName || fieldName;\n                           getters[field] = name.indexOf(\".\") !== -1 ? getter(name, true) : getter(name);\n                           serializeGetters[field] = getter(field);\n                           originalFieldNames[fromName || fieldName] = field;\n                           fieldNames[field] = fromName || fieldName;\n                       });\n\n                       if (!schema.serialize && shouldSerialize) {\n                           that.serialize = wrapDataAccess(serializeFunction, model, serializeRecords, serializeGetters, originalFieldNames, fieldNames);\n                       }\n                   }\n\n                   that._dataAccessFunction = dataFunction;\n                   that._wrapDataAccessBase = wrapDataAccessBase(model, convertRecords, getters, originalFieldNames, fieldNames);\n                   that.data = wrapDataAccess(dataFunction, model, convertRecords, getters, originalFieldNames, fieldNames);\n                   that.groups = wrapDataAccess(groupsFunction, model, convertGroup, getters, originalFieldNames, fieldNames);\n               }\n           },\n           errors: function(data) {\n               return data ? data.errors : null;\n           },\n           parse: identity,\n           data: identity,\n           total: function(data) {\n               return data.length;\n           },\n           groups: identity,\n           aggregates: function() {\n               return {};\n           },\n           serialize: function(data) {\n               return data;\n           }\n       });\n\n       function fillLastGroup(originalGroup, newGroup) {\n           var currOriginal;\n           var currentNew;\n\n           if (newGroup.items && newGroup.items.length) {\n               for (var i = 0; i < newGroup.items.length; i++) {\n                   currOriginal = originalGroup.items[originalGroup.items.length - 1];\n                   currentNew = newGroup.items[i];\n                   if (currOriginal && currentNew) {\n                       if (currOriginal.hasSubgroups && currOriginal.value == currentNew.value) {\n                           fillLastGroup(currOriginal, currentNew);\n                       } else if (currOriginal.field && currOriginal.value == currentNew.value) {\n                           currOriginal.items.omitChangeEvent = true;\n                           currOriginal.items.push.apply(currOriginal.items, currentNew.items);\n                           currOriginal.items.omitChangeEvent = false;\n                       } else {\n                           originalGroup.items.omitChangeEvent = true;\n                           originalGroup.items.push.apply(originalGroup.items, [currentNew]);\n                           originalGroup.items.omitChangeEvent = false;\n                       }\n                   } else if (currentNew) {\n                       originalGroup.items.omitChangeEvent = true;\n                       originalGroup.items.push.apply(originalGroup.items, [currentNew]);\n                       originalGroup.items.omitChangeEvent = false;\n                   }\n               }\n           }\n       }\n       function mergeGroups(target, dest, skip, take) {\n           var group,\n               idx = 0,\n               items;\n\n           while (dest.length && take) {\n               group = dest[idx];\n               items = group.items;\n\n               var length = items.length;\n\n               if (target && target.field === group.field && target.value === group.value) {\n                   if (target.hasSubgroups && target.items.length) {\n                       mergeGroups(target.items[target.items.length - 1], group.items, skip, take);\n                   } else {\n                       items = items.slice(skip, skip + take);\n                       target.items = target.items.concat(items);\n                   }\n                   dest.splice(idx--, 1);\n               } else if (group.hasSubgroups && items.length) {\n                   mergeGroups(group, items, skip, take);\n                   if (!group.items.length) {\n                       dest.splice(idx--, 1);\n                   }\n               } else {\n                   items = items.slice(skip, skip + take);\n                   group.items = items;\n\n                   if (!group.items.length) {\n                       dest.splice(idx--, 1);\n                   }\n               }\n\n               if (items.length === 0) {\n                   skip -= length;\n               } else {\n                   skip = 0;\n                   take -= items.length;\n               }\n\n               if (++idx >= dest.length) {\n                   break;\n               }\n           }\n\n           if (idx < dest.length) {\n               dest.splice(idx, dest.length - idx);\n           }\n       }\n\n       function flatGroups(groups, indexFunction) {\n           var result = [];\n           var groupsLength = (groups || []).length;\n           var group;\n           var items;\n           var indexFn = isFunction(indexFunction) ? indexFunction : function(array, index) {\n               return array[index];\n           };\n\n           for (var groupIndex = 0; groupIndex < groupsLength; groupIndex++) {\n               group = indexFn(groups, groupIndex);\n\n               if (group.hasSubgroups) {\n                   result = result.concat(flatGroups(group.items));\n               } else {\n                   items = group.items;\n\n                   for (var itemIndex = 0; itemIndex < items.length; itemIndex++) {\n                       result.push(indexFn(items, itemIndex));\n                   }\n               }\n           }\n           return result;\n       }\n\n       function flattenGroups(data) {\n           var idx,\n               result = [],\n               length,\n               items,\n               itemIndex;\n\n           for (idx = 0, length = data.length; idx < length; idx++) {\n               var group = data.at(idx);\n               if (group.items) {\n                   if (group.hasSubgroups) {\n                       result = result.concat(flattenGroups(group.items));\n                   } else {\n                       items = group.items;\n                       for (itemIndex = 0; itemIndex < items.length; itemIndex++) {\n                           result.push(items.at(itemIndex));\n                       }\n                   }\n               }\n           }\n           return result;\n       }\n\n       function wrapGroupItems(data, model) {\n           var idx, length, group;\n           if (model) {\n               for (idx = 0, length = data.length; idx < length; idx++) {\n                   group = data.at(idx);\n                   if (group.items) {\n                       if (group.hasSubgroups) {\n                           wrapGroupItems(group.items, model);\n                       } else {\n                           group.items = new LazyObservableArray(group.items, model, group.items._events);\n                       }\n                   }\n               }\n           }\n       }\n\n       function eachGroupItems(data, func) {\n           for (var idx = 0; idx < data.length; idx++) {\n               if (data[idx].hasSubgroups) {\n                   if (eachGroupItems(data[idx].items, func)) {\n                       return true;\n                   }\n               } else if (func(data[idx].items, data[idx])) {\n                   return true;\n               }\n           }\n       }\n\n       function replaceInRanges(ranges, data, item, observable) {\n           for (var idx = 0; idx < ranges.length; idx++) {\n               if (ranges[idx].data === data) {\n                   break;\n               }\n               if (replaceInRange(ranges[idx].data, item, observable)) {\n                   break;\n               }\n           }\n       }\n\n       function replaceInRange(items, item, observable) {\n           for (var idx = 0, length = items.length; idx < length; idx++) {\n               if (items[idx] && items[idx].hasSubgroups) {\n                   return replaceInRange(items[idx].items, item, observable);\n               } else if (items[idx] === item || items[idx] === observable) {\n                  items[idx] = observable;\n                  return true;\n               }\n           }\n       }\n\n       function replaceWithObservable(view, data, ranges, type, serverGrouping) {\n           for (var viewIndex = 0, length = view.length; viewIndex < length; viewIndex++) {\n               var item = view[viewIndex];\n\n               if (!item || item instanceof type) {\n                   continue;\n               }\n\n               if (item.hasSubgroups !== undefined$1 && !serverGrouping) {\n                   replaceWithObservable(item.items, data, ranges, type, serverGrouping);\n               } else {\n                   for (var idx = 0; idx < data.length; idx++) {\n                       if (data[idx] === item) {\n                           view[viewIndex] = data.at(idx);\n                           replaceInRanges(ranges, data, item, view[viewIndex]);\n                           break;\n                       }\n                   }\n               }\n           }\n       }\n\n       function removeModel(data, model) {\n           if (!data) {\n               return;\n           }\n           var length = data.length;\n           var dataItem;\n           var idx;\n\n           for (idx = 0; idx < length; idx++) {\n               dataItem = data[idx];\n\n               if (dataItem.uid && dataItem.uid == model.uid) {\n                   data.splice(idx, 1);\n                   return dataItem;\n               }\n           }\n       }\n\n       function indexOfPristineModel(data, model) {\n           if (model) {\n               return indexOf(data, function(item) {\n                   return (item.uid && item.uid == model.uid) || (item[model.idField] === model.id && model.id !== model._defaultId);\n               });\n           }\n           return -1;\n       }\n\n       function indexOfModel(data, model) {\n           if (model) {\n               return indexOf(data, function(item) {\n                   return item.uid == model.uid;\n               });\n           }\n           return -1;\n       }\n\n       function indexOf(data, comparer) {\n           var idx, length;\n           if (!data) {\n               return;\n           }\n\n           for (idx = 0, length = data.length; idx < length; idx++) {\n               if (comparer(data[idx])) {\n                   return idx;\n               }\n           }\n\n           return -1;\n       }\n\n       function fieldNameFromModel(fields, name) {\n           if (fields && !isEmptyObject(fields)) {\n               var descriptor = fields[name];\n               var fieldName;\n               if (isPlainObject(descriptor)) {\n                   fieldName = descriptor.from || descriptor.field || name;\n               } else {\n                   fieldName = fields[name] || name;\n               }\n\n               if (isFunction(fieldName)) {\n                   return name;\n               }\n\n               return fieldName;\n           }\n           return name;\n       }\n\n       function convertFilterDescriptorsField(descriptor, model) {\n           var idx,\n               length,\n               target = {};\n\n           for (var field in descriptor) {\n               if (field !== \"filters\") {\n                   target[field] = descriptor[field];\n               }\n           }\n\n           if (descriptor.filters) {\n               target.filters = [];\n               for (idx = 0, length = descriptor.filters.length; idx < length; idx++) {\n                   target.filters[idx] = convertFilterDescriptorsField(descriptor.filters[idx], model);\n               }\n           } else {\n               target.field = fieldNameFromModel(model.fields, target.field);\n           }\n           return target;\n       }\n\n       function convertDescriptorsField(descriptors, model) {\n           var idx,\n               length,\n               result = [],\n               target,\n               descriptor;\n\n           for (idx = 0, length = descriptors.length; idx < length; idx ++) {\n               target = {};\n\n               descriptor = descriptors[idx];\n\n               for (var field in descriptor) {\n                   target[field] = descriptor[field];\n               }\n\n               target.field = fieldNameFromModel(model.fields, target.field);\n\n               if (target.aggregates && isArray(target.aggregates)) {\n                   target.aggregates = convertDescriptorsField(target.aggregates, model);\n               }\n               result.push(target);\n           }\n           return result;\n       }\n\n       var DataSource = Observable.extend({\n           init: function(options) {\n               var that = this, model, data;\n\n               if (options) {\n                   data = options.data;\n               }\n\n               options = that.options = extend({}, that.options, options);\n\n               that._map = {};\n               that._prefetch = {};\n               that._data = [];\n               that._pristineData = [];\n               that._ranges = [];\n               that._view = [];\n               that._pristineTotal = 0;\n               that._destroyed = [];\n               that._pageSize = options.pageSize;\n               that._page = options.page || (options.pageSize ? 1 : undefined$1);\n               that._sort = normalizeSort(options.sort);\n               that._sortFields = sortFields(options.sort);\n               that._filter = normalizeFilter(options.filter);\n               that._group = normalizeGroup(options.group);\n               that._aggregate = options.aggregate;\n               that._total = options.total;\n               that._groupPaging = options.groupPaging;\n\n               if (that._groupPaging) {\n                   that._groupsState = {};\n               }\n               that._shouldDetachObservableParents = true;\n\n               Observable.fn.init.call(that);\n\n               that.transport = Transport.create(options, data, that);\n\n               if (isFunction(that.transport.push)) {\n                   that.transport.push({\n                       pushCreate: that._pushCreate.bind(that),\n                       pushUpdate: that._pushUpdate.bind(that),\n                       pushDestroy: that._pushDestroy.bind(that)\n                   });\n               }\n\n               if (options.offlineStorage != null) {\n                   if (typeof options.offlineStorage == \"string\") {\n                       var key = options.offlineStorage;\n\n                       that._storage = {\n                           getItem: function() {\n                               return JSON.parse(localStorage.getItem(key));\n                           },\n                           setItem: function(item) {\n                               localStorage.setItem(key, stringify(that.reader.serialize(item)));\n                           }\n                       };\n                   } else {\n                       that._storage = options.offlineStorage;\n                   }\n               }\n\n               that.reader = new kendo.data.readers[options.schema.type || \"json\" ](options.schema);\n\n               model = that.reader.model || {};\n\n               that._detachObservableParents();\n\n               that._data = that._observe(that._data);\n               that._online = true;\n\n               that.bind([\"push\", ERROR, CHANGE, REQUESTSTART, SYNC, REQUESTEND, PROGRESS], options);\n           },\n\n           options: {\n               data: null,\n               schema: {\n                  modelBase: Model\n               },\n               offlineStorage: null,\n               serverSorting: false,\n               serverPaging: false,\n               serverFiltering: false,\n               serverGrouping: false,\n               serverAggregates: false,\n               batch: false,\n               inPlaceSort: false\n           },\n\n           clone: function() {\n               return this;\n           },\n\n           online: function(value) {\n               if (value !== undefined$1) {\n                   if (this._online != value) {\n                       this._online = value;\n\n                       if (value) {\n                           return this.sync();\n                       }\n                   }\n\n                   return $.Deferred().resolve().promise();\n               } else {\n                   return this._online;\n               }\n           },\n\n           offlineData: function(state) {\n               if (this.options.offlineStorage == null) {\n                   return null;\n               }\n\n               if (state !== undefined$1) {\n                   return this._storage.setItem(state);\n               }\n\n               return this._storage.getItem() || [];\n           },\n\n           _isGrouped: function() {\n               var group = this.group() || [];\n\n               return group.length;\n           },\n\n           _isServerGrouped: function() {\n               var group = this.group() || [];\n\n               return this.options.serverGrouping && group.length;\n           },\n\n           _isServerGroupPaged: function() {\n               return this._isServerGrouped() && this._groupPaging;\n           },\n\n           _isGroupPaged: function() {\n               var group = this._group || [];\n\n               return this._groupPaging && group.length;\n           },\n\n           _pushCreate: function(result) {\n               this._push(result, \"pushCreate\");\n           },\n\n           _pushUpdate: function(result) {\n               this._push(result, \"pushUpdate\");\n           },\n\n           _pushDestroy: function(result) {\n               this._push(result, \"pushDestroy\");\n           },\n\n           _push: function(result, operation) {\n               var data = this._readData(result);\n\n               if (!data) {\n                   data = result;\n               }\n\n               this[operation](data);\n           },\n\n           _flatData: function(data, skip) {\n               if (data) {\n                   if (this._isServerGrouped()) {\n                       return flattenGroups(data);\n                   }\n\n                   if (!skip) {\n                       for (var idx = 0; idx < data.length; idx++) {\n                           data.at(idx);\n                       }\n                   }\n               }\n\n               return data;\n           },\n\n           parent: noop,\n\n           get: function(id) {\n               var idx, length, data = this._flatData(this._data, this.options.useRanges);\n\n               for (idx = 0, length = data.length; idx < length; idx++) {\n                   if (data[idx].id == id) {\n                       return data[idx];\n                   }\n               }\n           },\n\n           getByUid: function(id) {\n               return this._getByUid(id, this._data);\n           },\n\n           _getByUid: function(id, dataItems) {\n               var idx, length, data = this._flatData(dataItems, this.options.useRanges);\n\n               if (!data) {\n                   return;\n               }\n\n               for (idx = 0, length = data.length; idx < length; idx++) {\n                   if (data[idx].uid == id) {\n                       return data[idx];\n                   }\n               }\n           },\n\n           indexOf: function(model) {\n               return indexOfModel(this._data, model);\n           },\n\n           at: function(index) {\n               return this._data.at(index);\n           },\n\n           data: function(value) {\n               var that = this;\n               if (value !== undefined$1) {\n                   that._detachObservableParents();\n                   that._data = this._observe(value);\n\n                   that._pristineData = value.slice(0);\n\n                   that._storeData();\n\n                   that._ranges = [];\n                   that.trigger(\"reset\");\n                   that._addRange(that._data);\n\n                   that._total = that._data.length;\n                   that._pristineTotal = that._total;\n\n                   that._process(that._data);\n               } else {\n                   if (that._data) {\n                       for (var idx = 0; idx < that._data.length; idx++) {\n                           that._data.at(idx);\n                       }\n                   }\n\n                   return that._data;\n               }\n           },\n\n           view: function(value) {\n               if (value === undefined$1) {\n                   return this._view;\n               } else {\n                   this._view = this._observeView(value);\n               }\n           },\n\n           _observeView: function(data) {\n               var that = this;\n               replaceWithObservable(data, that._data, that._ranges, that.reader.model || ObservableObject, that._isServerGrouped());\n\n               var view = new LazyObservableArray(data, that.reader.model);\n               view.parent = function() { return that.parent(); };\n               return view;\n           },\n\n           flatView: function() {\n               var groups = this.group() || [];\n\n               if (groups.length) {\n                   return flattenGroups(this._view);\n               } else {\n                   return this._view;\n               }\n           },\n\n           add: function(model) {\n               return this.insert(this._data.length, model);\n           },\n\n           _createNewModel: function(model) {\n               if (this.reader.model) {\n                   return new this.reader.model(model);\n               }\n\n               if (model instanceof ObservableObject) {\n                   return model;\n               }\n\n               return new ObservableObject(model);\n           },\n\n           insert: function(index, model) {\n               if (!model) {\n                   model = index;\n                   index = 0;\n               }\n\n               if (!(model instanceof Model)) {\n                   model = this._createNewModel(model);\n               }\n\n               if (this._isServerGrouped()) {\n                   this._data.splice(index, 0, this._wrapInEmptyGroup(model));\n               } else {\n                   this._data.splice(index, 0, model);\n               }\n\n               this._insertModelInRange(index, model);\n\n               return model;\n           },\n\n           pushInsert: function(index, items) {\n               var that = this;\n               var rangeSpan = that._getCurrentRangeSpan();\n\n               if (!items) {\n                   items = index;\n                   index = 0;\n               }\n\n               if (!isArray(items)) {\n                   items = [items];\n               }\n\n               var pushed = [];\n               var autoSync = this.options.autoSync;\n               this.options.autoSync = false;\n\n               try {\n                   for (var idx = 0; idx < items.length; idx ++) {\n                       var item = items[idx];\n\n                       var result = this.insert(index, item);\n\n                       pushed.push(result);\n\n                       var pristine = result.toJSON();\n\n                       if (this._isServerGrouped()) {\n                           pristine = this._wrapInEmptyGroup(pristine);\n                       }\n\n                       this._pristineData.push(pristine);\n\n                       if (rangeSpan && rangeSpan.length) {\n                           $(rangeSpan).last()[0].pristineData.push(pristine);\n                       }\n\n                       index++;\n                   }\n               } finally {\n                   this.options.autoSync = autoSync;\n               }\n\n               if (pushed.length) {\n                   this.trigger(\"push\", {\n                       type: \"create\",\n                       items: pushed\n                   });\n               }\n           },\n\n           pushCreate: function(items) {\n               this.pushInsert(this._data.length, items);\n           },\n\n           pushUpdate: function(items) {\n               if (!isArray(items)) {\n                   items = [items];\n               }\n\n               var pushed = [];\n\n               for (var idx = 0; idx < items.length; idx ++) {\n                   var item = items[idx];\n                   var model = this._createNewModel(item);\n\n                   var target = this.get(model.id);\n\n                   if (target) {\n                       pushed.push(target);\n\n                       target.accept(item);\n\n                       target.trigger(CHANGE);\n\n                       this._updatePristineForModel(target, item);\n                   } else {\n                       this.pushCreate(item);\n                   }\n               }\n\n               if (pushed.length) {\n                   this.trigger(\"push\", {\n                       type: \"update\",\n                       items: pushed\n                   });\n               }\n           },\n\n           pushDestroy: function(items) {\n               var pushed = this._removeItems(items);\n\n               if (pushed.length) {\n                   this.trigger(\"push\", {\n                       type: \"destroy\",\n                       items: pushed\n                   });\n               }\n           },\n\n           _removeItems: function(itemsToRemove, removePristine) {\n               if (!isArray(itemsToRemove)) {\n                   itemsToRemove = [itemsToRemove];\n               }\n\n               var shouldRemovePristine = typeof removePristine !== \"undefined\" ? removePristine : true;\n\n               var destroyed = [];\n               var autoSync = this.options.autoSync;\n               this.options.autoSync = false;\n               try {\n                   for (var idx = 0; idx < itemsToRemove.length; idx ++) {\n                       var item = itemsToRemove[idx];\n                       var model = this._createNewModel(item);\n                       var found = false;\n                       var index = idx;\n\n                       this._eachItem(this._data, function(items) {\n                           // Ensure all children of a parent are removed before the change event is triggered.\n                           if (index !== itemsToRemove.length - 1) {\n                               items.omitChangeEvent = true;\n                               items.omitCache = [];\n                           } else {\n                               items.omitChangeEvent = false;\n                           }\n\n                           for (var idx = 0; idx < items.length; idx++) {\n                               var item = items.at(idx);\n                               if (item.id === model.id) {\n                                   /* When the change event is omitted, certain calculations such as 'total' are broken because only the last item reaches the change handler.\n                                      Keep track of all child items that had their change event omitted and when the change is finally triggered, concat them to the result.*/\n                                   if (items.omitChangeEvent) {\n                                       items.omitCache.push(item);\n                                   }\n                                   destroyed.push(item);\n                                   items.splice(idx, 1);\n                                   found = true;\n                                   break;\n                               }\n                           }\n                       });\n\n                       if (found && shouldRemovePristine) {\n                           this._removePristineForModel(model);\n                           this._destroyed.pop();\n                       }\n                   }\n               } finally {\n                   this.options.autoSync = autoSync;\n               }\n\n               return destroyed;\n           },\n\n           pushMove: function(index, items) {\n               var pushed = this._moveItems(index, items);\n\n               if (pushed.length) {\n                   this.trigger(\"push\", {\n                       type: \"update\",\n                       items: pushed\n                   });\n               }\n           },\n\n           _moveItems: function(index, items) {\n               if (!isArray(items)) {\n                   items = [items];\n               }\n\n               var moved = [];\n               var autoSync = this.options.autoSync;\n               this.options.autoSync = false;\n\n               try {\n                   for (var i = 0; i < items.length; i ++) {\n                       var item = items[i];\n\n                       this._eachItem(this._data, function(dataItems) {\n                           for (var idx = 0; idx < dataItems.length; idx++) {\n                               var dataItem = dataItems.at(idx);\n                               if (dataItem.uid === item.uid) {\n                                   moved.push(dataItem);\n                                   dataItems.splice(index >= idx ? --index : index, 0, dataItems.splice(idx, 1)[0]);\n                                   index++;\n                                   break;\n                               }\n                           }\n                       });\n                   }\n               } finally {\n                   this.options.autoSync = autoSync;\n               }\n\n               return moved;\n           },\n\n           remove: function(model) {\n               var result,\n                   that = this,\n                   hasGroups = that._isServerGrouped();\n\n               if (hasGroups && model.uid && (!model.isNew || !model.isNew())) {\n                   that._pushInDestroyed(model);\n               }\n\n               this._eachItem(that._data, function(items) {\n                   result = removeModel(items, model);\n\n                   if (result && hasGroups) {\n                       return true;\n                   }\n               });\n\n               this._removeModelFromRanges(model);\n\n               return model;\n           },\n\n           destroyed: function() {\n               return this._destroyed;\n           },\n\n           created: function() {\n               var idx,\n                   length,\n                   result = [],\n                   data = this._flatData(this._data, this.options.useRanges);\n\n               for (idx = 0, length = data.length; idx < length; idx++) {\n                   if (data[idx].isNew && data[idx].isNew() && !data[idx].notFetched) {\n                       result.push(data[idx]);\n                   }\n               }\n               return result;\n           },\n\n           updated: function() {\n               var idx,\n                   length,\n                   result = [],\n                   data = this._flatData(this._data, this.options.useRanges);\n\n               for (idx = 0, length = data.length; idx < length; idx++) {\n                   if ((data[idx].isNew && !data[idx].isNew()) && data[idx].dirty) {\n                       result.push(data[idx]);\n                   }\n               }\n               return result;\n           },\n\n           sync: function() {\n               var that = this,\n                   created = [],\n                   updated = [],\n                   destroyed = that._destroyed;\n\n               var promise = $.Deferred().resolve().promise();\n\n               if (that.online()) {\n\n                   if (!that.reader.model) {\n                       return promise;\n                   }\n\n                   created = that.created();\n                   updated = that.updated();\n\n                   var promises = [];\n\n                   if (that.options.batch && that.transport.submit) {\n                       promises = that._sendSubmit(created, updated, destroyed);\n                   } else {\n                       promises.push.apply(promises, that._send(\"create\", created));\n                       promises.push.apply(promises, that._send(\"update\", updated));\n                       promises.push.apply(promises, that._send(\"destroy\", destroyed));\n                   }\n\n                   promise = $.when\n                    .apply(null, promises)\n                    .then(function() {\n                       var idx, length, changedItems = [];\n\n                       for (idx = 0, length = arguments.length; idx < length; idx++) {\n                           if (arguments[idx]) {\n                               that._accept(arguments[idx]);\n                               changedItems.push(...arguments[idx].models);\n                           }\n                       }\n\n                       that._storeData(true);\n\n                       that._syncEnd();\n\n                       that._change({ action: \"sync\", changedItems: changedItems });\n\n                       that.trigger(SYNC);\n\n                       if (that._isServerGroupPaged()) {\n                           that.read();\n                       }\n                   });\n               } else {\n                   that._storeData(true);\n\n                   that._syncEnd();\n\n                   that._change({ action: \"sync\" });\n               }\n\n               return promise;\n           },\n\n           _syncEnd: noop,\n\n           cancelChanges: function(model) {\n               var that = this;\n\n               if (model instanceof kendo.data.Model) {\n                   that._cancelModel(model);\n               } else {\n                   that._destroyed = [];\n                   that._detachObservableParents();\n                   that._data = that._observe(that._pristineData);\n                   if (that.options.serverPaging) {\n                       that._total = that._pristineTotal;\n                   }\n\n                   that._ranges = [];\n                   that._addRange(that._data, 0);\n\n                   that._changesCanceled();\n\n                   that._change();\n\n                   that._markOfflineUpdatesAsDirty();\n\n                   if (that._isServerGrouped()) {\n                       that.read();\n                   }\n               }\n           },\n\n           _changesCanceled: noop,\n\n           _markOfflineUpdatesAsDirty: function() {\n               var that = this;\n\n               if (that.options.offlineStorage != null) {\n                   that._eachItem(that._data, function(items) {\n                       for (var idx = 0; idx < items.length; idx++) {\n                           var item = items.at(idx);\n                           if (item.__state__ == \"update\" || item.__state__ == \"create\") {\n                               item.dirty = true;\n                           }\n                       }\n                   });\n               }\n           },\n\n           hasChanges: function() {\n               var idx,\n                   length,\n                   data = this._flatData(this._data, this.options.useRanges);\n\n               if (this._destroyed.length) {\n                   return true;\n               }\n\n               for (idx = 0, length = data.length; idx < length; idx++) {\n                   if ((data[idx].isNew && data[idx].isNew()) || data[idx].dirty) {\n                       return true;\n                   }\n               }\n\n               return false;\n           },\n\n           _accept: function(result) {\n               var that = this,\n                   models = result.models,\n                   response = result.response,\n                   idx = 0,\n                   serverGroup = that._isServerGrouped(),\n                   pristine = that._pristineData,\n                   type = result.type,\n                   length;\n\n               that.trigger(REQUESTEND, { response: response, type: type });\n\n               if (response && !isEmptyObject(response)) {\n                   response = that.reader.parse(response);\n\n                   if (that._handleCustomErrors(response)) {\n                       return;\n                   }\n\n                   response = that.reader.data(response);\n\n                   if (!isArray(response)) {\n                       response = [response];\n                   }\n               } else {\n                   response = $.map(models, function(model) { return model.toJSON(); } );\n               }\n\n               if (type === \"destroy\") {\n                   that._destroyed = [];\n               }\n\n               for (idx = 0, length = models.length; idx < length; idx++) {\n                   if (type !== \"destroy\") {\n                       models[idx].accept(response[idx]);\n\n                       if (type === \"create\") {\n                           pristine.push(serverGroup ? that._wrapInEmptyGroup(models[idx].toJSON()) : response[idx]);\n                       } else if (type === \"update\") {\n                           that._updatePristineForModel(models[idx], response[idx]);\n                       }\n                   } else {\n                       that._removePristineForModel(models[idx]);\n                   }\n               }\n           },\n\n           _updatePristineForModel: function(model, values) {\n               this._executeOnPristineForModel(model, function(index, items) {\n                   kendo.deepExtend(items[index], values);\n               });\n           },\n\n           _executeOnPristineForModel: function(model, callback) {\n               this._eachPristineItem(\n                   function(items) {\n                       var index = indexOfPristineModel(items, model);\n                       if (index > -1) {\n                           callback(index, items);\n                           return true;\n                       }\n                   });\n           },\n\n           _removePristineForModel: function(model) {\n               this._executeOnPristineForModel(model, function(index, items) {\n                   items.splice(index, 1);\n               });\n           },\n\n           _readData: function(data) {\n               var read = !this._isServerGrouped() ? this.reader.data : this.reader.groups;\n               return read.call(this.reader, data);\n           },\n\n           _eachPristineItem: function(callback) {\n               var that = this;\n               var options = that.options;\n               var rangeSpan = that._getCurrentRangeSpan();\n\n               that._eachItem(that._pristineData, callback);\n\n               if (options.serverPaging && options.useRanges) {\n                   each(rangeSpan, function(i, range) {\n                       that._eachItem(range.pristineData, callback);\n                   });\n               }\n           },\n\n          _eachItem: function(data, callback) {\n               if (data && data.length) {\n                   if (this._isServerGrouped()) {\n                       eachGroupItems(data, callback);\n                   } else {\n                       callback(data);\n                   }\n               }\n           },\n\n           _pristineForModel: function(model) {\n               var pristine,\n                   idx,\n                   callback = function(items) {\n                       idx = indexOfPristineModel(items, model);\n                       if (idx > -1) {\n                           pristine = items[idx];\n                           return true;\n                       }\n                   };\n\n               this._eachPristineItem(callback);\n\n               return pristine;\n           },\n\n           _cancelModel: function(model) {\n               var that = this;\n               var pristine = this._pristineForModel(model);\n\n               this._eachItem(this._data, function(items) {\n                   var idx = indexOfModel(items, model);\n                   if (idx >= 0) {\n                       if (pristine && (!model.isNew() || pristine.__state__)) {\n                           items[idx].accept(pristine);\n\n                           if (pristine.__state__ == \"update\") {\n                               items[idx].dirty = true;\n                           }\n\n                       } else {\n                           that._modelCanceled(model);\n\n                           items.splice(idx, 1);\n\n                           that._removeModelFromRanges(model);\n                       }\n                   }\n               });\n           },\n\n           _modelCanceled: noop,\n\n           _submit: function(promises, data) {\n               var that = this;\n\n               that.trigger(REQUESTSTART, { type: \"submit\" });\n\n               that.trigger(PROGRESS);\n\n               that.transport.submit(extend({\n                   success: function(response, type) {\n                       var promise = $.grep(promises, function(x) {\n                           return x.type == type;\n                       })[0];\n\n                       if (promise) {\n                           promise.resolve({\n                               response: response,\n                               models: promise.models,\n                               type: type\n                           });\n                       }\n                   },\n                   error: function(response, status, error) {\n                       for (var idx = 0; idx < promises.length; idx++) {\n                           promises[idx].reject(response);\n                       }\n\n                       that.error(response, status, error);\n                   }\n               }, data));\n           },\n\n           _sendSubmit: function(created, updated, destroyed) {\n               var that = this,\n                   promises = [];\n\n               if (that.options.batch) {\n                   if (created.length) {\n                       promises.push($.Deferred(function(deferred) {\n                           deferred.type = \"create\";\n                           deferred.models = created;\n                       }));\n                   }\n\n                   if (updated.length) {\n                       promises.push($.Deferred(function(deferred) {\n                           deferred.type = \"update\";\n                           deferred.models = updated;\n                       }));\n                   }\n\n                   if (destroyed.length) {\n                       promises.push($.Deferred(function(deferred) {\n                           deferred.type = \"destroy\";\n                           deferred.models = destroyed;\n                       }));\n                   }\n\n                   that._submit(promises, {\n                       data: {\n                           created: that.reader.serialize(toJSON(created)),\n                           updated: that.reader.serialize(toJSON(updated)),\n                           destroyed: that.reader.serialize(toJSON(destroyed))\n                       }\n                   });\n               }\n\n               return promises;\n           },\n\n           _promise: function(data, models, type) {\n               var that = this;\n\n               return $.Deferred(function(deferred) {\n                   that.trigger(REQUESTSTART, { type: type });\n\n                   that.trigger(PROGRESS);\n\n                   that.transport[type].call(that.transport, extend({\n                       success: function(response) {\n                           deferred.resolve({\n                               response: response,\n                               models: models,\n                               type: type\n                           });\n                       },\n                       error: function(response, status, error) {\n                           deferred.reject(response);\n                           that.error(response, status, error);\n                       }\n                   }, data));\n               }).promise();\n           },\n\n           _send: function(method, data) {\n               var that = this,\n                   idx,\n                   length,\n                   promises = [],\n                   converted = that.reader.serialize(toJSON(data));\n\n               if (that.options.batch) {\n                   if (data.length) {\n                       promises.push(that._promise( { data: { models: converted } }, data , method));\n                   }\n               } else {\n                   for (idx = 0, length = data.length; idx < length; idx++) {\n                       promises.push(that._promise( { data: converted[idx] }, [ data[idx] ], method));\n                   }\n               }\n\n               return promises;\n           },\n\n           read: function(data) {\n               var that = this, params = that._params(data);\n               var deferred = $.Deferred();\n\n               that._queueRequest(params, function() {\n                   var isPrevented = that.trigger(REQUESTSTART, { type: \"read\" });\n                   if (!isPrevented) {\n                       that.trigger(PROGRESS);\n\n                       that._ranges = [];\n                       that.trigger(\"reset\");\n                       if (that.online()) {\n                           that.transport.read({\n                               data: params,\n                               success: function(data) {\n                                   that._ranges = [];\n                                   that.success(data, params);\n\n                                   deferred.resolve();\n                               },\n                               error: function() {\n                                   var args = slice.call(arguments);\n\n                                   that.error.apply(that, args);\n\n                                   deferred.reject.apply(deferred, args);\n                               }\n                           });\n                       } else if (that.options.offlineStorage != null) {\n                           that.success(that.offlineData(), params);\n\n                           deferred.resolve();\n                       }\n                   } else {\n                       that._dequeueRequest();\n\n                       deferred.resolve(isPrevented);\n                   }\n               });\n\n               return deferred.promise();\n           },\n\n           _readAggregates: function(data) {\n               return this.reader.aggregates(data);\n           },\n\n           success: function(data) {\n               var that = this,\n                   options = that.options,\n                   items,\n                   replaceSubset;\n\n               that.trigger(REQUESTEND, { response: data, type: \"read\" });\n\n               if (that.online()) {\n                   data = that.reader.parse(data);\n\n                   if (that._handleCustomErrors(data)) {\n                       that._dequeueRequest();\n                       return;\n                   }\n\n                   that._total = that.reader.total(data);\n\n                   if (that._isServerGroupPaged()) {\n                       that._serverGroupsTotal = that._total;\n                   }\n\n                   if (that._pageSize > that._total) {\n                       that._pageSize = that._total;\n                       if (that.options.pageSize && that.options.pageSize > that._pageSize) {\n                           that._pageSize = that.options.pageSize;\n                       }\n                   }\n\n                   if (that._aggregate && options.serverAggregates) {\n                       that._aggregateResult = that._readAggregates(data);\n                   }\n\n                   data = that._readData(data);\n\n                   that._destroyed = [];\n               } else {\n                   data = that._readData(data);\n\n                   items = [];\n                   var itemIds = {};\n                   var model = that.reader.model;\n                   var idField = model ? model.idField : \"id\";\n                   var idx;\n\n                   for (idx = 0; idx < this._destroyed.length; idx++) {\n                       var id = this._destroyed[idx][idField];\n                       itemIds[id] = id;\n                   }\n\n                   for (idx = 0; idx < data.length; idx++) {\n                       var item = data[idx];\n                       var state = item.__state__;\n                       if (state == \"destroy\") {\n                           if (!itemIds[item[idField]]) {\n                               this._pushInDestroyed(this._createNewModel(item));\n                           }\n                       } else {\n                           items.push(item);\n                       }\n                   }\n\n                   data = items;\n\n                   that._total = data.length;\n               }\n\n               that._pristineTotal = that._total;\n               replaceSubset = that._skip && that._data.length && that._skip < that._data.length;\n\n               if (that.options.endless) {\n                   if (replaceSubset) {\n                       that._pristineData.splice(that._skip, that._pristineData.length);\n                   }\n                   items = data.slice(0);\n                   for (var j = 0; j < items.length; j++) {\n                       that._pristineData.push(items[j]);\n                   }\n               } else {\n                   that._pristineData = data.slice(0);\n               }\n\n               that._detachObservableParents();\n\n               if (that.options.endless) {\n                   that._data.unbind(CHANGE, that._changeHandler);\n\n                   if (that._isServerGrouped() && that._data[that._data.length - 1].value === data[0].value) {\n                       fillLastGroup(that._data[that._data.length - 1], data[0]);\n                       data.shift();\n                   }\n\n                   data = that._observe(data);\n                   if (replaceSubset) {\n                       that._data.splice(that._skip, that._data.length);\n                   }\n                   for (var i = 0; i < data.length; i++) {\n                       that._data.push(data[i]);\n                   }\n                   that._data.bind(CHANGE, that._changeHandler);\n               } else {\n                   that._data = that._observe(data);\n               }\n\n               that._markOfflineUpdatesAsDirty();\n\n               that._storeData();\n\n               that._addRange(that._data);\n\n               that._process(that._data);\n\n               that._dequeueRequest();\n           },\n\n           _detachObservableParents: function() {\n               if (this._data && this._shouldDetachObservableParents) {\n                   for (var idx = 0; idx < this._data.length; idx++) {\n                       if (this._data[idx].parent) {\n                           this._data[idx].parent = noop;\n                       }\n                   }\n               }\n           },\n\n           _storeData: function(updatePristine) {\n               var serverGrouping = this._isServerGrouped();\n               var model = this.reader.model;\n\n               function items(data) {\n                   var state = [];\n\n                   for (var idx = 0; idx < data.length; idx++) {\n                       var dataItem = data.at(idx);\n                       var item = dataItem.toJSON();\n\n                       if (serverGrouping && dataItem.items) {\n                           item.items = items(dataItem.items);\n                       } else {\n                           item.uid = dataItem.uid;\n\n                           if (model) {\n                               if (dataItem.isNew()) {\n                                   item.__state__ = \"create\";\n                               } else if (dataItem.dirty) {\n                                   item.__state__ = \"update\";\n                               }\n                           }\n                       }\n                       state.push(item);\n                   }\n\n                   return state;\n               }\n\n               if (this.options.offlineStorage != null) {\n                   var state = items(this._data);\n\n                   var destroyed = [];\n\n                   for (var idx = 0; idx < this._destroyed.length; idx++) {\n                       var item = this._destroyed[idx].toJSON();\n                       item.__state__ = \"destroy\";\n                       destroyed.push(item);\n                   }\n\n                   this.offlineData(state.concat(destroyed));\n\n                   if (updatePristine) {\n                       this._pristineData = this.reader.reader ? this.reader.reader._wrapDataAccessBase(state) : this.reader._wrapDataAccessBase(state);\n                   }\n               }\n           },\n\n           _addRange: function(data, skip) {\n               var that = this,\n                   start = typeof (skip) !== \"undefined\" ? skip : (that._skip || 0),\n                   end,\n                   range = {\n                       data: data,\n                       pristineData: data.toJSON(),\n                       timestamp: that._timeStamp()\n                   };\n\n               if (this._isGroupPaged()) {\n                   end = start + data.length;\n                   range.outerStart = start;\n                   range.outerEnd = end;\n               } else {\n                   end = start + that._flatData(data, true).length;\n               }\n\n               range.start = start;\n               range.end = end;\n               that._ranges.push(range);\n               that._sortRanges();\n\n               if (that._isGroupPaged()) {\n                   if (!that._groupsFlat) {\n                       that._groupsFlat = [];\n                   }\n                   that._appendToGroupsFlat(range.data);\n                   that._updateOuterRangesLength();\n               }\n           },\n\n           _appendToGroupsFlat: function(data) {\n               var length = data.length;\n\n               for (var i = 0; i < length; i++) {\n                   this._groupsFlat.push(data[i]);\n               }\n           },\n\n           _getGroupByUid: function(uid) {\n               var length = this._groupsFlat.length;\n               var group;\n\n               for (var i = 0; i < length; i++) {\n                   group = this._groupsFlat[i];\n                   if (group.uid === uid) {\n                       return group;\n                   }\n               }\n           },\n\n           _sortRanges: function() {\n               this._ranges.sort(function(x, y) {\n                   return x.start - y.start;\n               });\n           },\n\n           error: function(xhr, status, errorThrown) {\n               this._dequeueRequest();\n               this.trigger(REQUESTEND, { });\n               this.trigger(ERROR, { xhr: xhr, status: status, errorThrown: errorThrown });\n           },\n\n           _params: function(data) {\n               var that = this,\n                   options = extend({\n                       take: that.take(),\n                       skip: that.skip(),\n                       page: that.page(),\n                       pageSize: that.pageSize(),\n                       sort: that._sort,\n                       filter: that._filter,\n                       group: that._group,\n                       aggregate: that._aggregate,\n                       groupPaging: !!that._groupPaging,\n                       isExcelExportRequest: that.options.isExcelExportRequest\n                   }, data);\n\n               if (!that.options.serverPaging) {\n                   delete options.take;\n                   delete options.skip;\n                   delete options.page;\n                   delete options.pageSize;\n               }\n\n               if (!that.options.serverGrouping) {\n                   delete options.group;\n               } else if (that.reader.model && options.group) {\n                   options.group = convertDescriptorsField(options.group, that.reader.model);\n               }\n\n               if (!that.options.serverFiltering) {\n                   delete options.filter;\n               } else if (that.reader.model && options.filter) {\n                  options.filter = convertFilterDescriptorsField(options.filter, that.reader.model);\n               }\n\n               if (!that.options.serverSorting) {\n                   delete options.sort;\n               } else if (that.reader.model && options.sort) {\n                   options.sort = convertDescriptorsField(options.sort, that.reader.model);\n               }\n\n               if (!that.options.serverAggregates) {\n                   delete options.aggregate;\n               } else if (that.reader.model && options.aggregate) {\n                   options.aggregate = convertDescriptorsField(options.aggregate, that.reader.model);\n               }\n\n               if (!that.options.groupPaging || !(that.options.serverPaging && that.options.serverGrouping)) {\n                   delete options.groupPaging;\n               }\n\n               if (!that.options.isExcelExportRequest) {\n                   delete options.isExcelExportRequest;\n               }\n\n               return options;\n           },\n\n           _queueRequest: function(options, callback) {\n               var that = this;\n               if (!that._requestInProgress) {\n                   that._requestInProgress = true;\n                   that._pending = undefined$1;\n                   callback();\n               } else {\n                   that._pending = { callback: callback.bind(that), options: options };\n               }\n           },\n\n           _dequeueRequest: function() {\n               var that = this;\n               that._requestInProgress = false;\n               if (that._pending) {\n                   that._queueRequest(that._pending.options, that._pending.callback);\n               }\n           },\n\n           _handleCustomErrors: function(response) {\n               if (this.reader.errors) {\n                   var errors = this.reader.errors(response);\n                   if (errors) {\n                       this.trigger(ERROR, { xhr: null, status: \"customerror\", errorThrown: \"custom error\", errors: errors });\n                       return true;\n                   }\n               }\n               return false;\n           },\n\n           _shouldWrap: function(data) {\n               var model = this.reader.model;\n\n               if (model && data.length) {\n                   return !(data[0] instanceof model);\n               }\n\n               return false;\n           },\n\n           _observe: function(data) {\n               var that = this,\n                   model = that.reader.model;\n\n               that._shouldDetachObservableParents = true;\n\n               if (data instanceof ObservableArray) {\n                   that._shouldDetachObservableParents = false;\n                   if (that._shouldWrap(data)) {\n                       data.type = that.reader.model;\n                       data.wrapAll(data, data);\n                   }\n               } else {\n                   var arrayType = that.pageSize() && !that.options.serverPaging ? LazyObservableArray : ObservableArray;\n                   data = new arrayType(data, that.reader.model);\n                   data.parent = function() { return that.parent(); };\n               }\n\n               if (that._isServerGrouped()) {\n                   wrapGroupItems(data, model);\n               }\n\n               if (that._changeHandler && that._data && that._data instanceof ObservableArray &&\n                   !(that.options.useRanges && that.options.serverPaging)) {\n                   that._data.unbind(CHANGE, that._changeHandler);\n               } else {\n                   that._changeHandler = that._change.bind(that);\n               }\n\n               return data.bind(CHANGE, that._changeHandler);\n           },\n\n           _updateTotalForAction: function(action, items) {\n               var that = this;\n\n               var total = parseInt(that._total, 10);\n\n               if (!isNumber(that._total)) {\n                   total = parseInt(that._pristineTotal, 10);\n               }\n               if (action === \"add\") {\n                   total += items.length;\n               } else if (action === \"remove\") {\n                   total -= items.length;\n               } else if (action !== \"itemchange\" && action !== \"sync\" && !that.options.serverPaging) {\n                   total = that._pristineTotal;\n               } else if (action === \"sync\") {\n                   total = that._pristineTotal = parseInt(that._total, 10);\n               }\n\n               that._total = total;\n           },\n\n           _operationsForUpdatedFields: function() {\n               const that = this,\n                   updatedFields = that._updatedFields || [],\n                   operations = {};\n\n               let found = false,\n                   stringified;\n\n               operations.sort = that._sort;\n               operations.filter = that._filter;\n               operations.group = that._group;\n               operations.aggregate = that._aggregate;\n\n               stringified = stringify(operations);\n               found = updatedFields.some(u => stringified.indexOf((`\"field\":\"${u}\"`)) > -1);\n\n               return !found;\n           },\n\n           _pushInDestroyed: function(model) {\n               var isPushed = this._destroyed.find(function(item) {\n                   return item.uid === model.uid;\n               });\n               if (!isPushed) {\n                   this._destroyed.push(model);\n               }\n           },\n\n           _change: function(e) {\n               let that = this, idx, items, length, action = e ? e.action : \"\";\n\n               if (action === \"remove\") {\n                   for (idx = 0, length = e.items.length; idx < length; idx++) {\n                       if (!e.items[idx].isNew || !e.items[idx].isNew()) {\n                           that._pushInDestroyed(e.items[idx]);\n                       }\n                   }\n               }\n\n               if (e) {\n                   items = e.items || [];\n                   e.partialUpdate = that._operationsForUpdatedFields() && !that._preventPartialUpdate;\n\n                   if (e.action === \"itemchange\" && items.some(i => i.dirtyFields)) {\n                       let item = e.items[0],\n                           keys = Object.keys(item.dirtyFields),\n                           result = keys;\n\n                       for (const key of keys) {\n                           if (item[key] instanceof Object) {\n                               let stringifiedKey = kendo.stringify(item[key]);\n\n                               if (stringifiedKey) {\n                                   let cleanObject = JSON.parse(stringifiedKey),\n                                   cleanObjectKeys = Object.keys(cleanObject).map((k) => key + \".\" + k);\n\n                                   result.push(...cleanObjectKeys);\n                               }\n                           }\n                       }\n\n                       that._updatedFields = result;\n                   }\n               }\n\n               if (that.options.autoSync && (action === \"add\" || action === \"remove\" || action === \"itemchange\")) {\n                   if (action === \"add\") {\n                       that._preventPartialUpdate = true;\n                   }\n\n                   var handler = function(args) {\n                       if (args.action === \"sync\") {\n                           that._preventPartialUpdate = false;\n                           that.unbind(\"change\", handler);\n                           that._updateTotalForAction(action, e.items);\n                       }\n                   };\n\n                   that.first(\"change\", handler);\n\n                   that.sync();\n\n               } else {\n                   that._updateTotalForAction(action, e ? e.items : []);\n\n                   that._process(that._data, e);\n               }\n           },\n\n           _calculateAggregates: function(data, options) {\n               options = options || {};\n\n               var query = new Query(data),\n                   aggregates = options.aggregate,\n                   filter = options.filter;\n\n               if (filter) {\n                   query = query.filter(filter);\n               }\n\n               return query.aggregate(aggregates);\n           },\n\n           _process: function(data, e) {\n               var that = this,\n                   options = {},\n                   result;\n\n               if (that.options.serverPaging !== true) {\n                   options.skip = that._skip;\n                   options.take = that._take || that._pageSize;\n\n                   if (options.skip === undefined$1 && that._page !== undefined$1 && that._pageSize !== undefined$1) {\n                       options.skip = (that._page - 1) * that._pageSize;\n                   }\n\n                   if (that.options.useRanges) {\n                       options.skip = that.currentRangeStart();\n                   }\n               }\n\n               if (that.options.serverSorting !== true) {\n                   options.sort = that._sort;\n               }\n\n               if (that.options.serverFiltering !== true) {\n                   options.filter = that._filter;\n               }\n\n               if (that.options.serverGrouping !== true) {\n                   options.group = that._group;\n               }\n\n               if (that.options.serverAggregates !== true) {\n                   options.aggregate = that._aggregate;\n               }\n\n               if (that.options.serverGrouping) {\n                   that._clearEmptyGroups(data);\n               }\n\n               options.groupPaging = that._groupPaging;\n\n               if (that._isGroupPaged() && e && (e.action === \"page\" || e.action === \"expandGroup\" || e.action === \"collapseGroup\")) {\n                   result = that._queryProcess(data, {\n                       aggregate: that._aggregate\n                   });\n               } else {\n                   result = that._queryProcess(data, options);\n               }\n\n               if (that._filter && e && e.action === \"add\") {\n                   var model = e.items[0],\n                       resultData = result.data;\n\n                   if (that._isGrouped() && !this._isServerGrouped()) {\n                       resultData = flattenGroups(resultData);\n                   }\n\n                   var modelIsInView = resultData.find(function(item) {\n                       return item.uid === model.uid;\n                   });\n\n                   if (!modelIsInView) {\n                       result.data.splice(model.index, 0, that._isGrouped() ? that._wrapInEmptyGroup(model) : model);\n                       result.total++;\n                   }\n               }\n\n               if (that.options.serverAggregates !== true) {\n                   // for performance reasons, calculate aggregates for part of the data only after query process\n                   // this is necessary in the TreeList when paging\n                   that._aggregateResult = that._calculateAggregates(result.dataToAggregate || data, options);\n               }\n\n               that._setView(result, options, e);\n\n               that._setFilterTotal(result.total, false);\n\n               e = e || {};\n\n               e.items = e.items || that._view;\n\n               that.trigger(CHANGE, e);\n           },\n\n           _setView: function(result, options, e) {\n               var that = this;\n\n               if (that._isGroupPaged() && !that._isServerGrouped()) {\n                   if (e && (e.action === \"page\" || e.action === \"expandGroup\" || e.action === \"collapseGroup\")) {\n                       that.view(result.data);\n                       that._updateOuterRangesLength();\n                   } else {\n                       that._ranges = [];\n                       var query = new Query(result.data);\n                       that._addRange(that._observe(result.data));\n\n                       if (options.skip + options.take > result.data.length) {\n                           options.skip = Math.max(0, result.data.length - options.take);\n                       }\n\n                       that.view(query.range(options.skip, options.take).toArray());\n                   }\n\n               } else {\n                   that.view(result.data);\n               }\n           },\n\n           _clearEmptyGroups: function(data) {\n               for (var idx = data.length - 1; idx >= 0; idx--) {\n                   var group = data[idx];\n                   if (group.hasSubgroups) {\n                       this._clearEmptyGroups(group.items);\n                   }\n\n                   if (group.items && !group.items.length && !group.itemCount) {\n                       splice.apply(group.parent(), [idx, 1]);\n                   }\n               }\n           },\n\n           _queryProcess: function(data, options) {\n               if (this.options.inPlaceSort) {\n                   return Query.process(data, options, this.options.inPlaceSort);\n               }\n               else {\n                   return Query.process(data, options);\n               }\n           },\n\n           _mergeState: function(options) {\n               var that = this;\n\n               if (options !== undefined$1) {\n                   that._pageSize = options.pageSize;\n                   that._page = options.page;\n                   that._sort = options.sort;\n                   that._filter = options.filter;\n                   that._group = options.group;\n                   that._aggregate = options.aggregate;\n                   that._skip = that._currentRangeStart = options.skip;\n                   that._take = options.take;\n\n                   if (that._skip === undefined$1) {\n                       that._skip = that._currentRangeStart = that.skip();\n                       options.skip = that.skip();\n                   }\n\n                   if (that._take === undefined$1 && that._pageSize !== undefined$1) {\n                       that._take = that._pageSize;\n                       options.take = that._take;\n                   }\n\n                   if (that.options.virtual) {\n                       options.virtual = that.options.virtual;\n                   }\n\n                   if (options.sort) {\n                       that._sort = options.sort = normalizeSort(options.sort);\n                       that._sortFields = sortFields(options.sort);\n                   }\n\n                   if (options.filter) {\n                       that._filter = options.filter = (that.options.accentFoldingFiltering && !$.isEmptyObject(options.filter)) ? $.extend({}, normalizeFilter(options.filter), { accentFoldingFiltering: that.options.accentFoldingFiltering }) : normalizeFilter(options.filter);\n                   }\n\n                   if (options.group) {\n                       that._group = options.group = normalizeGroup(options.group);\n                   }\n                   if (options.aggregate) {\n                       that._aggregate = options.aggregate = normalizeAggregate(options.aggregate);\n                   }\n               }\n               return options;\n           },\n\n           query: function(options) {\n               var result;\n               var remote = this.options.serverSorting || this.options.serverPaging || this.options.serverFiltering || this.options.serverGrouping || this.options.serverAggregates;\n\n               if (remote || ((this._data === undefined$1 || this._data.length === 0) && !this._destroyed.length)) {\n                   if (this.options.endless) {\n                       var moreItemsCount = options.pageSize - this.pageSize();\n                       if (moreItemsCount > 0) {\n                           moreItemsCount = this.pageSize();\n                           options.page = options.pageSize / moreItemsCount;\n                           options.pageSize = moreItemsCount;\n                       } else {\n                           options.page = 1;\n                           this.options.endless = false;\n                       }\n                   }\n                   return this.read(this._mergeState(options));\n               }\n\n               var isPrevented = this.trigger(REQUESTSTART, { type: \"read\" });\n               if (!isPrevented) {\n                   this.trigger(PROGRESS);\n                   if (options) {\n                       options.groupPaging = this._groupPaging;\n                   }\n                   result = this._queryProcess(this._data, this._mergeState(options));\n\n                   this._setFilterTotal(result.total, true);\n\n                   this._aggregateResult = this._calculateAggregates(result.dataToAggregate || this._data, options);\n                   this._setView(result, options);\n                   this.trigger(REQUESTEND, { type: \"read\" });\n                   this.trigger(CHANGE, { items: result.data, action: options ? options.action : \"\" });\n               }\n\n               return $.Deferred().resolve(isPrevented).promise();\n           },\n\n           _hasExpandedSubGroups: function(group) {\n               var result = false;\n               var length = group.items ? group.items.length : 0;\n\n               if (!group.hasSubgroups) {\n                   return false;\n               }\n\n               for (var i = 0; i < length; i++) {\n                   if (this._groupsState[group.items[i].uid]) {\n                       result = true;\n                       break;\n                   }\n               }\n               return result;\n           },\n\n           _findGroupedRange: function(data, result, options, parents, callback) {\n               var that = this;\n               var length = data.length;\n               var group;\n               var current;\n               var itemsLength;\n               var groupCount;\n               var itemsToSkip;\n\n               for (var i = 0; i < length; i++) {\n                   group = data[i];\n\n                   if (options.taken >= options.take) {\n                       break;\n                   }\n\n                   if (!that._getGroupByUid(group.uid)) {\n                       that._groupsFlat.push(group);\n                   }\n\n                   if (that._groupsState[group.uid]) {\n                       if (that._isServerGroupPaged()) {\n                          if (that._fetchGroupItems(group, options, parents, callback)) {\n                               that._fetchingGroupItems = true;\n                               return;\n                          }\n                          groupCount = (group.subgroupCount || group.itemCount) + 1;\n                          itemsToSkip = options.skip - options.skipped;\n                          if (!that._hasExpandedSubGroups(group) && itemsToSkip > groupCount) {\n                              options.skipped += groupCount;\n                              continue;\n                          }\n                       }\n\n                       if (options.includeParents && options.skipped < options.skip) {\n                           options.skipped++;\n                           group.excludeHeader = true;\n                       } else if (options.includeParents) {\n                           options.taken++;\n                           group.excludeHeader = false;\n                       }\n\n                       if (group.hasSubgroups && group.items && group.items.length) {\n                           group.currentItems = [];\n\n                           if (!parents) {\n                               parents = [];\n                           }\n                           parents.push(group);\n\n                           that._findGroupedRange(group.items, group.currentItems, options, parents, callback);\n                           parents.pop();\n\n                           if (group.currentItems.length || options.taken > 0) {\n                               result.push(group);\n                           } else {\n                               group.excludeHeader = false;\n                           }\n                       } else {\n                           current = [];\n                           itemsLength = group.items.length;\n\n                           for (var j = 0; j < itemsLength; j++) {\n                               if (options.skipped < options.skip) {\n                                   options.skipped++;\n                                   continue;\n                               }\n\n                               if (options.taken >= options.take) {\n                                   break;\n                               }\n                               current.push(group.items[j]);\n                               options.taken++;\n                           }\n\n                           if (current.length || options.taken > 0) {\n                               group.currentItems = current;\n                               result.push(group);\n                           } else {\n                               group.excludeHeader = false;\n                           }\n                       }\n                   } else {\n                       if (options.skipped < options.skip) {\n                           options.skipped++;\n                           continue;\n                       }\n                       result.push(group);\n                       options.taken++;\n                   }\n               }\n           },\n\n           _expandedSubGroupItemsCount: function(group, end, includeCurrentItems) {\n               var that = this;\n               var result = 0;\n               var subGroup;\n               var endSpecified = typeof end === \"number\";\n               var length = endSpecified ? end : group.subgroupCount;\n               var temp;\n\n               if (!group.hasSubgroups) {\n                   return result;\n               }\n\n               for (var i = 0; i < length; i++) {\n                   subGroup = group.items[i];\n\n                   if (!subGroup) {\n                       break;\n                   }\n\n                   if (subGroup.hasSubgroups && that._groupsState[group.uid]) {\n                       temp = that._expandedSubGroupItemsCount(subGroup, length, true);\n                       result += temp;\n\n                       if (endSpecified) {\n                           length -= temp;\n                       }\n                   } else if (!subGroup.hasSubgroups && that._groupsState[subGroup.uid]) {\n                       temp = subGroup.items ? subGroup.items.length : 0;\n                       result += temp;\n                       if (endSpecified) {\n                           length -= temp;\n                       }\n                   }\n\n                   if (includeCurrentItems) {\n                       result += 1;\n                       if (endSpecified) {\n                           length -= 1;\n                       }\n                   }\n\n                   if (endSpecified && result > length) {\n                       return result;\n                   }\n               }\n\n               return result;\n           },\n\n           _fetchGroupItems: function(group, options, parents, callback) {\n               let that = this;\n               let groupItemsSkip;\n               let firstItem;\n               let lastItem;\n               let groupItemCount = group.hasSubgroups ? group.subgroupCount : group.itemCount;\n               let take = options.take;\n               let skipped = options.skipped;\n               let pageSize = that.take();\n               let expandedSubGroupItemsCount;\n\n               if (options.includeParents) {\n                   if (skipped < options.skip) {\n                       skipped += 1;\n                   } else {\n                       take -= 1;\n                   }\n               }\n\n               if (!group.items || (group.items && !group.items.length)) {\n                   that.getGroupItems(group, options, parents, callback, 0);\n                   return true;\n               } else {\n                   expandedSubGroupItemsCount = this._expandedSubGroupItemsCount(group, options.skip - skipped);\n                   groupItemsSkip = Math.max(options.skip - (skipped + expandedSubGroupItemsCount), 0);\n\n                   if (groupItemsSkip >= groupItemCount) {\n                       return false;\n                   }\n\n                   let lastItemIndex = Math.min(groupItemsSkip + take, groupItemCount - 1);\n                   firstItem = group.items[groupItemsSkip];\n                   lastItem = group.items[lastItemIndex];\n\n                   if (firstItem.notFetched) {\n                       that.getGroupItems(group, options, parents, callback, groupItemsSkip, math.round((groupItemsSkip + pageSize) / pageSize));\n                       return true;\n                   }\n\n                   if (lastItem.notFetched) {\n                       that.getGroupItems(group, options, parents, callback, math.max(math.floor((groupItemsSkip + pageSize) / pageSize), 0) * pageSize, math.round((groupItemsSkip + pageSize) / pageSize));\n                       return true;\n                   }\n\n                   if (!firstItem.notFetched && !lastItem.notFetched && hasNotFetchedItems(group.items, groupItemsSkip, lastItemIndex)) {\n                       that.getGroupItems(group, options, parents, callback, groupItemsSkip, lastItemIndex);\n                       return true;\n                   }\n               }\n           },\n\n           getGroupItems: function(group, options, parents, callback, groupItemsSkip, page) {\n               var that = this;\n               var take;\n               var filter;\n               var data;\n               var subgroups;\n\n               if (!group.items) {\n                   group.items = [];\n               }\n\n               take = that.take();\n               filter = this._composeItemsFilter(group, parents);\n               data = {\n                   page: page || 1,\n                   pageSize: take,\n                   skip: groupItemsSkip,\n                   take: take,\n                   filter: filter,\n                   aggregate: that._aggregate,\n                   sort: that._sort\n               };\n               subgroups = that.findSubgroups(group);\n\n               if (subgroups && subgroups.length) {\n                   data.group = subgroups;\n               }\n\n               data.groupPaging = true;\n               that._queueWithTimeout(data, function() {\n                   if (!that.trigger(REQUESTSTART, {\n                           type: \"read\"\n                       })) {\n                       that.transport.read({\n                           data: data,\n                           success: that._groupItemsSuccessHandler(group, options.skip, that.take(), callback, groupItemsSkip),\n                           error: function() {\n                               var args = slice.call(arguments);\n                               that.error.apply(that, args);\n                           }\n                       });\n                   } else {\n                       that._dequeueRequest();\n                   }\n               }, 100);\n           },\n\n           _queueWithTimeout: function(options, callback, delay) {\n               let that = this;\n\n               clearTimeout(that._timeout);\n               that._timeout = setTimeout(function() {\n                   that._queueRequest(options, callback);\n               }, delay);\n           },\n\n           _groupItemsSuccessHandler: function(group, skip, take, callback, groupItemsSkip) {\n               var that = this;\n               var timestamp = that._timeStamp();\n               callback = isFunction(callback) ? callback : noop;\n               var totalField = that.options.schema && that.options.schema.total ? that.options.schema.total : \"Total\";\n\n               return function(data) {\n                   var temp;\n                   var model = Model.define(that.options.schema.model);\n                   var totalCount;\n\n                   that._dequeueRequest();\n\n                   that.trigger(REQUESTEND, {\n                       response: data,\n                       type: \"read\"\n                   });\n\n                   if (isFunction(totalField)) {\n                       totalCount = totalField(data);\n                   } else {\n                       totalCount = data[totalField];\n                   }\n\n                   data = that.reader.parse(data);\n\n                   if (group.hasSubgroups) {\n                       temp = that.reader.groups(data);\n                       group.subgroupCount = totalCount;\n                   } else {\n                       temp = that.reader.data(data);\n                       temp = temp.map(function(item) {\n                           return new model(item);\n                       });\n                   }\n\n                   group.items.omitChangeEvent = true;\n                   for (var i = 0; i < totalCount; i++) {\n                       if (i >= groupItemsSkip && i < (groupItemsSkip + take) ) {\n                           group.items.splice(i, 1, temp[i - groupItemsSkip]);\n                       } else {\n                           if (!group.items[i]) {\n                               group.items.splice(i, 0, { notFetched: true });\n                           }\n                       }\n                   }\n                   group.items.omitChangeEvent = false;\n\n                   that._updateRangePristineData(group);\n                   that._fetchingGroupItems = false;\n\n                   if (!group.countAdded) {\n                       that._serverGroupsTotal += totalCount;\n                       group.countAdded = true;\n                   }\n\n                   that.range(skip, take, callback, \"expandGroup\");\n\n                   if (timestamp >= that._currentRequestTimeStamp || !that._skipRequestsInProgress) {\n                       that.trigger(CHANGE, {});\n                   }\n               };\n           },\n\n           findSubgroups: function(group) {\n               var indexOfCurrentGroup = this._group.map(function(g) {\n                   return g.field;\n               }).indexOf(group.field);\n\n               return this._group.slice(indexOfCurrentGroup + 1, this._group.length);\n           },\n\n           _composeItemsFilter: function(group, parents) {\n               var filter = {\n                   logic: \"and\",\n                   filters: []\n               };\n\n               if (this.filter()) {\n                   filter.filters.push(this.filter());\n               }\n\n               filter = extend(true, {}, filter);\n               filter.filters.push({\n                   field: group.field,\n                   operator: \"eq\",\n                   value: group.value\n               });\n\n               if (parents) {\n                   for (var i = 0; i < parents.length; i++) {\n                       filter.filters.push({\n                           field: parents[i].field,\n                           operator: \"eq\",\n                           value: parents[i].value\n                       });\n                   }\n               }\n\n               return filter;\n           },\n\n           _updateRangePristineData: function(group) {\n               var that = this;\n               var ranges = that._ranges;\n               var rangesLength = ranges.length;\n               var temp;\n               var currentGroup;\n               var range;\n               var dataLength;\n               var indexes;\n               var currIdx;\n\n               for (var i = 0; i < rangesLength; i++) {\n                   range = ranges[i];\n                   dataLength = range.data.length;\n                   indexes = [];\n                   temp = null;\n\n                   for (var j = 0; j < dataLength; j++) {\n                       currentGroup = range.data[j];\n                       indexes.push(j);\n\n                       if ((currentGroup.uid === group.uid) || (currentGroup.hasSubgroups && currentGroup.items.length && that._containsSubGroup(currentGroup, group, indexes))) {\n                           break;\n                       }\n                       indexes.pop();\n                   }\n\n                   if (indexes.length) {\n                       temp = ranges[i].pristineData;\n\n                       while (indexes.length > 1) {\n                           currIdx = indexes.splice(0, 1)[0];\n                           temp = temp[currIdx].items;\n                       }\n                       temp[indexes[0]] = that._cloneGroup(group);\n                       break;\n                   }\n               }\n           },\n\n           _containsSubGroup: function(group, subgroup, indexes) {\n               var that = this;\n               var length = group.items.length;\n               var currentSubGroup;\n\n               if (group.hasSubgroups && length) {\n                   for (var i = 0; i < length; i++) {\n                       currentSubGroup = group.items[i];\n                       indexes.push(i);\n                       if (currentSubGroup.uid === subgroup.uid ||\n                               (currentSubGroup.hasSubgroups &&\n                               currentSubGroup.items.length &&\n                               that._containsSubGroup(currentSubGroup, subgroup, indexes))) {\n                           return true;\n                       }\n                       indexes.pop();\n                   }\n               }\n\n           },\n\n           _cloneGroup: function(group) {\n               var that = this;\n               group = typeof group.toJSON == \"function\" ? group.toJSON() : group;\n\n               if (group.items && group.items.length) {\n                   group.items = group.items.map(function(item) {\n                       return that._cloneGroup(item);\n                   });\n               }\n\n               return group;\n           },\n\n           _setFilterTotal: function(filterTotal, setDefaultValue) {\n               var that = this;\n\n               if (!that.options.serverFiltering) {\n                   if (filterTotal !== undefined$1) {\n                       that._total = filterTotal;\n                   } else if (setDefaultValue) {\n                       that._total = that._data.length;\n                   }\n               }\n           },\n\n           fetch: function(callback) {\n               var that = this;\n               var fn = function(isPrevented) {\n                   if (isPrevented !== true && isFunction(callback)) {\n                       callback.call(that);\n                   }\n               };\n\n               return this._query().done(fn);\n           },\n\n           _query: function(options) {\n               var that = this;\n\n               return that.query(extend({}, {\n                   page: that.page(),\n                   pageSize: that.pageSize(),\n                   sort: that.sort(),\n                   filter: that.filter(),\n                   group: that.group(),\n                   aggregate: that.aggregate()\n               }, options));\n           },\n\n           next: function(options) {\n               var that = this,\n                   page = that.page(),\n                   total = that.total();\n\n               options = options || {};\n\n               if (!page || (total && page + 1 > that.totalPages())) {\n                   return;\n               }\n\n               that._skip = that._currentRangeStart = page * that.take();\n\n               page += 1;\n               options.page = page;\n\n               that._query(options);\n\n               return page;\n           },\n\n           prev: function(options) {\n               var that = this,\n                   page = that.page();\n\n               options = options || {};\n\n               if (!page || page === 1) {\n                   return;\n               }\n\n               that._skip = that._currentRangeStart = that._skip - that.take();\n\n               page -= 1;\n               options.page = page;\n\n               that._query(options);\n\n               return page;\n           },\n\n           page: function(val) {\n               var that = this,\n               skip;\n\n               if (val !== undefined$1) {\n                   val = math.max(math.min(math.max(val, 1), that.totalPages()), 1);\n                   var take = that.take();\n\n                   if (that._isGroupPaged()) {\n                       val -= 1;\n                       that.range(val * take, take, null, \"page\");\n                       return;\n                   }\n                   that._query(that._pageableQueryOptions({ page: val }));\n                   return;\n               }\n               skip = that.skip();\n\n               return skip !== undefined$1 ? math.round((skip || 0) / (that.take() || 1)) + 1 : undefined$1;\n           },\n\n           pageSize: function(val) {\n               var that = this;\n\n               if (val !== undefined$1) {\n                   that._query(that._pageableQueryOptions({ pageSize: val, page: 1 }));\n                   return;\n               }\n\n               return that.take();\n           },\n\n           sort: function(val) {\n               var that = this;\n\n               if (val !== undefined$1) {\n                   that.trigger(\"sort\");\n                   that._query({ sort: val });\n                   return;\n               }\n\n               return that._sort;\n           },\n\n           filter: function(val) {\n               var that = this;\n\n               if (val === undefined$1) {\n                   return that._filter;\n               }\n\n               that.trigger(\"reset\");\n               that._query({ filter: val, page: 1 });\n           },\n\n           group: function(val) {\n               var that = this;\n               var options = { group: val };\n\n               if (that._groupPaging) {\n                   // clear ranges if ungrouping is performed\n                   if (val !== undefined$1 && (!val || !val.length) ) {\n                       that._ranges = [];\n                   }\n                   options.page = 1;\n               }\n\n               if (val !== undefined$1) {\n                   that._query(options);\n                   return;\n               }\n\n               return that._group;\n           },\n\n           getGroupsFlat: function(data) {\n               var idx,\n                   result = [],\n                   length;\n\n               for (idx = 0, length = data.length; idx < length; idx++) {\n                   var group = data[idx];\n                   if (group.hasSubgroups) {\n                       result = result.concat(this.getGroupsFlat(group.items));\n                   }\n\n                   result.push(group);\n               }\n\n               return result;\n           },\n\n           total: function() {\n               return parseInt(this._total || 0, 10);\n           },\n\n           groupsTotal: function(includeExpanded) {\n               var that = this;\n\n               if (!that._group.length) {\n                   return that.total();\n               }\n\n               if (that._isServerGrouped()) {\n                   if (that._serverGroupsTotal) {\n                       return that._serverGroupsTotal;\n                   }\n                   that._serverGroupsTotal = that.total();\n\n                   return that._serverGroupsTotal;\n               }\n\n               return that._calculateGroupsTotal(that._ranges.length ? that._ranges[0].data : [], includeExpanded);\n           },\n\n           _calculateGroupsTotal: function(groups, includeExpanded, itemsField, ignoreState) {\n               var that = this;\n               itemsField = itemsField || \"items\";\n               var total;\n               var length;\n\n               if (that._group.length && groups) {\n                   total = 0;\n                   length = groups.length;\n\n                   for (var i = 0; i < length; i++) {\n                       total += that.groupCount(groups[i], includeExpanded, itemsField, ignoreState);\n                   }\n                   that._groupsTotal = total;\n                   return total;\n               }\n\n               that._groupsTotal = that._data.length;\n               return that._groupsTotal;\n           },\n\n           groupCount: function(group, includeExpanded, itemsField, ignoreState) {\n               var that = this;\n               var total = 0;\n\n               if (group.hasSubgroups && that._groupsState[group.uid]) {\n                   if (includeExpanded && !group.excludeHeader || ignoreState) {\n                       total += 1;\n                   }\n\n                   group[itemsField].forEach(function(subgroup) {\n                       total += that.groupCount(subgroup, includeExpanded, itemsField, ignoreState);\n                   });\n               } else {\n                   if (that._groupsState[group.uid]) {\n                       if (includeExpanded && !group.excludeHeader || ignoreState) {\n                           total++;\n                       }\n                       total += group[itemsField] ? group[itemsField].length : 0;\n                   } else {\n                       total++;\n                   }\n               }\n               return total;\n           },\n\n           countGroupRange: function(range) {\n               var total = 0;\n               var length = range.length;\n\n               for (var i = 0; i < length; i++) {\n                   total += this.groupCount(range[i], true);\n               }\n\n               return total;\n           },\n\n           aggregate: function(val) {\n               var that = this;\n\n               if (val !== undefined$1) {\n                   that._query({ aggregate: val });\n                   return;\n               }\n\n               return that._aggregate;\n           },\n\n           aggregates: function() {\n               var result = this._aggregateResult;\n\n               if (isEmptyObject(result)) {\n                   result = this._emptyAggregates(this.aggregate());\n               }\n\n               return result;\n           },\n\n           _emptyAggregates: function(aggregates) {\n               var result = {};\n\n               if (!isEmptyObject(aggregates)) {\n                   var aggregate = {};\n\n                   if (!isArray(aggregates)) {\n                       aggregates = [aggregates];\n                   }\n\n                   for (var idx = 0; idx < aggregates.length; idx++) {\n                       aggregate[aggregates[idx].aggregate] = 0;\n                       result[aggregates[idx].field] = aggregate;\n                   }\n               }\n\n               return result;\n           },\n\n           _pageableQueryOptions: function(options) {\n               return options;\n           },\n\n           _wrapInEmptyGroup: function(model) {\n               var groups = this.group(),\n                   parent,\n                   group,\n                   idx,\n                   length;\n\n               for (idx = groups.length - 1, length = 0; idx >= length; idx--) {\n                   group = groups[idx];\n                   parent = {\n                       value: model.get ? model.get(group.field) : model[group.field],\n                       field: group.field,\n                       items: parent ? [parent] : [model],\n                       hasSubgroups: !!parent,\n                       aggregates: this._emptyAggregates(group.aggregates)\n                   };\n               }\n\n               return parent;\n           },\n\n           totalPages: function() {\n               var that = this,\n                   pageSize = that.pageSize() || that.total(),\n                   total = that._isGroupPaged() ? that.groupsTotal(true) : that.total();\n\n               return math.ceil((total || 0) / pageSize);\n           },\n\n           inRange: function(skip, take) {\n               var that = this,\n                   end = math.min(skip + take, that.total());\n\n               if (!that.options.serverPaging && that._data.length > 0) {\n                   return true;\n               }\n\n               return that._findRange(skip, end).length > 0;\n           },\n\n           lastRange: function() {\n               var ranges = this._ranges;\n               return ranges[ranges.length - 1] || { start: 0, end: 0, data: [] };\n           },\n\n           firstItemUid: function() {\n               var ranges = this._ranges;\n               return ranges.length && ranges[0].data.length && ranges[0].data[0].uid;\n           },\n\n           enableRequestsInProgress: function() {\n               this._skipRequestsInProgress = false;\n           },\n\n           _timeStamp: function() {\n               return new Date().getTime();\n           },\n\n           range: function(skip, take, callback, action) {\n               this._currentRequestTimeStamp = this._timeStamp();\n               this._skipRequestsInProgress = true;\n               var total = this._isGroupPaged() ? this.groupsTotal(true) : this.total();\n\n               if (action === \"expandGroup\" || action === \"collapseGroup\") {\n                   this._updateOuterRangesLength();\n               }\n\n               skip = math.min(skip || 0, total);\n               callback = isFunction(callback) ? callback : noop;\n\n               var that = this,\n                   pageSkip = math.max(math.floor(skip / take), 0) * take,\n                   size = math.min(pageSkip + take, total),\n                   data;\n\n               data = that._findRange(skip, math.min(skip + take, total), callback);\n\n               if ((data.length || total === 0) && !that._fetchingGroupItems) {\n                   that._processRangeData(data, skip, take, that._originalPageSkip || pageSkip, that._originalSize || size, {\n                       action: action\n                   });\n                   that._originalPageSkip = null;\n                   that._originalSize = null;\n                   callback();\n                   return;\n               }\n\n               if (that._isGroupPaged()) {\n                   that._originalPageSkip = pageSkip;\n                   that._originalSize = size;\n\n                   pageSkip = math.max(math.floor(that._adjustPageSkip(skip, take) / take), 0) * take;\n                   size = math.min(pageSkip + take, total);\n               }\n\n               if (take !== undefined$1 && !that._fetchingGroupItems) {\n                   if ((that._isGroupPaged() && !that._groupRangeExists(pageSkip, take)) || !that._rangeExists(pageSkip, size)) {\n                       that.prefetch(pageSkip, take, function() {\n                           if (skip > pageSkip && size < that.total() && !that._rangeExists(size, math.min(size + take, that.total()))) {\n                               that.prefetch(size, take, function() {\n                                   that.range(skip, take, callback );\n                               });\n                           } else {\n                               that.range(skip, take, callback);\n                           }\n                       });\n                   } else if (pageSkip < skip) {\n                       that.prefetch(size, take, function() {\n                           that.range(skip, take, callback );\n                       });\n                   }\n               }\n           },\n\n           _findRange: function(start, end, callback) {\n               var that = this,\n                   ranges = that._ranges,\n                   range,\n                   data = [],\n                   skipIdx,\n                   takeIdx,\n                   startIndex,\n                   endIndex,\n                   rangeData,\n                   rangeEnd,\n                   processed,\n                   options = that.options,\n                   remote = options.serverSorting || options.serverPaging || options.serverFiltering || options.serverGrouping || options.serverAggregates,\n                   flatData,\n                   count,\n                   length,\n                   groupMapOptions = {\n                           take: end - start,\n                           skip: start,\n                           skipped: 0,\n                           taken: 0,\n                           includeParents: true\n                       },\n                   prevRangeEnd,\n                   isGroupPaged = that._isGroupPaged(),\n                   startField = isGroupPaged ? \"outerStart\" : \"start\",\n                   endField = isGroupPaged ? \"outerEnd\" : \"end\",\n                   currentDataLength;\n\n               for (skipIdx = 0, length = ranges.length; skipIdx < length; skipIdx++) {\n                   range = ranges[skipIdx];\n\n                   if (isGroupPaged) {\n                       if (range.outerStart >= end) {\n                           return [];\n                       }\n\n                       if (start > range.outerEnd) {\n                           groupMapOptions.skipped += range.outerEnd - (prevRangeEnd || 0);\n                           prevRangeEnd = range.outerEnd;\n                           continue;\n                       }\n\n                       if (typeof prevRangeEnd !== \"undefined\" && prevRangeEnd != range.outerStart) {\n                           groupMapOptions.skipped += range.outerStart - prevRangeEnd;\n                       }\n\n                       if (groupMapOptions.skipped > groupMapOptions.skip) {\n                           return [];\n                       }\n\n                       if (typeof prevRangeEnd === \"undefined\" && start > 0 && range.start > 0) {\n                           groupMapOptions.skipped = range.outerStart;\n                       }\n\n                       takeIdx = skipIdx;\n                       while (true) {\n                           this._findGroupedRange(range.data, data, groupMapOptions, null, callback);\n                           currentDataLength = that._calculateGroupsTotal(data, true, \"currentItems\");\n\n                           if (currentDataLength >= groupMapOptions.take) {\n                               return data;\n                           }\n\n                           if (that._fetchingGroupItems) {\n                               return [];\n                           }\n                           takeIdx++;\n\n                           if (ranges[takeIdx] && ranges[takeIdx].outerStart === range.outerEnd) {\n                               range = ranges[takeIdx];\n                           } else {\n                               break;\n                           }\n                       }\n                   } else if (start >= range[startField] && start <= range[endField]) {\n                       count = 0;\n\n                       for (takeIdx = skipIdx; takeIdx < length; takeIdx++) {\n                           range = ranges[takeIdx];\n                           flatData = that._flatData(range.data, true);\n\n                           if (flatData.length && start + count >= range.start) {\n                               rangeData = range.data;\n                               rangeEnd = range.end;\n\n                               if (!remote) {\n                                   if (options.inPlaceSort) {\n                                       processed = that._queryProcess(range.data, { filter: that.filter() });\n                                   } else {\n                                       var sort = normalizeGroupWithoutCompare(that.group() || []).concat(normalizeSort(that.sort() || []));\n                                       processed = that._queryProcess(range.data, { sort: sort, filter: that.filter() });\n                                   }\n                                   flatData = rangeData = processed.data;\n\n                                   if (processed.total !== undefined$1) {\n                                       rangeEnd = processed.total;\n                                   }\n                               }\n\n                               startIndex = 0;\n                               if (start + count > range.start) {\n                                   startIndex = (start + count) - range.start;\n                               }\n                               endIndex = flatData.length;\n                               if (rangeEnd > end) {\n                                   endIndex = endIndex - (rangeEnd - end);\n                               }\n                               count += endIndex - startIndex;\n                               data = that._mergeGroups(data, rangeData, startIndex, endIndex);\n\n                               if (end <= range.end && count == end - start) {\n                                   return data;\n                               }\n                           }\n                       }\n                       break;\n                   }\n                   prevRangeEnd = range.outerEnd;\n               }\n               return [];\n           },\n\n           _getRangesMismatch: function(pageSkip) {\n               var that = this;\n               var ranges = that._ranges;\n               var mismatch = 0;\n               var i = 0;\n\n               while (true) {\n                   var range = ranges[i];\n                   if (!range || range.outerStart > pageSkip) {\n                       break;\n                   }\n\n                   if (range.outerEnd != range.end) {\n                       mismatch = range.outerEnd - range.end;\n                   }\n                   i++;\n               }\n\n               return mismatch;\n           },\n\n           _mergeGroups: function(data, range, skip, take) {\n               if (this._isServerGrouped()) {\n                   var temp = range.toJSON(),\n                       prevGroup;\n\n                   if (data.length) {\n                       prevGroup = data[data.length - 1];\n                   }\n\n                   mergeGroups(prevGroup, temp, skip, take);\n\n                   return data.concat(temp);\n               }\n               return data.concat(range.slice(skip, take));\n           },\n\n           _processRangeData: function(data, skip, take, pageSkip, size, eventData) {\n               var that = this;\n\n               that._pending = undefined$1;\n\n               that._skip = skip > that.skip() && !that._omitPrefetch ? math.min(size, (that.totalPages() - 1) * that.take()) : pageSkip;\n\n               that._currentRangeStart = skip;\n\n               that._take = take;\n\n               var paging = that.options.serverPaging;\n               var sorting = that.options.serverSorting;\n               var filtering = that.options.serverFiltering;\n               var aggregates = that.options.serverAggregates;\n               try {\n                   that.options.serverPaging = true;\n                   if (!that._isServerGrouped() && !(that.group() && that.group().length)) {\n                       that.options.serverSorting = true;\n                   }\n                   that.options.serverFiltering = true;\n                   that.options.serverPaging = true;\n                   that.options.serverAggregates = true;\n\n                   if (paging) {\n                       that._detachObservableParents();\n                       that._data = data = that._observe(data);\n                   }\n                   that._process(data, eventData);\n               } finally {\n                   that.options.serverPaging = paging;\n                   that.options.serverSorting = sorting;\n                   that.options.serverFiltering = filtering;\n                   that.options.serverAggregates = aggregates;\n               }\n           },\n\n           skip: function() {\n               var that = this;\n\n               if (that._skip === undefined$1) {\n                   return (that._page !== undefined$1 ? (that._page - 1) * (that.take() || 1) : undefined$1);\n               }\n               return that._skip;\n           },\n\n           currentRangeStart: function() {\n               return this._currentRangeStart || 0;\n           },\n\n           take: function() {\n               return this._take || this._pageSize;\n           },\n\n           _prefetchSuccessHandler: function(skip, size, callback, force) {\n               var that = this;\n               var timestamp = that._timeStamp();\n\n               return function(data) {\n                   var found = false,\n                       range = { start: skip, end: size, data: [], timestamp: that._timeStamp() },\n                       idx,\n                       length,\n                       temp;\n\n                   that._dequeueRequest();\n\n                   that.trigger(REQUESTEND, { response: data, type: \"read\" });\n\n                   data = that.reader.parse(data);\n\n                   temp = that._readData(data);\n\n                   if (temp.length) {\n                       for (idx = 0, length = that._ranges.length; idx < length; idx++) {\n                           if (that._ranges[idx].start === skip) {\n                               found = true;\n                               range = that._ranges[idx];\n\n                               if (!that._isGroupPaged()) {\n                                   range.pristineData = temp;\n                                   range.data = that._observe(temp);\n                                   range.end = range.start + that._flatData(range.data, true).length;\n                                   that._sortRanges();\n                               }\n\n                               break;\n                           }\n                       }\n\n                       if (!found) {\n                           that._addRange(that._observe(temp), skip);\n                       }\n                   }\n\n                   that._total = that.reader.total(data);\n\n                   if (force || (timestamp >= that._currentRequestTimeStamp || !that._skipRequestsInProgress)) {\n                       if (callback && temp.length) {\n                           callback();\n                       } else {\n                           that.trigger(CHANGE, {});\n                       }\n                   }\n               };\n           },\n\n           prefetch: function(skip, take, callback) {\n               var that = this,\n                   size = math.min(skip + take, that.total()),\n                   options = {\n                       take: take,\n                       skip: skip,\n                       page: skip / take + 1,\n                       pageSize: take,\n                       sort: that._sort,\n                       filter: that._filter,\n                       group: that._group,\n                       aggregate: that._aggregate\n                   };\n\n\n               if ((that._isGroupPaged() && !that._isServerGrouped() && that._groupRangeExists(skip, size))) {\n                   if (callback) {\n                       callback();\n                   }\n                   return;\n               }\n\n               if ((that._isServerGroupPaged() && !that._groupRangeExists(skip, size)) || !that._rangeExists(skip, size)) {\n                   that._queueWithTimeout(options, function() {\n                       if (!that.trigger(REQUESTSTART, { type: \"read\" })) {\n                           if (that._omitPrefetch) {\n                               that.trigger(PROGRESS);\n                           }\n                           that.transport.read({\n                               data: that._params(options),\n                               success: that._prefetchSuccessHandler(skip, size, callback),\n                               error: function() {\n                                   var args = slice.call(arguments);\n                                   that.error.apply(that, args);\n                               }\n                           });\n                       } else {\n                           that._dequeueRequest();\n                       }\n                   }, 100);\n               } else if (callback) {\n                   callback();\n               }\n           },\n\n           _multiplePrefetch: function(skip, take, callback) {\n               var that = this,\n                   size = math.min(skip + take, that.total()),\n                   options = {\n                       take: take,\n                       skip: skip,\n                       page: skip / take + 1,\n                       pageSize: take,\n                       sort: that._sort,\n                       filter: that._filter,\n                       group: that._group,\n                       aggregate: that._aggregate\n                   };\n\n               if (!that._rangeExists(skip, size)) {\n                   if (!that.trigger(REQUESTSTART, { type: \"read\" })) {\n                       that.transport.read({\n                           data: that._params(options),\n                           success: that._prefetchSuccessHandler(skip, size, callback, true)\n                       });\n                   }\n               } else if (callback) {\n                   callback();\n               }\n           },\n\n           _adjustPageSkip: function(start, take) {\n               var that = this;\n               var prevRange = that._getPrevRange(start);\n               var result;\n               var total = that.total();\n               var mismatch;\n\n               if (prevRange) {\n                   mismatch = that._getRangesMismatch(start);\n\n                   if (!mismatch) {\n                       return start;\n                   }\n                   start -= mismatch;\n               }\n               result = math.max(math.floor(start / take), 0) * take;\n\n               if (result > total) {\n                   while (true) {\n                       result -= take;\n                       if (result < total) {\n                           break;\n                       }\n                   }\n               }\n               return result;\n           },\n\n           _getNextRange: function(end) {\n               var that = this,\n                   ranges = that._ranges,\n                   idx,\n                   length;\n\n               for (idx = 0, length = ranges.length; idx < length; idx++) {\n                   if (ranges[idx].start <= end && ranges[idx].end >= end) {\n                       return ranges[idx];\n                   }\n               }\n           },\n\n           _getPrevRange: function(start) {\n               var that = this,\n                   ranges = that._ranges,\n                   idx,\n                   range,\n                   length = ranges.length;\n\n               for (idx = length - 1; idx >= 0; idx--) {\n                   if (ranges[idx].outerStart <= start) {\n                       range = ranges[idx];\n                       break;\n                   }\n\n               }\n\n               return range;\n           },\n\n           _rangeExists: function(start, end) {\n               var that = this,\n                   ranges = that._ranges,\n                   idx,\n                   length;\n\n               for (idx = 0, length = ranges.length; idx < length; idx++) {\n                   if (ranges[idx].start <= start && ranges[idx].end >= end) {\n                       return true;\n                   }\n               }\n\n               return false;\n           },\n\n           _groupRangeExists: function(start, end) {\n               var that = this,\n                   ranges = that._ranges,\n                   idx,\n                   length,\n                   availableItemsCount = 0,\n                   total = that.groupsTotal(true);\n\n               if (end > total && !that._isServerGrouped()) {\n                   end = total;\n               }\n\n               for (idx = 0, length = ranges.length; idx < length; idx++) {\n                   var range = ranges[idx];\n                   if (range.outerStart <= start && range.outerEnd >= start) {\n                       availableItemsCount += range.outerEnd - start;\n                   } else if (range.outerStart <= end && range.outerEnd >= end) {\n                       availableItemsCount += end - range.outerStart;\n                   }\n               }\n\n               return availableItemsCount >= end - start;\n           },\n\n           _getCurrentRangeSpan: function() {\n               var that = this;\n               var ranges = that._ranges;\n               var start = that.currentRangeStart();\n               var end = start + (that.take() || 0);\n               var rangeSpan = [];\n               var range;\n               var idx;\n               var length = ranges.length;\n\n               for (idx = 0; idx < length; idx++) {\n                   range = ranges[idx];\n\n                   if ((range.start <= start && range.end >= start) || (range.start >= start && range.start <= end)) {\n                       rangeSpan.push(range);\n                   }\n               }\n\n               return rangeSpan;\n           },\n\n           _removeModelFromRanges: function(model) {\n               var that = this;\n               var range;\n\n               for (var idx = 0, length = this._ranges.length; idx < length; idx++) {\n                   range = this._ranges[idx];\n\n                   that._removeModelFromRange(range, model);\n               }\n\n               that._updateRangesLength();\n           },\n\n           _removeModelFromRange: function(range, model) {\n               this._eachItem(range.data, function(data) {\n                   if (!data) {\n                       return;\n                   }\n                   for (var idx = 0; idx < data.length; idx++) {\n                       var dataItem = data[idx];\n\n                       if (dataItem.uid && dataItem.uid == model.uid) {\n                           [].splice.call(data, idx, 1);\n                           break;\n                       }\n                   }\n               });\n           },\n\n           _insertModelInRange: function(index, model) {\n               var that = this;\n               var ranges = that._ranges || [];\n               var rangesLength = ranges.length;\n               var range;\n               var i;\n\n               for (i = 0; i < rangesLength; i++) {\n                   range = ranges[i];\n\n                   if (range.start <= index && range.end >= index) {\n                       if (!that._getByUid(model.uid, range.data)) {\n                           if (that._isServerGrouped()) {\n                               range.data.splice(index, 0, that._wrapInEmptyGroup(model));\n                           } else {\n                               range.data.splice(index, 0, model);\n                           }\n                       }\n\n                       break;\n                   }\n               }\n\n               that._updateRangesLength();\n           },\n\n           _updateRangesLength: function() {\n               var that = this;\n               var ranges = that._ranges || [];\n               var rangesLength = ranges.length;\n               var mismatchFound = false;\n               var mismatchLength = 0;\n               var lengthDifference = 0;\n               var rangeLength;\n               var range;\n               var i;\n\n               for (i = 0; i < rangesLength; i++) {\n                   range = ranges[i];\n                   rangeLength = that._isGroupPaged() ? range.data.length : that._flatData(range.data, true).length;\n                   lengthDifference = rangeLength - math.abs(range.end - range.start);\n\n                   if (!mismatchFound && lengthDifference !== 0) {\n                       mismatchFound = true;\n                       mismatchLength = lengthDifference;\n                       range.end += mismatchLength;\n                       continue;\n                   }\n\n                   if (mismatchFound) {\n                       range.start += mismatchLength;\n                       range.end += mismatchLength;\n                   }\n               }\n           },\n\n           _updateOuterRangesLength: function() {\n               var that = this;\n               var ranges = that._ranges || [];\n               var rangesLength = ranges.length;\n               var mismatchLength = 0;\n               var range;\n               var i;\n               var prevRange;\n               var rangeLength;\n\n               for (i = 0; i < rangesLength; i++) {\n                   range = ranges[i];\n                   rangeLength = that._isGroupPaged() ? that._calculateGroupsTotal(range.data, true, \"items\", true) : that._flatData(range.data, true).length;\n\n                   if (prevRange) {\n                       if (prevRange.end != range.start) {\n                           mismatchLength = range.start - prevRange.end;\n                       }\n                       range.outerStart = prevRange.outerEnd + mismatchLength;\n                       mismatchLength = 0;\n                   } else {\n                       range.outerStart = range.start;\n                   }\n\n                   range.outerEnd = range.outerStart + rangeLength;\n                   prevRange = range;\n               }\n           }\n       });\n\n       var Transport = {};\n\n       Transport.create = function(options, data, dataSource) {\n           var transport,\n               transportOptions = options.transport ? $.extend({}, options.transport) : null;\n\n           if (transportOptions) {\n               transportOptions.read = typeof transportOptions.read === STRING ? { url: transportOptions.read } : transportOptions.read;\n\n               if (options.type === \"jsdo\") {\n                   transportOptions.dataSource = dataSource;\n               }\n\n               if (options.type) {\n                   kendo.data.transports = kendo.data.transports || {};\n                   kendo.data.schemas = kendo.data.schemas || {};\n\n                   if (!kendo.data.transports[options.type]) {\n                       kendo.logToConsole(\"Unknown DataSource transport type '\" + options.type + \"'.\\nVerify that registration scripts for this type are included after Kendo UI on the page.\", \"warn\");\n                   } else if (!isPlainObject(kendo.data.transports[options.type])) {\n                       transport = new kendo.data.transports[options.type](extend(transportOptions, { data: data }));\n                   } else {\n                       transportOptions = extend(true, {}, kendo.data.transports[options.type], transportOptions);\n                   }\n\n                   options.schema = extend(true, {}, kendo.data.schemas[options.type], options.schema);\n               }\n\n               if (!transport) {\n                   transport = isFunction(transportOptions.read) ? transportOptions : new RemoteTransport(transportOptions);\n               }\n           } else {\n               transport = new LocalTransport({ data: options.data || [] });\n           }\n           return transport;\n       };\n\n       DataSource.create = function(options) {\n           if (isArray(options) || options instanceof ObservableArray) {\n              options = { data: options };\n           }\n\n           var dataSource = options || {},\n               data = dataSource.data,\n               fields = dataSource.fields,\n               table = dataSource.table,\n               select = dataSource.select,\n               idx,\n               length,\n               model = {},\n               field;\n\n           if (!data && fields && !dataSource.transport) {\n               if (table) {\n                   data = inferTable(table, fields);\n               } else if (select) {\n                   data = inferSelect(select, fields);\n\n                   if (dataSource.group === undefined$1 && data[0] && data[0].optgroup !== undefined$1) {\n                       dataSource.group = \"optgroup\";\n                   }\n               }\n           }\n\n           if (kendo.data.Model && fields && (!dataSource.schema || !dataSource.schema.model)) {\n               for (idx = 0, length = fields.length; idx < length; idx++) {\n                   field = fields[idx];\n                   if (field.type) {\n                       model[field.field] = field;\n                   }\n               }\n\n               if (!isEmptyObject(model)) {\n                   dataSource.schema = extend(true, dataSource.schema, { model: { fields: model } });\n               }\n           }\n\n           dataSource.data = data;\n\n           select = null;\n           dataSource.select = null;\n           table = null;\n           dataSource.table = null;\n\n           return dataSource instanceof DataSource ? dataSource : new DataSource(dataSource);\n       };\n\n       function inferSelect(select, fields) {\n           select = $(select)[0];\n           var options = select.options;\n           var firstField = fields[0];\n           var secondField = fields[1];\n\n           var data = [];\n           var idx, length;\n           var optgroup;\n           var option;\n           var record;\n           var value;\n\n           for (idx = 0, length = options.length; idx < length; idx++) {\n               record = {};\n               option = options[idx];\n               optgroup = option.parentNode;\n\n               if (optgroup === select) {\n                   optgroup = null;\n               }\n\n               if (option.disabled || (optgroup && optgroup.disabled)) {\n                   continue;\n               }\n\n               if (optgroup) {\n                   record.optgroup = optgroup.label;\n               }\n\n               record[firstField.field] = option.text;\n\n               value = option.attributes.value;\n\n               if (value && value.specified) {\n                   value = option.value;\n               } else {\n                   value = option.text;\n               }\n\n               record[secondField.field] = value;\n\n               data.push(record);\n           }\n\n           return data;\n       }\n\n       function inferTable(table, fields) {\n           var tbody = $(table)[0].tBodies[0],\n           rows = tbody ? tbody.rows : [],\n           idx,\n           length,\n           fieldIndex,\n           fieldCount = fields.length,\n           data = [],\n           cells,\n           record,\n           cell,\n           empty;\n\n           for (idx = 0, length = rows.length; idx < length; idx++) {\n               record = {};\n               empty = true;\n               cells = rows[idx].cells;\n\n               for (fieldIndex = 0; fieldIndex < fieldCount; fieldIndex++) {\n                   cell = cells[fieldIndex];\n                   if (cell.nodeName.toLowerCase() !== \"th\") {\n                       empty = false;\n                       record[fields[fieldIndex].field] = cell.innerHTML;\n                   }\n               }\n               if (!empty) {\n                   data.push(record);\n               }\n           }\n\n           return data;\n       }\n\n       var Node = Model.define({\n           idField: \"id\",\n\n           init: function(value) {\n               var that = this,\n                   hasChildren = that.hasChildren || value && value.hasChildren,\n                   childrenField = \"items\",\n                   childrenOptions = {};\n\n               kendo.data.Model.fn.init.call(that, value);\n\n               if (typeof that.children === STRING) {\n                   childrenField = that.children;\n               }\n\n               childrenOptions = {\n                   schema: {\n                       data: childrenField,\n                       model: {\n                           hasChildren: hasChildren,\n                           id: that.idField,\n                           fields: that.fields\n                       }\n                   }\n               };\n\n               if (typeof that.children !== STRING) {\n                   extend(childrenOptions, that.children);\n               }\n\n               childrenOptions.data = value;\n\n               if (!hasChildren) {\n                   hasChildren = childrenOptions.schema.data;\n               }\n\n               if (typeof hasChildren === STRING) {\n                   hasChildren = kendo.getter(hasChildren);\n               }\n\n               if (isFunction(hasChildren)) {\n                   var hasChildrenObject = hasChildren.call(that, that);\n\n                   if (hasChildrenObject && hasChildrenObject.length === 0) {\n                       that.hasChildren = false;\n                   } else {\n                       that.hasChildren = !!hasChildrenObject;\n                   }\n               }\n\n               that._childrenOptions = childrenOptions;\n\n               if (that.hasChildren) {\n                   that._initChildren();\n               }\n\n               that._loaded = !!(value && value._loaded);\n           },\n\n           _initChildren: function() {\n               var that = this;\n               var children, transport, parameterMap;\n\n               if (!(that.children instanceof HierarchicalDataSource)) {\n                   children = that.children = new HierarchicalDataSource(that._childrenOptions);\n\n                   transport = children.transport;\n                   parameterMap = transport.parameterMap;\n\n                   transport.parameterMap = function(data, type) {\n                       data[that.idField || \"id\"] = that.id;\n\n                       if (parameterMap) {\n                           data = parameterMap.call(that, data, type);\n                       }\n\n                       return data;\n                   };\n\n                   children.parent = function() {\n                       return that;\n                   };\n\n                   children.bind(CHANGE, function(e) {\n                       e.node = e.node || that;\n                       that.trigger(CHANGE, e);\n                   });\n\n                   children.bind(ERROR, function(e) {\n                       var collection = that.parent();\n\n                       if (collection) {\n                           e.node = e.node || that;\n                           collection.trigger(ERROR, e);\n                       }\n                   });\n\n                   children.bind(ITEMSLOADED, function(e) {\n                       var collection = that.parent();\n\n                       if (collection) {\n                           collection.trigger(ITEMSLOADED, e);\n                       }\n                   });\n\n                   that._updateChildrenField();\n               }\n           },\n\n           append: function(model) {\n               this._initChildren();\n               this.loaded(true);\n               this.children.add(model);\n           },\n\n           hasChildren: false,\n\n           level: function() {\n               var parentNode = this.parentNode(),\n                   level = 0;\n\n               while (parentNode && parentNode.parentNode) {\n                   level++;\n                   parentNode = parentNode.parentNode ? parentNode.parentNode() : null;\n               }\n\n               return level;\n           },\n\n           _updateChildrenField: function() {\n               var fieldName = this._childrenOptions.schema.data;\n\n               this[fieldName || \"items\"] = this.children.data();\n           },\n\n           _childrenLoaded: function() {\n               this._loaded = true;\n\n               this._updateChildrenField();\n           },\n\n           load: function() {\n               var options = {};\n               var method = \"_query\";\n               var children, promise;\n\n               if (this.hasChildren) {\n                   this._initChildren();\n\n                   children = this.children;\n\n                   options[this.idField || \"id\"] = this.id;\n\n                   if (!this._loaded) {\n                       children._data = undefined$1;\n                       method = \"read\";\n                   }\n\n                   children.one(CHANGE, this._childrenLoaded.bind(this));\n\n                   if (this._matchFilter) {\n                       options.filter = { field: '_matchFilter', operator: 'eq', value: true };\n                   }\n\n                   promise = children[method](options);\n                   if (!this._loaded) {\n                       this.trigger(ITEMLOAD, { promise: promise, node: this });\n                   }\n               } else {\n                   this.loaded(true);\n               }\n\n               return promise || $.Deferred().resolve().promise();\n           },\n\n           parentNode: function() {\n               var array = this.parent();\n\n               return array.parent();\n           },\n\n           loaded: function(value) {\n               if (value !== undefined$1) {\n                   this._loaded = value;\n               } else {\n                   return this._loaded;\n               }\n           },\n\n           shouldSerialize: function(field) {\n               return Model.fn.shouldSerialize.call(this, field) &&\n                       field !== \"children\" &&\n                       field !== \"_loaded\" &&\n                       field !== \"hasChildren\" &&\n                       field !== \"_childrenOptions\";\n           }\n       });\n\n       function dataMethod(name) {\n           return function() {\n               var data = this._data,\n                   result = DataSource.fn[name].apply(this, slice.call(arguments));\n\n               if (this._data != data) {\n                   this._attachBubbleHandlers();\n               }\n\n               return result;\n           };\n       }\n\n       var HierarchicalDataSource = DataSource.extend({\n           init: function(options) {\n               var node = Node.define({\n                   children: options\n               });\n\n               if (options.filter && !options.serverFiltering) {\n                   this._hierarchicalFilter = options.filter;\n                   options.filter = null;\n               }\n\n               DataSource.fn.init.call(this, extend(true, {}, { schema: { modelBase: node, model: node } }, options));\n\n               this._attachBubbleHandlers();\n           },\n\n           _attachBubbleHandlers: function() {\n               var that = this;\n\n               that._data.bind(ERROR, function(e) {\n                   that.trigger(ERROR, e);\n               });\n\n               that._data.bind(ITEMSLOADED, function(e) {\n                   that.trigger(ITEMSLOADED, e);\n               });\n           },\n\n           loading: function() {\n               if (this._data) {\n                   return this._data.loading() || this._childrenLoading();\n               }\n               return false;\n           },\n\n           _childrenLoading: function() {\n               var isLoading = false;\n               this._data.forEach(function(node) {\n                   if (node.hasChildren && node.children.loading()) {\n                       isLoading = true;\n                   }\n               });\n               return isLoading;\n           },\n\n           read: function(data) {\n               var result = DataSource.fn.read.call(this, data);\n\n               if (this._hierarchicalFilter) {\n                   if (this._data && this._data.length > 0) {\n                       this.filter(this._hierarchicalFilter);\n                   } else {\n                       this.options.filter = this._hierarchicalFilter;\n                       this._filter = normalizeFilter(this.options.filter);\n                       this._hierarchicalFilter = null;\n                   }\n               }\n\n               return result;\n           },\n\n           remove: function(node) {\n               var parentNode = node.parentNode(),\n                   dataSource = this,\n                   result;\n\n               if (parentNode && parentNode._initChildren) {\n                   dataSource = parentNode.children;\n               }\n\n               result = DataSource.fn.remove.call(dataSource, node);\n\n               if (parentNode && !dataSource.data().length) {\n                   parentNode.hasChildren = false;\n               }\n\n               return result;\n           },\n\n           success: dataMethod(\"success\"),\n\n           data: dataMethod(\"data\"),\n\n           insert: function(index, model) {\n               var parentNode = this.parent();\n\n               if (parentNode && parentNode._initChildren) {\n                   parentNode.hasChildren = true;\n                   parentNode._initChildren();\n               }\n\n               return DataSource.fn.insert.call(this, index, model);\n           },\n\n           filter: function(val) {\n               if (val === undefined$1) {\n                    return this._filter;\n               }\n\n               if (!this.options.serverFiltering && this._markHierarchicalQuery(val)) {\n                   val = { logic: \"or\", filters: [val, { field: '_matchFilter', operator: 'equals', value: true }] };\n               }\n\n               this.trigger(\"reset\");\n               this._query({ filter: val, page: 1 });\n           },\n\n           _markHierarchicalQuery: function(expressions) {\n               var compiled;\n               var accentFoldingFiltering = this.options.accentFoldingFiltering;\n\n               expressions = accentFoldingFiltering ? $.extend({}, normalizeFilter(expressions), { accentFoldingFiltering: accentFoldingFiltering }) : normalizeFilter(expressions);\n\n               if (!expressions || expressions.filters.length === 0) {\n                   this._updateHierarchicalFilter(function() {return true;});\n                   return false;\n               }\n\n               compiled = Query.filterExpr(expressions, { noEval: true });\n\n               this._updateHierarchicalFilter(compiled);\n               return true;\n           },\n\n            _updateHierarchicalFilter: function(filter) {\n               var current;\n               var data = this._data;\n               var result = false;\n\n               for (var idx = 0; idx < data.length; idx++) {\n                    current = data[idx];\n\n                    if (current.hasChildren) {\n                        current._matchFilter = current.children._updateHierarchicalFilter(filter);\n                       if (!current._matchFilter) {\n                           current._matchFilter = filter(current);\n                       }\n                   } else {\n                       current._matchFilter = filter(current);\n                   }\n\n                   if (current._matchFilter) {\n                       result = true;\n                   }\n               }\n               return result;\n           },\n\n           _find: function(method, value) {\n               var idx, length, node, children;\n               var data = this._data;\n\n               if (!data) {\n                   return;\n               }\n\n               node = DataSource.fn[method].call(this, value);\n\n               if (node) {\n                   return node;\n               }\n\n               data = this._flatData(this._data);\n\n               for (idx = 0, length = data.length; idx < length; idx++) {\n                   children = data[idx].children;\n\n                   if (!(children instanceof HierarchicalDataSource)) {\n                       continue;\n                   }\n\n                   node = children[method](value);\n\n                   if (node) {\n                       return node;\n                   }\n               }\n           },\n\n           get: function(id) {\n               return this._find(\"get\", id);\n           },\n\n           getByUid: function(uid) {\n               return this._find(\"getByUid\", uid);\n           }\n       });\n\n       function inferList(list, fields) {\n           var items = $(list).children(),\n               idx,\n               length,\n               data = [],\n               record,\n               textField = fields[0].field,\n               urlField = fields[1] && fields[1].field,\n               spriteCssClassField = fields[2] && fields[2].field,\n               imageUrlField = fields[3] && fields[3].field,\n               item,\n               id,\n               textChild,\n               className,\n               children;\n\n           function elements(collection, tagName) {\n               return collection.filter(tagName).add(collection.find(tagName));\n           }\n\n           for (idx = 0, length = items.length; idx < length; idx++) {\n               record = { _loaded: true };\n               item = items.eq(idx);\n\n               textChild = item[0].firstChild;\n               children = item.children();\n               list = children.filter(\"ul\");\n               children = children.filter(\":not(ul)\");\n\n               id = item.attr(\"data-id\");\n\n               if (id) {\n                   record.id = id;\n               }\n\n               if (textChild) {\n                   record[textField] = textChild.nodeType == 3 ? textChild.nodeValue : children.text();\n               }\n\n               if (urlField) {\n                   record[urlField] = elements(children, \"a\").attr(\"href\");\n               }\n\n               if (imageUrlField) {\n                   record[imageUrlField] = elements(children, \"img\").attr(\"src\");\n               }\n\n               if (spriteCssClassField) {\n                   className = elements(children, \".k-sprite\").prop(\"className\");\n                   record[spriteCssClassField] = className && kendo.trim(className.replace(\"k-sprite\", \"\"));\n               }\n\n               if (list.length) {\n                   record.items = inferList(list.eq(0), fields);\n               }\n\n               if (item.attr(\"data-hasChildren\") == \"true\") {\n                   record.hasChildren = true;\n               }\n\n               data.push(record);\n           }\n\n           return data;\n       }\n\n       HierarchicalDataSource.create = function(options) {\n           options = options && options.push ? { data: options } : options;\n\n           var dataSource = options || {},\n               data = dataSource.data,\n               fields = dataSource.fields,\n               list = dataSource.list;\n\n           if (data && data._dataSource) {\n               return data._dataSource;\n           }\n\n           if (!data && fields && !dataSource.transport) {\n               if (list) {\n                   data = inferList(list, fields);\n               }\n           }\n\n           dataSource.data = data;\n\n           return dataSource instanceof HierarchicalDataSource ? dataSource : new HierarchicalDataSource(dataSource);\n       };\n\n       var Buffer = kendo.Observable.extend({\n           init: function(dataSource, viewSize, disablePrefetch) {\n               kendo.Observable.fn.init.call(this);\n\n               this._prefetching = false;\n               this.dataSource = dataSource;\n               this.prefetch = !disablePrefetch;\n\n               var buffer = this;\n\n               dataSource.bind(\"change\", function() {\n                   buffer._change();\n               });\n\n               dataSource.bind(\"reset\", function() {\n                   buffer._reset();\n               });\n\n               this._syncWithDataSource();\n\n               this.setViewSize(viewSize);\n           },\n\n           setViewSize: function(viewSize) {\n               this.viewSize = viewSize;\n               this._recalculate();\n           },\n\n           at: function(index) {\n               var pageSize = this.pageSize,\n                   itemPresent = true;\n\n               if (index >= this.total()) {\n                   this.trigger(\"endreached\", { index: index });\n                   return null;\n               }\n\n               if (!this.useRanges) {\n                  return this.dataSource.view()[index];\n               }\n               if (this.useRanges) {\n                   // out of range request\n                   if (index < this.dataOffset || index >= this.skip + pageSize) {\n                       itemPresent = this.range(Math.floor(index / pageSize) * pageSize);\n                   }\n\n                   // prefetch\n                   if (index === this.prefetchThreshold) {\n                       this._prefetch();\n                   }\n\n                   // mid-range jump - prefetchThreshold and nextPageThreshold may be equal, do not change to else if\n                   if (index === this.midPageThreshold) {\n                       this.range(this.nextMidRange, true);\n                   }\n                   // next range jump\n                   else if (index === this.nextPageThreshold) {\n                       this.range(this.nextFullRange);\n                   }\n                   // pull-back\n                   else if (index === this.pullBackThreshold) {\n                       if (this.offset === this.skip) { // from full range to mid range\n                           this.range(this.previousMidRange);\n                       } else { // from mid range to full range\n                           this.range(this.previousFullRange);\n                       }\n                   }\n\n                   if (itemPresent) {\n                       return this.dataSource.at(index - this.dataOffset);\n                   } else {\n                       this.trigger(\"endreached\", { index: index });\n                       return null;\n                   }\n               }\n           },\n\n           indexOf: function(item) {\n               return this.dataSource.data().indexOf(item) + this.dataOffset;\n           },\n\n           total: function() {\n               return parseInt(this.dataSource.total(), 10);\n           },\n\n           next: function() {\n               var buffer = this,\n                   pageSize = buffer.pageSize,\n                   offset = buffer.skip - buffer.viewSize + pageSize,\n                   pageSkip = math.max(math.floor(offset / pageSize), 0) * pageSize;\n\n               this.offset = offset;\n               this.dataSource.prefetch(pageSkip, pageSize, function() {\n                   buffer._goToRange(offset, true);\n               });\n           },\n\n           range: function(offset, nextRange) {\n               if (this.offset === offset) {\n                   return true;\n               }\n\n               var buffer = this,\n                   pageSize = this.pageSize,\n                   pageSkip = math.max(math.floor(offset / pageSize), 0) * pageSize,\n                   dataSource = this.dataSource;\n\n               if (nextRange) {\n                   pageSkip += pageSize;\n               }\n\n               if (dataSource.inRange(offset, pageSize)) {\n                   this.offset = offset;\n                   this._recalculate();\n                   this._goToRange(offset);\n                   return true;\n               } else if (this.prefetch) {\n                   dataSource.prefetch(pageSkip, pageSize, function() {\n                       buffer.offset = offset;\n                       buffer._recalculate();\n                       buffer._goToRange(offset, true);\n                   });\n                   return false;\n               }\n\n               return true;\n           },\n\n           syncDataSource: function() {\n               var offset = this.offset;\n               this.offset = null;\n               this.range(offset);\n           },\n\n           destroy: function() {\n               this.unbind();\n           },\n\n           _prefetch: function() {\n               var buffer = this,\n                   pageSize = this.pageSize,\n                   prefetchOffset = this.skip + pageSize,\n                   dataSource = this.dataSource;\n\n               if (!dataSource.inRange(prefetchOffset, pageSize) && !this._prefetching && this.prefetch) {\n                   this._prefetching = true;\n                   this.trigger(\"prefetching\", { skip: prefetchOffset, take: pageSize });\n\n                   dataSource.prefetch(prefetchOffset, pageSize, function() {\n                       buffer._prefetching = false;\n                       buffer.trigger(\"prefetched\", { skip: prefetchOffset, take: pageSize });\n                   });\n               }\n           },\n\n           _goToRange: function(offset, expanding) {\n               if (this.offset !== offset) {\n                   return;\n               }\n\n               this.dataOffset = offset;\n               this._expanding = expanding;\n               this.dataSource.range(offset, this.pageSize);\n               this.dataSource.enableRequestsInProgress();\n           },\n\n           _reset: function() {\n               this._syncPending = true;\n           },\n\n           _change: function() {\n               var dataSource = this.dataSource;\n\n               this.length = this.useRanges ? dataSource.lastRange().end : dataSource.view().length;\n\n               if (this._syncPending) {\n                   this._syncWithDataSource();\n                   this._recalculate();\n                   this._syncPending = false;\n                   this.trigger(\"reset\", { offset: this.offset });\n               }\n\n               this.trigger(\"resize\");\n\n               if (this._expanding) {\n                   this.trigger(\"expand\");\n               }\n\n               delete this._expanding;\n           },\n\n           _syncWithDataSource: function() {\n               var dataSource = this.dataSource;\n\n               this._firstItemUid = dataSource.firstItemUid();\n               this.dataOffset = this.offset = dataSource.skip() || 0;\n               this.pageSize = dataSource.pageSize();\n               this.useRanges = dataSource.options.serverPaging;\n           },\n\n           _recalculate: function() {\n               var pageSize = this.pageSize,\n                   offset = this.offset,\n                   viewSize = this.viewSize,\n                   skip = Math.ceil(offset / pageSize) * pageSize;\n\n               this.skip = skip;\n               this.midPageThreshold = skip + pageSize - 1;\n               this.nextPageThreshold = skip + viewSize - 1;\n               this.prefetchThreshold = skip + Math.floor(pageSize / 3 * 2);\n               this.pullBackThreshold = this.offset - 1;\n\n               this.nextMidRange = skip + pageSize - viewSize;\n               this.nextFullRange = skip;\n               this.previousMidRange = offset - viewSize;\n               this.previousFullRange = skip - pageSize;\n           }\n       });\n\n       var BatchBuffer = kendo.Observable.extend({\n           init: function(dataSource, batchSize) {\n               var batchBuffer = this;\n\n               kendo.Observable.fn.init.call(batchBuffer);\n\n               this.dataSource = dataSource;\n               this.batchSize = batchSize;\n               this._total = 0;\n\n               this.buffer = new Buffer(dataSource, batchSize * 3);\n\n               this.buffer.bind({\n                   \"endreached\": function(e) {\n                       batchBuffer.trigger(\"endreached\", { index: e.index });\n                   },\n                   \"prefetching\": function(e) {\n                       batchBuffer.trigger(\"prefetching\", { skip: e.skip, take: e.take });\n                   },\n                   \"prefetched\": function(e) {\n                       batchBuffer.trigger(\"prefetched\", { skip: e.skip, take: e.take });\n                   },\n                   \"reset\": function() {\n                       batchBuffer._total = 0;\n                       batchBuffer.trigger(\"reset\");\n                   },\n                   \"resize\": function() {\n                       batchBuffer._total = Math.ceil(this.length / batchBuffer.batchSize);\n                       batchBuffer.trigger(\"resize\", { total: batchBuffer.total(), offset: this.offset });\n                   }\n               });\n           },\n\n           syncDataSource: function() {\n               this.buffer.syncDataSource();\n           },\n\n           at: function(index) {\n               var buffer = this.buffer,\n                   skip = index * this.batchSize,\n                   take = this.batchSize,\n                   view = [],\n                   item;\n\n               if (buffer.offset > skip) {\n                   buffer.at(buffer.offset - 1);\n               }\n\n               for (var i = 0; i < take; i++) {\n                   item = buffer.at(skip + i);\n\n                   if (item === null) {\n                       break;\n                   }\n\n                   view.push(item);\n               }\n\n               return view;\n           },\n\n           total: function() {\n               return this._total;\n           },\n\n           destroy: function() {\n               this.buffer.destroy();\n               this.unbind();\n           }\n       });\n\n       extend(true, kendo.data, {\n           readers: {\n               json: DataReader\n           },\n           Query: Query,\n           DataSource: DataSource,\n           HierarchicalDataSource: HierarchicalDataSource,\n           Node: Node,\n           Comparer: Comparer,\n           ObservableObject: ObservableObject,\n           ObservableArray: ObservableArray,\n           LazyObservableArray: LazyObservableArray,\n           LocalTransport: LocalTransport,\n           RemoteTransport: RemoteTransport,\n           Cache: Cache,\n           DataReader: DataReader,\n           Model: Model,\n           Buffer: Buffer,\n           BatchBuffer: BatchBuffer\n       });\n   })(window.kendo.jQuery);\n   var kendo$1 = kendo;\n\n   exports.__meta__ = __meta__;\n   exports.default = kendo$1;\n\n   Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n"]}