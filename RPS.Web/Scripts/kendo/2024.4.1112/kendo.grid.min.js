/**
 * Kendo UI v2024.4.1112 (http://www.telerik.com/kendo-ui)
 * Copyright 2024 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("kendo.data.js"),require("kendo.columnsorter.js"),require("kendo.editable.js"),require("kendo.window.js"),require("kendo.filtermenu.js"),require("kendo.filtercell.js"),require("kendo.columnmenu.js"),require("kendo.groupable.js"),require("kendo.pager.js"),require("kendo.selectable.js"),require("kendo.sortable.js"),require("kendo.reorderable.js"),require("kendo.resizable.js"),require("kendo.ooxml.js"),require("kendo.excel.js"),require("kendo.pane.js"),require("kendo.pdf.js"),require("kendo.dialog.js"),require("kendo.switch.js"),require("kendo.html.button.js"),require("kendo.textbox.js"),require("kendo.form.js"),require("kendo.toolbar.js"),require("kendo.icons.js"),require("kendo.menu.js"),require("kendo.loader.js"),require("kendo.html.loadercontainer.js"),require("kendo.loaderContainer.chunk.js")):"function"==typeof define&&define.amd?define(["exports","kendo.data","kendo.columnsorter","kendo.editable","kendo.window","kendo.filtermenu","kendo.filtercell","kendo.columnmenu","kendo.groupable","kendo.pager","kendo.selectable","kendo.sortable","kendo.reorderable","kendo.resizable","kendo.ooxml","kendo.excel","kendo.pane","kendo.pdf","kendo.dialog","kendo.switch","kendo.html.button","kendo.textbox","kendo.form","kendo.toolbar","kendo.icons","kendo.menu","kendo.loader","kendo.html.loadercontainer","kendo.loaderContainer.chunk"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).kendo=e.kendo||{},e.kendo._globals=e.kendo._globals||{},e.kendo._globals.Grid={}),e.kendo._globals.Data,e.kendo._globals.Columnsorter,e.kendo._globals.Editable,e.kendo._globals.Window,e.kendo._globals.Filtermenu,e.kendo._globals.Filtercell,e.kendo._globals.Columnmenu,e.kendo._globals.Groupable,e.kendo._globals.Pager,e.kendo._globals.Selectable,e.kendo._globals.Sortable,e.kendo._globals.Reorderable,e.kendo._globals.Resizable,e.kendo._globals.Ooxml,e.kendo._globals.Excel,e.kendo._globals.Pane,e.kendo._globals.Pdf,e.kendo._globals.Dialog,e.kendo._globals.Switch,e.kendo._globals.HtmlButton,e.kendo._globals.Textbox,e.kendo._globals.Form,e.kendo._globals.Toolbar,e.kendo._globals.Icons,e.kendo._globals.Menu,e.kendo._globals.Loader,e.kendo._globals.HtmlLoadercontainer,e.kendo._globals.LoaderContainerChunk)}(this,(function(e,t,r,o,l,a,i,n,s,d,c,u,p,h,f,g,m,b,_,k,v,w,C,y,S,x,T,H,R){!function(e){var t=window.kendo,r=t.ui.ContextMenu,o=e.extend,l=t.htmlEncode,a="action",i=r.extend({init:function(e,t){var o=this;r.fn.init.call(o,e,t),o._overrideTemplates(),o._extendItems(),o.bind("select",o._onSelect.bind(o)),o.bind("open",o._onOpen.bind(o))},_overrideTemplates:function(){this.templates.sprite=({icon:e,spriteCssClass:r})=>`${e||r?t.ui.icon({icon:l(e||""),iconClass:l(r||"")}):""}`},defaultItems:{separator:{name:"separator",separator:!0},create:{name:"create",text:"Add",icon:"plus",command:"AddCommand",rules:"isEditable"},edit:{name:"edit",text:"Edit",icon:"pencil",command:"EditCommand",rules:"isEditable"},destroy:{name:"destroy",text:"Delete",icon:"trash",command:"DeleteCommand",rules:"isEditable"},select:{name:"select",text:"Select",icon:"table-body",rules:"isSelectable",items:[{name:"selectRow",text:"Row",icon:"table-row-groups",command:"SelectRowCommand"},{name:"selectAllRows",text:"All rows",icon:"grid",command:"SelectAllRowsCommand"},{name:"clearSelection",text:"Clear selection",icon:"table-unmerge",softRules:"hasSelection",command:"ClearSelectionCommand"}]},copySelection:{name:"copySelection",text:"Copy selection",icon:"page-header-section",rules:"isSelectable",softRules:"hasSelection",command:"CopySelectionCommand",options:"withHeaders"},copySelectionNoHeaders:{name:"copySelectionNoHeaders",text:"Copy selection (No Headers)",icon:"file-txt",rules:"isSelectable",softRules:"hasSelection",command:"CopySelectionCommand"},paste:{name:"paste",text:"Paste (use CTRL/⌘ + V)",rules:"allowPaste",softRules:"alwaysDisabled",icon:"clipboard"},reorderRow:{name:"reorderRow",text:"Reorder row",icon:"caret-alt-expand",rules:"isRowReorderable",softRules:"isSorted",items:[{name:"reorderRowUp",text:"Up",icon:"caret-alt-up",command:"ReorderRowCommand",options:"dir:up"},{name:"reorderRowDown",text:"Down",icon:"caret-alt-down",command:"ReorderRowCommand",options:"dir:down"},{name:"reorderRowTop",text:"Top",icon:"caret-alt-to-top",command:"ReorderRowCommand",options:"dir:top"},{name:"reorderRowBottom",text:"Bottom",icon:"caret-alt-to-bottom",command:"ReorderRowCommand",options:"dir:bottom"}]},exportPDF:{name:"exportPDF",text:"Export to PDF",icon:"file-pdf",command:"ExportPDFCommand"},exportExcel:{name:"exportExcel",text:"Export to Excel",icon:"file-excel",items:[{name:"exportToExcelAll",text:"All",command:"ExportExcelCommand"},{name:"exportToExcelSelection",text:"Selection",command:"ExportExcelCommand",softRules:"hasSelection",options:"selection,withHeaders"},{name:"exportToExcelSelectionNoHeaders",text:"Selection (No Headers)",softRules:"hasSelection",command:"ExportExcelCommand",options:"selection"}]},sortAsc:{name:"sortAsc",text:"Sort Ascending",icon:"sort-asc-small",rules:"isSortable",command:"SortCommand",options:"dir:asc"},sortDesc:{name:"sortDesc",text:"Sort Descending",icon:"sort-desc-small",rules:"isSortable",command:"SortCommand",options:"dir:desc"},moveGroupPrevious:{name:"moveGroupPrevious",text:"Move previous",icon:"arrow-left",rules:"isGroupable",softRules:"canMoveGroupPrev",command:"MoveGroupCommand",options:"dir:prev"},moveGroupNext:{name:"moveGroupNext",text:"Move next",icon:"arrow-right",rules:"isGroupable",softRules:"canMoveGroupNext",command:"MoveGroupCommand",options:"dir:next"}},events:r.fn.events.concat([a]),_onSelect:function(t){var r=e(t.item).data("command"),o=e(t.item).data("options");o=o?o.split(",").map((e=>{if(e.indexOf(":")>-1){var[t,e]=e.split(":");return{[t||"_"]:e}}return{[e]:!0}})).reduce(((e,t)=>Object.assign(e,t)),{}):{};var l=e(t.target);r&&this.action({command:r,options:Object.assign(o,{target:l})})},_onOpen:function(r){var o=r.sender,l=o.options.items,a=e(r.event?r.event.target:null);!l&&e.isEmptyObject(this.defaultItems)||a.closest(".k-grid-column-menu").length?r.preventDefault():(this._toggleSeparatorVisibility(),o.element.find(`[${t.attr("soft-rules")}]`).each(((r,l)=>{var i=e(l).attr(t.attr("soft-rules")).split(";");o.enable(l,this._validateSoftRules(i,a))})))},_toggleSeparatorVisibility:function(){this.element.find(".k-item.k-separator").filter(((t,r)=>{var o=e(r).prev(".k-item:not(.k-separator)"),l=e(r).next(".k-item:not(.k-separator)");return!(o.length&&l.length)})).hide()},_extendItems:function(){var t,r=this,o=r.options.items;if(o&&o.length)for(var l=0;l<o.length;l++)t=o[l],e.isPlainObject(t)&&1===Object.keys(t).length&&t.name&&(t=t.name),e.isPlainObject(t)?r._append(t):r.defaultItems[t]?(t=r.defaultItems[t],r._append(t)):"string"==typeof t&&(t={name:t,text:t,spriteCssClass:t,command:t+"Command"},r._append(t));else for(var a in r.defaultItems)t=r.defaultItems[a],r._append(t)},_extendItem:function(e){var r=this,l=r.options.messages,a=e.attr||{};if(e.command&&(a[t.attr("command")]=e.command),e.options&&(a[t.attr("options")]=e.options),e.softRules&&(a[t.attr("soft-rules")]=e.softRules),e.items)for(var i=0;i<e.items.length;i++)e.items.forEach((e=>{r._extendItem(e)}));o(e,{text:l.commands[e.name],icon:e.icon||"",spriteCssClass:e.spriteCssClass||"",attr:a,uid:t.guid()})},_validateSoftRules:function(e,t){if(!e||!e||!e.length)return!0;for(var r=0;r<e.length;r++)if(!this._readState(e[r],t))return!1;return!0},_validateRules:function(e){var t=e.rules?e.rules.split(";"):[];if(!t.length)return!0;for(var r=0;r<t.length;r++)if(!this._readState(t[r]))return!1;return!0},_readState:function(e,r){var o=this.options.states;return t.isFunction(o[e])?o[e](r):o[e]},_append:function(e){var t=this;t._extendItem(e),t._validateRules(e)&&t.append(e)},action:function(e){this.trigger(a,e)}});t.ui.grid=t.ui.grid||{},o(t.ui.grid,{ContextMenu:i})}(window.kendo.jQuery),function(e){var t=window.kendo,r=e.extend,o=t.Class.extend({init:function(e){this.options=e,this.grid=e.grid}}),l=o.extend({exec:function(){var e=this.grid.groupable,t=this.options,r=t.target.closest(".k-chip"),o="next"===t.dir?"after":"before";("next"===t.dir?r.next():r.prev())[o](r),e._change()}}),a=o.extend({exec:function(){var e,t,r=this.grid,o=r.dataSource,l=o.sort()||[],a=this.options,i=a.dir,n=r._getCellField(a.target),s=r.options.sortable.mode&&"multiple"===r.options.sortable.mode,d=r.options.compare;if(s){for(t=0,e=l.length;t<e;t++)if(l[t].field===n){l.splice(t,1);break}l.push({field:n,dir:i,compare:d})}else l=[{field:n,dir:i,compare:d}];o.sort(l)}}),i=o.extend({exec:function(){this.grid.addRow()}}),n=o.extend({exec:function(){var e=this,t=e.grid,r="incell"===t._editMode(),o=r?e.options.target:e.options.target.closest("tr");r?t.editCell(o):t.editRow(o)}}),s=o.extend({exec:function(){var e=this.grid,t=this.options.target.closest("tr");e.removeRow(t)}}),d=o.extend({exec:function(){var e=this.grid,t=this.options.withHeaders;e.copySelectionToClipboard(t)}}),c=o.extend({exec:function(){var e=this.grid,r=t.ui.Selectable.parseOptions(e.options.selectable),o=this.options.target.closest("tr");e.select(r.cell?o.find("td"):o)}}),u=o.extend({exec:function(){var e=this.grid,r=t.ui.Selectable.parseOptions(e.options.selectable),o=e.items();e.select(r.cell?o.find("td"):o)}}),p=o.extend({exec:function(){this.grid.clearSelection()}}),h=o.extend({exec:function(){var e,t=this,r=t.grid,o=t.options.dir,l=t.options.target.closest("tr"),a=l.index();switch(o){case"up":e=a-1;break;case"down":e=a+2;break;case"top":e=0;break;case"bottom":e=r.items().length}r.reorderRowTo(l,e)}}),f=o.extend({exec:function(){this.grid.saveAsPDF()}}),g=o.extend({exec:function(){var e=this,t=e.options.selection,r=e.options.withHeaders,o=e.grid;t?o.exportSelectedToExcel(r):o.saveAsExcel()}});t.ui.grid=t.ui.grid||{},r(t.ui.grid,{GridCommand:o,commands:{SortCommand:a,AddCommand:i,EditCommand:n,DeleteCommand:s,CopySelectionCommand:d,SelectRowCommand:c,SelectAllRowsCommand:u,ClearSelectionCommand:p,ReorderRowCommand:h,ExportPDFCommand:f,ExportExcelCommand:g,MoveGroupCommand:l}})}(window.kendo.jQuery);!function(e,t){let r=window.kendo,o=r.ui,l=r.data.DataSource,a=r.data.ObservableObject,i=r.support.tbodyInnerHtml,n=r._activeElement,s=o.Widget,d=r._outerWidth,c=r._outerHeight,u=r.keys,p=r.type,h=e.isPlainObject,f=e.extend,g=e.map,m=e.grep,b=Array.isArray,_=e.inArray,k=Array.prototype.push,v=r.isFunction,w=r.htmlEncode,C=e.isEmptyObject,y=e.contains,S=Math,x=".",T="progress",H="error",E=":not(.k-group-cell):not(["+r.attr("virtual")+"]):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-caret-alt-down,.k-icon.k-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-down,.k-svg-icon.k-svg-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-left,.k-icon.k-i-caret-alt-left))):visible",I=":not(["+r.attr("virtual")+"]):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-caret-alt-down,.k-icon.k-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-down,.k-svg-icon.k-svg-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-left,.k-icon.k-i-caret-alt-left)))",A="tr:not(.k-footer-template):visible",z=":not(.k-group-cell):not(.k-detail-cell):not(.k-hierarchy-cell):visible",D="tr:not(.k-grouping-row):not(.k-detail-row):not(.k-footer-template):not(.k-group-footer):visible",F="col:not(.k-group-col, .k-hierarchy-col)",M="th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)",L="a[class*='-i-caret-alt-down']",q="a[class*='-i-caret-alt-right']",P=q,O=".kendoGrid",V="edit",B="beforeEdit",W="save",G="remove",N="detailInit",j="filterMenuInit",U="columnMenuInit",K="filterMenuOpen",$="columnMenuOpen",Q="cellClose",Y="changing",J="change",X="columnHide",Z="columnShow",ee="saveChanges",te="dataBound",re="detailExpand",oe="detailCollapse",le="itemchange",ae="page",ie="paging",ne="paste",se="scroll",de="sync",ce="loadStart",ue="loadEnd",pe="requestEnd",he="k-focus",fe="k-hover",ge="k-active",me=":kendoFocusable",be="k-selected",_e="k-checkbox",ke="input[data-role='checkbox'].k-select-checkbox."+_e,ve="k-grid-norecords",we="k-link",Ce="k-icon",ye="k-svg-icon",Se="k-sort-order",xe="k-sorted",Te="k-header",He="k-grid-column-menu",Re="k-grid-filter-menu",Ee="k-grid-content-sticky",Ie="k-grid-header-sticky",Ae="k-grid-footer-sticky",ze="k-grid-no-left-border",De="k-grouping-row",Fe="resize",Me="rowResize",Le="columnResize",qe="columnReorder",Pe="columnLock",Oe="columnUnlock",Ve="columnStick",Be="columnUnstick",We="rowReorder",Ge="navigate",Ne="click",je="mousedown",Ue="mouseup",Ke="mouseenter",$e="mouseleave",Qe="mousemove",Ye="dblclick",Je="height",Xe="width",Ze="auto",et="tabIndex",tt="function",rt="string",ot="bottom",lt="container-for",at="field",it="input",nt="incell",st="inline",dt="overflow",ct="sort",ut="group-sort",pt="Collapse",ht="Expand",ft="id",gt="px",mt="tr",bt="div",_t="aria-label",kt="aria-owns",vt="aria-rowcount",wt="aria-colcount",Ct="aria-colindex",yt="aria-rowindex",St="aria-expanded",xt="aria-checked",Tt="aria-activedescendant",Ht="role",Rt="none",Et="row",It="rowgroup",At="columnheader",zt="gridcell",Dt=/(\}|\#)/gi,Ft="[\\x20\\t\\r\\n\\f]",Mt=(new RegExp("(\\s*left\\s*:\\s*\\d*px;?)*","ig"),new RegExp("(\\s*right\\s*:\\s*\\d*px;?)*","ig"),new RegExp("(^|"+Ft+")(k-group-cell|k-hierarchy-cell)("+Ft+"|$)")),Lt=new RegExp("(^|"+Ft+")(k-filter-row)("+Ft+"|$)"),qt=({className:e,attr:t,text:o})=>`<button type="button" class="${e}" ${t}>${r.htmlEncode(o)}</button>`,Pt=(e,t)=>`<span class="k-checkbox-wrap"><input tabindex="-1" class="k-select-checkbox ${_e} ${e} k-rounded-md" data-role="checkbox" aria-label="${t}" aria-checked="false" type="checkbox"></span>`,Ot=({size:e})=>Pt(e,"Select row"),Vt=({size:e})=>Pt(e,"Select all rows"),Bt=()=>r.ui.icon("reorder"),Wt=({text:e})=>`<span class="k-cell-inner"><span class="k-link"><span class="k-column-title">${e}</span></span></span>`,Gt=!1,Nt=r.support.browser;var jt,Ut=Nt.msie&&11===Nt.version,Kt=/Mac OS/.test(navigator.userAgent),$t="k-content",Qt="k-scroll-container",Yt="k-cell-inner",Jt=["copySelection","copySelectionNoHeaders","paste","separator","create","edit","destroy","select","separator","reorderRow","exportPDF","exportExcel","separator"],Xt=["sortAsc","sortDesc","separator"],Zt=["moveGroupPrevious","moveGroupNext","separator"];o.Pager&&(jt=o.Pager.extend({init:function(e,t){o.Pager.fn.init.call(this,e,f(!0,{},t)),this.dataSource.options.useRanges=!0,this.dataSource._omitPrefetch=!0},options:{name:"GroupsPager"},totalPages:function(){return Math.ceil((this._collapsedTotal()||0)/(this.pageSize()||1))},_collapsedTotal:function(){var e=this.dataSource;return e&&e.groupsTotal(!0)||0}}));var er=s.extend({init:function(e,t){var r=this;s.fn.init.call(r,e,t),r._refreshHandler=r.refresh.bind(r),r.setDataSource(t.dataSource),r.wrap()},setDataSource:function(e){var t=this;t.dataSource&&t.dataSource.unbind(J,t._refreshHandler),t.dataSource=e,t.dataSource.bind(J,t._refreshHandler),t.dataSource.options.useRanges=!0,t.dataSource.options.virtual=!0},options:{name:"VirtualScrollable",itemHeight:e.noop,prefetch:!0,maxScrollHeight:25e4},events:[ie,ae,se,ce,ue],destroy:function(){var e=this;s.fn.destroy.call(e),e.dataSource.unbind(J,e._refreshHandler),e.wrapper.add(e.verticalScrollbar).off(O),clearTimeout(e._timeout),e._scrollingTimeout&&clearTimeout(e._scrollingTimeout),e.drag&&(e.drag.destroy(),e.drag=null),e.wrapper=e.element=e.verticalScrollbar=null,e._refreshHandler=null},wrap:function(){var t,o=this,l=r.support.scrollbar()+1,a=o.element;a.css({width:Ze,overflow:"hidden"}).css(Gt?"padding-left":"padding-right",l),o.content=a.children().first(),t=o.wrapper=o.content.wrap('<div class="k-virtual-scrollable-wrap"/>').parent().on("DOMMouseScroll"+O+" mousewheel"+O,o._wheelScroll.bind(o)),o._wrapper(),(r.support.kineticScrollNeeded||r.support.touch)&&(o.wrapper.css("touch-action",Rt),o.drag=new r.UserEvents(o.wrapper,{global:!0,allowSelection:!0,start:function(e){e.sender.capture()},move:function(e){o.verticalScrollbar.scrollTop(o.verticalScrollbar.scrollTop()-e.y.delta),r.scrollLeft(t,r.scrollLeft(t)-e.x.delta),e.preventDefault()}})),o.verticalScrollbar=e('<div class="k-scrollbar k-scrollbar-vertical" tabindex="-1"/>').css({width:l}).appendTo(a).on("scroll"+O,o._scroll.bind(o))},_wrapper:function(){Ut&&(this.wrapper.css({"overflow-y":se}),this.element.css(Gt?"padding-left":"padding-right",0))},_wheelScroll:function(e){if(!e.ctrlKey){var t=this.verticalScrollbar,o=t.scrollTop(),l=r.wheelDeltaY(e);!l||l>0&&0===o||l<0&&o+t[0].clientHeight==t[0].scrollHeight||(e.preventDefault(),this.verticalScrollbar.scrollTop(o+-l))}},_scroll:function(e){var t=this,r=!t.options.prefetch,o=e.currentTarget.scrollTop,l=t.dataSource,a=t.itemHeight,i=l.skip()||0,n=t._rangeStart||i,s=t.element.innerHeight(),d=!!(t._scrollbarTop&&t._scrollbarTop>o),c=S.max(S.floor(o/a),0),u=d?S.ceil(s/a):S.floor(s/a),p=S.max(c+u,0);t._preventScroll?t._preventScroll=!1:(t._prevScrollTop=t._scrollTop,t._scrollTop=o-n*a,t._scrollbarTop=o,t._scrolling=r,t._fetch(c,p,d)||(t.wrapper[0].scrollTop=t._scrollTop),t.trigger(se),r&&(t._scrollingTimeout&&clearTimeout(t._scrollingTimeout),t._scrollingTimeout=setTimeout((function(){t._scrolling=!1,t._page(t._rangeStart,t.dataSource.take())}),100)))},scrollToTop:function(){this._scrollTo(0)},scrollToBottom:function(){var e=this.verticalScrollbar;this._scrollTo(e[0].scrollHeight-e.height())},_scrollWrapperToTop:function(){this.wrapper.scrollTop(0)},_scrollWrapperToBottom:function(){this.wrapper.scrollTop(this.wrapper[0].scrollHeight)},_scrollWrapperOnColumnResize:function(){var e=this,t=this.wrapper,o=t.scrollTop();t[0].scrollWidth>t[0].clientWidth?(!e._wrapperScrolled&&o||e._isScrolledToBottom())&&(t.scrollTop(o+r.support.scrollbar()),e._scrollTop=t.scrollTop(),e._wrapperScrolled=!0):e._wrapperScrolled&&(e._isWrapperScrolledToBottom()||(t.scrollTop(o-r.support.scrollbar()),e._scrollTop=t.scrollTop()),e._wrapperScrolled=!1)},_scrollTo:function(e,t){var r=this,o=r.verticalScrollbar;o.scrollTop()!==e&&(r._preventScroll=!0),r.wrapper.scrollTop(e),r._scrollTop=r.wrapper.scrollTop(),o.scrollTop(t??e),r._scrollbarTop=o.scrollTop()},_isScrolledToTop:function(){return 0===this.verticalScrollbar.scrollTop()},_isScrolledToBottom:function(){var e=this.verticalScrollbar,t=e.scrollTop();return t>0&&t>=parseInt(e[0].scrollHeight-e.height(),10)},_isWrapperScrolledToBottom:function(){var e=this.wrapper;return e.scrollTop()>=parseInt(e[0].scrollHeight-e.height(),10)},itemIndex:function(e){return(this._rangeStart||this.dataSource.skip()||0)+e},position:function(e){var t,r=this._rangeStart||this.dataSource.skip()||0,o=this.dataSource.pageSize();return(t=e>r?e-r:r-e-1)>o?o:t},scrollIntoView:function(e){var t=this.wrapper[0],r=t.clientHeight,o=this._isScrolledToBottom()?t.scrollTop:this._scrollTop||t.scrollTop,l=e[0].offsetTop,a=e[0].offsetHeight;o>l?this.verticalScrollbar[0].scrollTop-=r/2:l+a>=o+r&&(this.verticalScrollbar[0].scrollTop+=r/2)},_fetch:function(t,r,o){var l=this,a=l.dataSource,i=l.itemHeight,n=a.take(),s=l._rangeStart||a.skip()||0,d=S.floor(t/n)*n,c=!1,u=l.verticalScrollbar,p=Nt.webkit?1:0,h=a._isGroupPaged()?a.groupsTotal(!0):a.total();return t<s?(c=!0,l._alwaysScrollTop?(s=S.min(t,h-n),l._scrollTop=0):(s=S.max(0,r-n),l._scrollTop=u.scrollTop()-s*i),l._page(s,n)):r>=s+n&&!o?(c=!0,s=S.min(t,h-n),u.scrollTop()>=u[0].scrollHeight-u[0].offsetHeight-p?l._scrollTop=l.wrapper[0].scrollHeight-l.wrapper[0].offsetHeight:l.dataSource._isGroupPaged()&&t>=h-n?l._scrollTop=l.wrapper[0].scrollHeight-l.wrapper[0].offsetHeight-(l._scrollTop-l._prevScrollTop):l._alwaysScrollTop?l._scrollTop=0:l._scrollTop=i,l._page(s,n)):!l._fetching&&l.options.prefetch&&(t<d+n-.33*n&&t>n&&a.prefetch(d-n,n,e.noop),r>d+.33*n&&a.prefetch(d+n,n,e.noop)),c},fetching:function(){return this._fetching},_page:function(t,r,o){var l=this,a=!l.options.prefetch,i=l.dataSource,n=i._isGroupPaged();o=v(o)?o:e.noop,l.trigger(ie,{skip:t,take:r})||(clearTimeout(l._timeout),l._fetching=!0,l._rangeStart=t,n&&i._groupRangeExists(t,t+r)||!n&&i.inRange(t,r)?(l.trigger(ce),i.range(t,r,(function(){l.trigger(ue),o(),l.trigger(ae)}),"page")):(a||l.trigger(ce),l._timeout=setTimeout((function(){l._scrolling||(a&&l.trigger(ce),i.range(t,r,(function(){l.trigger(ue),o(),l.trigger(ae)})))}),100)))},repaintScrollbar:function(t){var o,l,a=this,i=a.options.maxScrollHeight,n=a.dataSource,s=r.support.kineticScrollNeeded?0:r.support.scrollbar(),d=a.wrapper[0],c=a._isScrolledToBottom();l=a.itemHeight=a.options.itemHeight()||0;var u=d.scrollWidth>d.offsetWidth?s:0;o=(n._isGroupPaged()?n.groupsTotal(!0):n.total())*l+u;var p=e(new Array(S.floor(o/i)+1).join("<div></div>")).css({width:"1px",height:`${i}px`});o%i&&(p=p.add(e("<div></div>").css({width:"1px",height:o%i+"px"}))),a.verticalScrollbar.empty().append(p),!c||a._isScrolledToBottom()||a.dataSource._isGroupPaged()||a.scrollToBottom(),void 0!==a._scrollTop&&t&&(d.scrollTop=a._scrollTop,a._scrollWrapperOnColumnResize())},refresh:function(e){var t=this,r=t.dataSource,o=t._rangeStart,l=(e||{}).action,a=t._isScrolledToBottom()||!l||l!==le&&l!==G&&l!==de;t.trigger(ue),clearTimeout(t._timeout),t.repaintScrollbar(a),t.drag&&t.drag.cancel(),void 0===o||t._fetching||((!l||l!==de&&l!==le&&"expandGroup"!==l)&&(t._rangeStart=r.skip()),1!==r.page()||l&&(l===de||l===le||"expandGroup"===l||"collapseGroup"===l)||(t.verticalScrollbar[0].scrollTop=0)),t._programmaticallyScrolling&&"resolved"!==t._programmaticallyScrolling.state()&&t._programmaticallyScrolling.resolve(),t._alwaysScrollTop&&delete t._alwaysScrollTop,t._fetching=!1}});function tr(e,t){return"["+r.attr(e)+"="+t+"]"}function rr(e){return new Array(e+1).join('<td class="k-group-cell k-table-group-td k-table-td">&nbsp;</td>')}function or(e){var t,r=" ";if(e){if(typeof e===rt)return e;for(t in e)""!==e[t]&&(r+=t+'="'+e[t]+'"')}return r}var lr={create:{text:"Add new record",className:"k-grid-add",iconClass:"k-i-plus"},cancel:{text:"Cancel changes",className:"k-grid-cancel-changes",iconClass:"k-i-cancel"},save:{text:"Save changes",className:"k-grid-save-changes",iconClass:"k-i-check"},destroy:{text:"Delete",className:"k-grid-remove-command",iconClass:"k-i-x"},edit:{text:"Edit",className:"k-grid-edit-command",iconClass:"k-i-pencil",themeColor:"primary"},update:{text:"Save",className:"k-grid-save-command",iconClass:"k-i-save",themeColor:"primary"},canceledit:{text:"Cancel",className:"k-grid-cancel-command",iconClass:"k-i-cancel"},excel:{text:"Export to Excel",className:"k-grid-excel",iconClass:"k-i-file-excel"},pdf:{text:"Export to PDF",className:"k-grid-pdf",iconClass:"k-i-file-pdf"},search:{text:"Search...",className:"k-grid-search"},columns:{text:"Columns",type:"button",icon:"columns",fillMode:"flat",overflow:"never",className:"k-grid-column-menu",attr:{"aria-haspopup":"menu"}}};function ar(t,r){e("th, th .k-grid-filter-menu, th .k-link",t).add(document.body).css("cursor",r)}function ir(t,r,o,l,a){var i=r;r=e(),a=a||1;for(var n=0;n<a;n++)r=r.add(t.eq(i+n));"number"==typeof o?r[l?"insertBefore":"insertAfter"](t.eq(o)):r.appendTo(o)}function nr(t,r,o){return e(t).add(r).find(o)}function sr(e,t,r){var o,l,a,i;for(o=0,l=(r=b(r)?r:[r]).length;o<l;o++)a=r[o],h(a)&&a.click&&(i=a.name||a.text,t.on(Ne+O,".k-grid-"+(i||"").replace(/\s/g,""),{commandName:i},a.click.bind(e)))}function dr(e,o,l,a,i){return g(e,(function(e){var n;(e=typeof e===rt?{field:e}:e).parentIds=i,e.attributes instanceof Function&&(e._attributesFunction=e.attributes),!_r(e)||l?(e.attributes=io(e.attributes),e.footerAttributes=io(e.footerAttributes),e.headerAttributes=io(e.headerAttributes),n=!0):!_r(e)&&l||(e.attributes=no(e.attributes),e.footerAttributes=no(e.footerAttributes),e.headerAttributes=no(e.headerAttributes),n=t);var s=r.guid();return a&&!e.locked&&(e.locked=a),e.headerAttributes=f({headers:i},e.headerAttributes),e.headerAttributes.id?e.uid=s=e.headerAttributes.id:(e.headerAttributes=f({id:s},e.headerAttributes),e.uid=s),e.columns&&(e.columns=dr(e.columns,o,n,e.locked,i?i+" "+s:s)),f({encoded:o,hidden:n,locked:a},e)}))}function cr(e,t){var r=[];return ur(e,t,r),r[r.length-1]}function ur(e,t,r){r=r||[];for(var o=0;o<t.length;o++){if(e===t[o])return!0;if(t[o].columns){var l=r.length;if(r.push(t[o]),ur(e,t[o].columns,r))return!0;r.splice(l,r.length-l)}}return!1}function pr(e,t){hr(e,t,t)}function hr(e,t,r){var o=r?no:io;e.hidden=!t,e.attributes=o(e.attributes),e.footerAttributes=o(e.footerAttributes),e.headerAttributes=o(e.headerAttributes)}function fr(e,t){gr(e),hr(e,t,e._hideByMedia?e.matchesMedia:t)}function gr(e){e.matchesMedia=mr(e)}function mr(e){return e&&(wr(e.media)||!wr(e.media)&&r.matchesMedia(e.media))}function br(){return this.style.display!==Rt&&!this.classList.contains("k-hidden")}function _r(e){return kr([e]).length>0}function kr(e){return m(e,(function(e){var t=!e.hidden&&!1!==e.matchesMedia;return t&&e.columns&&(t=kr(e.columns).length>0),t}))}function vr(e){for(var t,r=[],o=0;o<e.length;o++){if(!wr((t=e[o]).media)){if(!wr(t.minScreenWidth))throw new Error("Using 'media' and 'minScreenWidth' options at the same time is not supported.");r.push(t)}t.columns&&(r=r.concat(vr(t.columns)))}return r}function wr(e){return void 0===e}function Cr(t){return e(t).map((function(){return this.toArray()}))}function yr(e,t){for(var r=0;r<e.length;r++)if(e[r].field==t)return e[r]}function Sr(t,r,o,l,a,i,n,s){var d=Tr(t),c=Tr([r]);if(d>c){var u=new Array(n+1).join('<th class="k-group-cell k-header k-table-th" scope="col">&nbsp;</th>'),p=i.children(":not(.k-filter-row)");e(new Array(d-c+1).join("<tr class='k-table-row'>"+u+"</tr>")).insertAfter(p.last())}!function(e,t){for(var r=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)"),o=0;o<r.length;o++)r[o].rowSpan+=t}(i,d-c),Hr(o,l,a,i,s)}function xr(t,o,l){var a;l=l||0;var i=o;o=Zr(o);for(var n={},s=t.find(">tr:not(.k-filter-row)"),d=function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")},c=0,u=o.length;c<u;c++)n[(a=Rr(o[c],i)).row]||(n[a.row]=s.eq(a.row).find(x+Te).filter(d)),n[a.row].eq(a.cell).attr(r.attr("index"),l+c);return o.length}function Tr(e){for(var t=0,r=0;r<e.length;r++)if(e[r].columns){var o=Tr(e[r].columns);o>t&&(t=o)}return 1+t}function Hr(t,r,o,l,a){var i,n=Ar(t[0],r),s=o.find(">tr:not(.k-filter-row)").eq(n.row).children("th.k-header:not(.k-group-cell)"),d=e(),c=n.cell;for(i=0;i<t.length;i++)d=d.add(s.eq(c+i));l.find(">tr:not(.k-filter-row)").eq(n.row)[a](d);var u=[];for(i=0;i<t.length;i++)t[i].columns&&(u=u.concat(t[i].columns));u.length&&Hr(u,r,o,l,a)}function Rr(e,t,r,o){var l,a;for((o=o||{})[r=r||0]=o[r]||0,a=0;a<t.length;a++){if(t[a]==e){l={cell:o[r],row:r};break}if(t[a].columns&&(l=Rr(e,t[a].columns,r+1,o)))break;o[r]++}return l}function Er(e){let t=e,r=t.match(/class=["][^"]+/g);if(r){const e=r[0].split('"').pop();t=t.replace(e,e+" k-table-td")}else t=t.replace("<td","<td class='k-table-td'");return t}function Ir(e,t,r,o,l){if(t.columns)return(t=t.columns)[o?0:t.length-1];var a,i=cr(t,e);a=i?i.columns:e;var n=_(t,a);0===n&&o?n++:n==a.length-1&&!o||!r.locked&&!t.columns&&!o?n--:(n>0||0===n&&!o)&&n++,t=function(e,t,r,o){var l,a,i=!!r.locked;do{l=e[t],t+=o?1:-1,a=!!l.locked}while(l&&t>-1&&t<e.length&&l!=r&&!l.columns&&a===i);return l}(a,n,r,_(r,a)>n);var s=_(t,l);return(!t.columns||s&&s!==a.length-1)&&t&&t!=r&&t.columns?Ir(e,t,r,o,l):null}function Ar(e,t,r,o){var l,a;for((o=o||{})[r=r||0]=o[r]||0,a=0;a<t.length;a++){if(t[a]==e){l={cell:o[r],row:r};break}if(t[a].columns&&(l=Ar(e,t[a].columns,r+1,o)))break;t[a].hidden||o[r]++}return l}function zr(e){return Fr(Nr(e)).concat(Fr(jr(e)))}function Dr(e,t,r,o){var l=e[r],a=e[o],i=cr(l,t);return t=i?i.columns:t,_(a,t)}function Fr(e){for(var t=[],r=[],o=0;o<e.length;o++)t.push(e[o]),e[o].columns&&(r=r.concat(e[o].columns));return r.length&&(t=t.concat(Fr(r))),t}function Mr(e){for(var t,r=0,o=0;o<e.length;o++)(t=e[o]).columns?r+=Mr(t.columns):t.hidden&&r++;return r}function Lr(e){for(var t=0,r=0,o=e.length;r<o;r++)e[r].hidden||(t+=parseInt(e[r].width,10));return t}function qr(e){for(var t,r=0,o=0,l=e.length;o<l;o++)(t=e[o].style.width)&&-1==t.indexOf("%")&&(r+=parseInt(t,10));return r}function Pr(t){for(var r=t.find("tr:not(.k-filter-row)"),o=r.filter((function(){return!e(this).children().length})).remove().length,l=r.find("th:not(.k-group-cell,.k-hierarchy-cell)"),a=0;a<l.length;a++)l[a].rowSpan>1&&(l[a].rowSpan-=o);return r.length-o}function Or(e,t,r,o,l){var a,i,n,s=[];for(a=0,n=e.length;a<n;a++)(i=r[o]||[]).push(t.eq(l+a)),r[o]=i,e[a].columns&&(s=s.concat(e[a].columns));s.length&&Or(s,t,r,o+1,l+e.length)}function Vr(e,t,r){e.css({left:t,right:r})}function Br(e,t,r){e[t]=e[t]||{},e[t][r]=e[t][r]||""}function Wr(e,t,r,o){Br(e,t,r),""!==e[t][r]?e[t][r]+=" "+o:e[t][r]=o}function Gr(e,t,r,o,l){Br(e,t,r),l?delete e[t][r]:e[t][r]=e[t][r].replace(o,"")}function Nr(e){return m(e,(function(e){return e.locked}))}function jr(e){return m(e,(function(e){return!e.locked}))}function Ur(e){return m(e,(function(e){return e.sticky&&!e.locked}))}function Kr(e){return m(e,(function(e){return!e.locked&&_r(e)}))}function $r(e){return m(e,(function(e){return e.locked&&_r(e)}))}function Qr(e){for(var t=[],r=0;r<e.length;r++)e[r].hidden||(e[r].columns?t=t.concat(Qr(e[r].columns)):t.push(e[r]));return t}function Yr(e){for(var t=[],r=0;r<e.length;r++)e[r].hidden||(e[r].columns?t=t.concat(Qr(e[r].columns)):t.push({field:e[r].field,width:e[r].width,values:e[r].values,title:e[r].title}));return t}function Jr(e){for(var t=[],r=0;r<e.length;r++)e[r].columns&&(t=t.concat(e[r].columns));return t}function Xr(e){var t=Jr(e);return t=t.filter((function(e){return!e.hidden}))}function Zr(e){for(var t=[],r=0;r<e.length;r++)e[r].columns?t=t.concat(Zr(e[r].columns)):t.push(e[r]);return t}function eo(e){var t=[];e=Zr(e);for(var r=0;r<e.length;r++)"string"==typeof e[r]?t.push(e[r]):e[r].field&&t.push(e[r].field);return t}function to(e){return{field:e.field,title:e.title,format:e.format,editor:e.editor,values:e.values,editorOptions:f(!0,{format:e.format},e.editorOptions),label:e.title||e.field||""}}function ro(o){var l=o.find(">tr:not(.k-filter-row)"),a=function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")},i=e();l.length>1&&(i=l.find("th").filter(a).filter((function(){return this.rowSpan>1}))),i=i.add(l.last().find("th").filter(a));var n=r.attr("index");return[].sort.call(i,(function(r,o){r=e(r),o=e(o);var l=r.attr(n),a=o.attr(n);return l===t&&(l=e(r).index()),a===t&&(a=e(o).index()),(l=parseInt(l,10))>(a=parseInt(a,10))?1:l<a?-1:0}))}function oo(t){var r=t.closest("table"),o=e().add(t),l=t.closest(mt),a=r.find("tr:not(.k-filter-row)"),i=a.index(l);if(i>0){for(var n=a.eq(i-1).find("th:not(.k-group-cell,.k-hierarchy-cell)").filter((function(){return!e(this).attr("rowspan")})),s=0,d=l.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(t),c=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)").filter((function(){return this.colSpan>1})),u=0;u<c.length;u++)s+=c[u].colSpan||1;for(d+=Math.max(s-1,0),s=0,u=0;u<n.length;u++){var p=n.eq(u);if(p.attr("data-colspan")?s+=p[0].getAttribute("data-colspan"):s+=1,d>=u&&d<s){o=oo(p).add(o);break}}}return o}function lo(t){var o=t.closest("thead"),l=e().add(t),a=t.closest(mt),i=o.find("tr:not(.k-filter-row)"),n=i.index(a)+t[0].rowSpan,s=r.attr("colspan");if(n<=i.length-1){var d,c=a.next(),u=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)");u=u.filter((function(){return!this.rowSpan||1===this.rowSpan}));var p=0;for(d=0;d<u.length;d++)p+=parseInt(u.eq(d).attr(s),10)||1;var h=c.find("th:not(.k-group-cell,.k-hierarchy-cell)"),f=parseInt(t.attr(s),10)||1;for(d=0;d<f;){c=h.eq(d+p),l=l.add(lo(c));var g=parseInt(c.attr(s),10);g>1&&(f-=g-1),d++}}return l}function ao(t,o,l,a){var n,s=t;if(i){let o=e(l);r.applyStylesFromKendoAttributes(o,["display","left","right"]),t.empty(),o.each(((e,r)=>t[0].appendChild(r)))}else(n=document.createElement(bt)).innerHTML="<table class='k-grid-table k-table'><tbody class='k-table-tbody'>"+l+"</tbody></table>",e(n).find("table").addClass(r.getValidCssClass("k-table-","size",a)),t=n.firstChild.firstChild,o[0].replaceChild(t,s[0]),t=e(t);return t}function io(e){e=e||{};let t={};return t[r.attr("style-display")]="none",f({},e,t)}function no(e){return delete(e=e||{})[r.attr("style-display")],e}function so(t,o,l,a){var i,n=t.find(">colgroup"),s=g(o,(function(e){return(i=e.width)&&0!==parseInt(i,10)?r.format(`<col ${r.attr("style-width")}="{0}" ${e.draggable?"class=k-drag-col":""} />`,typeof i===rt?i:i+gt):e.draggable?"<col class='k-drag-col' />":"<col />"}));(l||n.find(".k-hierarchy-col").length)&&s.splice(0,0,'<col class="k-hierarchy-col" />'),n.length&&n.remove(),n=e(new Array(a+1).join('<col class="k-group-col">')+s.join("")),r.applyStylesFromKendoAttributes(n,["width"]),n.is("colgroup")||(n=e("<colgroup/>").append(n)),t.prepend(n)}function co(e){var t,r,o,l={};for(r=0,o=e.length;r<o;r++)l[(t=e[r]).value]=t.text;return l}function uo(e,t,o,l){let a=o&&o.length&&h(o[0])&&"value"in o[0]?co(o)[e]:e;a=null!=a?a:"";let i=!1===l?a:r.htmlEncode(a);return t?r.format(t,i):i}function po(e,t,r){for(var o,l=0,a=e[l];a;){if(o=!!r||a.style.display!==Rt,r&&a.classList.contains("k-hidden")&&a.classList.remove("k-hidden"),o&&!Mt.test(a.className)&&--t<0){a.style.display=r?"":Rt;break}a=e[++l]}}function ho(t,r){for(var o,l,a=0,i=t.length;a<i;a+=1)(l=t.eq(a)).is(".k-grouping-row,.k-detail-row")?(o=l.children(":not(.k-group-cell):first,.k-detail-cell").last()).attr("colspan",parseInt(o.attr("colspan"),10)-1):(l.hasClass("k-grid-edit-row")&&(o=l.children(".k-edit-container")[0])&&((o=e(o)).attr("colspan",parseInt(o.attr("colspan"),10)-1),o.find("col").eq(r).remove(),l=o.find(mt).first()),po(l[0].cells,r,!1))}function fo(e){for(var t,r=[],o=0;o<e.length&&("field"in(t=e[o])&&"value"in t&&"items"in t);o++)r.push(t),t.hasSubgroups&&(r=r.concat(fo(t.items)));return r}function go(t,r){for(var o,l,a=0,i=t.length;a<i;a+=1)(l=t.eq(a)).is(".k-grouping-row,.k-detail-row")?(o=l.children(":not(.k-group-cell):first,.k-detail-cell").last()).attr("colspan",parseInt(o.attr("colspan"),10)+1):(l.hasClass("k-grid-edit-row")&&(o=l.children(".k-edit-container")[0])&&((o=e(o)).attr("colspan",parseInt(o.attr("colspan"),10)+1),so(o.find(">form>table"),kr(undefined),!1,0),l=o.find(mt).first()),po(l[0].cells,r,!0))}function mo(e,t,r){var o,l,a;for(r=r||1,l=0,a=e.length;l<a;l++)(o=e.eq(l).children(":not([hidden])").last()).attr("colspan",parseInt(o.attr("colspan"),10)+r),(o=t.eq(l).children(":not([hidden])").last()).attr("colspan",parseInt(o.attr("colspan"),10)-r)}function bo(e){var t,r,o=0,l=e.find(">colgroup>col");for(t=0,r=l.length;t<r;t+=1)o+=parseInt(l[t].style.width,10);return o}var _o=r.ui.DataBoundWidget.extend({init:function(t,o,l){var a=this;o=b(o)?{dataSource:o}:o,s.fn.init.call(a,t,o),l&&(a._events=l),Gt=r.support.isRtl(t),q=Gt?"a[class*='-i-caret-alt-left']":P,a._element(),a._ariaId(),a._columns(e.extend(!0,[],a.options.columns)),a._foreignKeyPromises?e.when.apply(null,a._foreignKeyPromises).then((function(){a._foreignKeyPromises=null,a._continueInit()})):a._continueInit()},_continueInit:function(){var t=this;t._dataSource(),t._stickyColumns(),t._tbody(),t._thead(),t._rowResizing(),t._groupable(),t._toolbar();let o=t.wrapper.find(".k-grid-toolbar .k-toolbar-button.k-grid-column-menu[ref-toolbar-tool]");o.length>0&&t._globalColumnsMenu(o),t._pageable(),t._setContentHeight(),t._templates(),t._navigatable(),t._initSelectableAggregates(),t._selectable(),t._statusBar(),t._clipboard(),t._paste(),t._details(),t._editable(),t._attachCustomCommandsEvent(),t._adaptiveColumns(),t._minScreenSupport(),t.options.autoBind?t.dataSource.fetch():(t._group=t._groups()>0,t._footer()),t.options.contextMenu&&t._initContextMenu(),t.lockedContent&&(t.wrapper.addClass("k-grid-lockedcolumns"),t._resizeHandler=function(){t.resize()},e(window).on("resize"+O,t._resizeHandler)),t._initLoader(),r.notify(t),t._showWatermarkOverlay&&t._showWatermarkOverlay(t.wrapper[0])},events:[J,Y,"dataBinding","cancel",te,re,oe,N,j,K,U,$,V,B,W,G,ee,Q,Me,Le,qe,Z,X,Pe,Oe,Ve,Be,We,Ge,ne,"page","sort","filter","group","groupExpand","groupCollapse","kendoKeydown"],setDataSource:function(e){var t,o=this,l=o.options.scrollable;o.options.dataSource=e,o._dataSource(),o._pageable(),o._thead(),o._rowResizing(),l&&(l.virtual?(t=o.content.find(">.k-virtual-scrollable-wrap"),r.scrollLeft(t,To(t,Gt))):(t=o.tbody,r.scrollLeft(o.content,To(t,Gt)))),o.options.groupable&&o._groupable(),o.virtualScrollable&&o.virtualScrollable.setDataSource(o.options.dataSource),o.options.navigatable&&o._navigatable(),o.options.selectable&&o._selectable(),o.options.autoBind?o.dataSource.fetch():o._footer()},options:{name:"Grid",columns:[],toolbar:null,autoBind:!0,filterable:!1,scrollable:!0,sortable:!1,selectable:!1,allowCopy:!1,allowPaste:!1,navigatable:!1,pageable:!1,persistSelection:!1,editable:!1,encodeTitles:!1,groupable:!1,rowTemplate:"",altRowTemplate:"",statusBarTemplate:null,search:!1,noRecords:!1,dataSource:{},height:null,resizable:!1,reorderable:!1,columnMenu:!1,detailTemplate:null,contextMenu:!1,columnResizeHandleWidth:3,size:"medium",mobile:"",loaderType:"loadingPanel",messages:{loader:{loading:"Loading...",exporting:"Exporting..."},editable:{cancelDelete:"Cancel",confirmation:"Are you sure you want to delete this record?",confirmDelete:"Delete"},commands:{create:lr.create.text,cancel:lr.cancel.text,save:lr.save.text,destroy:lr.destroy.text,edit:lr.edit.text,update:lr.update.text,canceledit:lr.canceledit.text,excel:lr.excel.text,pdf:lr.pdf.text,search:lr.search.text,columns:lr.columns.text,select:"Select",selectRow:"Select Row",selectAllRows:"All rows",clearSelection:"Clear selection",copySelection:"Copy selection",copySelectionNoHeaders:"Copy selection (No Headers)",paste:"Paste (use CTRL/⌘ + V)",reorderRow:"Reorder row",reorderRowUp:"Up",reorderRowDown:"Down",reorderRowTop:"Top",reorderRowBottom:"Bottom",exportPdf:"Export to PDF",exportExcel:"Export to Excel",exportToExcelAll:"All",exportToExcelSelection:"Selection",exportToExcelSelectionNoHeaders:"Selection (No Headers)",sortAsc:"Sort Ascending",sortDesc:"Sort Descending",moveGroupPrevious:"Move previous",moveGroupNext:"Move next"},noRecords:"No records available.",expandCollapseColumnHeader:"",groupHeader:"Press ctrl + space to group",ungroupHeader:"Press ctrl + space to ungroup",itemsSelected:"items selected",dragHandleLabel:"Drag row",toolbarLabel:"grid toolbar",groupingHeaderLabel:"grid grouping header",filterCellTitle:"filter cell"},width:null},destroy:function(){var t,o,l=this;if(l._destroyColumnAttachments(),s.fn.destroy.call(l),this._navigatableTables&&(this._navigatableTables.off(O),this._navigatableTables=null,this._headertables=null),l._resizeHandler&&e(window).off("resize"+O,l._resizeHandler),l.pager&&l.pager.element&&l.pager.destroy(),l.timer&&clearTimeout(l.timer),l._progressTimeOut&&clearTimeout(l._progressTimeOut),l._collapseGroupsTimeOut&&clearTimeout(l._collapseGroupsTimeOut),l._endlessFetchTimeOut&&clearTimeout(l._endlessFetchTimeOut),l.pager=null,l._destroyGroupable(),(o=l.wrapper.data("kendoReorderable"))&&o.destroy(),(o=l.tbody?l.tbody.data("kendoReorderable"):null)&&o.destroy(),l.allowPaste){(l.content||l.table).off(ne+O,l.pasteHandler),l.unbind(l.pasteHandler)}l.pasteActionsDropDownList&&(l.pasteActionsDropDownList.destroy(),l.pasteActionsDropDownList=null),l.selectable&&l.selectable.element&&(l.selectable.destroy(),l.clearArea(),l._selectedIds=null,l.copyHandler&&(l.wrapper.off("keydown",l.copyHandler),l.unbind(l.copyHandler)),l.updateClipBoardState&&(l.unbind(l.updateClipBoardState),l.updateClipBoardState=null),l.clearAreaHandler&&l.wrapper.off("keyup",l.clearAreaHandler)),l.selectable=null,l._selectableAggregatesOptions=null,l.resizable&&(l.resizable.destroy(),l._resizeUserEvents&&(l._resizeHandleDocumentClickHandler&&e(document).off("click",l._resizeHandleDocumentClickHandler),l._resizeUserEvents.destroy(),l._resizeUserEvents=null),l.resizable=null),l._destroyRowResizing(),l._destroyVirtualScrollable(),l.editableUserEvents&&(l.editableUserEvents.destroy(),l.editableUserEvents=null),l._lockedContentUserEvents&&(l._lockedContentUserEvents.destroy(),l._lockedContentUserEvents=null),l._destroyEditable(),l.dataSource&&(l.dataSource.unbind(J,l._refreshHandler).unbind(T,l._progressHandler).unbind(H,l._errorHandler).unbind(ct,l._clearSortClasses),l._refreshHandler=l._progressHandler=l._errorHandler=l._sortHandler=null),t=l.element.add(l.wrapper).add(l.table).add(l.thead).add(l.wrapper.find(">.k-grid-toolbar")),l.content&&(t=t.add(l.content).add(l.content.find(">.k-virtual-scrollable-wrap"))),l.scrollables&&l.scrollables.first()&&(t=t.add(l.scrollables.first())),l.lockedHeader&&l._removeLockedContainers(),l.pane&&l.pane.destroy(),l._isMobile&&(l.wrapper.off("transitionend"+O),l.wrapper.off("contextmenu"+O)),l.minScreenResizeHandler&&e(window).off("resize",l.minScreenResizeHandler),l._detachColumnMediaResizeHandler(),l._draggableInstance&&l._draggableInstance.element&&l._draggableInstance.destroy(),l._draggableInstance=null,l._draggableRowsInstance&&l._draggableRowsInstance.element&&l._draggableRowsInstance.destroy(),l.tbodyContextMenu&&l.tbodyContextMenu.destroy(),l.theadContextMenu&&l.theadContextMenu.destroy(),l.loader&&l.loader.destroy(),l._draggableRowsInstance=null,t.off(O),r.destroy(l.wrapper),l.rowTemplate=l.altRowTemplate=l.lockedRowTemplate=l.lockedAltRowTemplate=l.detailTemplate=l.footerTemplate=l.groupFooterTemplate=l.lockedGroupFooterTemplate=l.noRecordsTemplate=null,l.scrollables=l.thead=l.tbody=l.element=l.table=l.content=l.statusBar=l.footer=l.wrapper=l.lockedTable=l.lockedContent=l.lockedHeader=l.lockedFooter=l._groupableClickHandler=l._groupRows=l._setContentWidthHandler=l.loaderOverlay=l.wrapperClone=null},getOptions:function(){this.options.dataSource=null;var t=f(!0,{},this.options);t.columns=r.deepExtend([],this.columns);var o=this.dataSource,l=o.options.data&&o._data;return o.options.data=null,t.dataSource=e.extend(!0,{},o.options),o.options.data=l,t.dataSource.data=l,t.dataSource.page=o.page(),t.dataSource.filter=e.extend(!0,{},o.filter()),t.dataSource.pageSize=o.pageSize(),t.dataSource.sort=o.sort(),t.dataSource.group=o.group(),t.dataSource.aggregate=o.aggregate(),t.dataSource.transport&&(t.dataSource.transport.dataSource=null),t.pageable&&t.pageable.pageSize&&(t.pageable.pageSize=o.pageSize()),t},setOptions:function(e){var t=this.getOptions();r.deepExtend(t,e),e.dataSource?e.dataSource.filter&&(t.dataSource.filter=e.dataSource.filter):t.dataSource=this.dataSource;var o=this.wrapper,l=this._events,a=this.element;if(this.destroy(),this.options=null,this._isMobile){var i=o.closest(r.roleSelector("pane")).parent();i.after(o),i.remove(),o.removeClass("k-grid-mobile")}o[0]!==a[0]&&(o.before(a),o.remove()),a.empty(),this.init(a,t,l),this._setEvents(t)},items:function(){return this.lockedContent?this._items(this.tbody).add(this._items(this.lockedTable.children("tbody"))):this._items(this.tbody)},_items:function(t,r){return t.children().filter((function(){var t=e(this);return!((r?t.hasClass("k-detail-row"):t.hasClass(De))||t.hasClass("k-detail-row")||t.hasClass("k-group-footer"))}))},dataItems:function(){var e=r.ui.DataBoundWidget.fn.dataItems.call(this);if(this.lockedContent){for(var t=e.length,o=new Array(2*t),l=t;--l>=0;)o[l]=o[l+t]=e[l];e=o}return e},_destroyColumnAttachments:function(){var t=this;t.resizeHandle=null,t.thead&&t.thead.add(t.lockedHeader).find("th").each((function(){var t=e(this),r=t.data("kendoFilterMenu"),o=t.data("kendoColumnSorter"),l=t.data("kendoColumnMenu");r&&r.destroy(),o&&o.destroy(),l&&l.destroy()}))},_attachCustomCommandsEvent:function(){var e,t,r,o=this,l=Zr(o.columns||[]);for(t=0,r=l.length;t<r;t++)(e=l[t].command)&&sr(o,o.wrapper,e)},_aria:function(){var e,t,o,l,a,i=this.wrapper,n=this._hasDetails()?"treegrid":this.options.navigatable?"grid":null,s=this.table,d=i.find(".k-grid-toolbar"),c=i.find(".k-grouping-header"),u=this._ariaGridId(),p=s.attr(et),h=this.thead.find(mt).length+this.wrapper.find(".k-grid-footer-wrap table tr").length,f=this._trailingColumns(),g=this.virtualScroll,m=this.options.pageable;s.attr(et,p>=0?p:0),n&&s.attr(Ht,n),s.find("tbody, thead, tfoot").attr(Ht,It),s.find(mt).attr(Ht,Et),s.find("th").attr(Ht,At),s.find("td").attr(Ht,zt),m&&this.dataSource.totalPages()>1||g&&g.rows?(a=this._groups()>0?-1:this._hasDetails()?h+2*this.dataSource.total():h+this.dataSource.total(),s.attr(vt,a)):this._hasDetails()&&(a=this._groups()>0?-1:h+2*this.dataSource.total(),s.attr(vt,a)),a&&a>0&&this._ariaRowIndex(),(g&&g.columns||!s.attr(wt)&&(s.find("td:not([group-header-spanned-hidden]):hidden").length>0||i.find(".k-grid-content-locked td:not([group-header-spanned-hidden]):hidden").length>0))&&(s.attr(wt,f+Zr(this.columns).length),this._ariaColumnIndex()),this.pager&&this.pager.element.attr("aria-controls",u),d.attr({role:"toolbar","aria-label":this.options.messages.toolbarLabel,"aria-controls":u}),c.attr({role:"toolbar","aria-label":this.options.messages.groupingHeaderLabel,"aria-controls":u}),t=this._ariaHeaderFooter("header","thead","th, td",At),o=this._ariaHeaderFooter("footer","tfoot","td",zt),i.find(".k-grid-content-locked").length>0&&this._ariaLockedContent(),(t||o)&&(l=[t,e=this.tbody.attr(ft)||r.guid(),o].join(" "),this.tbody.attr(ft,e),s.attr(kt,l)),this.options.groupable&&this._ariaGroupTitles()},_ariaColumnIndex:function(){var t,r,o,l,a=this._trailingColumns(),i=this.tbody.find(">tr").last().find("> td[data-virtual]"),n=this.thead.find(">tr").not(".k-filter-row"),s=this.wrapper.find(".k-grid-header-locked thead > tr").not(".k-filter-row"),d=Number.MAX_VALUE,c=0,u=0,p=0,h=0,f=function(r,o){var l=o.getAttribute("data-index"),a=Number(l),i=e(o).closest(".k-grid-header-locked");0===i.length&&a<d&&(d=a),i.length>0&&u<a&&(u=a),0===i.length&&c<a&&(c=a),null!==l?(o.setAttribute(Ct,Number(a)+1),t=Number(a)+1+o.getAttribute("colspan")):(o.setAttribute(Ct,t+1),t+=o.getAttribute("colspan"))};for(2===i.length?(p=Number(i[0].getAttribute("colspan")),h=Number(i[1].getAttribute("colspan"))):1===i.length&&0===i.prev().length?p=Number(i[0].getAttribute("colspan")):1===i.length&&1===i.prev().length&&(h=Number(i[0].getAttribute("colspan"))),r=0;r<s.length;r++)t=0,s.eq(r).find("th").each(f);for(r=0;r<n.length;r++)t=0,n.eq(r).find("th").each(f);for(r=0;r<=u;r++)o=r+a,this.wrapper.find(".k-grid-content-locked tbody > tr > td:nth-child("+(r+1)+")").attr(Ct,o+1);for(r=p;r<=c-d-h;r++)l=0===p?r+1:r-p+2,o=d+r+a,this.tbody.find("> tr > td:nth-child("+l+")").attr(Ct,o+1)},_ariaGroupTitles:function(){var e=this,t=e.dataSource.group(),o=e.wrapper.find(".k-grid-header th");o.each((function(t,r){r.getAttribute("title")===e.options.messages.ungroupHeader&&r.setAttribute("title",e.options.messages.groupHeader)})),t&&t.length>0&&t.forEach((function(t){var l=t.field,a=o.filter("["+r.attr("field")+"='"+l+"']");a.attr("title")===e.options.messages.groupHeader&&a.attr("title",e.options.messages.ungroupHeader)}))},_ariaHeaderFooter:function(e,t,o,l){var a,i=this.wrapper,n=i.find(".k-grid-"+e+" .k-grid-"+e+"-wrap table"),s=i.find(".k-grid-"+e+" .k-grid-"+e+"-locked table"),d="";return n.length>0&&(d=(a=n.find(t+", tbody")).attr(ft)||r.guid(),n.attr(Ht,Rt),n.find(mt).attr(Ht,Et),n.find(o).attr(Ht,l),a.attr({role:It,id:d})),s.length>0&&this._ariaLocked(e,t,o,l),s.find("td").attr(Ht,zt),n.find("td").attr(Ht,zt),d},_ariaId:function(){var e=this.element.attr(ft)||"aria";e&&(this._cellId=e+"_active_cell")},_ariaGridId:function(){var e=this.table,t=e.attr(ft);return t||(t=r.guid(),e.attr(ft,t)),t},_ariaLocked:function(t,r,o,l){var a=this,i=a.wrapper,n=i.find(".k-grid-"+t+" .k-grid-"+t+"-wrap table"),s=i.find(".k-grid-"+t+" .k-grid-"+t+"-locked table"),d=n.find(mt),c=s.find(mt);s.attr(Ht,Rt),s.find(r+", tbody").attr(Ht,Rt),c.attr(Ht,Rt),s.find(o).attr(Ht,l),d.each((function(r,l){var i=[];i=(i=a._cellsIds(c.eq(r).find(o),"locked_"+t,r)).concat(a._cellsIds(e(l).find(o),t,r)),l.setAttribute(kt,i.join(" "))}))},_ariaLockedContent:function(){var t=this,r=t.table.find(mt),o=t.wrapper.find(".k-grid-content-locked table"),l=o.find(mt);o.attr(Ht,Rt),o.find("tbody").attr(Ht,Rt),l.attr(Ht,Rt),o.find("td").attr(Ht,zt),r.each((function(r,o){var a=[];a=(a=t._cellsIds(l.eq(r).find("td"),"locked_datacell",r)).concat(t._cellsIds(e(o).find("td"),"datacell",r)),o.setAttribute(kt,a.join(" "))}))},_ariaAddHiddenColIndex:function(){var e=this.virtualScroll||{},t=this.columns,r=this.table,o=Zr(t).length;e.columns||r.attr(wt)||(this._ariaColumnIndex(),r.attr(wt,o))},_ariaRemoveHiddenColIndex:function(){var e=this.virtualScroll||{},t=Zr(this.columns).length;e.columns||t!==Qr(this.columns).length||(this.wrapper.find("td, th").removeAttr(Ct),this.table.removeAttr(wt))},_ariaRowIndex:function(){var e,t,r=this.thead.find(">tr"),o=r.length,l=this.tbody.find(">tr"),a=this.wrapper.find(".k-grid-footer-wrap tfoot > tr"),i=this.dataSource.total(),n=this.dataSource.skip()||0,s=1,d=!1;for(this._hasDetails()&&(i*=2,n*=2),e=0;e<o;e++)r.eq(e).attr(yt,s+e);for(s=o+n,e=0;e<l.length;e++)t=l.eq(e),this._hasDetails()&&t.hasClass("k-master-row")?(s+=d?2:1,d=!0):(s+=1,d=!1),t.attr(yt,s);for(s=o+i+1,e=0;e<a.length;e++)a.eq(e).attr(yt,s+e)},_cellsIds:function(e,t,r){var o=[],l=this._ariaGridId();return e.each((function(e,a){var i=a.getAttribute(ft)||l+"_"+t+"_"+r+"_"+e;a.setAttribute(ft,i),o.push(i)})),o},_trailingColumns:function(){return this._groups()+(this._hasDetails()?1:0)},_element:function(){const t=this;let o=t.element;o.is("table")||(o=t.options.scrollable?t.element.find("> .k-grid-content > table"):t.element.children("table"),o.length||(o=e("<table />").appendTo(t.element))),o.addClass("k-grid-table k-table"),o.addClass(r.getValidCssClass("k-table-","size",t.options.size)),t.table=o,t._wrapper()},_createResizeHandle:function(t,o){var l,a,i,n,s,d,u,p=this,h=p.options.columnResizeHandleWidth,f=p.options.scrollable,g=p.resizeHandle,m=3*h/2,b=0;g&&p.lockedContent&&g.data("th")[0]!==o[0]&&(g.off(O).remove(),g=null),g||(g=p.resizeHandle=e('<div class="k-resize-handle"><div class="k-resize-handle-inner"></div></div>'),t.append(g)),s=r.scrollLeft(t),Gt&&(Nt.mozilla||Nt.webkit&&Nt.version>=85)&&(s*=-1),n=parseFloat(t.css("borderLeftWidth")),d=o.offset().left+s-parseFloat(o.css("marginLeft"))-(t.offset().left+n),Gt?f&&(b=d<=s?m:0,(l=o.closest(".k-grid-header-wrap, .k-grid-header-locked"))[0].scrollWidth-l[0].offsetWidth,i=parseFloat(l.css("marginLeft")),a=Nt.msie?2*r.scrollLeft(l)+n-i-b:0,d-=-b+(Nt.mozilla?n-i-b:0)+a):d+=o[0].offsetWidth,u=o.offset().top-parseFloat(o.css("marginTop"))-(t.offset().top+parseFloat(t.css("borderTopWidth"))),g.css({top:u,left:d-m,height:c(o),width:3*h-b}).data("th",o).show(),g.off(Ye+O).on(Ye+O,(function(){p._autoFitLeafColumn(parseInt(o.attr(r.attr("index")),10))}))},_positionColumnResizeHandle:function(){var t=this,o=t.lockedHeader?t.lockedHeader.find("thead").first():e();t.thead.add(o).on(Qe+O,"tr:not(.k-filter-row) > th:not([data-resizable=false])",(function(o){var l=void 0!==o.buttons?o.buttons:o.which||o.button,a=e(this);a.hasClass("k-group-cell")||a.hasClass("k-hierarchy-cell")||void 0!==l&&0!==l||a[0].hasAttribute(r.attr("colSpan"))||t._createResizeHandle(a.closest(bt),a)}))},_resizeHandleDocumentClick:function(t){e(t.target).closest(".k-column-active").length||(e(document).off(t),this._resetResizeHandleHeader(),this._hideResizeHandle())},_resetResizeHandleHeader:function(){var t;this.resizeHandle&&(t=e(this.resizeHandle).data("th"))&&(t.find(x+we).find(x+Ce+","+x+ye).show(),t.find(x+Se).show(),t.find(x+He).show(),t.find(x+Re).show())},_hideResizeHandle:function(){this.resizeHandle&&(this.resizeHandle.data("th").removeClass("k-column-active"),this.lockedContent&&!this._isMobile?(this.resizeHandle.off(O).remove(),this.resizeHandle=null):this.resizeHandle.hide())},_positionColumnResizeHandleTouch:function(){var t=this,o=t.lockedHeader?t.lockedHeader.find("thead").first():e();t._resizeUserEvents=new r.UserEvents(o.add(t.thead),{filter:"th:not(.k-group-cell):not(.k-hierarchy-cell)",threshold:10,minHold:500,hold:function(r){var o=e(r.target);r.preventDefault(),t.resizeHandle&&(t.resizeHandle.data("th").removeClass("k-column-active"),t._resetResizeHandleHeader()),o.addClass("k-column-active"),o.find(x+we).find(x+Ce+","+x+ye).hide(),o.find(x+Se).hide(),o.find(x+He).hide(),o.find(x+Re).hide(),t._createResizeHandle(o.closest(bt),o),t._resizeHandleDocumentClickHandler||(t._resizeHandleDocumentClickHandler=t._resizeHandleDocumentClick.bind(t)),e(document).on("click",t._resizeHandleDocumentClickHandler)}})},resizeColumn:function(t,o){var l,a=this,i=!!t.locked,n=!!t.hidden,s=this.options,c=r.support.mobileOS?0:r.support.scrollbar(),u=_(t,i?$r(Qr(a.columns)):Kr(Qr(a.columns))),p=i?a.lockedTable:a.table,h=a.footer||e(),f=i?a.lockedHeader.find("table"):a.thead.closest("table"),g=t.minResizableWidth||10,m=d(i?p.find("tbody"):a.tbody);if(n)t.width=o>g?o:g;else{if(a.footer&&a.lockedContent&&(h=i?a.footer.children(".k-grid-footer-locked"):a.footer.children(".k-grid-footer-wrap")),l=s.scrollable?f.find("col:not(.k-group-col,.k-hierarchy-col)").eq(u).add(p.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(u)).add(h.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(u)):p.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(u),s.scrollable){var b=!1,k=a.wrapper.width()-c,v=o=o>g?o:g;i&&m-o+v>k&&((v=o+(k-m-2*c))<0&&(v=o),b=!0),v>10&&v>=g&&(l.css("width",v),m&&(v=b?k-2*c:m+(o-t.width),p.add(f).add(h).css("width",v),i||(a._footerWidth=v))),a._scrollVirtualWrapperOnColumnResize()}else o>10&&o>=g&&l.css("width",o);t.width=o,a._applyLockedContainersWidth(),a._syncLockedContentHeight(),a._syncLockedHeaderHeight(),a._updateStickyColumns()}},_adjustColWidths:function(t,r,o,l){const a={};t.add(r).add(o).css("width",l),t.add(r).add(o).find("col").each(((t,r)=>{a[t]=e(r).css("width")})),t.add(r).add(o).find("col").each(((t,r)=>{e(r).css("width",a[t])}))},_resizable:function(){var t,l,a,i,n,s,u,p,h=this,f=h.options,g=this._isMobile,m=r.support.mobileOS?0:r.support.scrollbar();(!0===f.resizable||f.resizable&&!0===f.resizable.columns)&&(t=f.scrollable?h.wrapper.find(".k-grid-header-wrap").first():h.wrapper,g?h._positionColumnResizeHandleTouch(t):h._positionColumnResizeHandle(t),h.resizable&&h.resizable.destroy(),h.resizable=new o.Resizable(t.add(h.lockedHeader),{handle:(f.scrollable?"":">")+".k-resize-handle",hint:function(t){return e('<div class="k-grid-resize-indicator" />').css({height:c(t.data("th"))+h.tbody.attr("clientHeight")})},start:function(t){p=e(t.currentTarget).data("th"),g&&h._hideResizeHandle();let r=p.closest("table"),o=e.inArray(p[0],ro(p.closest("thead")).filter(":visible")),c=(s=r.parent().hasClass("k-grid-header-locked"))?h.lockedTable:h.table,m=h.footer||e();h.footer&&h.lockedContent&&(m=s?h.footer.children(".k-grid-footer-locked"):h.footer.children(".k-grid-footer-wrap"));let b=m.find("table");ar(h.wrapper,"col-resize"),u=f.scrollable?r.find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(o).add(c.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(o)).add(m.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(o)):c.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(o);let _=e.map(h.columns,(function(e){return!e.hidden&&(s&&e.locked||!s&&!e.locked)?e:null}));l=t.x.location,a=d(p),i=Zr(_)[o].minResizableWidth||10,n=d(s?c.children("tbody"):h.tbody),Nt.webkit&&h.wrapper.addClass("k-grid-column-resizing"),h._adjustColWidths(c,r,b,n)},resize:function(t){var r=Gt?-1:1,o=a+t.x.location*r-l*r;if(f.scrollable){var d;s&&h.lockedFooter?d=h.lockedFooter.children("table"):h.footer&&(d=h.footer.find(">.k-grid-footer-wrap>table")),d&&d[0]||(d=e());var c=p.closest("table"),g=s?h.lockedTable:h.table,b=!1,_=h.wrapper.width()-m,k=o;s&&n-a+k>_&&((k=a+(_-n-2*m))<0&&(k=o),b=!0),k>10&&k>=i&&(u.css("width",k),n&&(k=b?_-2*m:n+t.x.location*r-l*r,g.add(c).add(d).css("width",k),s||(h._footerWidth=k))),h._scrollVirtualWrapperOnColumnResize()}else o>10&&o>=i&&u.css("width",o)},resizeend:function(){var e,t,o=d(p);if(ar(h.wrapper,""),Nt.webkit&&h.wrapper.removeClass("k-grid-column-resizing"),p&&a!=o){t=h.lockedHeader?h.lockedHeader.find("thead").first().find(mt).first().add(h.thead.find(mt).first()):p.parent();var l=p.attr(r.attr("index"));l||(l=t.find("th:not(.k-group-cell):not(.k-hierarchy-cell)").index(p)),(e=Zr(h.columns)[l]).width=o,h.trigger(Le,{column:e,oldWidth:a,newWidth:o}),h._applyLockedContainersWidth(!0),h._syncLockedContentHeight(),h._syncLockedHeaderHeight(),h._updateStickyColumns()}h._resetResizeHandleHeader(),h._hideResizeHandle(),p=null}}))},_addLockedRowResizing:function(e){var t=e.index();return this.lockedTable.find(mt).eq(t).add(this.tbody.find(mt).eq(t))},_getMinRowHeight:function(e){var t=0;return e.each(((e,r)=>{var o;r.style.height="",(o=c(r))>t&&(t=o)})),t},_cacheRowHeight:function(e,t){var r=this;r._cachedRowsHeight||(r._cachedRowsHeight={}),e.each(((e,o)=>{var l=o.getAttribute("data-uid");r._cachedRowsHeight[l]=t}))},_clearCachedRowsHeight:function(e){var t=this;e&&t._cachedRowsHeight?e.each(((e,r)=>{var o=r.getAttribute("data-uid");delete t._cachedRowsHeight[o]})):t._cachedRowsHeight=null},_mapCachedRowsHeight:function(e,t){var r=this._cachedRowsHeight,o=this.dataSource,l={};Object.keys(r).forEach((a=>{var i=o[e](a);l[i[t]]=r[a]})),this._cachedRowsHeight=l},_rowResizerDblClick:function(){var t,r,o=this,l=o.rowResizer,a=l.data(mt),i=c(a);r=a.hasClass(be)?o.select():a,o.lockedTable?(r=(a=o._addLockedRowResizing(a)).hasClass(be)?o.lockedTable.find(x+be):o.lockedTable.find(mt).eq(a.index())).each(((t,r)=>{var l=r.rowIndex,a=e(r).add(o.tbody.find(mt).eq(l)),i=o._getMinRowHeight(a);a.css(Je,i)})):r.css(Je,Ze),o._clearCachedRowsHeight(r),l.removeClass(fe),l.removeClass(ge),i!=(t=c(a))&&o.trigger(Me,{row:a,rows:r,oldHeight:i,newHeight:t})},_setupRowResizer(e,t,r){e.data(mt,t).css({top:r})},_attachRowResizerEvents:function(){var e=this.rowResizer,t=!1;e.on(je+O,(t=>{0===t.button&&(e.removeClass(fe),e.addClass(ge))})).on(Ue+O,(t=>{0===t.button&&(e.removeClass(ge),e.addClass(fe))})).on(Ke+O,(()=>{t=!0,setTimeout((()=>{t&&e.addClass(fe)}),200)})).on($e+O,(()=>{t=!1,e.removeClass(fe)}))},_getResizerTop:function(e,t){var r=this.rowResizer,o=r.find(".k-row-resizer")[0],l=parseInt(getComputedStyle(r[0]).paddingTop);return e.offset().top-parseFloat(e.css("marginTop"))-(t.offset().top+parseFloat(t.css("borderTopWidth")))-o.clientHeight-l+t.scrollTop()},_getResizerContainer:function(){var e=this.tbody.closest(bt);return this.lockedTable&&(e=e.closest(".k-grid-container")),e},_createRowResizer:function(t){var r,o=this,l=e(t.currentTarget),a=t.currentTarget.clientHeight,i=t.offsetY,n=o.rowResizer,s=l.prev("tr:visible"),d=o._getResizerContainer();n||(n=o.rowResizer=e('<div class="k-resizer-wrap"><div class="k-row-resizer"></div></div>'),d.append(n),o._attachRowResizerEvents(),n.off(Ye+O).on(Ye+O,o._rowResizerDblClick.bind(o))),r=o._getResizerTop(l,d),0!==s.length&&a/2>i?s.hasClass(De)||o._setupRowResizer(n,s,r):l.hasClass(De)||o._setupRowResizer(n,l,r+a)},_detachRowResizerEvents:function(){this.rowResizer.off(je+O).off(Ue+O).off(Ke+O).off($e+O)},_mapResizedRows:function(t,r,o){var l=this;t.each(((t,a)=>{var i;if(r){var n=a.rowIndex,s=o,d=0,u=e(a).add(l.tbody.find(mt).eq(n));u.each(((e,t)=>{var r;t.style.height="",(r=c(t))>d&&(d=r)})),s<d?(s=d,l._clearCachedRowsHeight(u.eq(0))):l._cacheRowHeight(u.eq(0),s),u.css(Je,s)}else a.style.height="",i=c(a),o>i?(a.style.height=o+gt,l._cacheRowHeight(e(a),o)):l._clearCachedRowsHeight(e(a))}))},_rowResizing:function(){var t,r,l,a,i=this,n=i.options;n.resizable&&!0===n.resizable.rows&&(i.tbody.parent().add(i.lockedTable).on(Qe+O,".k-grid-footer tr, .k-table-tbody tr",i._createRowResizer.bind(i)),i.rowResizing&&i.rowResizing.destroy(),t=i._getResizerContainer(),i.rowResizing=new o.Resizable(t,{handle:".k-resizer-wrap",start:function(t){a=e(t.currentTarget).data(mt),i.lockedTable&&(a=i._addLockedRowResizing(a)),a.addClass(fe),i._detachRowResizerEvents(),r=t.y.location,l=c(a)},resize:function(e){var o=l+e.y.location-r,n=0;a.length>1&&(n=i._getMinRowHeight(a)),o<n&&(o=n),a.css("height",o),i._setupRowResizer(i.rowResizer,a,i._getResizerTop(a,t)+o)},resizeend:function(){var e,t=c(a),r=!1;a.hasClass(be)?(e=i.select(),a.length>1&&e.length>a.length&&(e=i.lockedTable.find(x+be).not(a),r=!0)):e=a,i._mapResizedRows(e,r,t),a.removeClass(fe),i.rowResizer.removeClass(ge),i.rowResizer.addClass(fe),i._attachRowResizerEvents(),r&&(e=i.select()),l!=t&&i.trigger(Me,{row:a,rows:e,oldHeight:l,newHeight:t}),a=null}}))},_draggable:function(){var t=this,o=t.options.reorderable;if(!0===o||o&&o.columns){t._draggableInstance&&t._draggableInstance.destroy();var l=t.wrapper.children(".k-grid-header");t._draggableInstance=t.wrapper.kendoDraggable({group:r.guid(),autoScroll:!0,filter:t.content?".k-grid-header:first "+M:"table:first>.k-grid-header "+M,dragstart:function(){l.children(".k-grid-header-wrap").off("scroll"+O+"scrolling").on("scroll"+O+"scrolling",(function(e){t.virtualScrollable?r.scrollLeft(t.content.find(">.k-virtual-scrollable-wrap"),this.scrollLeft):r.scrollLeft(t.scrollables.not(e.currentTarget),this.scrollLeft)}))},dragend:function(){t._resetResizeHandleHeader(),l.children(".k-grid-header-wrap").off("scroll"+O+"scrolling")},drag:function(){t._hideResizeHandle()},hint:function(t){var o=t.attr(r.attr("title"));return o&&(o=r.htmlEncode(o)),e('<div class="k-reorder-clue k-drag-clue" />').html(o||t.attr(r.attr("field"))||t.text()).prepend(r.ui.icon({icon:"cancel",iconClass:"k-drag-status"}))}}).data("kendoDraggable")}},_reorderable:function(){let t=this,r=t.options.reorderable;(!0===r||r&&r.columns)&&(t.wrapper.data("kendoReorderable")&&t.wrapper.data("kendoReorderable").destroy(),t.wrapper.kendoReorderable({draggable:t._draggableInstance,dropFilter:M,dragOverContainers:function(e,r){let o=zr(t.columns);return!1!==o[e].lockable&&Dr(o,t.columns,e,r)>-1},inSameContainer:function(r){let o=e(r.source).parent()[0],l=e(r.target).parent()[0],a=r.sourceIndex,i=r.targetIndex,n=zr(t.columns),s=n&&n[a]&&!!n[a].lockable;return t._isLocked()&&s&&(o=e(r.source.closest(".k-grid-header"))[0],l=e(r.target.closest(".k-grid-header"))[0]),o===l&&Dr(n,t.columns,a,i)>-1},change:function(e){let r=zr(t.columns),o=r[e.oldIndex],l=Dr(r,t.columns,e.oldIndex,e.newIndex);t.trigger(qe,{newIndex:l,oldIndex:_(o,r),column:o}),t.reorderColumn(l,o,"before"===e.position)}}))},_reorderHeader:function(e,t,r,o){for(var l,a,i=this,n=Rr(e[0],i.columns),s=Rr(t,i.columns),d=[],c=0;c<e.length;c++)e[c].columns&&(d=d.concat(e[c].columns));a=o?nr(o,o,"tr:eq("+n.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)"):nr(i.lockedHeader,i.thead,"tr:eq("+n.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)");var u,p,h,f,g,m,b=Nr(e).length,_=Nr([t]).length;d.length?(b>0&&0===_?(l="prepend",Sr(e,t,d,i.columns,i.lockedHeader.find("thead"),i.thead,this._groups(),l)):0===b&&_>0&&(l=0!==s.cell||!e[0].columns||t.columns||i._group?"append":"prepend",Sr(e,t,d,jr(i.columns),i.thead,i.lockedHeader.find("thead"),this._groups(),l)),(t.columns||n.cell-s.cell>1||s.cell-n.cell>1)&&(t=Ir(i.columns,t,e[0],r,i.columns))&&(b>0&&0===_?i._reorderHeader(d,t,r,i.thead):0===b&&_>0?i._reorderHeader(d,t,r,i.lockedHead):i._reorderHeader(d,t,r))):b!==_&&(u=a[n.cell],p=i.columns,h=b,f=Tr(Nr(p)),g=Tr(jr(p)),m=u.rowSpan,u.rowSpan=h?f>g?m-(f-g)||1:m+(g-f):f>g?m+(f-g):m-(g-f)||1),ir(a,n.cell,s.cell,r,e.length)},_reorderContent:function(t,r,o){var l,a,i,n=this,s=e(),d=t[0],c=kr(t),u=_(d,Zr(n.columns)),p=_(r,Zr(n.columns)),h=_(c[0],Qr(n.columns)),f=_(r,Qr(n.columns)),g=Nr(n.columns).length,m=!!r.locked,b=n.footer||n.wrapper.find(".k-grid-footer");if(l=a=f,r.hidden){var k=m?Nr(n.columns):jr(n.columns);kr(k).length>0?(l=a=f=this._findClosestVisibleColumnIndex(k,p),i=kr(k.slice(p)).length>0):m?(f=n.lockedTable.find("colgroup"),l=n.lockedHeader.find("colgroup"),a=e(n.lockedFooter).find(">table>colgroup")):(f=n.tbody.prev(),l=n.thead.prev(),a=b.find(".k-grid-footer-wrap").find(">table>colgroup"))}n._hasFilterRow()&&ir(n.wrapper.find(".k-filter-row td:not(.k-group-cell,.k-hierarchy-cell)"),u,p,o,t.length),h>=0&&ir(nr(n.lockedHeader,n.thead.prev(),F),h,l,i||o,c.length),n.options.scrollable&&h>=0&&!n._hasVirtualColumns()&&ir(nr(n.lockedTable,n.tbody.prev(),F),h,f,i||o,c.length),b&&b.length&&(h>=0&&ir(nr(n.lockedFooter,b.find(".k-grid-footer-wrap"),">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)"),h,a,i||o,c.length),ir(b.find(".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)"),u,p,o,t.length));var v=n.tbody.children(":not(.k-grouping-row,.k-detail-row)");n.lockedTable&&(g>p?g<=u&&mo(n.lockedTable.find(">tbody>tr.k-grouping-row:not([hidden])"),n.table.find(">tbody>tr.k-grouping-row:not([hidden])"),t.length):g>u&&mo(n.table.find(">tbody>tr.k-grouping-row:not([hidden])"),n.lockedTable.find(">tbody>tr.k-grouping-row:not([hidden])"),t.length),s=n.lockedTable.find(">tbody>tr:not(.k-grouping-row,.k-detail-row)"));for(var w=0,C=v.length;w<C;w+=1)ir(nr(s[w],v[w],">td:not(.k-group-cell,.k-hierarchy-cell)"),u,p,o,t.length)},_findClosestVisibleColumnIndex:function(e,t){var r=kr(e.slice(t)).length>0?e.slice(t):e.slice(0,t+1).reverse(),o=kr(r)[0];return _(o,kr(this.columns))},_autoFitLeafColumn:function(e){this.autoFitColumn(Zr(this.columns)[e])},_hasReorderableRows:function(){return this.options.reorderable&&this.options.reorderable.rows},_draggableRows:function(){var t=this,o=t._checkBoxSelection||t.options.selectable&&!r.ui.Selectable.parseOptions(t.options.selectable).cell,l=!1,a=!(!t._isMobile&&!r.support.mobileOS);t._draggableRowsInstance&&t._draggableRowsInstance.destroy(),!1!==this.options.reorderable.rows.clickMoveClick&&this._hasDragHandleColumn&&(l=!0),t._draggableRowsInstance=t.tbody.kendoDraggable({holdToDrag:a,showHintOnHold:a,preventOsHoldFeatures:a,group:"row-draggable",autoScroll:!0,filter:(o?" > .k-selected":" > "+D)+(t._hasDragHandleColumn?" > .k-drag-cell":""),hint:function(l){var a=e('<div class="k-reorder-clue k-drag-clue">'+r.ui.icon({icon:"cancel",iconClass:"k-drag-status"})+"</div>");if(o&&t.select().length>1&&t.lockedContent)a.append("<span>"+t.select().length/2+" "+w(t.options.messages.itemsSelected)+"</span>");else if(o&&t.select().length>1&&!t.lockedContent)a.append("<span>"+t.select().length+" "+w(t.options.messages.itemsSelected)+"</span>");else{var i=l.closest(D).clone();i.find("td.k-command-cell").remove(),i.find("td").each((function(e,t){a.append("<span>"+t.innerText+"&nbsp;</span>")}))}return a},clickMoveClick:l,cursorOffset:{top:0,left:0}}).data("kendoDraggable")},_reorderableRows:function(){var t=this,o=t._checkBoxSelection||t.options.selectable&&!r.ui.Selectable.parseOptions(t.options.selectable).cell;t.tbody.data("kendoReorderable")&&t.tbody.data("kendoReorderable").destroy(),t.tbody.kendoReorderable({smartPosition:!1,draggable:t._draggableRowsInstance,dragOverContainers:function(r,l){var a=!0,i=e(D,t.content).eq(l);return o&&(a=!i.is(".k-selected")),a},inSameContainer:function(t){return!o||!e(t.target).is(".k-selected")},dropFilter:"> "+D,allowIcon:"insert-middle",orientation:"vertical",reorderDropCue:e('<div class="k-drop-hint k-drop-hint-h"><div class="k-drop-hint-start"></div><div class="k-drop-hint-line"></div></div>'),positionDropCue:function(e,t){var o=r.getOffset(t.children(E).eq(0)).left;e.css({transform:"translate(0,-50%)",left:o})},externalDraggable:function(e){var t=e.draggable;if(t)return t},change:function(e){t._triggerRowRorder(e)}})},_triggerRowRorder:function(e){var t=this,o={newIndex:"after"===e.position?e.newIndex+1:e.newIndex,oldIndex:e.oldIndex},l=e.element,a=t._checkBoxSelection||t.options.selectable&&!r.ui.Selectable.parseOptions(t.options.selectable).cell;o=a&&t.select().length>1?f(o,{rows:t.select()}):f(o,{row:l}),t.trigger(We,o)||t.reorderRows(a?t.select():l,o.newIndex)},reorderRowTo:function(e,t){var r=this,o=r.dataItem(e),l=e.index();t<0||t===l||r.trigger(We,{row:e,oldIndex:e.index(),newIndex:t})||r.dataSource.pushMove(t,[o])},reorderRows:function(e,t){var r=this,o=r.dataSource,l=r.tbody.children(D).length,a=r.dataItem(r.tbody.children(D).eq(t)),i=e.toArray().map((function(e){return r.dataItem(e)}));a?t=o.indexOf(a):(a=r.dataItem(r.tbody.children(D).eq(l-1)),t=o.indexOf(a)+1),t>=0&&(r._rowDropping=!0,o.pushMove(t,i),r._rowDropping=!1)},autoFitColumns:function(e){var t=this;e=e||t.columns;for(var r=0;r<e.length;r++){var o=e[r];o.columns?t.autoFitColumns(o.columns):t.autoFitColumn(o)}},autoFitColumn:function(t){var o,l,a,i,n,s,c,u,p,f,g=this,b=g.options,k=g.columns,v=g.lockedHeader?ro(g.lockedHeader.find(">table>thead")).filter(br).length:0,w="col:not(.k-group-col):not(.k-hierarchy-col)",C="td:visible:not(.k-group-cell):not(.k-hierarchy-cell)";if((t="number"==typeof t?k[t]:h(t)?m(Fr(k),(function(e){return e===t}))[0]:m(Fr(k),(function(e){return e.field===t}))[0])&&_r(t)){i=Zr(k),c=t.minResizableWidth,o=_(t,i),(l=(a=(n=t.locked)?g.lockedHeader.children("table"):g.thead.parent()).find("[data-index='"+o+"']")).find("a.k-grid-column-menu, a.k-grid-filter-menu");var y=n?g.lockedTable:g.table,S=g.footer||e();g.footer&&g.lockedContent&&(S=n?g.footer.children(".k-grid-footer-locked"):g.footer.children(".k-grid-footer-wrap"));var x=S.find("table").first();g.lockedHeader&&!n&&(o-=v);for(var T=0;T<i.length&&i[T]!==t;T++)i[T].hidden&&o--;b.scrollable?(s=a.find(w).eq(o).add(y.children("colgroup").find(w).eq(o)).add(x.find("colgroup").find(w).eq(o)),n||(u=y.parent(),p=r.scrollLeft(u))):s=y.children("colgroup").find(w).eq(o);var H=a.add(y).add(x);Nt.safari&&l.css("white-space","initial");var R=d(l);s.width(""),H.css("table-layout","fixed"),s.width(Ze),H.addClass("k-autofitting"),H.css("table-layout",""),f=d(l);var E=Math.ceil(Math.max(f,d(y.find("tr:not(.k-grouping-row)").eq(0).children(C).eq(o)),d(x.find(mt).eq(0).children(C).eq(o))))+1;if(c&&c>E&&(E=c),s.width(E),t.width=E,Nt.safari&&l.css("white-space",""),b.scrollable){for(var I,A=a.find("col"),z=0,D=0,F=A.length;D<F;D+=1)if((I=A[D].style.width)&&-1==I.indexOf("%"))z+=parseInt(I,10);else{if(!A.eq(D).hasClass("k-group-col")){z=0;break}z+=parseInt(A.eq(D).width(),10)}z&&H.each((function(){this.style.width=z+gt}))}H.removeClass("k-autofitting"),p&&r.scrollLeft(u,p),g.trigger(Le,{column:t,oldWidth:R,newWidth:E}),g._applyLockedContainersWidth(),g._syncLockedContentHeight(),g._syncLockedHeaderHeight(),g._updateStickyColumns()}},reorderColumn:function(e,r,o){var l,a=this,i=cr(r,a.columns),n=i?i.columns:a.columns,s=_(r,n),d=n[e],c=a.virtualScroll||{},u=!!d.locked,p=Nr(a.columns).length,h=m(Zr(a.columns),(function(e){return e.groupHeaderColumnTemplate}));if(s!==e&&(r.locked||!u||1!=jr(a.columns).length)&&(!r.locked||u||1!=p)){a._hideResizeHandle(),o===t&&(o=e<s);var f=[r];a._reorderHeader(f,d,o),a.lockedHeader&&(Pr(a.thead),Pr(a.lockedHeader)),d.columns&&(d=(d=Zr(d.columns))[o?0:d.length-1]),r.columns&&(f=Zr(r.columns)),a._reorderContent(f,d,o),l=(l=!!r.locked)!=u,r.locked=u,n.splice(o?e:e+1,0,r),n.splice(s<e?s:s+1,1),a._updateLockedCols(),a._updateCols(),a._templates(),a._updateColumnCellIndex(),a._updateColumnSorters(),h.length>0&&a._renderGroupRows(),a._updateTablesWidth(),a._applyLockedContainersWidth(),a._syncLockedHeaderHeight(),a._syncLockedContentHeight(),a._updateFirstColumnClass(),a._updateStickyColumns(),c.columns&&a.refresh(),l&&(u?a.trigger(Pe,{column:r}):a.trigger(Oe,{column:r}))}},_updateColumnCellIndex:function(){var e=0;this.lockedHeader&&(e=xr(this.lockedHeader.find("thead"),Nr(this.columns))),xr(this.thead,jr(this.columns),e)},lockColumn:function(e){var t=this.columns;if((e="number"==typeof e?t[e]:m(t,(function(t){return t.field===e}))[0])&&!e.locked&&!e.hidden){e.sticky&&this.unstickColumn(t.indexOf(e));var r=Nr(t).length-1;this.reorderColumn(r,e,!1)}},unlockColumn:function(e){var t=this.columns;if((e="number"==typeof e?t[e]:m(t,(function(t){return t.field===e}))[0])&&e.locked&&!e.hidden){var r=Nr(t).length;this.reorderColumn(r,e,!0)}},stickColumn:function(e){var t=this.columns;!(e="number"==typeof e?t[e]:m(t,(function(t){return t.field===e}))[0])||e.sticky||e.hidden||e.locked&&(this.unlockColumn(t.indexOf(e)),e.locked)||(e.sticky=!0,this._updateStickyColumns())},unstickColumn:function(e){var t=this.columns;(e="number"==typeof e?t[e]:m(t,(function(t){return t.field===e}))[0])&&e.sticky&&!e.locked&&!e.hidden&&(this._removeStickyAttributes([e]),this._removeStickyStyles(Ur(t)),e.sticky=!1,this._updateStickyColumns(),0===this._anyStickyColumns()&&(this._templates(),this._hasFilterRow()&&this._updateStickyFilterCells()))},cellIndex:function(t){var r=0;return this.lockedTable&&!e.contains(this.lockedTable[0],t[0])&&(r=Zr(Nr(this.columns)).length),e(t).parent().children("td:not(.k-group-cell,.k-hierarchy-cell)").index(t)+r},_modelForContainer:function(t){(t=e(t)).is(mt)||"popup"===this._editMode()||(t=t.closest(mt));var o=t.attr(r.attr("uid"))||t.find(".k-popup-edit-form").attr(r.attr("uid"));return this.dataSource.getByUid(o)},_calculateColumnIndex:function(t){var r=this.cellIndex(t),o=0;return this._hasVirtualColumns()&&(o=(o=parseInt(e(t).closest(mt).find("td").first().attr("colspan"),10))>1?o-1:0),r+o},_editable:function(){let o=this,l=o.options.editable,a=r.support.mobileOS,i=!(!o._isMobile&&!a),s=a&&a.ios&&("chrome"===a.browser||"edge"===a.browser);if(o._isEditableEnabled=o._isEditableEnabled!==t?o._isEditableEnabled:!l.readonly,o._isEditableEnabled||o._removeEditableClickHandlers(),l&&o._isEditableEnabled){"incell"===o._editMode()?(o.table.add(o.lockedTable).on(je+O,A+">"+z,(function(t){let l=e(t.target);"incell"===o._editMode()&&l.hasClass("k-checkbox")&&l.prev().attr(r.attr("bind"))&&t.preventDefault()})),!1!==l.update&&(Kt&&o.wrapper.on(Ne+O,".k-edit-cell > input[type='checkbox']",(function(t){e(t.target).trigger("focus")})).on(Ne+O,".k-edit-cell",(function(t){e(t.target).is("input")||e(t.currentTarget).find("input[type='checkbox']").trigger("focus")})).on(je+O,"tr:not(.k-grouping-row) > td",(function(t){var r=o._editContainer;r&&r[0]&&(e.contains(r[0],t.target)||r[0]===t.target)?o._mousedownOnEditCell=!0:o._mousedownOnEditCell=!1})),o.editableUserEvents=new r.UserEvents(o.wrapper,{filter:"tr:not(.k-grouping-row) > td",allowSelection:!0,preventDefault:s,supportDoubleTap:i,fastTap:i,[i?"doubleTap":"tap"]:function(t){var r=e(t.target),l=o.lockedTable&&r.closest("table")[0]===o.lockedTable[0];o._mousedownOnEditCell=!1,r.hasClass("k-hierarchy-cell")||r.hasClass("k-detail-cell")||r.hasClass("k-group-cell")||r.hasClass("k-edit-cell")||r.has(".k-grid-remove-command").length||r.closest("tbody")[0]!==o.tbody[0]&&!l||e(t.target).is(":input")||(o.editable?o.editable.end()?(e(n()).trigger("blur"),o.closeCell(),o._requestInProgress||o.editCell(r)):o._scrollVirtualWrapper():o.editCell(r))}}),o.wrapper.on("focusin"+O,(function(){e.contains(this,n())||(clearTimeout(o.timer),o.timer=null)})).on("focusout"+O,(function(t){var r=!0;(Kt&&o._mousedownOnEditCell||o._virtualColScroll)&&(r=!1),o._mousedownOnEditCell=!1,r&&(o.timer=setTimeout((function(){!function(){let t=n(),r=o._editContainer;r&&r[0]&&!e.contains(r[0],t)&&r[0]!==t&&!e(t).closest(".k-animation-container").length&&(o.editable.end()?o.closeCell():o._scrollVirtualWrapper())}()}),1))})))):!1!==l.update&&(o._editCommandClickHandler=o._editCommandClick.bind(o),o.wrapper.on(Ne+O,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-edit-command",o._editCommandClickHandler),o._isVirtualInlineEditable()&&o.wrapper.on("focusout"+O,"tr:not(.k-grouping-row) > td",(function(){o.editable&&!o.editable.end()&&o._scrollVirtualWrapper()}))),o._removeCommandClickHandler=o._removeCommandClick.bind(o),o.wrapper.on(Ne+O,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-remove-command",o._removeCommandClickHandler)}},_editCommandClick:function(t){let r=e(t.currentTarget);this._belongsToGrid(r)&&(t.preventDefault(),this.editRow(r.closest(mt)))},_removeCommandClick:function(t){let r=this,o=r.options.editable,l=e(t.currentTarget);r._belongsToGrid(l)&&(!1!==o.destroy?(t.preventDefault(),t.stopPropagation(),r.removeRow(l.closest(mt))):(t.stopPropagation(),r._confirmation()||t.preventDefault()))},editCell:function(t){t=e(t);let r=this,o=Zr(r.columns)[r._calculateColumnIndex(t)],l=r._modelForContainer(t);if(r.closeCell(),l&&yo(o,l)&&!o.command){if(r.trigger(B,{model:l}))return;r._attachModelChange(l),r._editContainer=t,r._shouldClearEditableState&&r._clearEditableState(),r.editable=t.addClass("k-edit-cell").kendoEditable({fields:to(o),model:l,size:r.options.size,target:r,change:function(e){r.trigger(W,{values:e.values,container:t,model:l})&&e.preventDefault()},skipFocus:!(!r._isVirtualIncellEditable()&&!r._hasVirtualColumns()||!r._editableState)}).data("kendoEditable");let e=t.parent().addClass("k-grid-edit-row");!0===l.new&&(e.addClass("k-grid-add-row"),delete l.new),r.lockedContent&&(ko(e[0],r._relatedRow(e).addClass("k-grid-edit-row")[0]),e.hasClass("k-grid-add-row")&&r._relatedRow(e).addClass("k-grid-add-row"),r._syncLockedScroll()),r.trigger(V,{container:t,model:l})}},enableEditing:function(){let e=this,t=e.wrapper.find(".k-grid-toolbar");if(!e._isEditableEnabled){e._isEditableEnabled=!0,e._editable();let r=t.find(".k-grid-add").getKendoButton();r&&r.bind("click",e._createClickHandler)}},disableEditing:function(){let e=this;e._isEditableEnabled&&("incell"===e._editMode()?e.closeCell():e.cancelRow(),e._clearEditableState(),e._destroyEditable(),e.editableUserEvents&&(e.editableUserEvents.destroy(),e.editableUserEvents=null),e._removeEditableClickHandlers(),e._isEditableEnabled=!1)},_removeEditableClickHandlers:function(){let e=this,t=e.wrapper.find(".k-grid-toolbar");e.wrapper.off(Ne+O,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-edit-command",e._editCommandClickHandler),e.wrapper.off(Ne+O,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-remove-command",e._removeCommandClickHandler),t.off(Ne+O,".k-grid-add",e._createClickHandler);let r=t.find(".k-grid-add").getKendoButton();r&&r.unbind("click"),e._editCommandClickHandler=null,e._removeCommandClickHandler=null},_adjustLockedHorizontalScrollBar:function(){var e=this.table,t=e.parent(),o=e[0].offsetWidth>t[0].clientWidth?r.support.scrollbar():0;this.lockedContent.height(t[0].offsetHeight-o)},_syncLockedScroll:function(){this.lockedContent[0].scrollTop=this.content[0].scrollTop,this.virtualScrollable&&(this.lockedContent[0].scrollTop=this.wrapper.find(".k-virtual-scrollable-wrap")[0].scrollTop)},_syncLockedContentHeight:function(){this.lockedTable&&(this.touchScroller||this._adjustLockedHorizontalScrollBar(),this._adjustRowsHeight(this.table,this.lockedTable))},_syncLockedHeaderHeight:function(){if(this.lockedHeader){var e=this.lockedHeader.children("table"),t=this.thead.parent();this._adjustRowsHeight(e,t),function(e,t){if(e=e[0],t=t[0],e.rows.length!==t.rows.length){var r,o,l=e.offsetHeight,a=t.offsetHeight;l>a?(r=t.rows[t.rows.length-1],Lt.test(r.className)&&(r=t.rows[t.rows.length-2]),o=l-a):(r=e.rows[e.rows.length-1],Lt.test(r.className)&&(r=e.rows[e.rows.length-2]),o=a-l),r.style.height=r.offsetHeight+o+gt}}(e,t)}},_syncLockedFooterHeight:function(){this.lockedFooter&&this.footer&&this.footer.length&&this._adjustRowsHeight(this.lockedFooter.children("table"),this.footer.find(".k-grid-footer-wrap > table"))},_destroyEditable:function(){let e=this,t=function(){if(e.editable){let t=e.editView?e.editView.element:e._editContainer,r=e._editContainer.data("kendoWindow");t&&(r&&(t=r.wrapper),t.off(Ne+O,".k-grid-cancel-command, button[ref-cancel-button]",e._editCancelClickHandler),t.off(Ne+O,".k-grid-save-command, button[ref-update-button]",e._editUpdateClickHandler)),e._detachModelChange(),e.editable.destroy(),e.editable=null,r&&r.destroy(),e._editContainer=null,e._destroyEditView(),e._editableIsClosing=null}};e.editable&&("popup"!==e._editMode()||e._isMobile?t():e._editableIsClosing?e._editContainer.data("kendoWindow").bind("deactivate",t):(e._editableIsClosing=!0,e._editContainer.data("kendoWindow").bind("deactivate",t).close())),e._confirmDialog&&(e._confirmDialog.close(),e._confirmDialog.destroy(),e._confirmDialog=null)},_destroyEditView:function(){this.editView&&(this.editView.purge(),this.editView=null,this.pane.navigate(""))},_attachModelChange:function(e){var t=this;t._modelChangeHandler=function(e){t._modelChange({field:e.field,model:this})},e.bind("change",t._modelChangeHandler)},_detachModelChange:function(){var e=this,t=e._editContainer,r=e._modelForContainer(t);r&&r.unbind(J,e._modelChangeHandler)},closeCell:function(e){let t,r,l,a,i=this,n=i._editContainer;if(n&&(l=i._modelForContainer(n),!e||!i.trigger("cancel",{container:n,model:l}))){if(i.trigger(Q,{type:e?"cancel":"save",model:l,container:n}),n.removeClass("k-edit-cell"),t=Zr(i.columns)[i._calculateColumnIndex(n)],a=i.editable&&i.editable.validatable&&i.editable.validatable.errors(),e&&l.dirtyFields&&l.dirtyFields[t.field]&&a.length&&delete l.dirtyFields[t.field],r=n.parent().removeClass("k-grid-edit-row"),r.hasClass("k-grid-add-row")&&r.removeClass("k-grid-add-row"),i.lockedContent){const e=i._relatedRow(r);e.removeClass("k-grid-edit-row"),e.hasClass("k-grid-add-row")&&e.removeClass("k-grid-add-row")}i._destroyEditable(),i._displayCell(n,t,l),i._shouldClearEditableState&&i._clearEditableState(),i.trigger("itemChange",{item:r,data:l,ns:o}),i.lockedContent&&ko(r.css(Je,"")[0],i._relatedRow(r).css(Je,"")[0])}},_displayCell:function(e,t,o){var l={storage:{},count:0},a=f({},r.Template,this.options.templateSettings),i=r.template(this._cellTmpl(t,l),a);l.count>0&&(i=i.bind(l.storage)),e.empty().html(i(o))},removeRow:function(e){this._confirmation(e)&&this._removeRow(e)},_removeRow:function(t){var r,o,l,a=this,i=a._editMode();"incell"!==i&&a.cancelRow(),t=e(t),a.lockedContent&&(t=t.add(a._relatedRow(t))),t=t.hide(),a.dataSource._isGroupPaged()&&a._removeGroupIfEmpty(t),(r=a._modelForContainer(t))&&!a.trigger(G,{row:t,model:r})?(l=a.dataSource.options.schema,a._selectedIds&&l&&l.model&&(o=r[a._getSchemaIdField()],delete a._selectedIds[o]),a.dataSource.remove(r),"inline"!==i&&"popup"!==i||a.dataSource.sync()):"incell"===i&&a._destroyEditable()},_editMode:function(){let e="incell",t=this.options.editable;return!0!==t&&(e="string"==typeof t?t:t.mode||e),e},editRow:function(t){let o,l=this;t instanceof a?o=t:(t=e(t),o=l._modelForContainer(t));let i,n=l._editMode();l.cancelRow(),o&&(t=l.tbody.children("["+r.attr("uid")+"="+o.uid+"]"),l._attachModelChange(o),"popup"===n?l._createPopupEditor(o):"inline"===n?l._createInlineEditor(t,o):"incell"===n&&e(t).children(E).each((function(){let t=e(this),r=Zr(l.columns)[l._calculateColumnIndex(t)];if(o=l._modelForContainer(t),o&&(!o.editable||o.editable(r.field))&&r.field&&!r.selectable)return l.editCell(t),!1})),i=l.editView?l.editView.element:"popup"===n?l._editContainer.parent():l._editContainer,i&&(this._editCancelClickHandler||(this._editCancelClickHandler=this._editCancelClick.bind(this)),i.on(Ne+O,".k-grid-cancel-command, button[ref-cancel-button]",this._editCancelClickHandler),this._editUpdateClickHandler||(this._editUpdateClickHandler=this._editUpdateClick.bind(this)),i.on(Ne+O,".k-grid-save-command, button[ref-update-button]",this._editUpdateClickHandler)))},_editUpdateClick:function(e){e.preventDefault(),e.stopPropagation(),this.saveRow()},_editCancelClick:function(t){var r=this,o=r.options.navigatable,l=r.editable.options.model,a=r.editView?r.editView.element:r._editContainer;if(t.preventDefault(),t.stopPropagation(),!r.trigger("cancel",{container:a,model:l})){var i=r.items().index(e(r.current()).parent());r.cancelRow(),o&&(r._setCurrent(r.items().eq(i).children().filter(z).first()),wo(r.table,!0))}},_editFields:function(e,t){for(var r,o=[],l=0;l<e.length;l++)(r=e[l]).selectable||r.command||yo(r,t)&&o.push(to(r));return o},_createPopupEditor:function(t){var l,a,i,n,s,d,c,u,p,g,m,b,_,k=this,v="<div "+r.attr("uid")+'="'+t.uid+'" class="k-popup-edit-form"><'+(k._isMobile?'ul class="k-edit-form-container k-listgroup k-listgroup-flush">':'div class="k-edit-form-container">'),C=Zr(k.columns),y=r.guid(),S=k.options.editable,x=S.template,T=h(S)?S.window:{},H=f({},r.Template,k.options.templateSettings);if(!k.trigger(B,{model:t})){if(T=T||{},x)for(typeof x===rt&&(x=r.unescape(x)),v+=r.template(x,H)(t),i=0,n=C.length;i<n;i++)(l=C[i]).command&&(g=vo(l.command,"edit"))&&(a=g);else for(i=0,n=C.length;i<n;i++)(l=C[i]).selectable||(l.command?l.command&&(g=vo(l.command,"edit"))&&(a=g):k._isMobile&&(v+='<li class="k-item k-listgroup-item">',yo(l,t)?(v+='<label class="k-label k-listgroup-form-row">',v+='<span class="k-item-title k-listgroup-form-field-label">'+(l.title&&(k.options.encodeTitles?Ao(l.title,!0):l.title)||l.field||"")+"</span>",v+='<div class="k-listgroup-form-field-wrapper" id="'+l.field+"_"+y+'" '+r.attr("container-for")+'="'+l.field+'"></div>',v+="</label>"):(b={storage:{},count:0},s=r.template(k._cellTmpl(l,b),H),b.count>0&&(s=s.bind(b.storage)),v+='<label class="k-label k-listgroup-form-row k-no-click">',v+='<span class="k-item-title k-listgroup-form-field-label">'+(l.title&&(k.options.encodeTitles?Ao(l.title,!0):l.title)||l.field||"")+"</span>",v+='<span class="k-no-editor k-listgroup-form-field-wrapper">'+s(t)+"</span>",v+="</label>"),v+="</li>"));if(a&&h(a)&&(h(a.text)&&(d=a.text.update,c=a.text.cancel),h(a.iconClass)&&(u=a.iconClass.update,p=a.iconClass.cancel),a.attr&&(m=a.attr)),k._isMobile){v+="</ul></div>";let e=w(k.options.messages.commands.cancel),t=w(k.options.messages.commands.update);k.editView=k.pane.append("<div data-"+r.ns+'role="view" class="k-grid-edit-form"><div data-'+r.ns+' class="k-appbar k-appbar-primary">'+r.html.renderButton(`<button class="k-header-cancel k-grid-cancel-command" title="${e}" aria-label="${e}"></button>`,{fillMode:"flat",icon:"chevron-left"})+'<span class="k-spacer"></span>'+`<span>${w(k.options.messages.commands.edit||"Edit")}</span><span class="k-spacer"></span>`+r.html.renderButton(`<button class="k-header-done k-grid-save-command" title="${t}" aria-label="${t}"></button>`,{fillMode:"flat",icon:"check"})+"</div><div data-"+r.ns+'role="content" class="'+$t+'">'+v+"</div></div>"),_=k._editContainer=k.editView.element.find(".k-popup-edit-form")}else{let r=e(k._createButton({name:"update",text:d,attr:m,iconClass:u,size:"medium",skipCommandClass:!0})).attr("ref-update-button",""),o=e(k._createButton({name:"canceledit",text:c,attr:m,iconClass:p,size:"medium",skipCommandClass:!0})).attr("ref-cancel-button","");v+="</div>",_=k._editContainer=e(v).appendTo(k.wrapper).eq(0).kendoWindow(f({modal:!0,resizable:!1,draggable:!0,title:k.options.messages.commands.edit||"Edit",_footerTemplate:()=>'<div class="k-actions k-actions-start k-actions-horizontal k-window-actions">'+r[0].outerHTML+o[0].outerHTML+"</div>",visible:!1,close:function(r){if(r.userTriggered){if(r.sender.element.trigger("focus"),k.trigger("cancel",{container:_,model:t}))return void r.preventDefault();var o=k.items().index(e(k.current()).parent());k._editableIsClosing=!0,k.cancelRow(),k.options.navigatable&&(k._setCurrent(k.items().eq(o).children().filter(z).first()),wo(k.table,!0))}}},T))}x||k._isMobile?k.editable=k._editContainer.kendoEditable({fields:k._isMobile&&!x?k._editFields(C,t):null,model:t,clearContainer:!1,target:k,skipFocus:!0}).data("kendoEditable"):(k.editable=new o.Form(k._editContainer.find(".k-edit-form-container"),{items:k._editFields(C,t),buttonsTemplate:()=>"",formData:t}).editable,k._editContainer.append(undefined)),k._openPopUpEditor(),k.trigger(V,{container:_,model:t})}},_openPopUpEditor:function(){var e=this,t=e._editContainer?e._editContainer.data("kendoWindow"):null,r=(e.options.editable||{}).window||{};this._isMobile?this.pane.navigate(this.editView,this._editAnimation):t&&(r.position||t.center(),t.open())},_createInlineEditor:function(t,o){var l,a,i,n=this,s=[];n.trigger(B,{model:o})||(n.lockedContent&&(t=t.add(n._relatedRow(t))),t.children(":not(.k-group-cell,.k-hierarchy-cell)").each((function(){if(a=e(this),!(l=Zr(n.columns)[n._calculateColumnIndex(a)]).command&&yo(l,o))s.push(to(l)),a.attr(r.attr("container-for"),l.field),a.empty();else if(l.command){var t,d,c,u,p;if(i=vo(l.command,"edit"))a.empty(),h(i)&&(h(i.text)&&(t=i.text.update,d=i.text.cancel),h(i.iconClass)&&(c=i.iconClass.update,u=i.iconClass.cancel),i.attr&&(p=i.attr)),e(n._createButton({name:"update",text:t,attr:p,iconClass:c})+n._createButton({name:"canceledit",text:d,attr:p,iconClass:u})).appendTo(a)}})),n._editContainer=t,n._editContainer.addClass("k-grid-edit-row"),!0===o.new&&(n._editContainer.addClass("k-grid-add-row"),delete o.new),n._shouldClearEditableState&&n._clearEditableState(),n.editable=new r.ui.Editable(n._editContainer,{target:n,fields:s,size:n.options.size,model:o,skipFocus:n._isVirtualInlineEditable()&&n._editableState&&!!n._editableState.field||n._hasVirtualColumns(),clearContainer:!1}),t.length>1&&(ko(t[0],t[1]),n._applyLockedContainersWidth(!0)),n.trigger(V,{container:t,model:o}))},cancelRow:function(e){var t,o=this,l=o._editContainer;if(l){if(!(t=o._modelForContainer(l))||e&&o.trigger("cancel",{container:l,model:t}))return;o._destroyEditable(),o.dataSource.cancelChanges(t),o._clearEditableState(),"popup"!==o._editMode()?o._displayRow(l):o._displayRow(o.tbody.find("["+r.attr("uid")+"="+t.uid+"]")),o._aria()}},saveRow:function(){var t,r=this,o=this._editContainer,l=this._modelForContainer(o),a=e.Deferred();return o&&this.editable?!(t=r.editable&&r.editable.end())||this.trigger(W,{container:o,model:l})?(t||r._scrollVirtualWrapper(),a.reject().promise()):(r._clearEditableState(),this.dataSource.sync()):a.resolve().promise()},_displayRow:function(t){var l,a,i,n=this,s=n._modelForContainer(t),d=t.hasClass(be),c=t.hasClass("k-alt");s&&(n.lockedContent&&(l=e((c?n.lockedAltRowTemplate:n.lockedRowTemplate)(s)),r.applyStylesFromKendoAttributes(l,["display"]),n._relatedRow(t.last()).replaceWith(l)),a=e((c?n.altRowTemplate:n.rowTemplate)(s)),t.is(":visible")||a.hide(),r.applyStylesFromKendoAttributes(a,["display"]),n._anyStickyColumns()&&r.applyStylesFromKendoAttributes(a,["left","right"]),t.replaceWith(a),n.trigger("itemChange",{item:a,data:s,ns:o}),l&&l.length&&n.trigger("itemChange",{item:l,data:s,ns:o}),d&&(n.options.selectable||n._checkBoxSelection)&&n.select(a.add(l)),l&&ko(a[0],l[0]),(i=a.next()).hasClass("k-detail-row")&&i.is(":visible")&&r.ui.icon(a.find(".k-hierarchy-cell .k-icon,.k-hierarchy-cell .k-svg-icon"),{icon:"caret-alt-down"}))},_showMessage:function(t,o){var l=this;return l._isMobile?((l._confirmDialog=new r.ui.Confirm(e("<div />").appendTo(document.body),{modal:{preventScroll:!0},closable:!1,title:!1,content:t.title,messages:{okText:t.confirmDelete,cancel:t.cancelDelete},open:function(){l.content&&(l.content.data(dt,l.content.css(dt)),l.content.css(dt,"hidden"))},close:function(){l.content&&l.content.css(dt,l.content.data(dt))}})).result.done((function(){l._removeRow(o)})).fail((function(){var e=l._confirmDialog;e&&(e.close(),e.destroy())})),!1):window.confirm(t.title)},_confirmation:function(e){var t=this,r=t.options.editable,o=!0===r||typeof r===rt?t.options.messages.editable.confirmation:r.confirmation;return h(r)&&typeof r.mode===rt&&typeof o!==tt&&typeof o!==rt&&!1!==o&&(o=t.options.messages.editable.confirmation),!1===o||null==o||(typeof o===tt&&(o=o(t._modelForContainer(e))),t._showMessage({confirmDelete:r.confirmDelete||t.options.messages.editable.confirmDelete,cancelDelete:r.cancelDelete||t.options.messages.editable.cancelDelete,title:!0===o?t.options.messages.editable.confirmation:o},e))},cancelChanges:function(){var e=this;e._cachedRowsHeight&&(e._mapCachedRowsHeight("getByUid","id"),e._shouldMapHights=!0),e.dataSource.cancelChanges(),e._isVirtualEditable()&&e._virtualPageToTop((function(){e.virtualScrollable.scrollToTop()}))},saveChanges:function(){var e=this,t=e.editable&&e.editable.end();!t&&e.editable||e.trigger(ee)?t||e._scrollVirtualWrapper():e.dataSource.sync()},addRow:function(){var e,t,r=this,o=r.dataSource,l=r._editMode(),a=r.options.editable.createAt||"",i=o.pageSize(),n=o.view()||[],s=a.toLowerCase()===ot,d=r._isVirtualEditable();r.editable&&r.editable.end()||!r.editable?("incell"!=l&&r.cancelRow(),e=o.indexOf(n[0]),s&&(e+=n.length,i&&!o.options.serverPaging&&i<=n.length&&(e-=1)),e<0&&(e=o.page()>o.totalPages()?(o.page()-1)*i:0),r.options.navigatable&&"incell"==l&&r._removeCurrent(),d?r._virtualAddRow():((t=o.insert(e,{})).new=!0,r._editModel(t))):r._scrollVirtualWrapper()},_editModel:function(e){var t=this,o=t.options.editable.createAt||"",l=t._editMode();if(e){var a=e.uid,i=(t.lockedContent?t.lockedTable:t.table).find("tr["+r.attr("uid")+"="+a+"]"),n=i.children("td:not(.k-group-cell,.k-hierarchy-cell)").eq(t._firstEditableColumnIndex(i));"inline"===l&&i.length?t.editRow(i):"popup"===l?t.editRow(e):n.length&&t.editCell(n),"bottom"==o.toLowerCase()&&t.lockedContent&&(t.lockedContent[0].scrollTop=t.content[0].scrollTop=t.table[0].offsetHeight)}},_virtualAddRow:function(){var e=this,t=(e.options.editable.createAt||"").toLowerCase()===ot;e._clearEditableState(),t?e._virtualAddRowAtBottom():e._virtualAddRowAtTop()},_virtualAddRowAtTop:function(){var e,t=this,r=t.dataSource,o=t.virtualScrollable;1===r.page()?((e=r.insert(0,{})).new=!0,t._editModel(e),o.scrollToTop()):t._virtualPageToTop((function(){(e=r.insert(0,{})).new=!0,t._editModel(e),o.scrollToTop()}))},_virtualAddRowAtBottom:function(){var e,t=this,r=t.dataSource,o=t.virtualScrollable,l=r.total();r.at(l-1)instanceof a?((e=r.insert(l,{})).new=!0,t._virtualPageToBottom((function(){t._editModel(e),o.scrollToBottom()}))):t._virtualPageToBottom((function(){(e=r.insert(l,{})).new=!0,t._editModel(e),o.scrollToBottom()}))},_virtualPageToTop:function(e){this._virtualPage(0,this.dataSource.take(),(function(){e()}))},_virtualPageToBottom:function(e){var t=this.dataSource,r=t.take(),o=t.total(),l=o>r?o-r:0;this._virtualPage(l,r,(function(){e()}))},_virtualPage:function(e,t,r){var o=this;o._isVirtualEditable()&&(o.virtualScrollable._preventScroll=!0,o.virtualScrollable._page(e,t,r))},_firstEditableColumnIndex:function(e){var t,r,o,l=Zr(this.columns),a=this._modelForContainer(e);for(r=0,o=l.length;r<o;r++)if(t=l[r],a&&(!a.editable||a.editable(t.field))&&!t.command&&t.field&&!0!==t.hidden)return r;return-1},_clickAdd:function(e){e.preventDefault&&e.preventDefault(),this.addRow()},_clickCancel:function(e){e.preventDefault&&e.preventDefault(),this.cancelChanges()},_clickExcel:function(t){var r=this,o=e.Deferred();t.preventDefault&&t.preventDefault(),r._isExport=!0,r._progress(!0),setTimeout((()=>{r.saveAsExcel(o),o.always((()=>{r._progress(!1),r._isExport=!1}))}),1)},_clickPdf:function(e){var t=this;e.preventDefault&&e.preventDefault(),t._isExport=!0,t._pdfInitialized=!0,t._progress(!0);var r=t.saveAsPDF();r&&r.done((function(){t._progress(!1),t._isExport=!1,t._pdfInitialized=!1}))},_clickSave:function(e){e.preventDefault&&e.preventDefault(),this.saveChanges()},_searchInput:function(e){var t=this,r=e.currentTarget;clearTimeout(t._searchTimeOut),t._searchTimeOut=setTimeout((function(){t._searchTimeOut=null;var e=t.options,o=e.search?e.search.fields:null,l={filters:[],logic:"or"},a=r.value;if(o||(o=eo(e.columns)),t.dataSource.options.endless&&(t.dataSource.options.endless=null,t._endlessPageSize=t.dataSource.options.pageSize),a)for(var i=0;i<o.length;i++)t._pushExpression(l.filters,o[i],a);else l={};t.dataSource.filter(l)}),300)},_pasteToolbarDropDown:function(){var e=this;e.wrapper.find(".k-grid-paste-action").length&&(e.pasteActionsDropDownList=e.wrapper.find(".k-grid-paste-action").kendoDropDownList({dataSource:[{value:"insert",text:"Paste (Insert)"},{value:"replace",text:"Paste (Replace)"}],dataTextField:"text",dataValueField:"value",_allowFilterPaste:!1}).data("kendoDropDownList"))},_pushExpression:function(e,t,o){var l=this,a=l.dataSource.options.serverFiltering,i={string:"contains",number:"gte",date:"gte",enums:"eq",boolean:"eq"},n=t.name||t,s=t.operator,d=l.dataSource.reader.model&&l.dataSource.reader.model.fields,c=d&&d[n],u=c&&c.parse,p={field:n,operator:s||i.string,value:o};(s||a)&&c&&r.isFunction(u)&&null!==u(o)&&f(p,{operator:s||i[c.type],value:u(o)}),a&&c&&r.isFunction(u)&&null===u(o)||e.push(p)},_toolbar:function(){var t,o,l=this,a=l.wrapper,i=l.options.toolbar;i&&(l._createClickHandler=l._addClickHandler=l._clickAdd.bind(l),l._cancelClickHandler=l._clickCancel.bind(l),l._saveClickHandler=l._clickSave.bind(l),l._excelClickHandler=l._clickExcel.bind(l),l._pdfClickHandler=l._clickPdf.bind(l),l._serachHandler=l._searchInput.bind(l),(t=l.wrapper.find(".k-grid-toolbar")).length?l._attachToolbarClicks():(t=e('<div class="k-grid-toolbar k-toolbar" />').prependTo(a),typeof i===rt||v(i)?(typeof i===rt&&(i=r.template(i).bind(l)),t.html(i({grid:l})),l._attachToolbarClicks()):b(i)&&(o=l._processItems(i),t.kendoToolBar({navigateOnTab:!l.options.navigatable,size:l.options.size,items:o}))),t.on(it+O,".k-grid-search input",this._serachHandler))},_attachToolbarClicks:function(){var e=this.options.editable,t=this.wrapper.find(".k-grid-toolbar");e&&!1!==e.create&&t.on(Ne+O,".k-grid-add",this._createClickHandler).on(Ne+O,".k-grid-cancel-changes",this._cancelClickHandler).on(Ne+O,".k-grid-save-changes",this._saveClickHandler),t.on(Ne+O,".k-grid-excel",this._excelClickHandler),t.on(Ne+O,".k-grid-pdf",this._pdfClickHandler)},_processItems:function(e){var o=this,l=o.options,a=[],i=this.options.messages.commands,n=!1;return e.map((e=>{var s,d,c,u,p="";if("string"==typeof e?(s=e.toLowerCase(),(e={}).text=i[s]||s):(s=(e.name||e.text||"").toLowerCase(),e.text=e.text||i[s]||s),n||"search"!==s&&"columns"!==s||(n=!0,a.push({type:"spacer"})),"search"===s)d=Ao(e.text||i.search,!0),c=e.icon||e.iconClass||"search",p+=`<span class='k-searchbox k-input ${r.getValidCssClass("k-input-","size",o.options.size)} k-rounded-md k-input-solid k-grid-search'>`,p+=r.ui.icon({icon:c,iconClass:"k-input-icon"}),p+="<input autocomplete='off' placeholder='"+d+"' title='"+d+"' aria-label='"+d+"' class='k-input-inner' />",p+="</span>",a.push({name:"search",overflow:"never",template:p});else if("paste"===s&&l.allowPaste)a.push({template:"<input class='k-grid-paste-action' />"});else{if(!(s||h(e)&&e.template))throw new Error("Custom commands should have name specified");u=(e=f({type:"button"},lr[s],e)).className||"k-grid-"+(s||"").replace(/\s/g,""),e.spriteCssClass=e.icon?null:e.iconClass,e.attributes=o._processAttr(e.attr),delete e.attr,u&&(e.attributes.class===t&&(e.attributes.class=""),e.attributes.class+=" "+u),e.template&&delete e.type,o["_"+s+"ClickHandler"]&&(e.click=o["_"+s+"ClickHandler"]),a.push(e)}})),a},_processAttr:function(e){var t={};return typeof e===rt&&e.length>0?e.split(" ").map((e=>{var r=e.split("=");2===r.length&&(t[r[0]]=r[1].replaceAll('"',"").replaceAll("'",""))})):h(e)&&(t=e),t},_createButton:function(o){var l,a,i=o.template||qt,n=typeof o===rt?o:o.name||o.text,s=lr[n]?lr[n].className:"k-grid-"+(n||"").replace(/\s/g,""),d={className:o.skipCommandClass?"":s,text:n,attr:"",iconClass:"",size:o.size||this.options.size},c=this.options.messages.commands;if(!(n||h(o)&&o.template))throw new Error("Custom commands should have name specified");if(h(o)){if((o=f(!0,{},o)).className&&_(d.className,o.className.split(" "))<0?o.className+=" "+d.className:o.className===t&&(o.className=d.className),o.className.indexOf("k-primary")>-1&&(o.className=o.className.replace("k-primary",""),o.themeColor="primary"),"edit"===n&&((o=f(!0,{},o)).text=h(o.text)?o.text.edit:o.text,o.iconClass=h(o.iconClass)?o.iconClass.edit:o.iconClass),o.attr){if(h(o.attr)&&(o.attr=or(o.attr)),o.attr instanceof Function){let e=o.attr(o);o.attr=or(e)}typeof o.attr===rt&&(a=o.attr.match(/class="(.+?)"/))&&_(a[1],o.className.split(" "))<0&&(o.className+=" "+a[1])}d=f(!0,d,lr[n],{text:c[n]},o)}else d=f(!0,d,lr[n],{text:c[n]});return l=r.template(i)(d),o.template?l:r.html.renderButton(e(l),d)},_hasFooters:function(){return!!this.footerTemplate||!!this.groupFooterTemplate||this.footer&&this.footer.length>0||this.wrapper.find(".k-grid-footer").length>0},_groupable:function(){var t=this;t._groupableClickHandler?t.table.add(t.lockedTable).off(Ne+O,t._groupableClickHandler):t._groupableClickHandler=function(r){var o=e(this),l=o.closest(mt),a=t._groupRows?t._groupRows[t.wrapper.find(x+De).index(l)]:{};o.is(L)?t.trigger("groupCollapse",{group:a,element:l})||t.collapseGroup(l):t.trigger("groupExpand",{group:a,element:l})||t.expandGroup(l),r.preventDefault(),r.stopPropagation()},t._isLocked()?t.lockedTable.on(Ne+O,".k-grouping-row "+q+", .k-grouping-row "+L,t._groupableClickHandler):t.table.on(Ne+O,".k-grouping-row "+q+", .k-grouping-row "+L,t._groupableClickHandler),t._attachGroupable()},_attachGroupable:function(){var t=this,l=t.wrapper,a=t.options.groupable,i=M+"["+r.attr("field")+"]",n=t.content?".k-grid-header:first "+i:"table:first>.k-grid-header "+i;a&&!1!==a.enabled&&(l.has("div.k-grouping-header")[0]||e("<div/>").addClass("k-grouping-header").prependTo(l),t.groupable&&t._destroyGroupable(),Nt.chrome&&(l.find("div.k-grouping-header").css("touch-action",Rt),l.find(n).css("touch-action",Rt)),t.groupable=new o.Groupable(l,f({},a,{draggable:t._draggableInstance,groupContainer:">div.k-grouping-header",dataSource:t.dataSource,draggableElements:n,filter:n,size:t.options.size,allowDrag:t.options.reorderable,enableContextMenu:!!t.options.contextMenu,removeGroup:function(e){t._showUngroupedColumn(e)},change:function(e){t.trigger("group",{groups:e.groups})?e.preventDefault():(t._clearEditableState(),t._hideGroupedColumns(e.groups),t.dataSource.options.endless&&t._resetEndless())}})),t._addGroupableOptionsToHeader())},_showUngroupedColumn:function(e){var t,r=Zr(this.columns);for(t=0;t<r.length;t++)r[t].uid==e.colID&&r[t].hideOnGroup&&this.showColumn(r[t])},_hideGroupedColumns:function(e){if(e){var t,r=Zr(this.columns),o=[];for(t=0;t<e.length;t++)e[t].colID&&o.push(e[t].colID);for(t=0;t<r.length;t++)o.indexOf(r[t].uid)>=0&&r[t].hideOnGroup&&this.hideColumn(r[t])}},_resetEndless:function(){var e=this;e.dataSource.options.endless=null,e._endlessPageSize=e.dataSource.options.pageSize,e.dataSource._skip=0,e.dataSource._pageSize=e.dataSource._take=e._endlessPageSize,e.dataSource._page=1},_addGroupableOptionsToHeader:function(){var e,t,o,l=Fr(this.columns),a={},i=this._headerCells();for(o=0;o<l.length;o++)l[o].field,a[l[o].field]=l[o];for(o=0;o<i.length;o++)(t=a[(e=i.eq(o)).attr(r.attr(at))])&&t.groupable&&t.groupable.sort&&e.data(ut,t.groupable.sort)},_destroyGroupable:function(){var e=this;e.groupable&&e.groupable.element&&e.groupable.element.kendoGroupable("destroy"),e.groupable=null,e._removeGroupableOptionsFromHeader()},_removeGroupableOptionsFromHeader:function(){for(var e=this._headerCells(),t=0;t<e.length;t++)e.eq(t).removeData(ut)},_continuousItems:function(t,r){if(this.lockedContent){for(var o=this,l=o.table.add(o.lockedTable),a=e(t,l[0]),i=e(t,l[1]),n=r?Nr(Zr(o.columns)).length:1,s=r?Zr(o.columns).length-n:1,d=[],c=0;c<a.length;c+=n)k.apply(d,a.slice(c,c+n)),k.apply(d,[].splice.call(i,0,s));return d}},_selectable:function(){var t,o,l=this,a=[],i=l._isLocked(),n=l.options.selectable,s="skeleton"===l.options.loaderType;if(n&&!n.checkboxSelection){l.selectable&&l.selectable.destroy(),l._selectedIds={},n=r.ui.Selectable.parseOptions(n),t=n.multiple,o=n.cell,l._hasDetails()&&(a[a.length]=".k-detail-row"),(l.options.groupable||l._hasFooters()||l._groups())&&(a[a.length]=".k-grouping-row,.k-group-footer"),s&&(a[a.length]="[data-skeleton-row]"),""!==(a=a.join(","))&&(a=":not("+a+")");var d=l.table;i&&(d=d.add(l.lockedTable));var c=">"+(o?"tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer):not([data-skeleton-row]) > td:not(.k-group-cell):not(.k-hierarchy-cell)":"tbody>tr"+a);l.selectable=new r.ui.Selectable(d,{allowPaste:l.options.allowPaste,filter:c,aria:!0,multiple:t,holdToDrag:!(!l._isMobile&&!r.support.mobileOS),toggleable:!(!l._isMobile&&!r.support.mobileOS),dragToSelect:l.options.selectable&&l.options.selectable.dragToSelect,changing:function(e){l.trigger(Y,{target:e.target,originalEvent:e.originalEvent})&&e.preventDefault()},change:function(e){var t;o||l._persistSelectedRows(),l._checkBoxSelection&&(t=l.selectable.value(),l._uncheckCheckBoxes(),l._checkRows(t),t.length&&t.length===l.items().length?l._toggleHeaderCheckState(!0):l._toggleHeaderCheckState(!1)),l._calculateAggregatesForSelected(),e.event&&l.trigger(J,{cellAggregates:l._cellAggregates})},useAllItems:i&&t&&o,relatedTarget:function(t){if(!o&&i){for(var r,a=e(),n=0,s=t.length;n<s;n++)r=l._relatedRow(t[n]),_(r[0],t)<0&&(a=a.add(r));return a}},continuousItems:function(){return l._continuousItems(c,o)},ignoreOverlapped:l.options.selectable&&l.options.selectable.ignoreOverlapped,addIdToRanges:!0}),l.options.navigatable&&d.on("keydown"+O,(function(r){var a,n,s=l.current(),c=r.target,p={event:r};if(s)if(r.keyCode===u.SPACEBAR&&!r.shiftKey&&e.inArray(c,d)>-1&&!s.is(".k-edit-cell,.k-header")&&s.parent().is(":not(.k-grouping-row,.k-detail-row,.k-group-footer)")){if(r.preventDefault(),r.stopPropagation(),((a=!(s=o?s:s.parent()).hasClass(be)||l.selectable.value().length>1)||t&&s.hasClass(be)&&r.ctrlKey)&&l.trigger(Y,{target:s,originalEvent:r}))return;if(i&&!o&&(s=s.add(l._relatedRow(s))),t)if(r.ctrlKey){if(s.hasClass(be))return l._deselectCheckRows(s),l._calculateAggregatesForSelected(),void l.trigger(J,{cellAggregates:l._cellAggregates})}else l.selectable.clear();else l.selectable.clear();o||(l.selectable._lastActive=s),l.selectable.value(s),a&&(l._calculateAggregatesForSelected(),l.trigger(J,{cellAggregates:l._cellAggregates}))}else if(!o&&(e(c).is("td")||e(c).is("table")&&_(c,this._navigatableTables))&&(r.shiftKey&&r.keyCode==u.LEFT||r.shiftKey&&r.keyCode==u.RIGHT||r.shiftKey&&r.keyCode==u.UP||r.shiftKey&&r.keyCode==u.DOWN||r.keyCode===u.SPACEBAR&&r.shiftKey)){if(r.preventDefault(),r.stopPropagation(),s=s.parent(),l.trigger(Y,{target:s,originalEvent:r}))return;n=l.selectable.value(),i&&(s=s.add(l._relatedRow(s))),t?(l.selectable._lastActive||(l.selectable._lastActive=s),l.selectable.selectRange(l.selectable._firstSelectee(),s),function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(n,l.selectable.value())||l.trigger(J,p)):s.hasClass(be)||(l.selectable.clear(),l.selectable.value(s),l._calculateAggregatesForSelected(),l.trigger(J,{cellAggregates:l._cellAggregates}))}}))}},_pasteReplaceHandler:function(t){var r,o,l,a,i,n=this,s=[];(o=n.select().first()).length&&(o.is(mt)&&(o=o.children("td").first()),r=t.split("\n").filter((e=>e)),l=o.closest("tr"),i=n.thead.find("th:eq("+o.index()+")").data("field"),a=l.data("uid"),s.push(a),l.nextAll(D).slice(0,r.length-1).each(((t,r)=>{s.push(e(r).data("uid"))})),n._executePaste(r,s,null,i))},_pasteInsertHandler:function(e){var t,r,o,l,a,i=this,n=i.dataSource;(r=i.select().first()).length&&(r.is(mt)&&(r=r.children("td").first()),t=e.split("\n").filter((e=>e)),o=r.closest("tr"),a=i.dataItem(o),l=n.indexOf(a)+1,i._executePaste(t,null,l,null))},_executePaste:function(e,t,r,o){var l,a,i,n,s,d=this,c=d.dataSource,u=t||!1,p=d._getSelectedRowUids(),h=d._getSelectedColumnFields(),f=[],g=Qr(d.columns).filter((e=>!e.selectable&&!e.draggable&!e.command)),m=o&&g.map((e=>e.field)).indexOf(o);if(1===e.length&&1===e[0].split("\t").length&&u)for(let t=0;t<p.length;t++){const r=p[t];l=c.getByUid(r),i=e[0].split("\t")[0];for(let e=0;e<h.length;e++)s=h[e],l&&i&&l.set(s,i);l&&l.dirty&&f.push(l)}else for(let o=0;o<e.length;o++){a=e[o].split("\t"),l=u?c.getByUid(t[o]):c.insert(r+o,{});for(let e=0;e<a.length;e++)i=a[e].replace(/\r/,""),(n=g[e+m||0])&&l&&i&&(s=n.field,l.set(s,i));l&&l.dirty&&f.push(l)}d.trigger(ne,{items:f,type:u?"replace":"insert"})},_pasteKeyboardHandler:function(t){var r,o,l,a=this,i=a.current(),n=t.originalEvent.clipboardData,s=a.pasteActionsDropDownList&&a.pasteActionsDropDownList.value()||"insert";e(t.target).is(".k-edit-cell input:visible")||n&&(t.preventDefault(),l=n.getData("text").trimEnd(),/\S/.test(l)||(l=" "),i&&i.length&&(o=i.index(),r=i.closest(mt).data("uid")),"replace"===s&&a._pasteReplaceHandler(l),"insert"===s&&a._pasteInsertHandler(l),o&&r&&(a._currentRowIndex=a.wrapper.find("tr[data-uid='"+r+"']").index(),a._restoreCurrent(o)))},_paste:function(){var e=this,t=e.options,r=t.selectable;if(t.allowPaste&&r){e.pasteHandler=e._pasteKeyboardHandler.bind(e);(e.content||e.table).on(ne+O,e.pasteHandler),e.options.toolbar&&e._pasteToolbarDropDown()}},_clipboard:function(){var e=this.options;if(e.selectable&&e.allowCopy){var t=this;e.navigatable||(t.table.attr(et,0),t.table.add(t.lockedTable).on(je+O+" keydown"+O,".k-detail-cell",(function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()})).on(je+O,A+">"+z,xo.bind(t))),t.copyHandler=t.copySelection.bind(t),t.updateClipBoardState=function(){t.areaClipBoard&&t.areaClipBoard.val(t.getTSV()).trigger("focus").select()};const r=t.content||t.table;t.bind("change",t.updateClipBoardState),r.on("keydown",t.copyHandler),t.clearAreaHandler=t.clearArea.bind(t),r.on("keyup",t.clearAreaHandler)}},copySelectionToClipboard:function(e){this._createAreaClipBoard(),this.areaClipBoard.val(this.getTSV(e)).trigger("focus").select(),document.execCommand("copy")},copySelection:function(t){t instanceof jQuery.Event&&!t.ctrlKey&&!t.metaKey||67!==t.keyCode||!t.ctrlKey&&!t.metaKey||e(t.target).is("input:visible,textarea:visible")||window.getSelection&&window.getSelection().toString()||document.selection&&document.selection.createRange().text||(this._createAreaClipBoard(),this.areaClipBoard.val(this.getTSV()).trigger("focus").select())},_createAreaClipBoard:function(){this.areaClipBoard||(this.areaClipBoard=e("<textarea />").css({position:"fixed",top:"50%",left:"50%",opacity:0,width:0,height:0}).appendTo(this.wrapper))},getTSV:function(r){var o=this,l=o.select(),a="\t",i=o.options.allowCopy,n=o._isLocked()&&Nr(o.columns).length;e.isPlainObject(i)&&i.delimeter&&(a=i.delimeter);var s="";if(l.length){l.eq(0).is(mt)&&(l=l.find("td:not(.k-group-cell)")),l.filter(":visible");var d,c=[],u=this.columns.length,p=o._isLocked()&&Nr(o.columns).length,h=!0,f=[],g=Qr(this.columns);e.each(l,(function(t,r){if(r=e(r),d=o._getCellField(r,n),-1!==g.findIndex((e=>e.field===d))){var l=r.closest(mt).index(),a=r.index();a-=r.prevAll(":hidden").length,p&&h&&(h=e.contains(o.lockedTable[0],r[0])),o._groups()&&h&&(a-=o._groups()),a=h?a:a+p,d&&(f[a]=d),u>a&&(u=a);var i=r.text();c[l]||(c[l]=[]),c[l][a]=i}}));var m=c.length;if(c=e.each(c,(function(e,t){t&&(c[e]=t.slice(u),m>e&&(m=e))})),r&&f.length){c.splice(m,0,f.map((function(e){return function(e,t){return t.filter((function(t){return t.field===e}))[0].title||e}(e,g)})));var b=c.findIndex((function(e){return e!==t}));c[b]=c[b].slice(u)}e.each(c.slice(m),(function(e,t){s+=t?t.join(a)+"\r\n":"\r\n"}))}return s},clearArea:function(e){this.areaClipBoard&&e&&e.target===this.areaClipBoard[0]&&wo(this.table,!0),this.areaClipBoard&&(this.areaClipBoard.remove(),this.areaClipBoard=null)},_adaptiveColumns:function(){var e=this;e._anyColumnHasMediaQuery()&&(e._setColumnsMediaVisibility(e.columns),e._attachColumnMediaResizeHandler())},_anyColumnHasMediaQuery:function(){return this._columnsWithMediaQuery().length},_columnsWithMediaQuery:function(){return vr(this.columns)},_attachColumnMediaResizeHandler:function(){var t=this;t._detachColumnMediaResizeHandler(),t._columnMediaResizeHandler=t._onColumnMediaResize.bind(t),e(window).on(Fe+O,t._columnMediaResizeHandler)},_detachColumnMediaResizeHandler:function(){this._columnMediaResizeHandler&&e(window).off(Fe+O,this._columnMediaResizeHandler)},_onColumnMediaResize:function(){var e=this;e._setColumnsMediaVisibility(e.columns),e._setContentMediaWidth()},_setColumnsMediaVisibility:function(e){for(var t=e||[],r=0;r<t.length;r++)this._setColumnMediaVisibility(t[r])},_setColumnMediaVisibility:function(e){var t=this;wr(e.media)?t._setColumnsMediaVisibility(e.columns):mr(e)?(t._showColumnByMedia(e),e.hidden||t._setColumnsMediaVisibility(e.columns)):t._hideColumnByMedia(e)},_showColumnByMedia:function(e){e.hidden||this.showColumn(e),gr(e)},_hideColumnByMedia:function(e){var t=e.hidden;t||(e._hideByMedia=!0,this.hideColumn(e),e._hideByMedia=!1,e.hidden=t),gr(e)},_setContentMediaWidth:function(){var t,r,o=this,l=o.options,a=o._isLocked();if(l.scrollable&&(!0===l.resizable||l.resizable&&!0===l.resizable.columns)){a&&o.lockedFooter?t=o.lockedFooter.children("table"):o.footer&&(t=o.footer.find(">.k-grid-footer-wrap>table")),t&&t[0]||(t=e());var i=a?o.wrapper.find(".k-grid-header-locked").find("table"):o.wrapper.find(".k-grid-header").find("table"),n=a?o.lockedTable:o.table,s=i.find("th"),c=i.find("colgroup"),u=s.length,p=s.filter(br).length,h=s.length-p,f=0;if(""!==i[0].style.width&&parseFloat(i[0].style.width)!==f){for(var g=i.css(Xe),m=0;m<u;m++)if(r=s[m],e(r)[0].style.display!==Rt&&!e(r)[0].classList.contains("k-hidden")){var b,_=Math.max(m,m-h),k=c.children()[_],v=k?k.style.width:"";""!==v?b=parseFloat(v):(i.css(Xe,Ze),b=d(s.eq(m)),i.css(Xe,g)),f+=b}n.css("width",f-1),i.css("width",f),t.css("width",f),o._updateStickyColumns()}}},_minScreenSupport:function(){this.hideMinScreenCols()&&(this.minScreenResizeHandler=this.hideMinScreenCols.bind(this),e(window).on("resize",this.minScreenResizeHandler))},hideMinScreenCols:function(){var e=this.columns,t=window.innerWidth>0?window.innerWidth:screen.width;return this._iterateMinScreenCols(e,t)},_iterateMinScreenCols:function(e,r){for(var o=!1,l=0;l<e.length;l++){var a=e[l],i=a.minScreenWidth;i!==t&&null!==i&&(o=!0,i>r?this.hideColumn(a):this.showColumn(a)),!a.hidden&&a.columns&&(o=this._iterateMinScreenCols(a.columns,r)||o)}return o},_stickyColumns:function(){this._anyStickyColumns()&&this._setStickyColumns(!1)},_updateStickyColumns:function(){var e=this,t=m(Zr(e.columns),(function(e){return e.groupHeaderColumnTemplate}));e._anyStickyColumns()&&(e._setStickyColumns(!0),e._templates(),t.length>0&&e._renderGroupRows(),e._hasFilterRow()&&e._updateStickyFilterCells())},_updateStickyFilterCells:function(){var t=this.thead.find(".k-filter-row").find("td:not(.k-group-cell,.k-hierarchy-cell)");t.length&&t.each((function(){var t=e(this),r=t.data("column");r.sticky?(h(r.stickyStyle)&&t.css({left:r.stickyStyle.left||"",right:r.stickyStyle.right||""}),t.addClass(Ie)):(t.css({left:"",right:""}),t.removeClass(Ie))}))},_anyStickyColumns:function(){return Ur(this.columns).length},_setStickyColumns:function(e){var t=this,r=Ur(t.columns),o=function(e){return m(e,(function(e){return e.sticky&&!e.locked&&_r(e)}))}(t.columns),l=t._calculateStickyWidths(o);t._removeStickyAttributes(r),t._setStickyClassAttributes(r),t._setStickyStyleAttributes(o,l,e),e&&t._setStickyStyles(o,l)},_calculateStickyWidths:function(e,t,r){var o,l,a,i,n=Gt?"right":"left",s=Gt?"left":"right",d={left:new Array(e.length).fill(t||0),right:new Array(e.length).fill(r||0)};for(o=0;o<e.length-1;o++)l=e[o],a=this._sumColumnWidth(l)+d[n][o],d[n][o+1]=a;for(o=e.length-1;o>0;o--)l=e[o],i=this._sumColumnWidth(l)+d[s][o],d[s][o-1]=i;return d},_setStickyClassAttributes:function(e,t){var r,o;for(r=0;r<e.length;r++)(o=e[r]).columns&&(!t&&r&&(t=r),this._setStickyClassAttributes(Jr([o]),t)),t&&Wr(o,"headerAttributes","class",ze),Wr(o,"attributes","class",Ee),Wr(o,"headerAttributes","class",Ie),Wr(o,"footerAttributes","class",Ae)},_setStickyStyleAttributes:function(e,t,o){var l,a,i,n,s,d,c,u=this;for(l=0;l<e.length;l++)a=e[l],s={left:(i=t.left[l])+"px",right:(n=t.right[l])+"px"},a.columns&&(d=Xr([a]),c=u._calculateStickyWidths(d,i,n),u._setStickyStyleAttributes(d,c,o),o&&u._setStickyStyles(d,c)),Wr(a,"attributes",r.attr("style-left"),s.left),Wr(a,"attributes",r.attr("style-right"),s.right),Wr(a,"headerAttributes",r.attr("style-left"),s.left),Wr(a,"headerAttributes",r.attr("style-right"),s.right),Wr(a,"footerAttributes",r.attr("style-left"),s.left),Wr(a,"footerAttributes",r.attr("style-right"),s.right),a.stickyStyle=s},_removeStickyAttributes:function(e){var t,o,l=new RegExp("(\\s*"+Ee+")*","ig"),a=new RegExp("(\\s*"+Ie+")*","ig"),i=new RegExp("(\\s*"+Ae+")*","ig"),n=new RegExp("(\\s*"+ze+")*","ig");for(t=0;t<e.length;t++)(o=e[t]).columns&&this._removeStickyAttributes(Jr([o])),Gr(o,"attributes","class",l),Gr(o,"attributes",r.attr("style-left"),"",!0),Gr(o,"attributes",r.attr("style-right"),"",!0),Gr(o,"headerAttributes","class",a),Gr(o,"headerAttributes","class",n),Gr(o,"headerAttributes",r.attr("style-left"),"",!0),Gr(o,"headerAttributes",r.attr("style-right"),"",!0),Gr(o,"footerAttributes","class",i),Gr(o,"footerAttributes",r.attr("style-left"),"",!0),Gr(o,"footerAttributes",r.attr("style-right"),"",!0)},_setStickyStyles:function(t,r){var o,l,a,i,n,s,d,c,u,p,h,f=this,g=Zr(jr(f.columns)),m=f.tbody.children(":not(.k-detail-row)");for(o=0;o<t.length;o++)if(i=t[o],s=r.left[o],d=r.right[o],n=g.indexOf(i),(c=f._getColumnHeader(i)).addClass(Ie),i.headerAttributes.class&&-1!==i.headerAttributes.class.indexOf(ze)&&c.addClass(ze),Vr(c,s,d),!i.columns)for(f.footer&&((u=f.footer.find(".k-grid-footer-wrap tr.k-footer-template").children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(n)).addClass(Ae),Vr(u,s,d)),l=0;l<m.length;l++)(a=e(m[l])).hasClass(De)?((p=a.find("."+i.groupHeaderColumnTemplateClass)).addClass(Ee),Vr(p,s,d)):((h=a.children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(n)).addClass(Ee),Vr(h,s,d))},_removeStickyStyles:function(t){var r,o,l,a,i,n,s,d,c,u=this,p=Zr(jr(u.columns)),h=u.tbody.children(":not(.k-detail-row)");for(r=0;r<t.length;r++)if(a=t[r],i=p.indexOf(a),(n=u._getColumnHeader(a)).removeClass(Ie),n.removeClass(ze),Vr(n,"",""),a.columns)u._removeStickyStyles(a.columns);else for(a.footerTemplate&&u.footer&&((s=u.footer.find(".k-grid-footer-wrap tr.k-footer-template").children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(i)).removeClass(Ae),Vr(s,"","")),o=0;o<h.length;o++)(l=e(h[o])).hasClass(De)?((d=l.find("."+a.groupHeaderColumnTemplateClass)).removeClass(Ee),Vr(d,"","")):((c=l.children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(i)).removeClass(Ee),Vr(c,"",""))},_getColumnHeader:function(t){return e("#"+t.headerAttributes.id).length?e("#"+t.headerAttributes.id):e("#"+this._cellId)},_sumColumnWidth:function(e){return e.columns?this._sumCurrentWidths(Zr([e])):this._sumCurrentWidths([e])},_sumCurrentWidths:function(e){var t,r,o,l=0,a=0,i=e.length;for(o=0;o<i;o++)t=e[o],r=this._getColumnHeader(t),!t.hidden&&mr(t)&&(l+=(a=r.is(":visible")?r.outerWidth():t.width)?parseInt(a,10):0);return l},_belongsToGrid:function(e){return this.wrapper[0]===e.closest(".k-grid")[0]},getSelectedData:function(){for(var e=this,t=e.selectable.selectedRanges(),r=Object.keys(t),o=e.selectable.selectedSingleItems(),l=[],a=Qr(e.columns),i=0;i<r.length;i++)l=l.concat(e._mapSelectionToData(t[r[i]],a,null,!0));return o.length&&(l=l.concat(e._mapSelectionToData(o,a,null,!0))),l},getSelectedDataByKeys:function(){var t,r,o=this,l=o.dataSource,a=o.selectedKeyNames(),i=Qr(o.columns),n={},s=function(e){var t={};if(e.field)return t[e.field]=r[e.field],t};for(let o=0;o<a.length;o++)t=a[o],(r=l.get(t))&&(n[r.uid]=e.extend.apply({},i.map(s)));return Object.keys(n).map((function(e){return n[e]}))},exportSelectedToExcel:function(e){if(!r.excel||!r.ooxml)throw new Error("The excel export functionality depends on both kendo.excel.js and kendo.ooxml.js scripts, please make sure they are included.");var t,o=this,l=this.options.excel||{},a=Qr(o.columns),i=new r.excel.ExcelExporter({}),n={sheets:[{columns:Array.apply(0,Array(a.length)).map((function(){return{autoWidth:!0}})),rows:[],freezePane:{},filter:!1}]},s=o.selectable.selectedRanges(),d=Object.keys(s),c=o.selectable.selectedSingleItems(),u=[],p=o._isLocked()&&Nr(o.columns).length,h=zo.bind(o);for(t=0;t<d.length;t++)u=u.concat(o._mapSelectionToData(s[d[t]],a,Do));if(u.length&&o._addRangeSelectionRows(n,i,u,e),(u=c.length?o._mapSelectionToData(c,a,Do):[]).length&&(p&&(u=u.sort(h)),o._addSingleSelectionRows(n,i,u,e)),n.sheets[0].rows.length){var f=new r.ooxml.Workbook(n);f.options||(f.options={}),f.options.skipCustomHeight=!0,f.toDataURLAsync().then((function(e){r.saveAs({dataURI:e,fileName:n.fileName||l.fileName,proxyURL:l.proxyURL,forceProxy:l.forceProxy})}))}},_addSingleSelectionRows:function(e,t,r,o){var l,a=0,i=Yr(this.columns);const n=t._instance??t;for(a=0;a<r.length;a++)l=r[a],t.data=[l],this._setExporterColumns(n,i,l),this._createExportRows(e,n,o)},_addRangeSelectionRows:function(e,t,r,o){var l=Yr(this.columns);const a=t._instance??t;t.data=r,this._setExporterColumns(a,l,r[0]),this._createExportRows(e,a,o)},_createExportRows:function(e,t,r){const o=t._instance??t;e.sheets[0].rows=e.sheets[0].rows.concat(r?o._rows():o._dataRows(o.data,0))},_setExporterColumns:function(t,r,o){const l=t._instance??t;l.columns=l.options.columns=e.map(r.filter((function(e){return Object.keys(o).indexOf(e.field)>=0})),l._prepareColumn)},_mapSelectionToData:function(t,r,o,l){for(var a,i,n,s,d,c=this,u="TR"===t[0][0].nodeName,p={},h=function(e){var t={};if(e.field&&(!o||o(e)))return t[e.field]=a[e.field],t},f=c._isLocked()&&Nr(c.columns).length,g=0;g<t.length;g++)if(i=t[g],a=c.dataItem(u?i:i.parent()),u)p[a.uid]=e.extend.apply({},r.map(h));else{if(!(s=c._getCellField(i,f,l)))continue;if((n=p[a.uid])||(n=p[a.uid]={}),!(d=yr(r,s))||o&&!o(d))continue;n[s]=a[s]}return Object.keys(p).map((function(e){return p[e].uid=e,p[e]}))},_getCellField:function(t,o,l){var a=this,i=o&&e.contains(a.lockedTable[0],t[0]),n=r.attr("field"),s=r.attr("index"),d=0;return l&&(d=a._trailingColumns()),o?a.element.find(".k-grid-header-"+(i?"locked":"wrap")+" th["+s+"='"+t.index()+"']").attr(n):a.thead.find("th["+s+"='"+(t.index()-d)+"']").attr(n)},_relatedRow:function(t){var r=this.lockedTable;if(t=e(t),!r)return t;var o=t.closest(this.table.add(this.lockedTable)),l=o.find(">tbody>tr").index(t);return(o=o[0]===this.table[0]?r:this.table).find(">tbody>tr").eq(l)},_relatedCell:function(t){var r=this.lockedTable;if(t=e(t),!r)return t;var o=t.closest(this.table.add(this.lockedTable)),l=o.find(">tbody>tr>td").index(t);return(o=o[0]===this.table[0]?r:this.table).find(">tbody>tr>td").index(l)},clearSelection:function(){var e=this;e.selectable&&!e._checkBoxSelection&&e.selectable.clear(),e._checkBoxSelection?e._deselectCheckRows(e.select()):e.options.persistSelection?e._persistSelectedRows():e._selectedIds={}},select:function(e){var t=this,o=t.selectable,l=r.ui.Selectable.parseOptions(this.options.selectable).cell;return(e=t.table.add(t.lockedTable).find(e)).length?(o&&!o.options.multiple&&(o.clear(),e=e.first()),t._isLocked()&&(e=e.add(e.map((function(){return l?t._relatedCell(this):t._relatedRow(this)})))),o&&!t._checkBoxSelection?o.value(e):(t._checkRows(e),t.select().length===t.items().length&&t._toggleHeaderCheckState(!0)),void(l||t._persistSelectedRows())):o?o.value():t.items().filter("."+be)},_initSelectableAggregates:function(){var e=this;e.options.selectable&&(e._selectableAggregatesOptions||(e._selectableAggregatesOptions=e._parseSelectableAggregatesOptions()),e._selectableAggregatesOptions.count&&(e._cellAggregates={count:0}))},_calculateAggregatesForSelected:function(){var t,o,l,a,i,n,s,d,c,u,h,f=this,g=f.options,m=f.getSelectedDataByKeys(),b=f.options.selectable,_=b.cellAggregates,k=Qr(f.columns).filter((e=>!e.selectable&&!e.draggable&!e.command)).length,v=eo(g.columns),w=r.ui.Selectable.parseOptions(b).cell,C=[],y=[],S=[];if(_){w&&(m=f.getSelectedData()),_=f._selectableAggregatesOptions;for(let e=0;e<m.length;e++){t=m[e];for(let e=0;e<v.length;e++)switch(o=t[v[e]],p(o)){case"number":C.push(o);break;case"date":y.push(o);break;case"boolean":S.push(o)}}var x;_.count&&(l=w?(x=f.select(),x.filter(((t,r)=>{const o=e(r),l=o.children(".k-select-checkbox").length>0,a=o.find("> .k-checkbox-wrap > .k-select-checkbox").length>0;return!(o.hasClass("k-drag-cell")||o.hasClass("k-command-cell")||l||a)}))).length:m.length*k),C.length&&(i=_.max?C.reduce(((e,t)=>Math.max(e,t))):null,a=_.min?C.reduce(((e,t)=>Math.min(e,t))):null,n=_.sum?C.reduce(((e,t)=>e+t)):null,s=_.average?C.reduce(((e,t)=>e+t))/C.length:null),y.length&&(d=_.earliest?y.reduce(((e,t)=>new Date(Math.min(e,t)))):null,c=_.latest?y.reduce(((e,t)=>new Date(Math.max(e,t)))):null),S.length&&(u=_.isTrue?S.filter((e=>!0===e)).length:null,h=_.isFalse?S.filter((e=>!1===e)).length:null),f._cellAggregates={count:l,max:i,min:a,sum:n,average:s,earliest:d,latest:c,isTrue:u,isFalse:h},f.statusBar&&f._statusBar()}},_parseSelectableAggregatesOptions:function(){var e=this.options.selectable.cellAggregates,t={};if(b(e)){for(let r=0;r<e.length;r++)t[e[r]]=!0;return t}return{count:!0,min:!0,max:!0,sum:!0,average:!0,earliest:!0,latest:!0,isTrue:!0,isFalse:!0}},_toggleHeaderCheckState:function(e){var t=this;e?t.thead.add(t.lockedHeader).find("tr "+ke).prop("checked",!0).attr(xt,!0).attr(_t,"Deselect all rows"):t.thead.add(t.lockedHeader).find("tr "+ke).prop("checked",!1).attr(xt,!1).attr(_t,"Select all rows")},_uncheckCheckBoxes:function(){this.table.add(this.lockedTable).find("tbody "+ke).attr(xt,!1).prop("checked",!1).attr(_t,"Select row")},_deselectCheckRows:function(t){var o=this,l=r.attr("range-selected");t=o.table.add(o.lockedTable).find(t),o._isLocked()&&(t=t.add(t.map((function(){return o._relatedRow(this)})))),t.each((function(){e(this).removeClass(be).removeAttr(l).find(ke).attr(xt,!1).prop("checked",!1).attr(_t,"Select row")})),o._toggleHeaderCheckState(!1),o._persistSelectedRows()},_checkRows:function(t){t.each((function(){e(this).addClass(be).find(ke).prop("checked",!0).attr(_t,"Deselect row").attr(xt,!0)}))},_persistSelectedRows:function(){var e,t,o,l=this,a=l.items(),i=l.dataSource.options.schema,n={};if(i&&i.model&&l._data&&(o=l._getSchemaIdField())){r.ui.Selectable.parseOptions(l.options.selectable).multiple||l._checkBoxSelection||(l._selectedIds={}),l.select().each((function(){t=l.dataItem(this),n[t[o]]=!0}));for(var s=0;s<a.length;s++)e=(t=l.dataItem(a[s]))[o],n[e]?l._selectedIds[e]=!0:delete l._selectedIds[e]}},selectedKeyNames:function(){var e=[];for(var t in this._selectedIds)e.push(t);return e.sort(),e},_updateCurrentAttr:function(t,r){var o,l,a=e(t).data("headerId");e(t).removeClass(he),this.table.removeAttr(Tt),a?(a=a.replace(this._cellId,""),e(t).attr(ft,a)):e(t).removeAttr(ft),(o=r.attr(ft))!=this._cellId&&r.data("headerId",o),o?l=o:r.attr(ft,this._cellId),r.addClass(he),this.table.attr(Tt,l||this._cellId),this._current=r},_scrollCurrent:function(){const t=this._current,r=this.options.scrollable;if(t&&r){var o=t.parent(),l=o.closest("table").parent(),a=l.is(".k-grid-content-locked,.k-grid-header-locked"),i=l.is(".k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap"),n=e(this.content).find(">.k-virtual-scrollable-wrap").addBack().last()[0];if(i)if(this.virtualScroll){var s=Math.max(_(o[0],this._items(o.parent())),0);this.virtualScroll.rows?(this._rowVirtualIndex=this.virtualScrollable.itemIndex(s),this.virtualScrollable.scrollIntoView(o)):(this._rowVirtualIndex=s,this._scrollTo(this._relatedRow(o)[0],n))}else this._scrollTo(this._relatedRow(o)[0],n);this.lockedContent&&(this.lockedContent[0].scrollTop=n.scrollTop),a||this._scrollTo(t[0],n)}},_findGroupedItem:function(e,t,r){const o=this;let l;for(let a=0;a<e.length;a++){const i=e[a];if(i.field===r?i.value===t&&(l=i.items[0].uid&&i.items[0][r]?i.items[0]:o._findGroupedItem(i.items,t,r)):l=i.items[0].uid&&i.items[0][r]?i.items.find((e=>e[r]===t)):o._findGroupedItem(i.items,t,r),l)return l}},_findClosestGroupingRow:function(t,r,o){const l=this;let a=r||0,i=o||0;if(!(l.options.groupable&&l.dataSource.group().length>0)||!t)return{targetRow:t,rowsToTarget:a,hiddenGroupingRows:i};const n=e(t.previousSibling);if(n&&n.hasClass(De)){let e={targetRow:n,rowsToTarget:a,hiddenGroupingRows:i};return"none"===n.css("display")&&(e=l._findClosestGroupingRow(n[0],a,i+1)),e}{const e=l._findClosestGroupingRow(n[0],a+1,i);if(e)return{targetRow:e.targetRow,rowsToTarget:e.rowsToTarget,hiddenGroupingRows:i}}},_checkItemAlreadyLoaded:function(e,t){const r=this.dataSource._ranges;let o;for(let l=0;l<r.length;l++){if(o=r[l].data.find((r=>r[t]===e)),o)return{loadedItem:o,page:l}}},scrollToItem:function(t,o){const l=this,a=l.options,i=l.dataSource,n=i.group(),s=i.pageSize(),d=l._getSchemaIdField(),c=a.scrollable,u=l.wrapper.find(".k-grid-content.k-auto-scrollable"),p=r._outerHeight(l.tbody.find(`tr:not(.${De})`));let h=a.groupable&&l.wrapper.find(`.${De}:first-child`),f={};l._scrolledItems&&(f=l._scrolledItems);let g=0,m=!1;if(c&&c.virtual&&0===n.length&&(l.virtualScrollable._alwaysScrollTop=!0),!t||!d)return;const b=i.view();let _=b.find((e=>e[d]==t));if(n.length>0&&(_=l._findGroupedItem(b,t,d),g=r._outerHeight(h[0])),!_&&a.scrollable.virtual)return l.virtualScrollable._programmaticallyScrolling&&"resolved"!==l.virtualScrollable._programmaticallyScrolling.state()||(l.virtualScrollable._programmaticallyScrolling=e.Deferred()),void(o&&"function"==typeof o&&o({success:e=>{let r=e;if(r="number"!=typeof r?Number(r):r,isNaN(r))return;const o=i.options.serverPaging;let a=S.floor(r/s);if(o){const e=l._checkItemAlreadyLoaded(t,d);e&&(a=e.page)}const n=u.find(mt),c=n[n.length-1].offsetTop,h=a*(s/n.length*c)+(r-a*s-1)*p;return l._scrollingUp=l.virtualScrollable.verticalScrollbar.scrollTop()>h,l._scrollOffset=h,l.virtualScrollable._scrollTo(h),l.virtualScrollable.verticalScrollbar.trigger(se),l.virtualScrollable._programmaticallyScrolling.done((()=>{l.scrollToItem(t)}))}}));const k=_&&_.uid;if(!k)return;let v=e(`[data-uid=${k}]`),{targetRow:w,rowsToTarget:C,hiddenGroupingRows:y}=l._findClosestGroupingRow(v[0]);if(!v||!w)return;n.length>0&&"none"===v.css("display")&&(v=w,m=!0);const x=m?y*g+p:0;let T=v[0].offsetTop-((C+n.length)*g-x),H=T;if(a.scrollable.virtual){if(f&&f[t]){const e=Math.floor(l.virtualScrollable.verticalScrollbar.scrollTop()),r=Math.floor(f[t].scrollingDownOffset),o=Math.floor(f[t].scrollingUpOffset);if(e===o||e===r)return;l._scrollingUp=e>H,H=l._scrollingUp?o??H:r??H}l._scrollOffset&&(l._scrollingUp?(l._scrollOffset===T&&(l._scrollOffset+=p),H=T-l.virtualScrollable._scrollTop+l._scrollOffset):H+=l._scrollOffset),l.virtualScrollable._scrollTo(T,H),f[t]||(f[t]={}),l._scrollingUp?f[t]&&!f[t].scrollingUpOffset&&(f[t].scrollingUpOffset=H):f[t]&&!f[t].scrollingDownOffset&&(f[t].scrollingDownOffset=H)}else u.scrollTop(H);l.virtualScrollable&&(l._scrollOffset&&delete l._scrollOffset,l._scrollingUp&&delete l._scrollingUp),l._scrolledItems=f},current:function(e){return this._setCurrent(e,!0)},_setCurrent:function(t,r,o){var l=this._current;if(t=e(t),l&&t&&l.length&&t.length&&l.closest(".k-filter-row").length>0&&0===t.closest(".k-filter-row").length&&this._filterFocusable().attr(et,-1),t.length&&(!l||l[0]!==t[0])){var a=t.parent(),i=a.children(E),n=parseInt(a.children().first().attr("colspan"),10);this._hasVirtualColumns()&&(this._virtualCellIndex=(n>1?n:0)+i.index(t)),this._updateCurrentAttr(l,t),o||this._scrollCurrent(),r||this.trigger(Ge,{element:t})}return t&&t.length&&(this._lastCellIndex=t.parent().children(".k-group-cell,"+I).index(t)),this._updateSelctCheckbox(l,t),this._current},_removeCurrent:function(){this._current&&(this._current.removeClass(he),this._current=null)},_updateSelctCheckbox:function(e,t){var r;t&&t.length&&((r=t.find(".k-select-checkbox")).length>0?r.trigger("focus"):e&&e.find(".k-select-checkbox").length>0&&wo(this.table,!0))},_scrollTo:function(t,o){var l=t.tagName.toLowerCase(),a="td"===l||"th"===l,i=e(t).closest("table")[0],n=t[a?"offsetWidth":"offsetHeight"],s=o[a?"scrollLeft":"scrollTop"],d=o[a?"clientWidth":"clientHeight"],c="relative"===e(t).css("position")&&Gt&&a?Math.abs(i.offsetLeft-t.offsetLeft):t[a?"offsetLeft":"offsetTop"],u=c+n,p=0,h=0,f=0;Gt&&a&&(Nt.msie||Nt.edge?h=i.offsetLeft:(Nt.mozilla||Nt.webkit&&Nt.version>85)&&(f=i.offsetLeft-r.support.scrollbar())),p=(s=Math.abs(s+h-f))>c?c:u>s+d?n<=d?u-d:c:s,p=Math.abs(p+h)+f,o[a?"scrollLeft":"scrollTop"]=p},_navigatable:function(){var t=this;if(t.options.navigatable){var o=t.table.add(t.lockedTable),l=t.thead.parent().add(e(">table",t.lockedHeader)),a=o;t.options.scrollable&&(a=a.add(l)),this._navigatableTables=a,this._headertables=l,a.off(je+O+" focus"+O+" focusout"+O+" keydown"+O),l.find("a.k-link").attr("tabIndex",-1),o.on("keydown"+O,".k-detail-cell",(function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()})),a.on(r.support.touch?"touchstart"+O:je+O,A+">"+z,xo.bind(t)).on("focus"+O,t._tableFocus.bind(t)).on("focusout"+O,t._tableBlur.bind(t)).on("keydown"+O,t,t._tableKeyDown.bind(t)),t._filterFocusable().on("focus",t._filterFocus.bind(t))}},_filterFocus:function(t){var r=t.target.closest("th");this._filterFocusable().attr(et,0),this._setCurrent(r),e(r).removeClass(he)},_tableFocus:function(){var e=this.current(),t=this.lockedTable?this.lockedTable:this.table;e&&e.is(":visible")?e.addClass(he):this._virtualColScroll?this._setCurrent(t.find(A).first().children(z).first(),!0,!0):this._setCurrent(t.find(A).first().children(z).first()),this.table.attr(et,0)},_tableBlur:function(){var e=this.current();e&&e.removeClass(he)},_findCellIndex:function(e,t,r){var o,l;if(r)for(l=t;l>=0&&(o=l,e[l].hidden);l--);else for(l=t;l<e.length&&(o=l,e[l].hidden);l++);return o},_scrollToColumn:function(e,o){if(this._virtualCellIndex===t)return!1;var l=this,a=l._virtualCellIndex,i=Zr(jr(l.columns)),n=0;e==(Gt?u.LEFT:u.RIGHT)&&a!==i.length-1?a=l._findCellIndex(i,a+1):e==(Gt?u.RIGHT:u.LEFT)&&a?a=l._findCellIndex(i,a-1,!0):e==u.HOME?a=l._findCellIndex(i,0):e==u.END&&(a=l._findCellIndex(i,i.length-1,!0));for(var s=0;s<a;s++)n+=i[s].width;return l._virtualCellIndex=a,o&&(o.preventDefault(),o.stopPropagation()),r.scrollLeft(l.content,n),!0},_tableKeyDown:function(t){let r=this.current(),o=r&&r.closest(".k-grid-table")[0],l=this.virtualScroll||{},a=this.virtualScrollable&&this.virtualScrollable.fetching(),i=e(t.target),n=!t.isDefaultPrevented()&&!i.is(":button,a,:input:not(.k-select-checkbox),a>.k-icon,a>.k-svg-icon");if(t.altKey&&t.keyCode==u.DOWN)return this.current().find(".k-grid-filter-menu, .k-grid-column-menu").click(),void t.stopImmediatePropagation();if(a)t.preventDefault();else if((!l.columns||r&&document.body.contains(r[0])||!this._scrollToColumn(t.keyCode,t))&&(r||(r=e(this.lockedTable).add(this.options.scrollable?this.table:this.tbody).find(A).first().children(z).first()),r.length)){var s=!1;t.isDefaultPrevented()||t.keyCode!==u.F10||(s=this._focusToolbar()),n&&t.keyCode==u.UP&&(s=this._moveUp(r,t.shiftKey,t.ctrlKey)),n&&t.keyCode==u.DOWN&&(s=this._moveDown(r,t.shiftKey,t.ctrlKey)),n&&t.keyCode==(Gt?u.LEFT:u.RIGHT)&&(s=this._moveRight(r,t.altKey,t.shiftKey,t.ctrlKey,o)),n&&t.keyCode==(Gt?u.RIGHT:u.LEFT)&&(s=this._moveLeft(r,t.altKey,t.shiftKey,t.ctrlKey,o)),n&&t.keyCode==u.PAGEDOWN&&(s=this._handlePageDown()),n&&t.keyCode==u.PAGEUP&&(s=this._handlePageUp()),n&&t.keyCode==u.HOME&&(s=this._handleHome(r,t.ctrlKey)),n&&t.keyCode==u.END&&(s=this._handleEnd(r,t.ctrlKey)),n&&t.keyCode==u.SPACEBAR&&(s=this._handleSpaceKey(r,t.ctrlKey)),t.keyCode!=u.ENTER&&t.keyCode!=u.F2||(s=this._handleEnterKey(r,o,i)),t.keyCode==u.ESC&&(s=this._handleEscKey(r,o)),t.keyCode==u.TAB&&(s=this._handleTabKey(r,o,t.shiftKey,i)),s&&(t.preventDefault(),t.stopPropagation())}},_focusToolbar:function(){var e=this.wrapper.find(".k-grid-toolbar [tabindex=0]");return e.length>0&&(e.first().addClass(".k-focus").trigger("focus"),!0)},_moveLeft:function(t,r,o,l,a){var i,n,s=t.parent(),d=s.parent();return r?s.hasClass(De)?this.collapseGroup(s):this.collapseRow(s):l&&t.is(x+Te)&&this.options.reorderable?this._moveColumn(t,!0):(n=d.find(A).index(s),(i=this._prevHorizontalCell(d,t,n))[0]||(o?this.lockedTable?(i=this._relatedRow(s),e.contains(this.lockedTable[0],s[0])&&(i=i.prevAll(D).first()),i=i.children(E).last()):i=this._tabNext(t,a,!0):(d=this._horizontalContainer(d),(i=this._prevHorizontalCell(d,t,n))[0]!==t[0]&&wo(this.table,!0))),this._setCurrent(i)),!0},_moveRight:function(t,r,o,l,a){var i,n,s=t.parent(),d=s.parent();return r?s.hasClass(De)?this.expandGroup(s):this.expandRow(s):l&&t.is(x+Te)&&this.options.reorderable?this._moveColumn(t,!1):(n=d.find(A).index(s),(i=this._nextHorizontalCell(d,t,n))[0]||(o?this.lockedTable?(i=this._relatedRow(s),e.contains(this.table[0],s[0])&&(i=i.nextAll(D).first()),i=i.children(E).first()):i=this._tabNext(t,a,!1):(d=this._horizontalContainer(d,!0),(i=this._nextHorizontalCell(d,t,n))[0]!==t[0]&&wo(this.table,!0))),this._setCurrent(i)),!0},_moveUp:function(e,t,r){var o,l,a,i,n=e.parent().parent();t?(o=(o=e.parent()).prevAll(D).first(),o=e.parent().is(D)?o.children().eq(e.index()):o.children(E).last()):r&&e.parent().is(D)&&this._hasReorderableRows()?(l=e.index(),o=(o=e.parent()).prevAll(D).first(),a=this.tbody.children(D).index(o),i=this.tbody.children(D).index(e.parent()),a>=0&&!this.trigger(We,{oldIndex:i,newIndex:a,row:e.parent()})&&(this.reorderRows(e.parent(),a),o=this.tbody.children(D).eq(a).children().eq(l))):(o=this._prevVerticalCell(n,e))[0]||(this._lastCellIndex=0,n=this._verticalContainer(n,!0),(o=this._prevVerticalCell(n,e)).is(":hidden")&&(o=o.nextAll().not(":hidden").first()),o[0]&&wo(this.table,!0));var s=this._lastCellIndex||0;return this._setCurrent(o),this._lastCellIndex=s,!0},_moveDown:function(e,t,r){var o,l,a,i,n=e.parent().parent();t?(o=(o=e.parent()).nextAll(D).first(),o=e.parent().is(D)?o.children().eq(e.index()):o.children(E).first()):r&&e.parent().is(D)&&this._hasReorderableRows()?(l=e.index(),o=(o=e.parent()).nextAll(D).first(),a=this.tbody.children(D).index(o),i=this.tbody.children(D).index(e.parent()),a>=0&&!this.trigger(We,{oldIndex:i,newIndex:a,row:e.parent()})&&(this.reorderRows(e.parent(),a+1),o=this.tbody.children(D).eq(a).children().eq(l))):(o=this._nextVerticalCell(n,e))[0]||(this._lastCellIndex=0,n=this._verticalContainer(n),(o=this._nextVerticalCell(n,e))[0]&&wo(this.table,!0));var s=this._lastCellIndex||0;return this._setCurrent(this._findVisibleCell(o)),this._lastCellIndex=s,!0},_moveColumn:function(t,r){var o=this.wrapper.data().kendoReorderable.element.find(this._draggableInstance.options.filter+":visible"),l=kr(zr(this.columns)),a=o.index(e(t)),i=r?-1:1,n=l[a],s=Dr(l,this.columns,a,a+i);s>=0&&(this.reorderColumn(s,n,r),this.trigger(qe,{newIndex:s,oldIndex:a,column:n}))},_handleHome:function(e,t){var r,o=e.parent(),l=o.parent(),a=this.lockedTable&&this.lockedTable.children("tbody")[0]===l[0],i=l[0]===this.tbody[0];return this._hasVirtualColumns()?(this._scrollToColumn(u.HOME),!0):(t?r=this.lockedTable?this.lockedTable.find(D).first().children(z).first():this.table.find(D).first().children(z).first():(i||a)&&(i&&this.lockedTable&&(o=this._relatedRow(o)),r=o.children(E).first()),r&&r.length?(this._setCurrent(r),!0):void 0)},_handleEnd:function(e,t){var r,o=e.parent(),l=o.parent(),a=this.lockedTable&&this.lockedTable.children("tbody")[0]===l[0],i=l[0]===this.tbody[0];return this._hasVirtualColumns()?(this._scrollToColumn(u.END),!0):(t?r=this.table.find(D).last().children(z).last():(i||a)&&(!i&&this.lockedTable&&(o=this._relatedRow(o)),r=o.children(E).last()),r&&r.length?(this._setCurrent(r),!0):void 0)},_handlePageDown:function(){return!!this.options.pageable&&(this.dataSource.page(this.dataSource.page()+1),!0)},_handlePageUp:function(){return!!this.options.pageable&&(this.dataSource.page(this.dataSource.page()-1),!0)},_handleTabKey:function(t,r,o,l){var a,i;if(!(this.options.editable&&"incell"==this._editMode())||t.is("th")||(this.options.scrollable?this._headertables.filter(r).length:this.thead.filter(l).length)){if(t.parent().hasClass("k-filter-row")){if(i=this._filterFocusable(),!o&&i[i.length-1]===document.activeElement)return i.first().trigger("focus"),!0;if(o&&i[0]===document.activeElement)return i.last().trigger("focus"),!0}return!1}return(a=e(n()).closest(".k-edit-cell"))[0]&&a[0]!==t[0]&&(t=a),(a=this._tabNext(t,r,o))[0]!==t[0]&&(!!a.length&&(this._handleEditing(t,a,a.closest("table")),!0))},_handleEscKey:function(t){var r,o=n(),l="incell"==this._editMode();if(!(r=t)||!r.hasClass("k-edit-cell")&&!r.parent().hasClass("k-grid-edit-row"))return t.has(o).length?(wo(this.table,!0),!0):!!t.parent().hasClass("k-filter-row")&&(this._filterFocusable().attr(et,-1),wo(this.table,!0),!0);if(l)this.closeCell(!0);else{var a=e(t).parent().index();o&&o.blur(),this.cancelRow(!0),a>=0&&this._setCurrent(this.items().eq(a).children(z).first())}return wo(this.table,!0),!0},_toggleCurrent:function(e,t,r){var o=e.parent();return!e.is(".k-command-cell")&&(!o.is(".k-filter-row")&&((o.is(x+De)||!(t||!r))&&(o.find(".k-icon,.k-svg-icon").first().click(),!0)))},_handleSpaceKey:function(t,o){var l=this;if(o&&l.groupable&&t.hasClass(Te)){var a=l.groupable.descriptors(),i=t.attr(r.attr("field")),n=l.groupable.aggregates();return l.groupable._canDrag(t)?a.push({field:i,dir:"asc",aggregates:n||[]}):a=e.grep(a,(function(e){return e.field!==i})),l.dataSource.group(a),!0}},_handleEnterKey:function(t,r,o){var l,a=this.options.editable&&!1!==this.options.editable.update,i=o.closest("td"),s=this._hasDetails();if(o.is("table")||e.contains(t[0],o[0])||(t=i),t.is("th"))return l=t.find(".k-link"),!(t.has(e(n())).length>0)&&(l.length?l.click():t.parent().hasClass("k-filter-row")?(this._filterFocusable().attr(et,0),t.find(":kendoFocusable").first().trigger("focus")):t.find(ke).trigger("focus"),!0);if(this._toggleCurrent(t,a,s))return!0;var d=t.find(":kendoFocusable").first();return d[0]&&!t.hasClass("k-edit-cell")&&t.hasClass("k-focus")?(d.trigger("focus"),!0):!(!a||o.is(":button,.k-button,textarea"))&&(i[0]||(i=t),this._handleEditing(i,!1,r),!0)},_nextHorizontalCell:function(e,t,r){if(!t.nextAll(E).length){var o=e.find(A);if(-1==o.index(t.parent())){if(t.hasClass(Te)){var l=[];return Or([Nr(this.columns)[0]],lo(o.eq(0).children(":visible").first()),l,0,0),l[r]?l[r][0]:t}return t.parent().hasClass("k-filter-row")?o.last().children(E).first():this._findVisibleCell(o.eq(r).children(I).first())}}return this._findVisibleCell(t.nextAll(E+",[hidden]").eq(0))},_prevHorizontalCell:function(e,t,r){var o=t.prevAll(E);if(!o.length){var l=e.find(A);if(-1==l.index(t.parent())){if(t.hasClass(Te)){var a=[],i=Nr(this.columns);return Or([i[i.length-1]],lo(l.eq(0).children().last()),a,0,0),a[r]?a[r][0]:t}return t.parent().hasClass("k-filter-row")?l.last().children(E).last():l.eq(r).children(E).last()}}o=t.prevAll(E+",[hidden]");let n=this._findVisibleCell(o.first());return n.is(".k-group-cell")?n.next(E):n},_currentDataIndex:function(e,r){var o=r.attr("data-index");if(!o)return t;var l=Nr(this.columns).length;return l&&!e.closest(bt).hasClass("k-grid-content-locked")[0]?o-l:o},_findVisibleCell:function(e){var t,r=e.index(),o=e.closest("tr").index();if(e.is("[hidden]")){t=e.prevAll(":not([hidden])").first();var l=e.prevUntil(":not([hidden])","[hidden]").length;if(!t.attr("colspan")||t.attr("colspan")>1&&t.attr("colspan")<=l+1){if(0===(t=e.prevAll("[hidden]").last()).length)return e.closest("tr").prevAll().find(`td:nth-of-type(${r+1}):visible`).last();for(;!(t.attr("rowspan")||t.attr("rowspan")>1&&t.attr("rowspan")!=o-t.closest("tr").index()||Math.abs(t.index()-r)==t.attr("colspan"));)if(0===(t=t.closest("tr").prevAll().find("td, th").eq(r).first()).length){t=e;break}}}else t=e;return t},_prevVerticalCell:function(t,r){var o,l=r.parent(),a=t.children(A),i=a.index(l),n=this._currentDataIndex(t,r);if(n||r.hasClass(Te))return(o=oo(r)).eq(o.length-2);if(n=Math.max(l.children(I).index(r),this._lastCellIndex||0),l.hasClass("k-filter-row")){let e=a.last().children(".k-group-cell").length;return ro(t).filter(br).eq(Math.max(0,n-e))}if(-1==i){if(this._hasVirtualColumns()&&(n=this._virtualCellIndex),!(l=t.find("tr.k-filter-row:visible"))[0]){(this._hasDetails()||r.parent().find(".k-hierarchy-cell").length)&&n&&n--;let e=0;return r.parent().is(".k-table-group-row")&&(e=a.last().children(".k-group-cell").length),ro(t).eq(Math.max(0,n-e))}this._hasDetails()&&n--}else l=0===i?e():a.eq(i-1);if((o=l.children(I)).length>n){let e=o.eq(n);return e.is(".k-group-cell")&&(e=e.nextAll("td").not(".k-group-cell").not(":hidden").first()),this._findVisibleCell(e)}return o.eq(0)},_nextVerticalCell:function(e,r){var o,l,a,i=l=r.parent(),n=e.children(A),s=n.index(i),d=this._currentDataIndex(e,r),c=this.virtualScroll||{};if(-1!=s&&d===t&&r.hasClass(Te))return lo(r).eq(1);d=d?parseInt(d,10):i.children(I).index(r),d=Math.max(d,this._lastCellIndex||0),-1==s?(i=n.eq(0),c.columns&&(a=parseInt(i.children().first().attr("colspan"),10),d=this._virtualCellIndex-(a>1?a:0)),(this._hasDetails()||i.find(".k-hierarchy-cell").length)&&d++,i.hasClass("k-table-group-row")&&(d+=l.children(".k-group-cell").length)):i=n.eq(s+r[0].rowSpan);let u=(o=i.children(".k-group-cell,"+I)).eq(0);return o.length>d&&(u=o.eq(d)),u.is(".k-group-cell")&&(u=u.nextAll("td").not(".k-group-cell").not(":hidden").first()),u},_verticalContainer:function(e,t){var r=e.parent(),o=this._navigatableTables.length,l=Math.floor(o/2),a=_(r[0],this._navigatableTables);return t&&(l*=-1),((a+=l)>=0||a<o)&&(r=this._navigatableTables.eq(a)),r.find(t?">thead":">tbody")},_filterFocusable:function(){return this.wrapper.find(".k-filter-row").find(".k-dropdownlist, .k-input .k-input-inner:visible, input[type='radio']:visible, input[type='checkbox']:visible")},_horizontalContainer:function(e,t){var r=this._navigatableTables.length;if(r<=2)return e;var o=e.parent(),l=_(o[0],this._navigatableTables);return l+=t?1:-1,!t||2!=l&&l!=r?!t&&(1==l||l<0)?e:this._navigatableTables.eq(l).find("thead, tbody"):e},_tabNext:function(e,t,r){var o=!0,l=r?e.prevAll(E).first():e.nextAll(":visible").first();if(!l.length){if(l=e.parent(),this.lockedTable&&(o=r&&t==this.lockedTable[0]||!r&&t==this.table[0],l=this._relatedRow(l)),o){if(this._hasVirtualColumns())return e;l=l[r?"prevAll":"nextAll"]("tr:not(.k-grouping-row):not(.k-detail-row):visible").first()}l=r?l.children(E).last():l.children(E).first()}return l},_handleEditing:function(t,r,o){var l,a,i=this,s=e(n()),d=i._editMode(),c=Nt.msie,u=i._editContainer,p=i.options.editable&&!1!==i.options.editable.update;if(o=e(o),a="incell"==d?t.hasClass("k-edit-cell"):t.parent().hasClass("k-grid-edit-row"),i.editable){if(e.contains(u[0],s[0])&&(s.trigger("blur"),c&&s.trigger("blur")),!i.editable)return void wo(i.table);if(!i.editable.end())return"incell"==d?i._setCurrent(u):i._setCurrent(u.children().filter(E).first()),void((l=u.find(":kendoFocusable").first()[0])&&l.focus());"incell"==d?i.closeCell():(i.saveRow(),a=!0)}r&&i._setCurrent(r),wo(i.table,!0),p&&(!a&&!r||r)&&(d===nt?e(i.current()).hasClass("k-hierarchy-cell")||i.editCell(i.current()):i.editRow(i.current().parent()))},_wrapper:function(){var e=this,t=e.table,o=e.options.height,l=e.options.width,a=e.element;a.is(bt)||(a=a.wrap("<div/>").parent()),e.wrapper=a.addClass("k-grid "+r.getValidCssClass("k-grid-","size",e.options.size)),o&&(e.wrapper.css(Je,o),t.css(Je,Ze)),l&&e.wrapper.css(Xe,l),e._initMobile()},_initContextMenu:function(){var e=this,t=e.options,r=h(t.contextMenu)&&b(t.contextMenu.groups)?{items:t.contextMenu.groups}:{items:Zt},l=h(t.contextMenu)&&b(t.contextMenu.body)?{items:t.contextMenu.body}:{items:Jt},a=h(t.contextMenu)&&b(t.contextMenu.head)?{items:t.contextMenu.head}:{items:Xt},i=h(t.contextMenu)?t.contextMenu:{};l=f({},{messages:t.messages,target:e.tbody,filter:".k-table-td",action:e._action.bind(e),states:e._buildStates()},i,l),a=f({},{messages:t.messages,target:e.thead,filter:".k-table-th",action:e._action.bind(e),states:e._buildStates()},i,a),e.groupable&&(r=f({},{showOn:"click",target:e.groupable.groupContainer,filter:".k-groupable-context-menu",messages:t.messages,action:e._action.bind(e),states:e._buildStates()},i,r)),e.tbodyContextMenu=new o.grid.ContextMenu("<ul></ul>",l),e.theadContextMenu=new o.grid.ContextMenu("<ul></ul>",a),e.groupsContextMenu=!!e.groupable&&new o.grid.ContextMenu("<ul></ul>",r)},_buildStates:function(){var t=this;return{isEditable:t.options.editable,isSelectable:t.options.selectable,isSortable:t.options.sortable,isRowReorderable:h(t.options.reorderable)?t.options.reorderable.rows:t.options.reorderable,isGroupable:t.options.groupable,allowPaste:t.options.allowPaste,alwaysDisabled:!1,hasSelection:()=>!!this.select()&&this.select().length>0,isSorted:()=>!(this.dataSource.sort()&&this.dataSource.sort().length>0),canMoveGroupPrev:t=>e(t).closest(".k-chip").index()>0,canMoveGroupNext:t=>{var r=e(t).closest(".k-chip-list").children().length-1;return e(t).closest(".k-chip").index()<r}}},_action:function(e){var t=e.command,r=f({grid:this},e.options);return new o.grid.commands[t](r).exec()},_initMobile:function(){var e=this.options,t=this;if(this._isMobile=!0===e.mobile&&r.support.mobileOS||"phone"===e.mobile||"tablet"===e.mobile,this._isMobile){var o=this.wrapper.addClass("k-grid-mobile").wrap("<div data-"+r.ns+'stretch="true" data-'+r.ns+'role="view" data-'+r.ns+'init-widgets="false"></div>').parent();this.pane=this._createPane(o),this.view=this.pane.view(),e.height?this.pane.element.parent().css(Je,e.height):this.pane.element.parent().css(Je,this.wrapper[0].style.height),this._editAnimation="slide",t.wrapper.on("transitionend"+O,(function(e){e.stopPropagation()})),t.wrapper.on("contextmenu"+O,"th a",(function(e){return e.preventDefault(),!1})),this.view.bind("showStart",(function(){t._isLocked()&&(t._updateTablesWidth(),t._applyLockedContainersWidth(),t._syncLockedContentHeight(),t._syncLockedHeaderHeight(),t._syncLockedFooterHeight())}))}},_createPane:function(e){return r.Pane.wrap(e,{viewEngine:{viewOptions:{renderOnInit:!0,wrap:!1,wrapInSections:!0,detachOnHide:!1,detachOnDestroy:!1}}})},_initLoader:function(t){var r=this,o={size:"medium",messages:{exporting:"Exporting..."}};o=e.extend({},o,t);const l=e("<div></div>").kendoLoader(o).data("kendoLoader");r.loader=l,r._loaderContainer=R.u.bind(r)},_tbody:function(){var t,r=this.table;(t=r.find(">tbody")).length||(t=e("<tbody/>").appendTo(r)),t.addClass("k-table-tbody"),this.tbody=t},_scrollable:function(){var t,o,l,a=this,i=a.options,n=i.scrollable,s=!0!==n&&n.virtual?function(e){var t;if("string"==typeof e)return"true"===(t=e.toLowerCase())?{rows:!0}:{rows:t.indexOf("rows")>-1,columns:t.indexOf("columns")>-1};if(!0===e)return{rows:!0}}(n.virtual):null,d=!r.support.kineticScrollNeeded||s&&s.rows?r.support.scrollbar():0;if(n){(t=a.wrapper.children(".k-grid-header"))[0]||(t=e('<div class="k-grid-header" />').insertBefore(a.table)),t.css(Gt?"padding-left":"padding-right",n.virtual?d+1:d),(o=e('<table role="none" class="k-grid-header-table k-table"/>')).addClass(r.getValidCssClass("k-table-","size",i.size)),o.width(a.table[0].style.width),o.append(a.thead),t.empty().append(e('<div class="k-grid-header-wrap k-auto-scrollable" />').append(o)),a.content=a.table.parent(),a.virtualScroll=s,a.content.is(".k-virtual-scrollable-wrap, ."+Qt)&&(a.content=a.content.parent()),a.content.is(".k-grid-content, .k-virtual-scrollable-wrap")||(a.content=a.table.wrap('<div class="k-grid-content k-auto-scrollable" />').parent()),a.content.parent().hasClass("k-grid-container")||a.content.wrap("<div class='k-grid-container' />").parent(),s&&s.rows&&!a.virtualScrollable&&a._createVirtualScrollable(),s&&s.columns&&a.table.css({width:Lr(Qr(Kr(a.columns)))}),l=t.children(".k-grid-header-wrap"),a.scrollables=l.add(a.content);var c=a.wrapper.find(".k-grid-footer");if(c.length&&(a.scrollables=a.scrollables.add(c.children(".k-grid-footer-wrap"))),l.off("scroll"+O).on("scroll"+O,(function(e){a._scrollLeft!==this.scrollLeft&&r.scrollLeft(a.scrollables.not(e.currentTarget),this.scrollLeft)})),s&&s.rows)a.content.find(">.k-virtual-scrollable-wrap").off("scroll"+O).on("scroll"+O,(function(){var e=this.scrollLeft!=a._scrollLeft;a._scrollLeft=this.scrollLeft,r.scrollLeft(a.scrollables,this.scrollLeft),a.lockedContent&&(a.lockedContent[0].scrollTop=this.scrollTop),s.columns&&e&&a.refresh()}));else{var u=n.endless,p=a.dataSource.options.pageSize;u&&(a._endlessPageSize=p),a.content.off("scroll"+O).on("scroll"+O,(function(e){var t=this.scrollLeft!=a._scrollLeft;a._scrollLeft=this.scrollLeft,r.scrollLeft(a.scrollables.not(e.currentTarget),a._scrollLeft),a.lockedContent&&e.currentTarget==a.content[0]&&(a.lockedContent[0].scrollTop=this.scrollTop),u&&this.scrollTop+this.clientHeight-this.scrollHeight>=-10&&!a._endlessFetchInProgress&&a._endlessPageSize<a.dataSource.total()&&(a._skipRerenderItemsCount=a._endlessPageSize,a._endlessPageSize=a._endlessPageSize+p,a.dataSource.options.endless=!0,a._endlessFetchInProgress=!0,a.dataSource.pageSize(a._endlessPageSize)),s&&s.columns&&t&&(a._virtualColScroll=!0,a._cacheEditableState(),a.refresh(),a._restoreEditableState(),a._virtualColScroll=!1),a.rowResizer&&a.rowResizer.css("left",e.currentTarget.scrollLeft+"px")}));var h=a.content.data("kendoTouchScroller");h&&h.destroy(),(h=r.touchScroller(a.content))&&h.movable&&(a.touchScroller=h,h.movable.bind("change",(function(e){r.scrollLeft(a.scrollables,-e.sender.x),a.lockedContent&&a.lockedContent.scrollTop(-e.sender.y)})),a.one(te,(function(e){e.sender.wrapper.addClass("k-grid-backface")})))}}},_createVirtualScrollable:function(){var e=this;e.virtualScrollable&&e.virtualScrollable.destroy(),e.virtualScrollable=new er(e.content,{dataSource:e.dataSource,itemHeight:function(){return e._averageRowHeight()},page:function(){e._restoreEditableState()},scroll:function(){e._focusEditable()},loadStart:function(){e._progress(!0)},loadEnd:function(){e._progress(!1)}}),e.virtualScrollable.bind(ie,e._onVirtualPaging.bind(e))},_onVirtualPaging:function(){var e=this;e._cacheEditableState(),e._isVirtualIncellEditable()&&(e._shouldClearEditableState=!1,e.closeCell(),e._shouldClearEditableState=!0)},_isVirtualEditable:function(){return this._isVirtualIncellEditable()||this._isVirtualInlineEditable()||this._isVirtualPopupEditable()},_isVirtualInlineEditable:function(){return this.virtualScrollable&&this._editMode()===st},_isVirtualIncellEditable:function(){return this.virtualScrollable&&this._editMode()===nt},_isVirtualPopupEditable:function(){return this.virtualScrollable&&"popup"===this._editMode()},_hasVirtualColumns:function(){return!!(this.virtualScroll||{}).columns},_scrollVirtualWrapper:function(){var e=this,t=e.virtualScrollable;(e._isVirtualInlineEditable()||e._isVirtualIncellEditable())&&(t._isScrolledToBottom()?t._scrollWrapperToBottom():t._isScrolledToTop()&&t._scrollWrapperToTop())},_scrollVirtualWrapperOnColumnResize:function(){var e=this.virtualScrollable;e&&e._scrollWrapperOnColumnResize()},_restoreEditableState:function(){var t,r,o=this,l=o._editableState||{},a=l.model,i=o.dataSource,n=o._isVirtualInlineEditable(),s=o._isVirtualIncellEditable(),d=o._hasVirtualColumns();(n||s||d)&&a&&i._getByUid(a.uid,i.view())&&(o._editMode()===st?(o._shouldClearEditableState=!1,o.editRow(a),d||o._focusEditable()):o._editMode()===nt&&(t=o.tbody.children(tr("uid",a.uid)),(r=e(t).children(tr(at,l.field)))[0]&&(o._shouldClearEditableState=!1,o.editCell(r),d||o._focusEditable()))),o._shouldClearEditableState=!0},_focusEditable:function(){var e=this,t=(e._editableState||{}).field,r=e._editContainer;r&&r.length&&!y(r[0],n())&&e._canFocusEditable()&&(e._isVirtualInlineEditable()||e._hasVirtualColumns()?r.find(tr(lt,t)).find(me).eq(0).trigger("focus"):(e._isVirtualIncellEditable()||e._hasVirtualColumns())&&r.find(me).eq(0).trigger("focus"))},_canFocusEditable:function(){var e=this;return(e._isVirtualIncellEditable()||e._isVirtualInlineEditable()||e._hasVirtualColumns())&&(Ho((e.virtualScrollable||{}).wrapper,e._editContainer)||Ho(e.content,e._editContainer))},_cacheEditableState:function(){var t,o,l,a=this,i=a._editContainer,s=i?a._modelForContainer(i):null,d=a._isVirtualInlineEditable(),c=a._isVirtualIncellEditable(),u=a._hasVirtualColumns();(d||c||u)&&s&&(a._clearEditableState(),t=e(n()),i&&t[0]&&y(i[0],t[0])&&(t.change(),(o=r.widgetInstance(t,r.ui))&&v(o.value)&&t.is(it)&&(l=t.val(),t.is("[type='checkbox'")&&(l=t.is(":checked")),o.value(l),o.trigger(J))),a._editMode()===st?a._editableState={model:s,field:t.closest("["+r.attr(lt)+"]").attr(r.attr(lt))}:a._editMode()===nt&&(a._editableState={model:s,field:i.attr(r.attr(at))}))},_clearSortClasses:function(){var e=this,t=e.content||e.table,r=e.lockedContent;t&&t.find(F).removeClass(xe),r&&r.find(F).removeClass(xe)},_clearEditableState:function(){var e=this;(e.virtualScrollable||e.virtualScroll&&e._hasVirtualColumns())&&(e._editableState=null)},_destroyVirtualScrollable:function(){var e=this;e._clearEditableState(),e.virtualScrollable&&e.virtualScrollable.element&&e.virtualScrollable.destroy(),e.virtualScrollable=null},_destroyRowResizing:function(){this.rowResizing&&(this.rowResizing.destroy(),this.rowResizing=null),this.rowResizer&&(this._detachRowResizerEvents(),this.rowResizer.off(Ye+O),this.rowResizer=null,this._clearCachedRowsHeight())},_renderNoRecordsContent:function(){var t=this;if(t.options.noRecords){var o=t.table.parent().children("."+ve);o.length&&o.remove(),t.dataSource&&t.dataSource.view().length||(o=e(t.noRecordsTemplate({grid:t})),r.applyStylesFromKendoAttributes(o,["margin","position"]),o.insertAfter(t.table))}},_setContentWidth:function(t){var o,l=this,a="k-grid-content-expander",i='<div class="'+a+'"></div>',n=l.resizable;l.options.scrollable&&l.wrapper.is(":visible")&&(o=l.table.parent().children("."+a),l._setContentWidthHandler=l._setContentWidth.bind(l),l.dataSource&&l.dataSource.view().length?o[0]&&(o.remove(),n&&n.unbind("resize",l._setContentWidthHandler)):(o[0]||(o=e(i).appendTo(l.table.parent()),n&&n.bind("resize",l._setContentWidthHandler)),l.thead&&(o.width(l.thead.width()),isNaN(parseFloat(t,10))||r.scrollLeft(l.content,t))),l._applyLockedContainersWidth(!0),l._syncLockedContentHeight(),l.lockedHeader&&0===l.table[0].clientWidth&&(l.table[0].style.width="1px"))},_applyLockedContainersWidth:function(e){if(this.options.scrollable&&this.lockedHeader){let t,o=this.thead.parent(),l=o.parent(),a=this.wrapper[0].clientWidth,i=this._groups(),n=r.support.scrollbar(),s=this.lockedHeader.find(">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)"),c=o.find(">colgroup>col:not(.k-group-col, .k-hierarchy-col)"),u=qr(s),p=qr(c);i>0&&e&&(u+=d(this.lockedHeader.find(".k-group-cell").first())*i),u>=a&&(u=a-3*n),this.lockedHeader.add(this.lockedContent).width(u),l[0].style.width=l.parent().width()-u-2+gt,o.add(this.table).width(p),this.virtualScrollable&&!Ut&&(a-=n),this.content[0].style.width=a-u-1+gt,this.lockedFooter&&this.lockedFooter.length&&(this.lockedFooter.width(u),t=this.footer.find(".k-grid-footer-wrap"),t[0].style.width=l[0].clientWidth+gt,t.children().first().width(p))}},_setContentHeight:function(){var e,t,o,l=this,a=l.options,i=l.wrapper.children(".k-grid-header"),n=r.support.scrollbar(),s=(a.scrollable||{}).height;if(a.scrollable&&l.wrapper.is(":visible")){s&&""===l.content[0].style.height&&(l.content[0].style.height=s),e=l.wrapper.innerHeight(),e-=c(i),l.pager&&l.pager.element.is(":visible")&&(e-=c(l.pager.element)),a.groupable&&(e-=c(l.wrapper.children(".k-grouping-header"))),a.toolbar&&(e-=c(l.wrapper.children(".k-grid-toolbar"))),l.footerTemplate&&(e-=c(l.wrapper.children(".k-grid-footer"))),l.statusBar&&(e-=c(l.wrapper.children(".k-selection-aggregates")));((t=l.wrapper)[0].style.height||(o=t.height(),t.height(Ze),o!=t.height()?(t.height(""),1):(t.height(""),0)))&&(e>2*n?(l.lockedContent&&(n=l.table[0].offsetWidth>l.table.parent()[0].clientWidth?n:0,l.lockedContent.height(e-n)),l.content.height(e)):l.content.height(2*n+1))}},_averageRowHeight:function(){var e=this,t=e._items(e.tbody,!0).length,r=e._rowHeight;if(0===t)return r;e._rowHeight||(e._rowHeight=r=c(e.table)/t,e._sum=r,e._measures=1);var o=c(e.table)/t;return r!==o&&(e._measures++,e._sum+=o,e._rowHeight=e._sum/e._measures),r},_dataSource:function(){var e,r=this,o=r.options,a=o.dataSource;a=b(a)?{data:a}:a,h(a)&&(f(a,{table:r.table,fields:r.columns}),e=o.pageable,h(e)&&e.pageSize!==t&&(a.pageSize=e.pageSize)),r.dataSource&&r._refreshHandler?r.dataSource.unbind(J,r._refreshHandler).unbind(T,r._progressHandler).unbind(pe,r._requestEndHandler).unbind(H,r._errorHandler).unbind(ct,r._sortHandler):(r._refreshHandler=r.refresh.bind(r),r._progressHandler=r._requestStart.bind(r),r._requestEndHandler=r._requestEnd.bind(r),r._errorHandler=r._error.bind(r),r._sortHandler=r._clearSortClasses.bind(r)),r.dataSource=l.create(a).bind(J,r._refreshHandler).bind(T,r._progressHandler).bind(pe,r._requestEndHandler).bind(H,r._errorHandler).bind(ct,r._sortHandler)},_error:function(){this._progress(!1),this._requestInProgress=!1},_requestStart:function(){this._progress(!0),this._requestInProgress=!0},_requestEnd:function(){this._requestInProgress=!1},_modelChange:function(t){var l,a,i,n,s,d,c,u,p,h=this,f=h.tbody,g=t.model,m=h.tbody.find("tr["+r.attr("uid")+"="+g.uid+"]"),b=m.hasClass("k-alt"),_=h._items(f).index(m),k=h.lockedContent;if(k&&(l=h._relatedRow(m)),m.add(l).children(".k-edit-cell").length&&!h.options.rowTemplate)m.add(l).children(":not(.k-group-cell,.k-hierarchy-cell)").each((function(){a=e(this),(i=Zr(h.columns)[h._calculateColumnIndex(a)]).field===t.field&&(a.hasClass("k-edit-cell")?a.addClass("k-dirty-cell"):h._displayCell(a,i,g))}));else if(!m.hasClass("k-grid-edit-row")){d=e().add(m),k&&(n=(b?h.lockedAltRowTemplate:h.lockedRowTemplate)(g),d=d.add(l),l.replaceWith(n)),n=(b?h.altRowTemplate:h.rowTemplate)(g);let t=e(n);for(r.applyStylesFromKendoAttributes(t,["display"]),m.replaceWith(t),n=h._items(f).eq(_),k&&(m=m.add(l),l=h._relatedRow(n)[0],ko(n[0],l),n=n.add(l)),((s=h.options.selectable)||h._checkBoxSelection)&&m.hasClass(be)&&h.select(n),u=d.children(":not(.k-group-cell,.k-hierarchy-cell)"),c=n.children(":not(.k-group-cell,.k-hierarchy-cell)"),_=0,p=h.columns.length;_<p;_++)i=h.columns[_],a=c.eq(_),s&&u.eq(_).hasClass(be)&&a.addClass(be);h.trigger("itemChange",{item:n,data:g,ns:o})}},_pageable:function(){var t,o=this,l=o.options.pageable,a=o.options.size,i=o.options.navigatable;l&&((t=o.wrapper.children("div.k-grid-pager")).length||(t=e('<div class="k-pager k-grid-pager"/>')),"top"===l.position?t.prependTo(o.wrapper).addClass("k-grid-pager-top"):t.appendTo(o.wrapper),o.pager&&o.pager.destroy(),"object"==typeof l&&l instanceof r.ui.Pager?o.pager=l:o.dataSource._groupPaging?o.pager=new jt(t,f({},l,{dataSource:o.dataSource,navigatable:i,size:a})):o.pager=new r.ui.Pager(t,f({},l,{dataSource:o.dataSource,navigatable:i,size:a})),o.pager.bind("pageChange",(function(e){o.trigger("page",{page:e.index})&&e.preventDefault()})),o._togglePagerVisibility())},_statusBar:function(){var t=this,r=t.options,o=t.wrapper,l=r.statusBarTemplate,a="";l&&(t.statusBar?t.statusBar.html(l({aggregates:t._cellAggregates})):(a+='<div class="k-selection-aggregates k-grid-selection-aggregates">',a+=l({aggregates:t._cellAggregates}),a+="</div>",r.scrollable?t.statusBar=e(a).insertAfter(o.find(".k-grid-container")):t.statusBar=e(a).insertAfter(o.find(".k-grid-table"))))},_footer:function(){var t,o=this,l=o.dataSource.aggregates(),a="",i=o.footerTemplate,n=o.options,s=o.footer||o.wrapper.find(".k-grid-footer");if(i)if(a=e(o._wrapFooter(i(l))),r.applyStylesFromKendoAttributes(a,["display","left","right"]),s.length){var d=a;s.replaceWith(d),s=o.footer=d}else n.scrollable?(o.statusBar?o.footer=a.insertBefore(o.statusBar):n.pageable&&"top"!==n.pageable.position?o.footer=a.insertBefore(o.wrapper.children("div.k-grid-pager")):o.footer=a.appendTo(o.wrapper),s=o.footer):s=o.footer=a.insertAfter(o.tbody);else s&&!o.footer&&(o.footer=s);if(s.length&&(n.scrollable&&(t=s.attr(et,-1).children(".k-grid-footer-wrap"),o.scrollables=e(o.scrollables.filter((function(){return!e(this).is(".k-grid-footer-wrap")})).toArray()).add(t)),o._footerWidth&&s.find("table").css("width",o._footerWidth),t)){var c=r.scrollLeft(o.content);!0!==n.scrollable&&o.virtualScroll&&o.virtualScroll.rows&&(c=r.scrollLeft(o.wrapper.find(".k-virtual-scrollable-wrap"))),r.scrollLeft(t,c)}o.lockedContent&&(o._appendLockedColumnFooter(),o._applyLockedContainersWidth(),o._syncLockedFooterHeight())},_wrapFooter:function(t){var o,l=this,a="",i=r.support.mobileOS?0:r.support.scrollbar();return l.options.scrollable?((o=(a=e('<div class="k-grid-footer"><div class="k-grid-footer-wrap"><table class="k-table k-grid-footer-table"><tfoot class="k-table-tfoot">'+t+"</tfoot></table></div></div>")).find("table")).addClass(r.getValidCssClass("k-table-","size",l.options.size)),l._appendCols(o),a.css(Gt?"padding-left":"padding-right",i),a):'<tfoot class="k-grid-footer k-table-tfoot">'+t+"</tfoot>"},_globalColumnsMenu:function(e){var t,r,o=this,l=Zr(o.columns),a=o.options.columnMenu;if(a){"boolean"==typeof a&&(a={}),o._setColumnsMediaVisibility(l);let i=!(!a.autoSize&&!a.clearAllFilters);(t=e.data("kendoColumnMenu"))&&t.destroy();let n={toggleable:i,expanded:a.expanded||!0,animation:!1,hideExpanderIndicator:!i};r={dataSource:o.dataSource,columns:a.columns,sortable:!1,filterable:!1,clearAllFilters:a.clearAllFilters,messages:a.messages,hideAutoSizeColumn:!0,owner:o,closeCallback:function(){e.trigger("focus")},init:function(e){o.trigger(U,{field:e.field,container:e.container})},open:function(e){o.trigger($,{field:e.field,container:e.container})},pane:o.pane,autoSize:a.autoSize,encodeTitles:o.options.encodeTitles,componentType:"modern",columnsExpanderOptions:n},e.kendoColumnMenu(r)}},_columnMenu:function(){var e,o,l,a,i,n,s=this,d=Zr(s.columns),c=s.options,u=c.columnMenu,p=m(s.columns,(function(e){return e.columns!==t})).length>0,h=m(s.columns,(function(e){return!1!==e.lockable})).length>0,g=m(s.columns,(function(e){return!0===e.stickable})).length>0,b=this._isMobile,_=function(e){s.trigger(U,{field:e.field,container:e.container})},k=function(e){s.trigger($,{field:e.field,container:e.container})},v=function(){wo(s.table,!0)},w=function(e){s.trigger(Ve,{column:e.column})},C=function(e){s.trigger(Be,{column:e.column})},y=function(e){s.trigger("sort",{sort:e.sort})?e.preventDefault():(s._clearEditableState(),s.dataSource.options.endless&&s._resetEndless())},S=function(e){s.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(s._clearEditableState(),s.dataSource.options.endless&&s._resetEndless())};if(u){"boolean"==typeof u&&(u={}),s._setColumnsMediaVisibility(d);for(var T=0,H=(n=ro(s.thead)).length;T<H;T++){o=d[T];var R=n.eq(T);!1===o.columnMenu||o.command||!o.field&&!R.attr("data-"+r.ns+"field")||((e=R.data("kendoColumnMenu"))&&e.destroy(),a=!1!==o.sortable&&!1!==u.sortable&&!1!==c.sortable&&f({},c.sortable,{compare:(o.sortable||{}).compare}),i=!(!c.filterable||!1===o.filterable||!1===u.filterable)&&f(!0,{pane:s.pane},c.filterable,o.filterable),o.filterable&&o.filterable.dataSource&&(i.forceUnique=!1,i.checkSource=o.filterable.dataSource),i&&(i.format=o.format),l={dataSource:s.dataSource,values:o.values,columns:u.columns,sortable:a,filterable:i,messages:u.messages,owner:s,closeCallback:v,init:_,open:k,stick:w,unstick:C,pane:s.pane,sort:y,filtering:S,filter:b?":not(.k-column-active)":"",autoSize:u.autoSize,hasLockableColumns:Nr(d).length>0&&h&&!p,hasStickableColumns:g&&!p,encodeTitles:s.options.encodeTitles,componentType:u.componentType,appendTo:x+Yt,reorderable:!0===c.reorderable||c.reorderable&&c.reorderable.columns,groupable:s.options.groupable&&!1!==s.options.groupable.enabled&&!1!==o.groupable},R.kendoColumnMenu(l))}}},_headerCells:function(){return e(this.thead).find("th").filter((function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")}))},_hasFilterMenu:function(){var e=this.options.filterable;return(!e||typeof e.mode!=rt||-1!=e.mode.indexOf("menu"))&&e},_filterable:function(){var e,t,o,l=this,a=Zr(l.columns),i=function(e){l.trigger(j,{field:e.field,container:e.container})},n=function(){wo(l.table,!0)},s=function(e){l.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(l._clearEditableState(),l.dataSource.options.endless&&l._resetEndless())},d=function(e){l.trigger(K,{field:e.field,container:e.container})},c=l._hasFilterMenu();if(c&&!l.options.columnMenu)for(var u=0,p=(t=ro(l.thead)).length;u<p;u++)if(o=t.eq(u),!1!==a[u].filterable&&!a[u].command&&(a[u].field||o.attr("data-"+r.ns+"field"))){(e=o.data("kendoFilterMenu"))&&e.destroy(),(e=o.data("kendoFilterMultiCheck"))&&e.destroy();var h=a[u].filterable,g=f({},c,h,{dataSource:l.dataSource,values:a[u].values,format:a[u].format,closeCallback:n,title:a[u].title||a[u].field,init:i,open:d,pane:l.pane,change:s,appendTo:x+Yt});h&&h.messages&&(g.messages=f(!0,{},c.messages,h.messages)),h&&h.dataSource&&(g.forceUnique=!1,g.checkSource=h.dataSource),h&&h.multi?o.kendoFilterMultiCheck(g):o.kendoFilterMenu(g)}},_filterRow:function(){var t=this;if(t._hasFilterRow()){var o,a=Zr(t.columns),i=t.options.filterable,n=t.thead.find(".k-filter-row"),s=function(e){t.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(t._clearEditableState(),t.dataSource.options.endless&&t._resetEndless())};this._updateHeader(t._groups());for(var d=0;d<a.length;d++){var c,u=a[d],p=t.options.filterable.operators,h=!1,g=e("<td class='k-table-td' title='"+t.options.messages.filterCellTitle+"'/>"),m=u.field;if(u.hidden&&g.hide(),n.append(g),m&&!1!==u.filterable){var b=u.filterable&&u.filterable.cell||{};(c=t.options.dataSource)instanceof l&&(c=t.options.dataSource.options);var _=f(!0,{},i.messages);if(u.filterable&&f(!0,_,u.filterable.messages),!1===b.enabled){g.html("&nbsp;");continue}b.dataSource&&(c=b.dataSource,h=!0),u.filterable&&u.filterable.operators&&(p=u.filterable.operators),o={column:u,dataSource:t.dataSource,suggestDataSource:c,customDataSource:h,field:m,messages:_,size:t.options.size,values:u.values,template:b.template,delay:b.delay,inputWidth:b.inputWidth,suggestionOperator:b.suggestionOperator,minLength:b.minLength,dataTextField:b.dataTextField,operator:b.operator,operators:p,showOperators:b.showOperators,change:s},e("<span/>").attr(r.attr("field"),m).appendTo(g).kendoFilterCell(o)}else g.html("&nbsp;");g.data("column",u)}this._filterFocusable().attr(et,-1)}},_sortable:function(){var e,t,o,l=this,a=Zr(l.columns),i=l.options.sortable,n=function(e){l.trigger("sort",{sort:e.sort})?e.preventDefault():l._clearEditableState()};if(i){for(var s=ro(l.thead),d=0,c=s.length;d<c;d++)!1!==(e=a[d]).sortable&&!e.command&&e.field&&((t=(o=s.eq(d)).data("kendoColumnSorter"))&&t.destroy(),o.attr("data-"+r.ns+"field",e.field).kendoColumnSorter(f({},i,e.sortable,{dataSource:l.dataSource,aria:!0,filter:":not(.k-column-active)",change:n})));s=null}},_columns:function(t){var o,l,a,i=this,n=i.table,s=n.find("col"),d=i.element.find("thead tr"),c=i.options.dataSource;if(t=t.length?t:g(n.find("th:not(.k-group-cell):not(.k-hierarchy-cell)"),(function(t,o){var l=(t=e(t)).attr(r.attr("sortable")),a=t.attr(r.attr("filterable")),i=t.attr(r.attr("type")),n=t.attr(r.attr("groupable")),d=t.attr(r.attr("field")),c=t.attr(r.attr("title")),u=t.attr(r.attr("column-menu")),p=t.attr(r.attr("menu"));return d||(d=t.text().replace(/\s|[^A-z0-9]/g,"")),{field:d,type:i,title:c,sortable:"false"!==l,filterable:"false"!==a,groupable:"false"!==n,menu:"false"!==p,columnMenu:"false"!==u,template:t.attr(r.attr("template")),width:s.eq(o).css(Xe)}})),o=!(i.table.find("tbody tr").length>0&&(!c||!c.transport)),i.options.scrollable){var u=t;if(l=Nr(t),t=jr(t),l.length>0&&0===t.length)throw new Error("There should be at least one non locked column");!function(e,t){var r,o,l=0,a=e.find("th:not(.k-group-cell)");for(r=0,o=t.length;r<o;r++)t[r].locked&&(a.eq(r).insertBefore(a.eq(l)),a=e.find("th:not(.k-group-cell)"),l++)}(i.element.find("tr:has(th)").first(),u),t=l.concat(t)}if(d.length&&t.length&&i._updateColumnIDs(t,d.first()),i.columns=dr(t,o),e.grep(Zr(i.columns),(function(e){return e.selectable})).length&&(i._selectedIds={},i._checkBoxSelection=!0,i.wrapper.on(Ne+O,"tbody > tr "+ke,i._checkboxClick.bind(i)),i.wrapper.on(Ne+O,"thead > tr "+ke,i._headerCheckboxClick.bind(i))),(a=e.grep(Zr(i.columns),(function(e){return e.draggable}))).length){i._hasDragHandleColumn=!0;for(var p=0;p<a.length;p++)a[p].headerAttributes=e.extend({"aria-label":i.options.messages.dragHandleLabel},a[p].headerAttributes)}i._foreignKeyBindings(i.columns)},_foreignKeyBindings:function(e){for(var t,r=e.length,o=0;o<r;o++)(t=e[o]).dataSource&&this._fetchForeignKeyValues(t)},_fetchForeignKeyValues:function(t){var r=this,o=e.Deferred();r._hasBoundForeignKey=!0,t.dataSource=l.create(t.dataSource),r._foreignKeyPromises||(r._foreignKeyPromises=[]),r._foreignKeyPromises.push(o),t.dataSource.fetch().then((function(){var e=t.dataSource.data();t.values=e.map((function(e){return{value:e[t.dataValueField],text:e[t.dataTextField]}})),o.resolve()}))},_updateColumnIDs:function(e,t){if(e.length){for(var r,o=t.find("th:not(.k-group-cell):not(.k-hierarchy-cell)"),l=0;l<e.length;l++)(r=o.eq(l).attr(ft))&&(e[l].headerAttributes=f(e[l].headerAttributes,{id:r}));this._updateColumnIDs(Jr(e),t.next())}},_headerCheckboxClick:function(t){var r=this,o=e(t.target),l=o.prop("checked");r._belongsToGrid(o)&&(r.trigger(Y,{target:o,originalEvent:t})?t.preventDefault():(l?r.select(r.items()):r.clearSelection(),r._calculateAggregatesForSelected(),r.trigger(J,{cellAggregates:r._cellAggregates})))},_checkboxClick:function(t){var r=this,o=e(t.target).closest(mt),l=!o.hasClass(be);r._belongsToGrid(o)&&(r.trigger(Y,{target:o,originalEvent:t})?t.preventDefault():(l?r.select(o):r._deselectCheckRows(o),r._calculateAggregatesForSelected(),r.trigger(J,{cellAggregates:r._cellAggregates})))},_groups:function(){var e=this.dataSource.group();return e?e.length:0},_tmpl:function(t,o,l,a){var i,n,s,d,c,u,p=this,h=f({},r.Template,p.options.templateSettings),g=(h.paramName,o.length),m={storage:{},count:0},b=p._hasDetails(),_=p._groups(),k=r.attr("field");let v;return t||(v=t=>{var h=g?` ${r.attr("uid")}="${r.getter("uid")(t)}"`:"",v=`<tr class="${l?"k-alt k-table-row k-table-alt-row ":"k-table-row "}k-master-row"${h}>`;for(_>0&&!a&&(v+=rr(_)),b&&(v+='<td class="k-hierarchy-cell k-table-td" aria-expanded="false">'+r.ui.icon(e(`<a href="#" ${_t}="${ht}" tabindex="-1"></a>`),{icon:"caret-alt-"+(Gt?"left":"right")})+"</td>"),i=0;i<g;i++){let e;s=o[i],n=s.template,d=s.field,u={},p._editMode()&&d&&(s.attributes=s.attributes||{},p.virtualScroll&&(s.attributes[k]=d),e=p._dirtyCellTemplate(d)(t)),s.colSpan&&s.colSpan>0&&(s.attributes||{})[r.attr("style-display")]?s.attributes=no(s.attributes):!s.colSpan&&s.hidden&&(s.attributes=io(s.attributes)),s.command&&(s.attributes=s.attributes||{},void 0!==(c=s.attributes.class)?c.indexOf("k-command-cell")<0&&(s.attributes.class+=" k-command-cell"):s.attributes.class="k-command-cell"),s.draggable&&(s.attributes=s.attributes||{},void 0!==s.attributes.class?s.attributes.class.indexOf("k-drag-cell k-touch-action-none")<0&&(s.attributes.class+=" k-drag-cell k-touch-action-none"):s.attributes.class="k-drag-cell k-touch-action-none",void 0===s.attributes[_t]&&(s.attributes[_t]=p.options.messages.dragHandleLabel),void 0!==s.attributes.style?s.attributes.style.indexOf("cursor: move;")<0&&(s.attributes.style+=" cursor: move;"):s.attributes.style="cursor: move;"),s._attributesFunction&&(u=s._attributesFunction(t));let l=f({},s.attributes,u);e&&(l.class=l.class||"",l.class+=e);let a=or(l),h="";s.colSpan&&(s.colSpan>1&&(h+=" "+r.attr("virtual")),h+=` colSpan="${s.colSpan}"`),v+=Er(`<td${a}${h}>`),v+=s.selectable?r.template(Ot)({size:r.getValidCssClass("k-checkbox-","size",p.options.size)}):p._cellTmpl(s,m)(t),v+="</td>"}return v+="</tr>"}),t=r.template(t||v,h),m.count>0?t.bind(m.storage):t},_dirtyCellTemplate:function(e){return t=>{if(e&&t&&t.dirty&&t.dirtyFields){return("["===e.charAt(0)?r.getter(e)(t.dirtyFields):t.dirtyFields[e])?" k-dirty-cell":""}return""}},_headerCellText:function(e){var t=f({},r.Template,this.options.templateSettings),o=e.headerTemplate,l=typeof o,a=e.title&&(this.options.encodeTitles?Ao(e.title):e.title)||Ao(e.field||"");return l===tt?a=r.template(o,t)({}):l===rt&&(a=o),a},_cellTmpl:function(e,t){var o,l,a=this,i=f({},r.Template,a.options.templateSettings),n=e.template,s=e.field,d=e.format,c=typeof n,u=e.values;return e.command?b(e.command)?t=>{let r="";for(o=0,l=e.command.length;o<l;o++)e.command[o].visible?r+=e.command[o].visible(t)?a._createButton(e.command[o]):"":r+=a._createButton(e.command[o]);return r}:()=>a._createButton(e.command):e.selectable?Ot:e.draggable?Bt:o=>{let l=a._dirtyIndicatorTemplate(s)(o);if(c===tt)t.storage["tmpl"+t.count]=n,l+=n(o),t.count++;else if(c===rt)l+=r.template(n,i)(o);else if(u&&u.length&&h(u[0])&&"value"in u[0]&&s){var p=co(u)[i.useWithBlock?r.getter(s)(o):s];l+=w(null!=p?p:"")}else{let t="";s&&(t=null==(s=r.getter(s)(o))?"":s),d&&(t=r.format(d.replace(Dt,"$1"),t)),l+=e.encoded?w(t):t}return l}},_dirtyIndicatorTemplate:function(e){return t=>{if(e&&t&&t.dirty&&t.dirtyFields){return("["===e.charAt(0)?r.getter(e)(t.dirtyFields):t.dirtyFields[e])?'<span class="k-dirty"></span>':""}return""}},_virtualCols:function(t){var o,l=this,a=e.map(t,(function(e){return e.hidden?0:parseInt(e.width,10)})),i=l.virtualScrollable?r.scrollLeft(l.content.find(">.k-virtual-scrollable-wrap")):r.scrollLeft(l.content),n=d(l.content),s=Lr(t),c=[],u=0,p=0,h=0,f=0,g=0;for(f=0;f<t.length;f++){if(o=f<a.length-1?a[f+1]:0,!(g+a[f]+2*o<i)){u=1+h;break}a[f]&&h++,g+=a[f]}h=0,g=0;for(var m=t.length-1;m>=0;m--){if(!(g+3*a[m]<s-n-i)){p=1+h;for(var b=f;b<=m;b++)t[b].locked||(c.push(t[b]),t[b].colSpan&&delete t[b].colSpan);c[0].colSpan=u,c[c.length-1].colSpan=p;break}a[m]&&h++,g+=a[m]}return c[0].hidden&&c[0].colSpan--,l.virtualCols=c,c},_templates:function(){var t=this,r=t.options,o=t.dataSource,l=o.group(),a=t.footer||t.wrapper.find(".k-grid-footer"),i=o.aggregate(),n=Zr(t.columns),s=Zr(Nr(t.columns)),d=r.scrollable?Zr(jr(t.columns)):n,c=(t.virtualScroll||{}).columns?t._virtualCols(d):d,u=m(kr(s),(function(e,t){return e.groupHeaderColumnTemplate&&0!==t})),p=m(kr(c),(function(e){return e.groupHeaderColumnTemplate}));if(r.scrollable&&s.length){if(r.rowTemplate||r.altRowTemplate)throw new Error("Having both row template and locked columns is not supported");t.rowTemplate=t._tmpl(r.rowTemplate,c,!1,!0),t.altRowTemplate=t._tmpl(r.altRowTemplate||r.rowTemplate,c,!0,!0),t.lockedRowTemplate=t._tmpl(r.rowTemplate,s),t.lockedAltRowTemplate=t._tmpl(r.altRowTemplate||r.rowTemplate,s,!0)}else t.rowTemplate=t._tmpl(r.rowTemplate,c),t.altRowTemplate=t._tmpl(r.altRowTemplate||r.rowTemplate,c,!0);t._hasDetails()&&(t.detailTemplate=t._detailTmpl(r.detailTemplate||(()=>""))),(t._group&&!C(i)||!C(i)&&!a.length||m(n,(function(e){return e.footerTemplate})).length)&&(t.footerTemplate=t._footerTmpl(n,i,"footerTemplate","k-footer-template k-table-row")),l&&m(n,(function(e){return e.groupFooterTemplate})).length&&(i=e.map(l,(function(e){return e.aggregates})),t.groupFooterTemplate=t._footerTmpl(c,i,"groupFooterTemplate","k-group-footer k-table-row",s.length),r.scrollable&&s.length&&(t.lockedGroupFooterTemplate=t._footerTmpl(s,i,"groupFooterTemplate","k-group-footer k-table-row"))),l&&(u.length||p.length)?(i=e.map(l,(function(e){return e.aggregates})),t.groupHeaderColumnTemplate=t._groupHeaderTmpl(kr(c),i,"groupHeaderColumnTemplate","k-table-group-row k-grouping-row k-table-row",s.length,p),r.scrollable&&s.length&&(t.lockedGroupHeaderColumnTemplate=t._groupHeaderTmpl(kr(s),i,"groupHeaderColumnTemplate","k-table-group-row k-grouping-row k-table-row",0,u))):(t.groupHeaderColumnTemplate=null,t.lockedGroupHeaderColumnTemplate=null),t.options.noRecords&&(t.noRecordsTemplate=t._noRecordsTmpl())},_noRecordsTmpl:function(){var t,o,l,a='<div class="{0}">{1}</div>',i=this.options.scrollable&&!this.wrapper[0].style.height?` ${r.attr("style-margin")}="0 auto" ${r.attr("style-position")}="static"`:"",n={storage:{},count:0},s=e.extend({},r.Template,this.options.templateSettings);s.paramName;let d;if("function"===(o=typeof(t=this.options.noRecords.template?this.options.noRecords.template:r.format('<div class="k-grid-norecords-template"{1}>{0}</div>',this.options.messages.noRecords,i)))){let e=n.storage["tmpl"+n.count]=t;n.count++,d=t=>r.format(a,ve,e(t))}else"string"===o&&(d=this.options.noRecords.template?r.format(a,ve,t):()=>r.format(a,ve,t));return l=r.template(d,s),n.count>0&&(l=l.bind(n.storage)),l},_footerTmpl:function(e,t,o,l,a){var i,n,s,d,c,u=this,p=f({},r.Template,u.options.templateSettings),h=p.paramName,g={},m=0,b={},_=u._groups(),k=u.dataSource._emptyAggregates(t);let v=r.template((t=>{let v='<tr class="'+l+'">';for(_>0&&!a&&(v+=rr(_)),u._hasDetails()&&(v+='<td class="k-hierarchy-cell k-table-td">&nbsp;</td>'),i=0,n=e.length;i<n;i++)c=e[i],s=c[o],d=typeof s,v+=Er("<td"+or(c.footerAttributes)+">"),s?(d!==tt&&(b=k[c.field]?f({},p,{paramName:h+"['"+c.field+"']"}):{},s=r.template(s,b)),g["tmpl"+m]=s,v+=s(t),m++):v+="&nbsp;",v+="</td>";return v+="</tr>",v}),p);return m>0?v.bind(g):v},_groupHeaderTmpl:function(e,t,o,l,a,i){var n,s,d,c,u,p,g=this,m=f({},r.Template,g.options.templateSettings),b=m.paramName,k="",v={},w=0,C={},y=g.dataSource._emptyAggregates(t),S=i.length?_(i[0],e):-1;if(!(S<0)){return k=r.template((t=>{var _='<tr data-group-uid="'+t.uid+'" class="'+l+'">';if(!a)for(var k=0;k<t.groupCells;k++)_+='<td class="k-table-td k-group-cell">&nbsp;</td>';if(g._hasDetails()&&(_+='<td class="k-table-td k-hierarchy-cell">&nbsp;</td>'),S<1&&i.length<=1&&!a)return _+=a?"":Ro(e.length)(t);for(S<1?(S=a?0:1,_+=a?"":Ro(S)(t)):_+=a?function(e){return'<td class="k-table-td" colspan="'+e+'">'+`<p class="k-reset">&nbsp;</p></td>${new Array(e).join("<td hidden group-header-spanned-hidden></td>")}`}(S):Ro(S)(t),n=S,s=e.length;n<s;n++){if(u=e[n],d=u[o],c=typeof d,u.sticky){let e="";if((p=u.groupHeaderColumnTemplateClass||"")||(p=u.groupHeaderColumnTemplateClass="group-header-column-template-"+r.guid()),h(u.stickyStyle)){e=`${u.stickyStyle.left?`${r.attr("style-left")}="${u.stickyStyle.left}"`:""} ${u.stickyStyle.right?`${r.attr("style-right")}="${u.stickyStyle.right}"`:""}`}_+=`<td class="k-table-td ${Ee} ${p}" ${e}>`}else _+="<td class='k-table-td'>";d?(c!==tt&&(C=y[u.field]?f({},m,{paramName:b+"['"+u.field+"']"}):{},d=r.template(d,C)),v["tmpl"+w]=d,_+=v["tmpl"+w](t),w++):_+="&nbsp;",_+="</td>"}return _+="</tr>"}),m),w>0?k.bind(v):k}},_detailTmpl:function(e){var t=this,o=f({},r.Template,t.options.templateSettings),l=(o.paramName,{}),a=0,i=t._groups(),n=kr(Zr(t.columns)).length,s=typeof e;let d=r.template((t=>{let d='<tr role="row" class="k-detail-row k-table-row">';return i>0&&(d+=rr(i)),d+=`<td role="gridcell" class="k-hierarchy-cell k-table-td"></td><td role="gridcell" class="k-table-td k-detail-cell"${n?` colspan="${n}"`:""}>`,s===tt?(l["tmpl"+a]=e,d+=e(t),a++):d+=r.template(e,o)(t),d+="</td></tr>",d}),o);return a>0?d.bind(l):d},_hasDetails:function(){return null!==this.options.detailTemplate||(this._events[N]||[]).length},_hasFilterRow:function(){var t=this.options.filterable,r=t&&typeof t.mode==rt&&-1!=t.mode.indexOf(Et),o=this.columns,l=e.grep(o,(function(e){return!1===e.filterable}));return o.length&&l.length==o.length&&(r=!1),r},_details:function(){var t=this;if(t.options.scrollable&&t._hasDetails()&&Nr(t.columns).length)throw new Error("Having both detail template and locked columns is not supported");t.table.on(Ne+O,".k-hierarchy-cell "+q+", .k-hierarchy-cell "+L,(function(r){var o=e(this);return t._toggleDetails(o),r.preventDefault(),!1}))},_toggleDetails:function(t,o){var l,a,i,n=this,s=t.closest("td.k-hierarchy-cell"),d=t.is(q),c=t.closest("tr.k-master-row"),u=c.attr(yt),p=n.detailTemplate,h=n._hasDetails(),f=d?pt:ht,g=!!d;d?r.ui.icon(t,{icon:"caret-alt-down"}):r.ui.icon(t,{icon:"caret-alt-"+(Gt?"left":"right")}),t.attr(_t,f),s.attr(St,g),(l=c.next()).hasClass("k-hidden")&&l.removeClass("k-hidden"),h&&!l.hasClass("k-detail-row")&&(a=n.dataItem(c),l=e(p(a)).addClass(c.hasClass("k-alt")?"k-alt":"").insertAfter(c),(u||0===u)&&l.attr(yt,Number(u)+1),n.trigger(N,{masterRow:c,detailRow:l,data:a,detailCell:l.find(".k-detail-cell")})),n.trigger(d?re:oe,{masterRow:c,detailRow:l}),o?(i=d,e(l)[0].style.display=i?"":Rt):l.toggle(d)},dataItem:function(t){if(!(t=e(t)[0]))return null;var r,o,l=this.tbody.children(),a=/k-grouping-row|k-detail-row|k-group-footer/,i=t.sectionRowIndex;for(o=i,r=0;r<i;r++)a.test(l[r].className)&&o--;return this._data[o]},expandRow:function(t,r){var o=e(t).find("> td "+q);o.length&&this._toggleDetails(o,r)},collapseRow:function(t,r){var o=e(t).find("> td "+L);o.length&&this._toggleDetails(o,r)},_createHeaderCells:function(o,l){var a,i,n,s,d,c,u,p=this,h="",f=p.options.columnMenu,g=(p.options.sortable,p._hasFilterMenu()),m=p.options.messages,b=Zr(p.columns),k=p.dataSource.group();for(a=0,s=o.length;a<s;a++){i=o[a].column||o[a],n=p._headerCellText(i),d=i.title,c="";let s=_(i,b),v="";i.selectable?(v+="<th scope='col'"+or(i.headerAttributes),l&&!o[a].colSpan&&(v+=" rowspan='"+l+"'"),s>-1&&(v+=r.attr("index")+"='"+s+"'"),v+=">"+(n=i.headerTemplate?n:r.template(Vt)({size:r.getValidCssClass("k-checkbox-","size",p.options.size)}))+"</th>"):i.draggable?(v+="<th class='k-header k-drag-cell' scope='col'"+or(i.headerAttributes),l&&!o[a].colSpan&&(v+=" rowspan='"+l+"'"),s>-1&&(v+=r.attr("index")+"='"+s+"'"),v+=">"+(n=i.headerTemplate?n:"")+"</th>"):i.command?(v+="<th scope='col'"+or(i.headerAttributes),l&&!o[a].colSpan&&(v+=" rowspan='"+l+"'"),s>-1&&(v+=r.attr("index")+"='"+s+"'"),v+=">"+(n&&"&nbsp;"!==n?r.template(Wt)({text:n}):n)+"</th>"):(i.field&&(c=r.attr("field")+"='"+i.field+"' "),v+="<th scope='col' "+c,f&&i.field&&!1!==i.menu?v+=" aria-haspopup='menu'":g&&!1!==i.filterable&&!i.command&&(v+=" aria-haspopup='dialog'"),l&&!o[a].colSpan&&(v+=" rowspan='"+l+"'"),o[a].colSpan>1?(v+='colspan="'+(o[a].colSpan-Mr(i.columns))+'" ',v+=r.attr("colspan")+"='"+o[a].colSpan+"'"):1===o[a].colSpan&&(v+=r.attr("colspan")+"='"+o[a].colSpan+"'"),d&&(d=d&&(p.options.encodeTitles?Ao(d,!0):d),v+=r.attr("title")+'="'+d+'" '),i.groupable!==t&&(v+=r.attr("groupable")+"='"+i.groupable+"' "),u=i,!p.options.groupable||!u.groupable&&u.groupable!==t||i.headerAttributes&&i.headerAttributes.title||(v+="title='",v+=Co(k,i.field)?m.ungroupHeader:m.groupHeader,v+="' "),i.aggregates&&i.aggregates.length&&(v+=r.attr("aggregates")+"='"+i.aggregates+"'"),s>-1&&(v+=r.attr("index")+"='"+s+"'"),v+=or(i.headerAttributes),v+=">"+(n=r.template(Wt)({text:n}))+"</th>"),p.options.resizable?h+=e(v).attr("data-resizable",(!1!==i.resizable).toString()).addClass("k-table-th")[0].outerHTML:h+=e(v).addClass("k-table-th")[0].outerHTML}return h},_appendLockedColumnContent:function(){var t,o,l,a,i,n=this.columns,s=this.table.find("colgroup"),d=s.find(F),c=e(),u=0,p=0;for(t=0,o=n.length;t<o;t++)if(n[t].locked)if(_r(n[t])){for(a=1,n[t].columns&&(a=Zr(n[t].columns).length-Mr(n[t].columns)),a=a||1,i=0;i<a;i++)c=c.add(d.eq(t+p+i-u));p+=a-1}else u++;l=e('<div class="k-grid-content-locked"><table class="k-grid-table k-table"><colgroup></colgroup><tbody class="k-table-tbody"></tbody></table></div>'),s.detach(),l.find("colgroup").append(c),s.insertBefore(this.table.find("tbody")),this.lockedContent=l.insertBefore(this.content),this.lockedTable=l.children("table"),this.lockedTable.addClass(r.getValidCssClass("k-table-","size",this.options.size))},_appendLockedColumnFooter:function(){var t,o,l=this,a=l.footer,i=a.find(".k-footer-template>td"),n=a.find(".k-grid-footer-wrap>table>colgroup>col"),s=e('<div class="k-grid-footer-locked"><table class="k-grid-footer-table k-table"><colgroup></colgroup><tfoot class="k-table-tfoot"><tr class="k-footer-template k-table-row"></tr></tfoot></table></div>'),d=l._groups(),c=e(),u=e();for(s.find("table").addClass(r.getValidCssClass("k-table-","size",this.options.size)),c=c.add(i.filter(".k-group-cell")),t=0,o=Zr(Nr(l.columns)).length;t<o;t++)c=c.add(i.eq(t+d));for(u=u.add(n.filter(".k-group-col")),t=0,o=kr(Zr($r(l.columns))).length;t<o;t++)u=u.add(n.eq(t+d));c.appendTo(s.find(mt)),u.appendTo(s.find("colgroup")),l.lockedFooter=s.prependTo(a)},_appendLockedColumnHeader:function(t){var o,l,a,i,n,s,d,c,u,p=this,h=this.columns,f=[],g=0,m=e(),b=p._hasFilterRow(),_=0,k=e(),v=0,w=e();i=p.thead.prev().find(F),d=p.thead.find(mt).first().find(".k-header:not(.k-group-cell,.k-hierarchy-cell)"),c=p.thead.find(".k-filter-row").find("td:not(.k-group-cell,.k-hierarchy-cell)");var C=0;for(o=0,a=h.length;o<a;o++){if(h[o].locked){if(u=d.eq(o),v=Zr(h[o].columns||[]).length,_r(h[o])){var y=null;h[o].columns&&(y=v-Mr(h[o].columns)),y=y||1;for(var S=0;S<y;S++)m=m.add(i.eq(o+C+S-g));C+=y-1}Or([h[o]],lo(u),f,0,0),v=v||1;for(var x=0;x<v;x++)k=k.add(c.eq(_+x));_+=v}h[o].columns&&(g+=Mr(h[o].columns)),_r(h[o])||g++}if(f.length){for(l='<div class="k-grid-header-locked"><table class="k-grid-header-table k-table"><colgroup></colgroup><thead class="k-table-thead">',l+=new Array(f.length+1).join("<tr class='k-table-row'></tr>"),(s=e(l+=(b?'<tr class="k-filter-row k-table-row"></tr>':"")+"</thead></table></div>")).find(".k-grid-header-locked").css("width","1px"),s.find("table").addClass(r.getValidCssClass("k-table-","size",p.options.size)),(i=s.find("colgroup")).append(p.thead.prev().find("col.k-group-col").add(m)),n=s.find("thead tr:not(.k-filter-row)"),o=0,a=f.length;o<a;o++)w=Cr(f[o]),n.eq(o).append(p.thead.find(mt).eq(o).find(".k-group-cell").add(w));var T=Pr(this.thead);return f.length<T&&function(e,t){for(var r,o=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)"),l=0;l<o.length;l++)(r=o[l].rowSpan)>1&&(o[l].rowSpan=r-t||1)}(s,T-f.length),s.find(".k-filter-row").append(p.thead.find(".k-filter-row .k-group-cell").add(k)),this.lockedHeader=s.prependTo(t),this.thead.find(".k-group-cell").remove(),!0}return!1},_removeLockedContainers:function(){var e=this.lockedHeader.add(this.lockedContent).add(this.lockedFooter);r.destroy(e),e.off(O).remove(),this.lockedHeader=this.lockedContent=this.lockedFooter=null,this.selectable=null},_thead:function(){var t,o,l,a=this,i=a.columns,n=a._hasDetails()&&i.length,s=a._hasFilterRow(),d="",c=a.table.find(">thead"),u=a.element.find("thead").first().length>0,p=a.options.messages.expandCollapseColumnHeader;if(c.length||(c=e("<thead/>").insertBefore(a.tbody)),c.addClass("k-table-thead").attr("role","rowgroup"),a.lockedHeader&&a.thead?((o=a.thead.find("tr:has(th):not(.k-filter-row)").html("")).remove(),o=e(),a._removeLockedContainers()):o=u?a.element.find("thead").first().find("tr:has(th):not(.k-filter-row)"):a.element.find("tr:has(th)").first(),o.length){for(t=0;t<i.length;t++){var h=_(i[t],Zr(i)),f=ro(o.parent()).filter("th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(h);f.addClass("k-table-th"),i[t].hidden&&h>=0&&(f[0].style.display=Rt)}a._updateHeadersAttr(Jr(i))}else if(!(o=c.children().first()).length){var g=[{rowSpan:1,cells:[],index:0}];for(a._prepareColumns(g,i),t=0;t<g.length;t++)d+="<tr class='k-table-row'>",n&&(d+='<th class="k-hierarchy-cell k-table-th" scope="col">'+p+"</th>"),d+=a._createHeaderCells(g[t].cells,g[t].rowSpan),d+="</tr>";o=e(d),r.applyStylesFromKendoAttributes(o,["display","left","right"])}if(s){var m=e("<tr/>");m.addClass("k-filter-row k-table-row"),(n||o.find(".k-hierarchy-cell").length)&&m.prepend('<td class="k-table-td k-hierarchy-cell">&nbsp;</td>');var b=(a.thead||c).find(".k-filter-row");b.length&&(r.destroy(b),b.remove()),c.append(m)}o.children().length?n&&!o.find(".k-hierarchy-cell")[0]&&o.prepend('<th class="k-hierarchy-cell k-table-th" scope="col">'+(p||"&nbsp;")+"</th>"):(d="",n&&(d+='<th class="k-hierarchy-cell k-table-th" scope="col">&nbsp;</th>'),d+=a._createHeaderCells(i),o.html(d)),o.find("th").addClass(Te),a.options.scrollable||c.addClass("k-grid-header"),o.find("script").remove().end().prependTo(c),a.thead&&a._destroyColumnAttachments(),a.thead=c,a._sortable(),a._filterable(),a._filterRow(),a._scrollable(),a._columnMenu();var k=this.options.scrollable&&Nr(this.columns).length;k&&(l=a._appendLockedColumnHeader(a.thead.closest(".k-grid-header")),a._appendLockedColumnContent(),a.lockedContent.on("DOMMouseScroll"+O+" mousewheel"+O,a._wheelScroll.bind(a)),r.support.touch&&(a._lockedContentUserEvents=new r.UserEvents(a.lockedContent,{move:function(e){a.content.scrollTop(a.content.scrollTop()+-e.y.delta),e.preventDefault()}})),a._updateLockedCols()),a._updateCols(),a._updateColumnCellIndex(),a._updateFirstColumnClass(),a._resizable(),a._draggable(),a._reorderable(),a._updateHeader(a._groups()),a._updateStickyColumns(),k&&(l&&a._syncLockedHeaderHeight(),a._applyLockedContainersWidth())},_retrieveFirstColumn:function(t,r){var o=e();if(r.length&&t[0]){for(var l=t[0];l.columns&&l.columns.length;)l=l.columns[0],r=r.filter(":not(:first)");o=o.add(r)}return o},_updateFirstColumnClass:function(){var t=this,r=t.columns||[];if(!(t._hasDetails()&&r.length)&&!t._groups()){var o=t.thead.find(">tr:not(.k-filter-row):not(:first)");r=jr(r);var l=t._retrieveFirstColumn(r,o);t._isLocked()&&(o=t.lockedHeader.find("thead>tr:not(.k-filter-row):not(:first)"),r=Nr(t.columns),l=l.add(t._retrieveFirstColumn(r,o))),l.each((function(){var t=e(this).find("th");t.removeClass("k-first"),t.eq(0).addClass("k-first")}))}},_prepareColumns:function(e,t,r,o){for(var l=o||e[e.length-1],a=e[l.index+1],i=0,n=0;n<t.length;n++){var s={column:t[n],colSpan:0};l.cells.push(s),t[n].columns&&t[n].columns.length&&(a||(a={rowSpan:0,cells:[],index:e.length},e.push(a)),s.colSpan=t[n].columns.length,this._prepareColumns(e,t[n].columns,s,a),i+=s.colSpan-1,l.rowSpan=e.length-l.index)}r&&(r.colSpan+=i)},_wheelScroll:function(e){if(!e.ctrlKey){var t=this.content;this.virtualScroll&&this.virtualScroll.rows&&(t=this.virtualScrollable.verticalScrollbar);var o=t.scrollTop(),l=r.wheelDeltaY(e);l&&(t[0].scrollHeight>t[0].clientHeight&&(t[0].scrollTop<t[0].scrollHeight-t[0].clientHeight&&l<0||t[0].scrollTop>0&&l>0)&&e.preventDefault(),t.scrollTop(o+-l))}},_isLocked:function(){return null!=this.lockedHeader},_updateHeaderCols:function(){var e=this.thead.parent().add(this.table);this._isLocked()?so(e,Qr(Kr(this.columns)),this._hasDetails(),0):so(e,Qr(kr(this.columns)),this._hasDetails(),0)},_updateColumnSorters:function(){var e,t,r=this,o=ro(r.thead),l=Zr(r.columns);if(r.options.sortable)for(var a=0,i=o.length;a<i;a++)!1!==(e=l[a]).sortable&&!e.command&&e.field&&(t=o.eq(a).data("kendoColumnSorter"))&&t.refresh()},_updateHeadersAttr:function(e){if(e.length){for(var t=0;t<e.length;t++){if(e[t].headerAttributes)this.element.find("[id='"+e[t].headerAttributes.id+"']").attr("headers",e[t].headerAttributes.headers)}this._updateHeadersAttr(Jr(e))}},_updateCols:function(e){e=e||this.thead.parent().add(this.table),this._appendCols(e,this._isLocked())},_updateLockedCols:function(e){this._isLocked()&&so(e=e||this.lockedHeader.find("table").add(this.lockedTable),Qr($r(this.columns)),this._hasDetails(),this._groups())},_appendCols:function(e,t){t?so(e,Qr(Kr(this.columns)),this._hasDetails(),0):so(e,Qr(kr(this.columns)),this._hasDetails(),this._groups())},_autoColumns:function(e){if(e&&e.toJSON){var t,o,l=this;for(t in e=e.toJSON(),o=!(l.table.find("tbody tr").length>0&&(!l.dataSource||!l.dataSource.transport)),e)l.columns.push({field:t,encoded:o,headerAttributes:{id:r.guid()}});l._thead(),l._templates()}},_setRowCachedHeight:function(t,r){var o,l=this._cachedRowsHeight[r];return l&&((o=e(t))[0].style.height=l+"px",t=o.prop("outerHTML")),t},_rowsHtml:function(e,t){var r,o,l,a=this,i="",n=t.rowTemplate,s=t.altRowTemplate,d=a._cachedRowsHeight;for(r=0,o=e.length;r<o;r++)a._skipRerenderItemsCount>0?a._skipRerenderItemsCount--:(l=r%2?s(e[r]):n(e[r]),d&&(l=a._setRowCachedHeight(l,e[r].uid)),i+=l),a._data.push(e[r]);return i},_groupData:function(e,t,r){var o=this._groupAggregatesDefaultObject||{},l=e.items,a=f({},o,e.aggregates),i=f({},{field:e.field,value:e.value,items:l,aggregates:a},e.aggregates[r?r.field:e.field]),n={};if(!t)for(var s in a)n[s]=f({},a[s],{group:{field:e.field,value:e.value,items:l}});return f({},n,i)},_removeGroupIfEmpty:function(e){for(var t,r,o=this.dataSource._group.length,l=0;l<o;l++)t=+(e=e.prev()).attr("data-group-item-count"),r=+e.attr("data-sub-group-count"),1!=t&&1!=r||e.hide()},_groupRowHtml:function(e,t,o,l,a,i,n,s){var d,c,u,p=this,h="",g=null!=p.lockedContent,b=e.field,k=m(Zr(p.columns),(function(e){return e.field==b}))[0]||{},v=kr(p.columns)[0],w=v?v.groupHeaderColumnTemplate:null,C=k.groupHeaderTemplate?k.groupHeaderTemplate:w,y=(k.title&&(p.options.encodeTitles?Ao(k.title,!0):k.title)||Ao(b,!0))+": "+uo(e.value,k.format,k.values,k.encoded),S=e.currentItems||e.items,x=p._groups(),T=a.groupFooterTemplate,H=a.groupHeaderColumnTemplate,R=p.dataSource._isGroupPaged(),E=!R||p.dataSource._groupsState[e.uid];if(p.options.editable&&e.items&&e.items[0]&&e.items[0].isNew&&e.items[0].isNew()&&(E=!0),(a.groupFooterTemplate||a.groupHeaderColumnTemplate||k.groupHeaderTemplate)&&(u=p._groupData(e,!1,!(k.groupHeaderTemplate||!kr(p.columns)[0].groupHeaderColumnTemplate)&&kr(p.columns)[0])),C&&!i&&(y=typeof C===tt?C(u):r.template(C)(u)),p._skipRerenderItemsCount?l(t,o,y,E,e.uid,R):e.excludeHeader?e.excludeHeader=!!g&&!s:h+=function(e,t,r,o,l,a,i,n,s,d){var c;c=e?e(f({},l,{groupCells:a,colspan:o,text:i,expanded:n,isRtl:Gt,uid:s.uid})):t(r,a,i,n,s.uid,d,Gt);return c}(H,l,t,x-o,u,o,y,E,e,R),E)if(e.hasSubgroups)for(d=0,c=S.length;d<c;d++)h+=p._groupRowHtml(S[d],i?t:t-1,o+1,l,a,i,n&&d===S.length-1,s);else h+=p._rowsHtml(S,a);return T&&(n?_(e.value,p._skippedGroups)||p._skippedGroups.push(e.value):(p._skippedGroups.length&&p._skippedGroups[0]===e.value&&p._skippedGroups.shift(),p._skipRerenderItemsCount||(h+=T(u)))),h},collapseGroup:function(t){var o,l,a,i,n,s=this,d=t,c=this.options.groupable.showFooter?0:1,u=e();if(o=(t=e(t)).find(".k-group-cell").length,this.dataSource._isGroupPaged()){var p,h=t.attr("data-group-uid"),f=s.dataSource._getGroupByUid(h),g=s.dataSource._calculateGroupsTotal([f],!0);return s.dataSource._groupsState[h]=!1,p=s.dataSource._calculateGroupsTotal([f],!0),s.dataSource._serverGroupsTotal-=g-p,s._progress(!0),void s.dataSource.range(s.dataSource._currentRangeStart,s.dataSource.take(),(function(){s._progress(!1)}),"collapseGroup")}this._isLocked()&&(t.closest(bt).hasClass("k-grid-content-locked")?u=this.tbody.children(mt).eq(t.index()).nextAll(mt):(u=t.nextAll(mt),t=this.lockedTable.find(">tbody>tr").eq(t.index()))),t.find(L).length&&r.ui.icon(t.find(L),{icon:"caret-alt-"+(Gt?"left":"right")}),t.find("td[aria-expanded='true']").first().attr(St,!1).find("a").attr(_t,ht);var m=[];for(a=0,i=(t=t.nextAll(mt)).length;a<i&&(l=(n=t.eq(a)).find(".k-group-cell").length,n.hasClass(De)?c++:n.hasClass("k-group-footer")&&c--,!(l<=o||n.hasClass("k-group-footer")&&c<0));a++)u.length&&m.push(u[a]),m.push(n[0]);e(m).hide(),this.options.scrollable.endless&&this.content&&(clearTimeout(s._collapseGroupsTimeOut),s._collapseGroupsTimeOut=setTimeout((function(){s.content.scroll(),s._groupToCollapse=d})))},expandGroup:function(t){t=e(t);var o,l,a,i,n,s=this,d=s.options.groupable.showFooter,c=e(),u=[],p=1;if(o=t.find(".k-group-cell").length,this.dataSource._isGroupPaged()){var h,f=t.attr("data-group-uid"),g=s.dataSource._getGroupByUid(f),m=s.dataSource._calculateGroupsTotal([g],!0);return s.dataSource._groupsState[f]=!0,g.items&&g.items.length&&(h=s.dataSource._calculateGroupsTotal([g],!0),s.dataSource._serverGroupsTotal+=h-m),s._progress(!0),void s.dataSource.range(s.dataSource._currentRangeStart,s.dataSource.take(),(function(){s._progress(!1)}),"expandGroup")}for(this._isLocked()&&(t.closest(bt).hasClass("k-grid-content-locked")?c=this.tbody.children(mt).eq(t.index()).nextAll(mt):(c=t.nextAll(mt),t=this.lockedTable.find(">tbody>tr").eq(t.index()))),t.find(q).length&&r.ui.icon(t.find(q),{icon:"caret-alt-down"}),t.find("td[aria-expanded='false']").first().attr(St,!0).find("a").attr(_t,pt),i=0,n=(t=t.nextAll(mt)).length;i<n&&!((a=(l=t.eq(i)).find(".k-group-cell").length)<=o);i++)if(a!=o+1||l.hasClass("k-detail-row")||(l.show(),c.eq(i).show(),l.hasClass(De)&&l.find(".k-icon,.k-svg-icon").is(L)&&s.expandGroup(l),l.hasClass("k-master-row")&&l.find(".k-icon,.k-svg-icon").is(L)&&(l.next().show(),c.eq(i+1).show())),l.hasClass(De)&&(d&&u.push(l.is(":visible")),p++),l.hasClass("k-group-footer")){if(d){var b=u.pop();l.toggle(b),c.eq(i).toggle(b)}1==p?(l.show(),c.eq(i).show()):p--}(0===o&&s.options.scrollable.endless&&this._isLocked()||!s.options.scrollable.endless&&this._isLocked())&&s._syncLockedContentHeight()},_updateHeader:function(t){var r=this,o=r._isLocked()?r.lockedHeader.find("thead"):r.thead,l=o.find("tr.k-filter-row").find("td.k-group-cell").length,a=o.find(mt).first().find("th.k-group-cell").length,i=o.children("tr:not(:first)").filter((function(){return!e(this).children(":visible").length}));t>a?(e(new Array(t-a+1).join('<th class="k-group-cell k-header k-table-th" scope="col">'+w(r.options.messages.expandCollapseColumnHeader)+"</th>")).prependTo(o.children("tr:not(.k-filter-row)")),r.element.is(":visible")&&i.find("th.k-group-cell").hide()):t<a&&o.find(mt).each((function(){e(this).find(".k-group-cell").eq(t).remove(),e(this).find(".k-group-cell").slice(t).remove()})),t>l&&e(new Array(t-l+1).join('<td class="k-group-cell k-table-group-td k-table-td">&nbsp;</td>')).prependTo(o.find(".k-filter-row"))},_firstDataItem:function(e,t){return e&&t&&(e=e.hasSubgroups?this._firstDataItem(e.items[0],t):e.items[0]),e},_updateTablesWidth:function(){var t,r=this;r._isLocked()&&(t=e(">.k-grid-footer>.k-grid-footer-wrap>table",r.wrapper).add(r.thead.parent()).add(r.table),r._footerWidth=bo(t.eq(0)),t.width(r._footerWidth),(t=e(">.k-grid-footer>.k-grid-footer-locked>table",r.wrapper).add(r.lockedHeader.find(">table")).add(r.lockedTable)).width(bo(t.eq(0))))},hideColumn:function(t){var r,o,l,a,i,n,s,c,u,p=this,f=0,g=p.footer||p.wrapper.find(".k-grid-footer"),b=p.virtualScroll||{},k=p.columns,v=p.lockedHeader?ro(p.lockedHeader.find(">table>thead")).filter(br).length:0;(Array.isArray(t)?t:[t]).forEach((t=>{if(u=m(Zr(p.columns),(function(e){return e.groupHeaderColumnTemplate})),(t="number"==typeof t?k[t]:h(t)?m(Fr(k),(function(e){return e===t}))[0]:m(Fr(k),(function(e){return e.field===t}))[0])&&_r(t)){var w=p._columnVisibilitySetter(t);if(t.columns&&t.columns.length){for(i=Ar(t,k),w(t,!1),po(nr(e(">table>thead",p.lockedHeader),p.thead,">tr:eq("+i.row+")>th"),i.cell,!1),o=0;o<t.columns.length;o++)this.hideColumn(t.columns[o]);return p._ariaAddHiddenColIndex(),void p.trigger(X,{column:t})}c=_(t,kr(Zr(k))),w(t,!1),p._setParentsVisibility(t,!1),p._templates(),p._updateCols(),p._updateLockedCols();var C=p.thead;if(n=c,p.lockedHeader&&v>c?C=p.lockedHeader.find(">table>thead"):n-=v,ro(C).filter(br).eq(n)[0].style.display=Rt,po(nr(e(">table>thead",p.lockedHeader),p.thead,">tr.k-filter-row>td"),c,!1),g[0]&&(p._updateCols(g.find(">.k-grid-footer-wrap>table")),p._updateLockedCols(g.find(">.k-grid-footer-locked>table")),po(g.find(".k-footer-template>td"),c,!1)),b.columns&&!t.locked)return p._updateContentWidth(),void p.trigger(X,{column:t});if(p.lockedTable&&v>c?ho(p.lockedTable.find(">tbody>tr"),c):ho(p.tbody.children(),c-v),p.lockedTable)p._updateTablesWidth(),p._applyLockedContainersWidth(),p._syncLockedContentHeight(),p._syncLockedHeaderHeight(),p._syncLockedFooterHeight();else{for(l=p.thead.prev().find("col"),o=0,s=l.length;o<s;o+=1)if(a=l[o].style.width,l[o].className.indexOf("k-hierarchy-col")>-1)f+=d(l[o]);else if(l[o].className.indexOf("k-group-col")>-1)f+=d(l[o]);else{if(!a||-1!=a.indexOf("%")){f=0;break}f+=parseInt(a,10)}r=p.wrapper.find(">.k-grid-header table").first().add(p.wrapper.find(">.k-grid-footer table").first()).add(p.table),p._footerWidth=null,f&&(r.each((function(){this.style.width=f+gt})),p._footerWidth=f,p._setContentWidth())}p._updateFirstColumnClass(),p._updateStickyColumns(),u.length>0&&p._renderGroupRows(),p._ariaAddHiddenColIndex(),p.trigger(X,{column:t})}}))},_setParentsVisibility:function(t,o){var l,a,i,n,s,d=this.columns,c=[],u=this._columnVisibilitySetter(t),p=o?function(e){return kr(e.columns).length&&e.hidden}:function(e){return!kr(e.columns).length&&!e.hidden};if(ur(t,d,c)&&c.length)for(l=c.length-1;l>=0;l--)i=Rr(a=c[l],d),n=nr(e(">table>thead",this.lockedHeader),this.thead,">tr:eq("+i.row+")>th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(i.cell),p(a)&&(u(a,o),n[0].style.display=o?"":Rt),n.filter("["+r.attr("colspan")+"]").length&&(s=parseInt(n.attr(r.attr("colspan")),10),n[0].colSpan=s-Mr(a.columns)||1)},_updateContentWidth:function(){var e=this;e.table.add(e.thead.parent()).css({width:Lr(Qr(Kr(e.columns)))}),e.refresh()},showColumn:function(t){var r,o,l,a,i,n,s,c,u,p,f,g,b,k=this,v=k.columns,w=k.virtualScroll||{},C=k.footer||k.wrapper.find(".k-grid-footer"),y=k.lockedHeader?ro(k.lockedHeader.find(">table>thead")).length:0;(Array.isArray(t)?t:[t]).forEach((t=>{if(b=m(Zr(k.columns),(function(e){return e.groupHeaderColumnTemplate})),"number"==typeof t?(p=t,t=v[t]):h(t)?e.each(Fr(v),(function(e,r){if(r===t)return t=r,p=e,!1})):e.each(Fr(v),(function(e,r){if(r.field===t)return t=r,p=e,!1})),t&&!_r(t)){var S=k._columnVisibilitySetter(t);if(t.columns&&t.columns.length){for(s=Rr(t,v),f=Fr(k.options.columns)[p],S(t,!0),po(nr(e(">table>thead",k.lockedHeader),k.thead,">tr:eq("+s.row+")>th"),s.cell,!0),r=0;r<t.columns.length;r++)f.columns[r].hidden||this.showColumn(t.columns[r]);return k._ariaRemoveHiddenColIndex(),void k.trigger(Z,{column:t})}g=_(t,Zr(v)),S(t,!0),k._setParentsVisibility(t,!0),k._templates(),k._updateCols(),k._updateLockedCols();var x=k.thead;if(n=g,k.lockedHeader&&y>g?x=k.lockedHeader.find(">table>thead"):n-=y,(l=ro(x).eq(n))[0].style.display="",l[0].classList.remove("k-hidden"),po(nr(e(">table>thead",k.lockedHeader),k.thead,">tr.k-filter-row>td"),g,!0),C[0]&&(k._updateCols(C.find(">.k-grid-footer-wrap>table")),k._updateLockedCols(C.find(">.k-grid-footer-locked>table")),po(C.find(".k-footer-template>td"),g,!0)),w.columns&&!t.locked)return k._updateContentWidth(),void k.trigger(Z,{column:t});if(k.lockedTable&&y>g?go(k.lockedTable.find(">tbody>tr"),g):go(k.tbody.children(),g-y),k.lockedTable)k._updateTablesWidth(),k._applyLockedContainersWidth(),k._syncLockedContentHeight(),k._syncLockedHeaderHeight();else if(a=k.wrapper.find(">.k-grid-header table").first().add(k.wrapper.find(">.k-grid-footer table").first()).add(k.table),t.width){for(i=0,u=k.thead.prev().find("col"),r=0,o=u.length;r<o;r+=1)if(c=u[r].style.width,u[r].className.indexOf("k-hierarchy-col")>-1)i+=d(u[r]);else if(u[r].className.indexOf("k-group-col")>-1)i+=d(u[r]);else{if(c.indexOf("%")>-1){i=0;break}i+=parseInt(c,10)}k._footerWidth=null,i&&(a.each((function(){this.style.width=i+gt})),k._footerWidth=i,k._setContentWidth())}else a.width("");k._updateFirstColumnClass(),k._updateStickyColumns(),b.length>0&&k._renderGroupRows(),k._ariaRemoveHiddenColIndex(),k.trigger(Z,{column:t})}}))},_columnVisibilitySetter:function(e){return wr((e||{}).media)?pr:fr},_buildSkeleton:function(){var e,t=this.virtualCols?this.virtualCols:Qr(this.columns),r=this.dataSource.pageSize()||this.dataSource.total(),o="",l=this._groups(),a=t.length+l;this._hasDetails()&&a++,this._hasVirtualColumns()&&(e=parseInt(this.content.find(mt).first().find("td").first().attr("colspan"),10));for(var i=0;i<r;i++){o+="<tr class='k-table-row' data-skeleton-row>";for(var n=0;n<a;n++)o+=e&&!n?"<td colspan='"+e+"'><span class='k-skeleton k-skeleton-text k-skeleton-pulse k-table-td'></span></td>":"<td><span class='k-skeleton k-skeleton-text k-skeleton-pulse k-table-td'></span></td>";o+="</tr>"}return o},_progress:function(e){var t,o=this.element,l=this.options.scrollable&&this.options.scrollable.endless,a=this.options.loaderType;this.options.scrollable&&this.options.scrollable.virtual?o=this.content:this._editContainer&&"popup"===this._editMode()?o=this._editContainer:this.lockedContent||l?o=this.wrapper:this.element.is("table")?o=this.element.parent():this.content&&this.content.length&&(o=this.content),"skeleton"!=a||this._isExport?this._isExport?this._loaderContainer(e,{message:this.options.messages.loader.exporting}):l&&e?r.ui.progress(o,e,{height:this.content.height(),top:this.content.parent()[0].offsetTop,opacity:!0}):r.ui.progress(o,e):e?(t=this._buildSkeleton(),o.find("tbody").empty().append(t)):o.find(".k-skeleton").closest("tbody").empty()},_resize:function(e,t){this._syncLockedContentHeight(),this._syncLockedHeaderHeight(),this.content&&(this._setContentWidth(),this._setContentHeight()),this.lockedTable&&this._syncLockedScroll(),this.virtualScrollable&&(t||this._rowHeight)&&(t&&(this._rowHeight=null),this.virtualScrollable.repaintScrollbar()),this.pager&&this.pager.element&&this.pager.resize(t),this._anyStickyColumns()&&this._updateStickyColumns(!1)},_isActiveInTable:function(){var t=n();return!!t&&(this.table[0]===t||e.contains(this.table[0],t)||this._isLocked()&&(this.lockedTable[0]===t||e.contains(this.lockedTable[0],t)))},refresh:function(o){var l,a,i,n=this,s=n.dataSource.view(),d=n.options.navigatable,c=n.virtualScroll||{},u=e(n.current()),p=!1,h=n._groups(),f=h+Qr(kr(n.columns)).length,g=m(n.columns,(function(e){return e.columns!==t})).length>0,b=0;o&&"itemchange"===o.action&&(n.editable||n.options.scrollable.endless)&&("popup"!=this._editMode()||"popup"===this._editMode()&&!n._editableIsClosing)||(n._shouldMapHights&&(n._mapCachedRowsHeight("get","uid"),n._shouldMapHights=!1),c.columns&&n._templates(),o&&"remove"===o.action&&n.editable&&n.editable.options.model&&_(n.editable.options.model,o.items)>-1&&n.editable.options.model.unbind(J,n._modelChangeHandler),o=o||{},n.trigger("dataBinding",{action:o.action||"rebind",index:o.index,items:o.items})||(o.action===de&&n._isVirtualEditable()&&(n._destroyEditable(),n._clearEditableState()),n._endlessFetchInProgress||(d&&(n._isActiveInTable()||n._editContainer&&n._editContainer.data("kendoWindow"))&&(l=(p=u.is("th"))?u.parent().children(":not(.k-group-cell)").index(u[0]):Math.max(n.cellIndex(u),0),p&&g&&(b=u.parent().index())),n._destroyEditable()),n.options.scrollable&&n.options.scrollable.endless&&!n._pdfInitialized?(clearTimeout(n._progressTimeOut),n._progressTimeOut=setTimeout((function(){n._endlessFetchInProgress||n._progress(!1)}),250)):n._isExport||n._progress(!1),u.length&&(n._currentRowIndex=u.parent().index()),n._hideResizeHandle(),n._data=[],n.columns.length||(n._autoColumns(n._firstDataItem(s[0],h)),f=h+n.columns.length),n._group=h>0||n._group,n._group&&(n._templates(),n._updateCols(),n._updateLockedCols(),n._virtualColScroll||n._updateHeader(h),n._group=h>0,n._groupRows=fo(s)),n.content&&(a=r.scrollLeft(n.content)),"skeleton"!==n.options.loaderType&&o&&"sync"===o.action&&o.partialUpdate&&o.changedItems&&o.changedItems.length?(n._data=n.dataSource.flatView(),o.changedItems.forEach((e=>{n._displayRow(n.tbody.find("["+r.attr("uid")+"="+e.uid+"]"))})),n._progress(!1),n._destroyEditable()):(i=n._skipRerenderItemsCount,n._renderContent(s,f,h),n.options.scrollable&&n.options.scrollable.endless&&this.lockedContent&&(n._skipRerenderItemsCount=i),n._renderLockedContent(s,f,h)),n._virtualColScroll||(n._footer(),n._renderNoRecordsContent(),n._togglePagerVisibility(),n._setContentHeight(),n._setContentWidth(n.content&&a)),n.lockedTable&&(c.rows?n.content.find(">.k-virtual-scrollable-wrap").trigger("scroll"):n.touchScroller?n.touchScroller.movable.trigger("change"):(n.wrapper.one("scroll",(function(e){e.stopPropagation()})),n.content.trigger("scroll"))),n._endlessFetchInProgress||n._rowDropping||n._restoreCurrent(l,p,b),n.touchScroller&&n.touchScroller.contentResized(),n.selectable&&n.selectable.resetTouchEvents(),n._checkBoxSelection&&n._toggleHeaderCheckState(!1),n.options.persistSelection&&(n.selectable&&!r.ui.Selectable.parseOptions(n.options.selectable).cell||n._checkBoxSelection)&&(n.items().length||n.dataSource._isGroupPaged())&&n._restoreSelection(),n.options.persistSelection||(n._selectedIds={}),n._hasReorderableRows()&&(n._draggableRows(),n._reorderableRows()),n.options.selectable&&n.options.selectable.cellAggregates&&n._calculateAggregatesForSelected(),n._aria(),n.trigger(te)))},_getSchemaIdField:function(){const e=this.dataSource.options.schema.model;return v(e)?e.fn.idField:e&&e.id},_restoreCurrent:function(r,o,l){if(!(r===t||r<0)){if(this._removeCurrent(),o)this._setCurrent(this.thead.find(`tr:eq(${l}) th:not(.k-group-cell)`).eq(r),!1,this._hasVirtualColumns());else{var a=0,i=this.virtualScroll||{};this._rowVirtualIndex?a=i.rows?this.virtualScrollable.position(this._rowVirtualIndex):this._rowVirtualIndex:this._currentRowIndex?a=this._currentRowIndex:r=0;var n,s=e();this.lockedTable&&(s=this.lockedTable.find(">tbody>tr").eq(a)),s=s.add(this.tbody.children().eq(a)),this._hasVirtualColumns()&&(n=parseInt(s.find("td").first().attr("colspan"),10),r=this._virtualCellIndex-(n>1?n-1:0));var d=s.find(">td:not(.k-group-cell):not(.k-hierarchy-cell)").eq(r);if(!d.length||r<0)return;this._hasVirtualColumns()?this._setCurrent(d,!0,!0):this._setCurrent(d)}this._current&&wo(this.table,!0)}},_restoreSelection:function(){var e,t=this,r=t.items(),o=t._getSchemaIdField();e=m(r,(function(e){var r=t.dataItem(e)[o];if(t._selectedIds[r])return e})),t.select(e)},_getSelectedRowUids:function(){var t,o,l=this.select(),a=[];for(let i=0;i<l.length;i++)t=e(l[i]),r.ui.Selectable.parseOptions(this.options.selectable).cell&&(t=t.closest(mt)),o=t.data("uid"),-1===a.indexOf(o)&&a.push(o);return a},_getSelectedColumnFields:function(){var t,o,l=this,a=l.select(),i=Qr(l.columns).filter((e=>!e.selectable&&!e.draggable&!e.command)),n=[];if(!r.ui.Selectable.parseOptions(l.options.selectable).cell)return i.map((e=>e.field));for(let r=0;r<a.length;r++)o=e(a[r]).index(),t=l.thead.find("th:eq("+o+")").data("field"),-1===n.indexOf(t)&&n.push(t);return n},_cleanupDetailItems:function(){this._hasDetails()&&this.tbody.find(".k-detail-cell").empty()},_renderContent:function(e,t,o){var l,a,i,n,s,d=this,c="",u=null!=d.lockedContent,p=d.options.scrollable,h={rowTemplate:d.rowTemplate,altRowTemplate:d.altRowTemplate,groupFooterTemplate:d.groupFooterTemplate,groupHeaderColumnTemplate:d.groupHeaderColumnTemplate};if(p&&p.endless&&!d.dataSource.options.endless&&(d._skipRerenderItemsCount=0,d.content&&(d.content[0].scrollTop=0)),i=d._skipRerenderItemsCount>0,t=u?t-Qr($r(d.columns)).length:t,o>0)for(t=u?t-o:t,d.detailTemplate&&t++,d.groupFooterTemplate&&(d._groupAggregatesDefaultObject=d.dataSource.aggregates()),d.options.scrollable.endless&&(s=d.dataSource.flatView().length),l=0,a=e.length;l<a;l++)d._skippedGroups||(d._skippedGroups=[]),n=s&&l===e.length-1&&s!==d.dataSource.total(),c+=d._groupRowHtml(e[l],t,0,u?Io:Eo,h,u,n,!1);else c+=d._rowsHtml(e,h);i?(d.tbody.append(c),r.applyStylesFromKendoAttributes(d.tbody,["display","left","right"]),clearTimeout(d._endlessFetchTimeOut),d._endlessFetchTimeOut=setTimeout((function(){d._groupToCollapse&&(d.collapseGroup(d._groupToCollapse),d._groupToCollapse=null)})),d._endlessFetchInProgress=null):d.tbody=ao(d.tbody,d.table,c,this.options.size)},_renderGroupRows:function(){var t,o,l,a,i,n,s,d,c,u,p,h,g,b,_,k,v,w=this,C=w._groupRows,y=w.wrapper.find(x+De),S=w._groups(),T=null!=w.lockedContent;y.each((function(y,x){b=e(x),u=b.closest("table").parent(),p=u.is(".k-grid-content-locked"),o=Qr(kr(p?Nr(w.columns):jr(w.columns))),_=b.find(".k-group-cell").length,T?(t=p?Eo:Io,l=p?o.length+S-_:o.length):(t=Eo,l=o.length+S-_),a=y>=C.length?C[y-C.length]:C[y],i=a.field,n=m(Zr(w.columns),(function(e){return e.field==i}))[0]||{},v=!(n.groupHeaderTemplate||!kr(w.columns)[0].groupHeaderColumnTemplate)&&kr(w.columns)[0],s=n.groupHeaderTemplate?n.groupHeaderTemplate:kr(w.columns)[0].groupHeaderColumnTemplate,d=(n.title&&(w.options.encodeTitles?Ao(n.title,!0):n.title)||Ao(i,!0))+": "+uo(a.value,n.format,n.values,n.encoded),c=w._groupData(a,!1,v),k=p?w.lockedGroupHeaderColumnTemplate:w.groupHeaderColumnTemplate,s&&(d=typeof s===tt?s(c):r.template(s)(c)),h=b.prev().length?b.prev():b.parent(),g=e(k?k(f({},c,{groupCells:_,colspan:S-_,text:d})):t(l,_,d,null,null,null,Gt)),r.applyStylesFromKendoAttributes(g,["display","left","right"]),h.is("tbody")?h.prepend(g):h.after(g),b.remove()}))},_renderLockedContent:function(e,t,r){var o,l,a,i,n="",s=null,d={rowTemplate:this.lockedRowTemplate,altRowTemplate:this.lockedAltRowTemplate,groupFooterTemplate:this.lockedGroupFooterTemplate,groupHeaderColumnTemplate:this.lockedGroupHeaderColumnTemplate};if(this.lockedContent){var c=this.lockedTable;if(s=this._skipRerenderItemsCount>0,r>0)for(t-=kr(Zr(jr(this.columns))).length,this.options.scrollable.endless&&(i=this.dataSource.flatView().length),o=0,l=e.length;o<l;o++)a=i&&o===e.length-1&&i!==this.dataSource.total(),n+=this._groupRowHtml(e[o],t,0,Eo,d,!1,a,!0);else n=this._rowsHtml(e,d);s?c.children("tbody").append(n):ao(c.children("tbody"),c,n,this.options.size),this._syncLockedContentHeight()}},_togglePagerVisibility:function(){!1===this.options.pageable.alwaysVisible&&this.wrapper.find(".k-grid-pager").toggle(this.dataSource.total()>=this.dataSource.pageSize())},_adjustRowsHeight:function(e,t){var r,o=e[0].rows,l=o.length,a=t[0].rows,i=e.add(t),n=i.length,s=[];for(r=0;r<l&&a[r];r++)o[r].style.height&&(o[r].style.height=a[r].style.height="");for(r=0;r<l&&a[r];r++){var d=o[r].offsetHeight,c=a[r].offsetHeight,u=0;d>c?u=d:d<c&&(u=c),s.push(u)}for(r=0;r<n;r++)i[r].style.display=Rt;for(r=0;r<l;r++)s[r]&&(o[r].style.height=a[r].style.height=s[r]+1+gt);for(r=0;r<n;r++)i[r].style.display=""}});function ko(e,t){var r,o=e.offsetHeight,l=t.offsetHeight;o>l?r=o+gt:o<l&&(r=l+gt),r&&(e.style.height=t.style.height=r)}function vo(e,t){var r,o,l;if(typeof e===rt&&e===t)return e;if(h(e)&&e.name===t)return e;if(b(e))for(r=0,o=e.length;r<o;r++)if(typeof(l=e[r])===rt&&l===t||l.name===t)return l;return null}function wo(t,o){if(t&&0!==t.length)if(!0===o){t=e(t);var l=r.scrollLeft(t.parent());r.focusElement(t),r.scrollLeft(t.parent(),l)}else e(t).one("focusin",(function(e){e.preventDefault()})).trigger("focus")}function Co(t,r){return!!e.grep(t,(function(e){return e.field===r})).length}function yo(e,t){return!(!e.field||e.selectable)&&(!(t.editable&&!t.editable(e.field))&&!(e.editable&&!e.editable(t)))}function So(t){return e(t).is(":button,a,:input,a>.k-icon,a>.k-svg-icon,textarea,span.k-select,span.k-icon,span.k-svg-icon,span.k-svg-icon>svg,span.k-svg-icon>svg>path,span.k-link,label.k-checkbox-label,.k-input,.k-multiselect-wrap,.k-picker-wrap,.k-picker-wrap>.k-selected-color,.k-tool-icon,.k-dropdownlist,.k-switch-thumb,.k-switch-track,.k-switch-label-off,.k-switch-label-on")}function xo(t){var o=this,l=e(t.currentTarget),a=l.is("th"),i=this.table.add(this.lockedTable),n=this.thead.parent().add(e(">table",this.lockedHeader)),s=So(t.target),d=e(t.target).is(".k-checkbox"),c=e(t.target),u=l.closest("table")[0];s&&l.find(r.roleSelector("filtercell")).length?this._setCurrent(l):u!==i[0]&&u!==i[1]&&u!==n[0]&&u!==n[1]||c.is(q+","+L)||(this.options.navigatable&&this._setCurrent(l,!1,d),!a&&s||setTimeout((function(){var t=e(r._activeElement());(t.hasClass("k-widget")||t.hasClass("k-dropdownlist")||t.is(".k-upload .k-upload-button"))&&!t.hasClass("k-grid-pager")||!o.table||!t.is(ke)&&So(r._activeElement())&&e.contains(u,r._activeElement())||wo(o.table[0],!0)})),a&&!r.support.touch&&t.preventDefault())}function To(e,t){if(!t)return 0;var o=0;return r.support.browser.webkit&&(o=e.width()),o}function Ho(t,r){var o,l;return!!t&&!!((r=e(r))[0]&&y(t[0],r[0])&&(o=r.offset().top-t.offset().top,l=r.outerHeight()/2,(o>=0||S.abs(o)<=l)&&S.floor(o+l)<=t.height()))}function Ro(t){return({colspan:o,text:l,expanded:a,isRtl:i})=>{let n="caret-alt-"+(i?"left":"right");return`<td class="k-table-td" colspan="${o+t}"><p class="k-reset">`+r.ui.icon(e(`<a href="\\#" tabindex="-1" ${_t}="${a?pt:ht}"></a>`),{icon:a?"caret-alt-down":n})+l+`</p></td>${new Array(o+t).join("<td hidden group-header-spanned-hidden></td>")}`}}function Eo(t,o,l,a,i,n,s){return"<tr "+(n?'data-group-uid="'+i+'"':"")+'class="k-table-group-row k-grouping-row k-table-row">'+rr(o)+'<td class="k-table-td" colspan="'+t+'" aria-expanded="'+!!a+'"><p class="k-reset">'+r.ui.icon(e('<a href="#" tabindex="-1" '+_t+'="'+(a?pt:ht)+'"></a>'),{icon:a?"caret-alt-down":"caret-alt-"+(s?"left":"right")})+l+`</p></td>${new Array(t).join("<td hidden group-header-spanned-hidden></td>")}</tr>`}function Io(e){return'<tr class="k-table-group-row k-grouping-row k-table-row"><td class="k-table-td" colspan="'+e+'" aria-expanded="true">'+`<p class="k-reset">&nbsp;</p></td>${new Array(e).join("<td hidden group-header-spanned-hidden></td>")}</tr>`}function Ao(e,t){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,(function(e){return t?"\\"+e:"&quot;"})).replace(/'/g,"&#39;")}function zo(e,t){return this.dataSource.indexOf(this.dataSource.getByUid(e.uid))-this.dataSource.indexOf(this.dataSource.getByUid(t.uid))}function Do(e){return!(!1===e.exportable||e.exportable&&!1===e.exportable.excel)}r.ExcelMixin&&r.ExcelMixin.extend(_o.prototype),r.PDFMixin&&(r.PDFMixin.extend(_o.prototype),_o.prototype._drawPDF_autoPageBreak=function(o){var l,a=this,i=new e.Deferred,n=a.dataSource,s=a.options.pdf.allPages,d=a.wrapper.find("> table > tbody, .k-grid-content > table > tbody").first(),c=e("<div>").css({position:"absolute",left:-1e4,top:-1e4});a.toggleUnexportableColumns(a.columns),(l=a.wrapper.clone().css({height:Ze,width:Ze}).appendTo(c)).find(".k-grid-content").css({height:Ze,width:Ze,overflow:"visible"}),l.find("> table, .k-grid-header table, .k-grid-content > table, .k-grid-footer table").css({height:Ze,width:"100%",overflow:"visible"}),l.find(".k-grid-pager, .k-grid-toolbar, .k-grouping-header").remove(),l.find(".k-grid-header, .k-grid-footer, .k-auto-scrollable").css({paddingRight:0});var u=l.find("> table > tbody, .k-grid-content > table > tbody").first().empty(),p=n.page();function h(){c.appendTo(document.body);var t=e.extend({},a.options.pdf,{_destructive:!0,progress:function(e){o.notify({page:e.page,pageNumber:e.pageNum,progress:.5+e.pageNum/e.totalPages/2,totalPages:e.totalPages})}});r.drawing.drawDOM(l,t).always((function(){c.remove()})).then((function(e){i.resolve(e),a.toggleUnexportableColumns(a.columns,!0)})).fail((function(e){i.reject(e)}))}function f(){var e=n.page(),r=s?n.totalPages():1;u.append(d.children("tr:not(.k-detail-row)")),e<r?n.page(e+1):(n.unbind("change",f),s&&p!==t?(n.one("change",h),n.page(p)):(a.refresh(),h()))}return s?(n.bind("change",f),n.page(1)):f(),i.promise()},_o.prototype.toggleUnexportableColumns=function(e,t){for(var r,o,l,a,i=e.length,n=0;n<i;n++)o=(r=e[n]).exportable,t?r._toggledDuringExport?(r._toggledDuringExport=!1,r.hidden?this.showColumn(r):this.hideColumn(r)):r.columns&&this.toggleUnexportableColumns(r.columns,t):("object"==typeof r.exportable&&(o=r.exportable.pdf),l=!r.hidden&&!1!==o,a=r.hidden&&!0===o,(o=l||a)||r.hidden?o&&r.hidden?(r._toggledDuringExport=!0,this.showColumn(r)):o&&r.columns&&this.toggleUnexportableColumns(r.columns):(r._toggledDuringExport=!0,this.hideColumn(r)))},_o.prototype._drawPDF=function(o){var l=this;if(l.options.pdf.paperSize&&l.options.pdf.paperSize!=Ze)return l._drawPDF_autoPageBreak(o);var a=new e.Deferred,i=l.dataSource,n=l.options.pdf.allPages,s=new r.drawing.Group,d=i.page();function c(){l.toggleUnexportableColumns(l.columns),l._drawPDFShadow({width:l.wrapper.width()},{avoidLinks:l.options.pdf.avoidLinks}).done((function(e){var r=i.page(),u=n?i.totalPages():1,p={page:e,pageNumber:r,progress:r/u,totalPages:u};l.toggleUnexportableColumns(l.columns,!0),o.notify(p),s.append(p.page),r<u?i.page(r+1):n&&d!==t?(i.unbind("change",c),i.one("change",(function(){a.resolve(s)})),i.page(d)):a.resolve(s)})).fail((function(e){a.reject(e)}))}return n?(i.bind("change",c),i.page(1)):c(),a.promise()}),o.plugin(_o),o.plugin(er),f(r.ui.grid,{defaultBodyContextMenu:Jt,defaultHeadContextMenu:Xt,defaultGroupsContextMenu:Zt})}(window.kendo.jQuery);var E=kendo;e.__meta__={id:"grid",name:"Grid",category:"web",description:"The Grid widget displays tabular data and offers rich support for interacting with data,including paging, sorting, grouping, and selection.",depends:["data","columnsorter","sortable","toolbar","html.button","icons","menu","loader","html.loadercontainer","loaderContainer.chunk"],features:[{id:"grid-editing",name:"Editing",description:"Support for record editing",depends:["editable","window","textbox","form"]},{id:"grid-filtering",name:"Filtering",description:"Support for record filtering",depends:["filtermenu"]},{id:"grid-columnmenu",name:"Column menu",description:"Support for header column menu",depends:["columnmenu"]},{id:"grid-grouping",name:"Grouping",description:"Support for grid grouping",depends:["groupable"]},{id:"grid-filtercell",name:"Row filter",description:"Support for grid header filtering",depends:["filtercell"]},{id:"grid-paging",name:"Paging",description:"Support for grid paging",depends:["pager"]},{id:"grid-selection",name:"Selection",description:"Support for row selection",depends:["selectable"]},{id:"grid-column-reorder",name:"Column reordering",description:"Support for column reordering",depends:["reorderable"]},{id:"grid-column-resize",name:"Column resizing",description:"Support for column resizing",depends:["resizable"]},{id:"grid-mobile",name:"Grid adaptive rendering",description:"Support for adaptive rendering",depends:["dialog","pane","switch"]},{id:"grid-excel-export",name:"Excel export",description:"Export grid data as Excel spreadsheet",depends:["excel"]},{id:"grid-pdf-export",name:"PDF export",description:"Export grid data as PDF",depends:["pdf","drawing"]}]},e.default=E,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=kendo.grid.min.js.map
